/*! For license information please see 0.ae3bd92f.chunk.js.LICENSE.txt */
(this.webpackJsonpcustom_filter=this.webpackJsonpcustom_filter||[]).push([[0],{161:function(t,e,n){"use strict";n.r(e),n.d(e,"ArcLayer",(function(){return r.a})),n.d(e,"BitmapLayer",(function(){return T})),n.d(e,"IconLayer",(function(){return L.a})),n.d(e,"LineLayer",(function(){return w})),n.d(e,"PointCloudLayer",(function(){return P.a})),n.d(e,"ScatterplotLayer",(function(){return R.a})),n.d(e,"ColumnLayer",(function(){return M.a})),n.d(e,"GridCellLayer",(function(){return x.a})),n.d(e,"PathLayer",(function(){return N.a})),n.d(e,"PolygonLayer",(function(){return D.a})),n.d(e,"GeoJsonLayer",(function(){return B.a})),n.d(e,"TextLayer",(function(){return F.a})),n.d(e,"SolidPolygonLayer",(function(){return j.a})),n.d(e,"_MultiIconLayer",(function(){return k.a})),n.d(e,"_TextBackgroundLayer",(function(){return G.a}));var r=n(741),i=n(12),o=n(5),a=n(7),s=n(6),u=n(21),c=n(20),l=n(14),f=n(15),p=n(31),h=n(491),d=n(490),y=n(275),g=n(295),m=n(245),v=n(40),_=n(22),b=new Uint16Array([0,2,1,0,3,2]),E=new Float32Array([0,1,0,0,1,0,1,1]);function A(t,e){if(!e)return function(t){for(var e=new Float64Array(12),n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:b,texCoords:E}}(t);for(var n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),u=new Float32Array(i*o*2),c=new Float64Array(i*o*3),l=0,f=0,p=0;p<i;p++)for(var h=p/(i-1),d=0;d<o;d++){var y=d/(o-1),g=C(t,h,y);c[3*l+0]=g[0],c[3*l+1]=g[1],c[3*l+2]=g[2]||0,u[2*l+0]=h,u[2*l+1]=1-y,p>0&&d>0&&(s[f++]=l-o,s[f++]=l-o-1,s[f++]=l-1,s[f++]=l-o,s[f++]=l-1,s[f++]=l),l++}return{vertexCount:a,positions:c,indices:s,texCoords:u}}function C(t,e,n){return Object(_.n)(Object(_.n)(t[0],t[1],n),Object(_.n)(t[3],t[2],n),e)}var S="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),O={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:p.a.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}},T=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getShaders",value:function(){return Object(u.a)(Object(c.a)(n.prototype),"getShaders",this).call(this,{vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:S,modules:[h.a,d.a]})}},{key:"initializeState",value:function(){var t=this,e=this.getAttributeManager();e.remove(["instancePickingColors"]);var n=!0;e.add({indices:{size:1,isIndexed:!0,update:function(e){return e.value=t.state.mesh.indices},noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:function(e){return e.value=t.state.mesh.positions},noAlloc:n},texCoords:{size:2,update:function(e){return e.value=t.state.mesh.texCoords},noAlloc:n}})}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps;if(t.changeFlags.extensionsChanged){var r,i=this.context.gl;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}var a=this.getAttributeManager();if(e.bounds!==n.bounds){var s=this.state.mesh,u=this._createMesh();for(var c in this.state.model.setVertexCount(u.vertexCount),u)s&&s[c]!==u[c]&&a.invalidate(c);this.setState(Object(o.a)({mesh:u},this._getCoordinateUniforms()))}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}},{key:"getPickingInfo",value:function(t){var e=t.info,n=this.props.image;if(!e.color||!n)return e.bitmap=null,e;var r=n.width,o=n.height;e.index=0;var a=function(t){var e=Object(i.a)(t,3),n=e[0],r=e[1],o=e[2];return[(n+(15&o)/16)/256,(r+(240&o)/256)/256]}(e.color),s=[Math.floor(a[0]*r),Math.floor(a[1]*o)];return e.bitmap={size:{width:r,height:o},uv:a,pixel:s},e}},{key:"disablePickingIndex",value:function(){this.setState({disablePicking:!0})}},{key:"restorePickingColors",value:function(){this.setState({disablePicking:!1})}},{key:"_updateAutoHighlight",value:function(t){Object(u.a)(Object(c.a)(n.prototype),"_updateAutoHighlight",this).call(this,Object(o.a)(Object(o.a)({},t),{},{color:this.encodePickingColor(0)}))}},{key:"_createMesh",value:function(){var t=this.props.bounds,e=t;return Number.isFinite(t[0])&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),A(e,this.context.viewport.resolution)}},{key:"_getModel",value:function(t){return t?new g.a(t,Object(o.a)(Object(o.a)({},this.getShaders()),{},{id:this.props.id,geometry:new m.a({drawMode:4,vertexCount:6}),isInstanced:!1})):null}},{key:"draw",value:function(t){var e=t.uniforms,n=t.moduleParameters,r=this.state,i=r.model,o=r.coordinateConversion,a=r.bounds,s=r.disablePicking,u=this.props,c=u.image,l=u.desaturate,f=u.transparentColor,p=u.tintColor;n.pickingActive&&s||c&&i&&i.setUniforms(e).setUniforms({bitmapTexture:c,desaturate:l,transparentColor:f.map((function(t){return t/255})),tintColor:p.slice(0,3).map((function(t){return t/255})),coordinateConversion:o,bounds:a}).draw()}},{key:"_getCoordinateUniforms",value:function(){var t=p.a.LNGLAT,e=p.a.CARTESIAN,n=p.a.DEFAULT,r=this.props._imageCoordinateSystem;if(r!==n){var i=this.props.bounds;if(!Number.isFinite(i[0]))throw new Error("_imageCoordinateSystem only supports rectangular bounds");var o=this.context.viewport.resolution?t:e;if((r=r===t?t:e)===t&&o===e)return{coordinateConversion:-1,bounds:i};if(r===e&&o===t){var a=Object(v.o)([i[0],i[1]]),s=Object(v.o)([i[2],i[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],s[0],s[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}]),n}(y.a);T.layerName="BitmapLayer",T.defaultProps=O;var L=n(266),I={getSourcePosition:{type:"accessor",value:function(t){return t.sourcePosition}},getTargetPosition:{type:"accessor",value:function(t){return t.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},w=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getShaders",value:function(){return Object(u.a)(Object(c.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[h.a,d.a]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(u.a)(Object(c.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o,a=this.context.gl;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.widthUnits,i=n.widthScale,o=n.widthMinPixels,a=n.widthMaxPixels,s=n.wrapLongitude;this.state.model.setUniforms(e).setUniforms({widthUnits:p.e[r],widthScale:i,widthMinPixels:o,widthMaxPixels:a,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}},{key:"_getModel",value:function(t){return new g.a(t,Object(o.a)(Object(o.a)({},this.getShaders()),{},{id:this.props.id,geometry:new m.a({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0}))}}]),n}(y.a);w.layerName="LineLayer",w.defaultProps=I;var P=n(742),R=n(380),M=n(351),x=n(609),N=n(265),D=n(495),B=n(536),F=n(379),j=n(264),k=n(382),G=n(381)},307:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(269);function i(t,e){return Object(r.a)(t>=0),Object(r.a)(e>0),t+(e-1)&~(e-1)}function o(t,e,n){var r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{var o=t.byteOffset,a=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,o,a)}return e.set(r,n),n+i(r.byteLength,4)}},371:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return i(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var n=0;return i(t,n,e)}return""}function i(t,e,n){if(t.byteLength<=e+n)return"";for(var r=new DataView(t),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}n.d(e,"a",(function(){return r}))},372:function(t,e,n){"use strict";n.r(e),n.d(e,"GreatCircleLayer",(function(){return s})),n.d(e,"S2Layer",(function(){return O})),n.d(e,"QuadkeyLayer",(function(){return I})),n.d(e,"TileLayer",(function(){return w.a})),n.d(e,"TripsLayer",(function(){return M})),n.d(e,"H3ClusterLayer",(function(){return B})),n.d(e,"H3HexagonLayer",(function(){return F.a})),n.d(e,"Tile3DLayer",(function(){return Zr})),n.d(e,"TerrainLayer",(function(){return Jr})),n.d(e,"MVTLayer",(function(){return Wr.a})),n.d(e,"_getURLFromTemplate",(function(){return Vr.b}));var r=n(6),i=n(7),o=n(14),a=n(15),s=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n)}(n(741).a);s.layerName="GreatCircleLayer",s.defaultProps={getHeight:{type:"accessor",value:0},greatCircle:!0};var u=n(5),c=n(235),l=n(495),f=Object(u.a)({},l.a.defaultProps),p=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"indexToBounds",value:function(){return null}},{key:"renderLayers",value:function(){var t=this.props,e=t.elevationScale,n=t.extruded,r=t.wireframe,i=t.filled,o=t.stroked,a=t.lineWidthUnits,s=t.lineWidthScale,u=t.lineWidthMinPixels,c=t.lineWidthMaxPixels,f=t.lineJointRounded,p=t.lineMiterLimit,h=t.lineDashJustified,d=t.getElevation,y=t.getFillColor,g=t.getLineColor,m=t.getLineWidth,v=this.props,_=v.updateTriggers,b=v.material,E=v.transitions;return new(this.getSubLayerClass("cell",l.a))({filled:i,wireframe:r,extruded:n,elevationScale:e,stroked:o,lineWidthUnits:a,lineWidthScale:s,lineWidthMinPixels:u,lineWidthMaxPixels:c,lineJointRounded:f,lineMiterLimit:p,lineDashJustified:h,material:b,transitions:E,getElevation:d,getFillColor:y,getLineColor:g,getLineWidth:m},this.getSubLayerProps({id:"cell",updateTriggers:{getElevation:_.getElevation,getFillColor:_.getFillColor,getLineColor:_.getLineColor,getLineWidth:_.getLineWidth}}),this.indexToBounds())}}]),n}(c.a);p.layerName="GeoCellLayer",p.defaultProps=f;var h=n(12),d=n(732),y=n.n(d),g=180/Math.PI;function m(t,e,n){var r=1<<e;return[(t[0]+n[0])/r,(t[1]+n[1])/r]}function v(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function _(t){return[v(t[0]),v(t[1])]}function b(t,e){var n=Object(h.a)(e,2),r=n[0],i=n[1];switch(t){case 0:return[1,r,i];case 1:return[-r,1,i];case 2:return[-r,-i,1];case 3:return[-1,-i,-r];case 4:return[i,-1,-r];case 5:return[i,r,-1];default:throw new Error("Invalid face")}}function E(t){var e=Object(h.a)(t,3),n=e[0],r=e[1],i=e[2],o=Math.atan2(i,Math.sqrt(n*n+r*r));return[Math.atan2(r,n)*g,o*g]}function A(t,e,n,r){if(0===r){1===n&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);var i=e[0];e[0]=e[1],e[1]=i}}function C(t){if("string"===typeof t){if(t.indexOf("/")>0)return t;t=function(t){var e=t.padEnd(16,"0");return y.a.fromString(e,16)}(t)}return function(t){for(var e=y.a.fromString(t,!0,10).toString(2);e.length<64;)e="0"+e;for(var n=e.lastIndexOf("1"),r=e.substring(0,3),i=e.substring(3,n),o=i.length/2,a=y.a.fromString(r,!0,2).toString(10),s=y.a.fromString(i,!0,2).toString(4);s.length<o;)s="0"+s;return"".concat(a,"/").concat(s)}(t.toString())}function S(t){return function(t){for(var e=t.face,n=t.ij,r=t.level,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],o=Math.max(1,Math.ceil(100*Math.pow(2,-r))),a=new Float64Array(4*o*2+2),s=0,u=0,c=0;c<4;c++)for(var l=i[c].slice(0),f=i[c+1],p=(f[0]-l[0])/o,h=(f[1]-l[1])/o,d=0;d<o;d++){l[0]+=p,l[1]+=h;var y=E(b(e,_(m(n,r,l))));Math.abs(y[1])>89.999&&(y[0]=u);var g=y[0]-u;y[0]+=g>180?-360:g<-180?360:0,a[s++]=y[0],a[s++]=y[1],u=y[0]}return a[s++]=a[0],a[s++]=a[1],a}(function(t){for(var e,n=t.split("/"),r=parseInt(n[0],10),i=n[1],o=i.length,a=[0,0],s=o-1;s>=0;s--){e=o-s;var u=i[s],c=0,l=0;"1"===u?l=1:"2"===u?(c=1,l=1):"3"===u&&(c=1);var f=Math.pow(2,e-1);A(f,a,c,l),a[0]+=f*c,a[1]+=f*l}if(r%2===1){var p=a[0];a[0]=a[1],a[1]=p}return{face:r,ij:a,level:e}}(C(t)))}var O=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"indexToBounds",value:function(){var t=this.props,e=t.data,n=t.getS2Token;return{data:e,_normalize:!1,positionFormat:"XY",getPolygon:function(t,e){return S(n(t,e))}}}}]),n}(p);O.layerName="S2Layer",O.defaultProps={getS2Token:{type:"accessor",value:function(t){return t.token}}};var T=n(40);function L(t){var e=function(t){for(var e=0,n=0,r=1<<t.length,i=r/512,o=0;o<t.length;o++){r>>=1;var a=parseInt(t[o]);a%2&&(e|=r),a>1&&(n|=r)}return[[e/i,512-n/i],[(e+.99)/i,512-(n+.99)/i]]}(t),n=Object(h.a)(e,2),r=n[0],i=n[1],o=Object(T.s)(r),a=Object(h.a)(o,2),s=a[0],u=a[1],c=Object(T.s)(i),l=Object(h.a)(c,2),f=l[0],p=l[1];return[f,u,f,p,s,p,s,u,f,u]}var I=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"indexToBounds",value:function(){var t=this.props,e=t.data,n=t.getQuadkey;return{data:e,_normalize:!1,positionFormat:"XY",getPolygon:function(t,e){return L(n(t,e))}}}}]),n}(p);I.layerName="QuadkeyLayer",I.defaultProps={getQuadkey:{type:"accessor",value:function(t){return t.quadkey}}};var w=n(373),P=n(21),R=n(20),M=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"getShaders",value:function(){var t=Object(P.a)(Object(R.a)(n.prototype),"getShaders",this).call(this);return t.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform bool fadeTrail;\nuniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"if(fadeTrail) {\n  color.a *= 1.0 - (currentTime - vTime) / trailLength;\n}\n"},t}},{key:"initializeState",value:function(t){Object(P.a)(Object(R.a)(n.prototype),"initializeState",this).call(this,t),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(t){var e=this.props,r=e.fadeTrail,i=e.trailLength,o=e.currentTime;t.uniforms=Object(u.a)(Object(u.a)({},t.uniforms),{},{fadeTrail:r,trailLength:i,currentTime:o}),Object(P.a)(Object(R.a)(n.prototype),"draw",this).call(this,t)}}]),n}(n(265).a);M.layerName="TripsLayer",M.defaultProps={fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:null}};var x=n(10),N=n(117),D=n(93),B=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"updateState",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagons){var r,i=e.data,o=e.getHexagons,a=[],s=Object(D.a)(i),u=s.iterable,c=s.objectInfo,l=Object(x.a)(u);try{for(l.s();!(r=l.n()).done;){var f=r.value;c.index++;var p,h=o(f,c),d=Object(N.h3SetToMultiPolygon)(h,!0),y=Object(x.a)(d);try{for(y.s();!(p=y.n()).done;){var g=p.value;a.push(this.getSubLayerRow({polygon:g},f,c.index))}}catch(m){y.e(m)}finally{y.f()}}}catch(m){l.e(m)}finally{l.f()}this.setState({polygons:a})}}},{key:"indexToBounds",value:function(){return{data:this.state.polygons,getPolygon:function(t){return t.polygon}}}}]),n}(p);B.defaultProps={getHexagons:{type:"accessor",value:function(t){return t.hexagons}}},B.layerName="H3ClusterLayer";var F=n(610),j=n(28),k=n(16),G=n.n(k),U=n(245),Z=n(31),H=n(742),z=n(740),V=n(813),K=n(846),X=n(295),q=n(743);var J=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"getShaders",value:function(){var t=Object(P.a)(Object(R.a)(n.prototype),"getShaders",this).call(this);return t.modules.push(K.a),Object(u.a)(Object(u.a)({},t),{},{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nuniform bool u_pickFeatureIds;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec4 uvRegions;\nin vec3 featureIdsPickingColors;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvec2 applyUVRegion(vec2 uv) {\n  #ifdef HAS_UV_REGIONS\n    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;\n  #else\n    return uv;\n  #endif\n}\n\nvoid main(void) {\n  vec2 uv = applyUVRegion(texCoords);\n  geometry.uv = uv;\n\n  if (u_pickFeatureIds) {\n    geometry.pickingColor = featureIdsPickingColors;\n  } else {\n    geometry.pickingColor = instancePickingColors;\n  }\n\n  vTexCoord = uv;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale;\n  vec3 projectedPosition = project_position(positions);\n  position_commonspace = vec4(projectedPosition, 1.0);\n  gl_Position = project_common_position_to_clipspace(position_commonspace);\n\n  geometry.position = position_commonspace;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  geometry.normal = normals_commonspace;\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = uv;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  \n#ifdef MODULE_PBR\n\n  fragColor = vColor * pbr_filterColor(vec4(0));\n  geometry.uv = pbr_vUV;\n  fragColor.a *= opacity;\n\n#else\n\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n#endif\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"})}},{key:"initializeState",value:function(){var t=this.props.featureIds;Object(P.a)(Object(R.a)(n.prototype),"initializeState",this).call(this),t&&this.state.attributeManager.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;Object(P.a)(Object(R.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),e.pbrMaterial!==r.pbrMaterial&&this.updatePbrMaterialUniforms(e.pbrMaterial)}},{key:"draw",value:function(t){var e=this.props.featureIds;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,u_pickFeatureIds:Boolean(e)}),Object(P.a)(Object(R.a)(n.prototype),"draw",this).call(this,t))}},{key:"getModel",value:function(t){var e,n=this.props,r=n.id,i=n.pbrMaterial,o=this.parseMaterial(i,t),a=this.getShaders();return(e=t.attributes).COLOR_0||e.colors||(e.colors={constant:!0,value:new Float32Array([1,1,1])}),new X.a(this.context.gl,Object(u.a)(Object(u.a)({},this.getShaders()),{},{id:r,geometry:t,defines:Object(u.a)(Object(u.a)(Object(u.a)({},a.defines),null===o||void 0===o?void 0:o.defines),{},{HAS_UV_REGIONS:t.attributes.uvRegions}),parameters:null===o||void 0===o?void 0:o.parameters,isInstanced:!0}))}},{key:"updatePbrMaterialUniforms",value:function(t){var e=this.state.model;if(e){var n=this.props.mesh,r=this.parseMaterial(t,n);e.setUniforms(r.uniforms)}}},{key:"parseMaterial",value:function(t,e){var n=Boolean(t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorTexture);return new V.a(this.context.gl,{attributes:{NORMAL:e.attributes.normals,TEXCOORD_0:e.attributes.texCoords},material:Object(u.a)({unlit:n},t),pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}},{key:"calculateFeatureIdsPickingColors",value:function(t){for(var e=this.props.featureIds,n=new Uint8ClampedArray(e.length*t.size),r=[],i=0;i<e.length;i++)this.encodePickingColor(e[i],r),n[3*i]=r[0],n[3*i+1]=r[1],n[3*i+2]=r[2];t.value=n}}]),n}(q.a);J.layerName="_MeshLayer",J.defaultProps={pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}};var W=n(35),Y=n(657),Q=n(3),$=n(97),tt=n(88),et=n(78),nt=n(487),rt=n(22),it="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function ot(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function at(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){var t=function(){var t=new it(3);return it!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();var st=6378137,ut=6378137,ct=6356752.314245179,lt=(Math.max(st,ut,ct),function(t){return t}),ft=new tt.a;function pt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt;return Object(rt.m)(t)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in t?(e[0]=n(t.longitude),e[1]=n(t.latitude),e[2]=t.height):(e[0]=n(t.x),e[1]=n(t.y),e[2]=t.z),e}function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;return pt(t,e,rt.f._cartographicRadians?lt:rt.s)}function dt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt;return Object(rt.m)(e)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in e?(e.longitude=n(t[0]),e.latitude=n(t[1]),e.height=t[2]):(e.x=n(t[0]),e.y=n(t[1]),e.z=t[2]),e}function yt(t,e){return dt(t,e,rt.f._cartographicRadians?lt:rt.r)}var gt=new tt.a,mt=new tt.a,vt=new tt.a;var _t=new tt.a,bt={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Et={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},At={east:new tt.a,north:new tt.a,up:new tt.a,west:new tt.a,south:new tt.a,down:new tt.a},Ct=new tt.a,St=new tt.a,Ot=new tt.a;function Tt(t,e,n,r,i,o){var a,s,u,c=bt[e]&&bt[e][n];Object(et.a)(c&&(!r||r===c));var l=_t.copy(i);if(Object(rt.j)(l.x,0,1e-14)&&Object(rt.j)(l.y,0,1e-14)){var f=Math.sign(l.z);a=Ct.fromArray(Et[e]),"east"!==e&&"west"!==e&&a.scale(f),s=St.fromArray(Et[n]),"east"!==n&&"west"!==n&&s.scale(f),u=Ot.fromArray(Et[r]),"east"!==r&&"west"!==r&&u.scale(f)}else{var p=At.up,h=At.east,d=At.north;h.set(-l.y,l.x,0).normalize(),t.geodeticSurfaceNormal(l,p),d.copy(p).cross(h);var y=At.west,g=At.south;At.down.copy(p).scale(-1),y.copy(h).scale(-1),g.copy(d).scale(-1),a=At[e],s=At[n],u=At[r]}return o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=0,o[4]=s.x,o[5]=s.y,o[6]=s.z,o[7]=0,o[8]=u.x,o[9]=u.y,o[10]=u.z,o[11]=0,o[12]=l.x,o[13]=l.y,o[14]=l.z,o[15]=1,o}var Lt,It=new tt.a,wt=new tt.a,Pt=new tt.a,Rt=new tt.a,Mt=new tt.a,xt=new tt.a,Nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(i.a)(this,t),Object(et.a)(e>=0),Object(et.a)(n>=0),Object(et.a)(r>=0),this.radii=new tt.a(e,n,r),this.radiiSquared=new tt.a(e*e,n*n,r*r),this.radiiToTheFourth=new tt.a(e*e*e*e,n*n*n*n,r*r*r*r),this.oneOverRadii=new tt.a(0===e?0:1/e,0===n?0:1/n,0===r?0:1/r),this.oneOverRadiiSquared=new tt.a(0===e?0:1/(e*e),0===n?0:1/(n*n),0===r?0:1/(r*r)),this.minimumRadius=Math.min(e,n,r),this.maximumRadius=Math.max(e,n,r),this.centerToleranceSquared=nt.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(r.a)(t,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=wt,r=Pt,i=Object(h.a)(t,3),o=i[2];this.geodeticSurfaceNormalCartographic(t,n),r.copy(this.radiiSquared).scale(n);var a=Math.sqrt(n.dot(r));return r.scale(1/a),n.scale(o),r.add(n),r.to(e)}},{key:"cartesianToCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];xt.from(t);var n=this.scaleToGeodeticSurface(xt,Rt);if(n){var r=this.geodeticSurfaceNormal(n,wt),i=Mt;i.copy(xt).subtract(n);var o=Math.atan2(r.y,r.x),a=Math.asin(r.z),s=Math.sign(at(i,xt))*ot(i);return yt([o,a,s],e)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $.a;return Tt(this,"east","north","up",t,e)}},{key:"localFrameToFixedFrame",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new $.a;return Tt(this,t,e,n,r,i)}},{key:"geocentricSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return It.from(t).normalize().to(e)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=ht(t),r=n[0],i=n[1],o=Math.cos(i);return It.set(o*Math.cos(r),o*Math.sin(r),Math.sin(i)).normalize(),It.to(e)}},{key:"geodeticSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return It.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}},{key:"scaleToGeodeticSurface",value:function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tt.a,r=e.oneOverRadii,i=e.oneOverRadiiSquared,o=e.centerToleranceSquared;gt.from(t);var a=t.x,s=t.y,u=t.z,c=r.x,l=r.y,f=r.z,p=a*a*c*c,h=s*s*l*l,d=u*u*f*f,y=p+h+d,g=Math.sqrt(1/y);if(Number.isFinite(g)){var m=mt;if(m.copy(t).scale(g),y<o)return m.to(n);var v=i.x,_=i.y,b=i.z,E=vt;E.set(m.x*v*2,m.y*_*2,m.z*b*2);var A,C,S,O,T=(1-g)*t.len()/(.5*E.len()),L=0;do{var I=(A=1/(1+(T-=L)*v))*A,w=(C=1/(1+T*_))*C,P=(S=1/(1+T*b))*S;L=(O=p*I+h*w+d*P-1)/(-2*(p*(I*A)*v+h*(w*C)*_+d*(P*S)*b))}while(Math.abs(O)>nt.a.EPSILON12);return gt.scale([A,C,S]).to(n)}}(t,this,e)}},{key:"scaleToGeocentricSurface",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];Rt.from(t);var n=Rt.x,r=Rt.y,i=Rt.z,o=this.oneOverRadiiSquared,a=1/Math.sqrt(n*n*o.x+r*r*o.y+i*i*o.z);return Rt.multiplyScalar(a).to(e)}},{key:"transformPositionToScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Rt.from(t).scale(this.oneOverRadii).to(e)}},{key:"transformPositionFromScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Rt.from(t).scale(this.radii).to(e)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(et.a)(Object(rt.j)(this.radii.x,this.radii.y,nt.a.EPSILON15)),Object(et.a)(this.radii.z>0),Rt.from(t);var r=Rt.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(r)>=this.radii.z-e))return Rt.set(0,0,r).to(n)}}],[{key:"WGS84",get:function(){return Lt=Lt||new t(st,ut,ct)}}]),t}(),Dt=n(167),Bt=n(269),Ft=n(113),jt=n(496),kt=Object(r.a)((function t(e,n,r){Object(i.a)(this,t),Object(Q.a)(this,"item",void 0),Object(Q.a)(this,"previous",void 0),Object(Q.a)(this,"next",void 0),this.item=e,this.previous=n,this.next=r})),Gt=function(){function t(){Object(i.a)(this,t),Object(Q.a)(this,"head",null),Object(Q.a)(this,"tail",null),Object(Q.a)(this,"_length",0)}return Object(r.a)(t,[{key:"length",get:function(){return this._length}},{key:"add",value:function(t){var e=new kt(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e}},{key:"remove",value:function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}},{key:"splice",value:function(t,e){t!==e&&(this.remove(e),this._insert(t,e))}},{key:"_insert",value:function(t,e){var n=t.next;t.next=e,this.tail===t?this.tail=e:n.previous=e,e.next=n,e.previous=t,++this._length}}]),t}();function Ut(t){return void 0!==t&&null!==t}var Zt=function(){function t(){Object(i.a)(this,t),Object(Q.a)(this,"_list",void 0),Object(Q.a)(this,"_sentinel",void 0),Object(Q.a)(this,"_trimTiles",void 0),this._list=new Gt,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return Object(r.a)(t,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(t){var e=t._cacheNode;Ut(e)&&this._list.splice(this._sentinel,e)}},{key:"add",value:function(t,e,n){Ut(e._cacheNode)||(e._cacheNode=this._list.add(e),n&&n(t,e))}},{key:"unloadTile",value:function(t,e,n){var r=e._cacheNode;Ut(r)&&(this._list.remove(r),e._cacheNode=void 0,n&&n(t,e))}},{key:"unloadTiles",value:function(t,e){var n=this._trimTiles;this._trimTiles=!1;for(var r=this._list,i=1024*t.maximumMemoryUsage*1024,o=this._sentinel,a=r.head;a!==o&&(t.gpuMemoryUsageInBytes>i||n);){var s=a.item;a=a.next,this.unloadTile(t,s,e)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),t}();var Ht=n(212),zt=new tt.a,Vt=new tt.a,Kt=new Ht.c([new Ht.e,new Ht.e,new Ht.e,new Ht.e,new Ht.e,new Ht.e]);function Xt(t,e){var n=t.cameraDirection,r=t.cameraUp,i=t.height,o=t.distanceScales.metersPerUnit,a=t.unprojectPosition(t.center),s=Nt.WGS84.cartographicToCartesian(a,new tt.a),u=Nt.WGS84.eastNorthUpToFixedFrame(s),c=t.unprojectPosition(t.cameraPosition),l=Nt.WGS84.cartographicToCartesian(c,new tt.a),f=new tt.a(u.transformAsVector(new tt.a(n).scale(o))).normalize(),p=new tt.a(u.transformAsVector(new tt.a(r).scale(o))).normalize();return function(t,e){var n=t.getFrustumPlanes(),r=0;for(var i in n){var o=n[i],a=o.normal.dot(t.center);Vt.copy(o.normal).scale(o.distance-a).add(t.center);var s=t.unprojectPosition(Vt),u=Nt.WGS84.cartographicToCartesian(s,new tt.a);Kt.planes[r++].fromPointNormal(u,zt.copy(e).subtract(u))}}(t,s),{camera:{position:l,direction:f,up:p},viewport:t,height:i,cullingVolume:Kt,frameNumber:e,sseDenominator:1.15}}var qt=6356752.314245179,Jt=new tt.a;function Wt(t,e){if(t instanceof Ht.d){var n=function(t){t.getColumn(0,Jt);var e=t.getColumn(1),n=t.getColumn(2);return Jt.add(e).add(n).len()}(t.halfAxes);return Math.log2(qt/(n+e[2]))}if(t instanceof Ht.b){var r=t.radius;return Math.log2(qt/(r+e[2]))}if(t.width&&t.height){var i=t.width,o=t.height;return(Math.log2(6378137/i)+Math.log2(6378137/o))/2}return 1}var Yt=0,Qt=1,$t=3,te=4,ee=5,ne=1,re=2,ie="empty",oe="scenegraph",ae="pointcloud",se="mesh",ue="I3S",ce="TILES3D",le="geometricError",fe=1,pe=n(19),he=n(230),de=n(486);function ye(t){return void 0!==t&&null!==t}var ge=new tt.a,me=new tt.a,ve=new tt.a;function _e(t,e,n){if(Object(Bt.a)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,n){var r=new tt.a(t[0],t[1],t[2]);e.transform(r,r);var i=[];if(10===t.length){var o=t.slice(3,6),a=new he.a;a.fromArray(t,6);var s=new tt.a([1,0,0]),u=new tt.a([0,1,0]),c=new tt.a([0,0,1]);s.transformByQuaternion(a),s.scale(o[0]),u.transformByQuaternion(a),u.scale(o[1]),c.transformByQuaternion(a),c.scale(o[2]),i=[].concat(Object(pe.a)(s.toArray()),Object(pe.a)(u.toArray()),Object(pe.a)(c.toArray()))}else i=[].concat(Object(pe.a)(t.slice(3,6)),Object(pe.a)(t.slice(6,9)),Object(pe.a)(t.slice(9,12)));var l=e.transformAsVector(i.slice(0,3)),f=e.transformAsVector(i.slice(3,6)),p=e.transformAsVector(i.slice(6,9)),h=new de.a([l[0],l[1],l[2],f[0],f[1],f[2],p[0],p[1],p[2]]);if(ye(n))return n.center=r,n.halfAxes=h,n;return new Ht.d(r,h)}(t.box,e,n);if(t.region){var r=Object(h.a)(t.region,6),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=Nt.WGS84.cartographicToCartesian([Object(rt.i)(i),Object(rt.i)(s),u],me),f=Nt.WGS84.cartographicToCartesian([Object(rt.i)(a),Object(rt.i)(o),c],ve),p=(new tt.a).addVectors(l,f).multiplyScalar(.5),d=(new tt.a).subVectors(l,f).len()/2;return be([p[0],p[1],p[2],d],new $.a)}if(t.sphere)return be(t.sphere,e,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function be(t,e,n){var r=new tt.a(t[0],t[1],t[2]);e.transform(r,r);var i=e.getScale(ge),o=Math.max(Math.max(i[0],i[1]),i[2]),a=t[3]*o;return ye(n)?(n.center=r,n.radius=a,n):new Ht.b(r,a)}new tt.a,new tt.a,new $.a,new tt.a,new tt.a,new tt.a;function Ee(t,e){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){var n=t.dynamicScreenSpaceErrorComputedDensity,r=t.dynamicScreenSpaceErrorFactor,i=function(t,e){var n=t*e;return 1-Math.exp(-n*n)}(e,n)*r;return i}return 0}function Ae(t,e){var n=e.viewport,r=new(0,n.constructor)({longitude:n.longitude,latitude:n.latitude,height:n.height,width:n.width,bearing:n.bearing,zoom:n.zoom,pitch:0}),i=t.header.mbs[1],o=t.header.mbs[0],a=t.header.mbs[2],s=t.header.mbs[3],u=Object(pe.a)(t.boundingVolume.center),c=r.unprojectPosition(r.cameraPosition),l=Nt.WGS84.cartographicToCartesian(c,new tt.a),f=new tt.a(l).subtract(u).normalize(),p=new $.a;Nt.WGS84.eastNorthUpToFixedFrame(u,p);var h=new $.a(p).invert(),d=new tt.a(l).transform(h),y=Math.sqrt(d[0]*d[0]+d[1]*d[1]),g=y*y/d[2],m=new tt.a([d[0],d[1],g]).transform(p),v=new tt.a(m).subtract(u).normalize(),_=f.cross(v).normalize().scale(s),b=new tt.a(u).add(_),E=Nt.WGS84.cartesianToCartographic(b),A=r.project([o,i,a]),C=r.project(E);return new tt.a(A).subtract(C).magnitude()}var Ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(i.a)(this,t),Object(Q.a)(this,"_map",new Map),Object(Q.a)(this,"_array",void 0),Object(Q.a)(this,"_length",void 0),this._array=new Array(e),this._length=e}return Object(r.a)(t,[{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}},{key:"get",value:function(t){return Object(Bt.a)(t<this._array.length),this._array[t]}},{key:"set",value:function(t,e){Object(Bt.a)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)}},{key:"delete",value:function(t){var e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(t){if(!this._map.has(t)){var e=this.length++;this._array[e]=t,this._map.set(t,e)}}},{key:"pop",value:function(){var t=this._array[--this.length];return this._map.delete(t),t}},{key:"reserve",value:function(t){Object(Bt.a)(t>=0),t>this._array.length&&(this._array.length=t)}},{key:"resize",value:function(t){Object(Bt.a)(t>=0),this.length=t}},{key:"trim",value:function(t){null!==t&&void 0!==t||(t=this.length),this._array.length=t}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(t){return this._map.has(t)}}]),t}(),Se={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""},Oe=function(){function t(e){Object(i.a)(this,t),Object(Q.a)(this,"options",void 0),Object(Q.a)(this,"root",void 0),Object(Q.a)(this,"requestedTiles",void 0),Object(Q.a)(this,"selectedTiles",void 0),Object(Q.a)(this,"emptyTiles",void 0),Object(Q.a)(this,"_traversalStack",void 0),Object(Q.a)(this,"_emptyTraversalStack",void 0),Object(Q.a)(this,"_frameNumber",void 0),this.options=Object(u.a)(Object(u.a)({},Se),e),this._traversalStack=new Ce,this._emptyTraversalStack=new Ce,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return Object(r.a)(t,[{key:"traverse",value:function(t,e,n){this.root=t,this.options=Object(u.a)(Object(u.a)({},this.options),n),this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(t,e){var n=this._traversalStack;for(t._selectionDepth=1,n.push(t);n.length>0;){var r=n.pop(),i=!1;this.canTraverse(r,e)&&(this.updateChildTiles(r,e),i=this.updateAndPushChildren(r,e,n,r.hasRenderContent?r._selectionDepth+1:r._selectionDepth));var o=r.parent,a=Boolean(!o||o._shouldRefine),s=!i;r.hasRenderContent?r.refine===ne?(this.loadTile(r,e),this.selectTile(r,e)):r.refine===re&&(this.loadTile(r,e),s&&this.selectTile(r,e)):(this.emptyTiles[r.id]=r,this.loadTile(r,e),s&&this.selectTile(r,e)),this.touchTile(r,e),r._shouldRefine=i&&a}this.options.onTraversalEnd(e)}},{key:"updateChildTiles",value:function(t,e){var n,r=t.children,i=Object(x.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.updateTile(o,e)}}catch(a){i.e(a)}finally{i.f()}return!0}},{key:"updateAndPushChildren",value:function(t,e,n,r){var i=this.options,o=i.loadSiblings,a=i.skipLevelOfDetail,s=t.children;s.sort(this.compareDistanceToCamera.bind(this));var u,c=t.refine===re&&t.hasRenderContent&&!a,l=!1,f=!0,p=Object(x.a)(s);try{for(p.s();!(u=p.n()).done;){var h=u.value;if(h._selectionDepth=r,h.isVisibleAndInRequestVolume?(n.find(h)&&n.delete(h),n.push(h),l=!0):(c||o)&&(this.loadTile(h,e),this.touchTile(h,e)),c){var d=void 0;if(d=!!h._inRequestVolume&&(h.hasRenderContent?h.contentAvailable:this.executeEmptyTraversal(h,e)),!(f=f&&d))return!1}}}catch(y){p.e(y)}finally{p.f()}return l||(f=!1),f}},{key:"updateTile",value:function(t,e){this.updateTileVisibility(t,e)}},{key:"selectTile",value:function(t,e){this.shouldSelectTile(t)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)}},{key:"loadTile",value:function(t,e){this.shouldLoadTile(t)&&(t._requestedFrame=e.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)}},{key:"touchTile",value:function(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber}},{key:"canTraverse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:!(!r&&!t.isVisibleAndInRequestVolume)&&this.shouldRefine(t,e,n))}},{key:"shouldLoadTile",value:function(t){return t.hasUnloadedContent||t.contentExpired}},{key:"shouldSelectTile",value:function(t){return t.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(t,e,n){var r=t._screenSpaceError;return n&&(r=t.getScreenSpaceError(e,!0)),r>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(t,e){var n=[];if(this.options.viewportTraversersMap)for(var r in this.options.viewportTraversersMap){this.options.viewportTraversersMap[r]===e.viewport.id&&n.push(r)}else n.push(e.viewport.id);t.updateVisibility(e,n)}},{key:"compareDistanceToCamera",value:function(t,e){return t._distanceToCamera-e._distanceToCamera}},{key:"anyChildrenVisible",value:function(t,e){var n,r=!1,i=Object(x.a)(t.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.updateVisibility(e),r=r||o.isVisibleAndInRequestVolume}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"executeEmptyTraversal",value:function(t,e){var n=!0,r=this._emptyTraversalStack;for(r.push(t);r.length>0&&n;){var i=r.pop();if(this.updateTile(i,e),i.isVisibleAndInRequestVolume||this.loadTile(i,e),this.touchTile(i,e),!i.hasRenderContent&&this.canTraverse(i,e,!1,!0)){var o,a=i.children,s=Object(x.a)(a);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.find(u)&&r.delete(u),r.push(u)}}catch(c){s.e(c)}finally{s.f()}}else i.contentAvailable||(n=!1)}return n}}]),t}(),Te=new tt.a;var Le=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(i.a)(this,t),Object(Q.a)(this,"tileset",void 0),Object(Q.a)(this,"header",void 0),Object(Q.a)(this,"id",void 0),Object(Q.a)(this,"url",void 0),Object(Q.a)(this,"parent",void 0),Object(Q.a)(this,"refine",void 0),Object(Q.a)(this,"type",void 0),Object(Q.a)(this,"contentUrl",void 0),Object(Q.a)(this,"lodMetricType",void 0),Object(Q.a)(this,"lodMetricValue",void 0),Object(Q.a)(this,"boundingVolume",void 0),Object(Q.a)(this,"content",void 0),Object(Q.a)(this,"contentState",void 0),Object(Q.a)(this,"gpuMemoryUsageInBytes",void 0),Object(Q.a)(this,"children",void 0),Object(Q.a)(this,"depth",void 0),Object(Q.a)(this,"viewportIds",void 0),Object(Q.a)(this,"transform",void 0),Object(Q.a)(this,"extensions",void 0),Object(Q.a)(this,"userData",void 0),Object(Q.a)(this,"computedTransform",void 0),Object(Q.a)(this,"hasEmptyContent",void 0),Object(Q.a)(this,"hasTilesetContent",void 0),Object(Q.a)(this,"traverser",void 0),Object(Q.a)(this,"_cacheNode",void 0),Object(Q.a)(this,"_frameNumber",void 0),Object(Q.a)(this,"_lodJudge",void 0),Object(Q.a)(this,"_expireDate",void 0),Object(Q.a)(this,"_expiredContent",void 0),Object(Q.a)(this,"_shouldRefine",void 0),Object(Q.a)(this,"_distanceToCamera",void 0),Object(Q.a)(this,"_centerZDepth",void 0),Object(Q.a)(this,"_screenSpaceError",void 0),Object(Q.a)(this,"_visibilityPlaneMask",void 0),Object(Q.a)(this,"_visible",void 0),Object(Q.a)(this,"_inRequestVolume",void 0),Object(Q.a)(this,"_stackLength",void 0),Object(Q.a)(this,"_selectionDepth",void 0),Object(Q.a)(this,"_touchedFrame",void 0),Object(Q.a)(this,"_visitedFrame",void 0),Object(Q.a)(this,"_selectedFrame",void 0),Object(Q.a)(this,"_requestedFrame",void 0),Object(Q.a)(this,"_priority",void 0),Object(Q.a)(this,"_contentBoundingVolume",void 0),Object(Q.a)(this,"_viewerRequestVolume",void 0),Object(Q.a)(this,"_initialTransform",void 0),this.header=n,this.tileset=e,this.id=o||n.id,this.url=n.url,this.parent=r,this.refine=this._getRefine(n.refine),this.type=n.type,this.contentUrl=n.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=Yt,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new Oe({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new $.a,this.transform=new $.a,this._initializeLodMetric(n),this._initializeTransforms(n),this._initializeBoundingVolumes(n),this._initializeContent(n),this._initializeRenderingState(n),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}return Object(r.a)(t,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return null===this.header}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===$t||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===Yt}},{key:"contentExpired",get:function(){return this.contentState===te}},{key:"contentFailed",get:function(){return this.contentState===ee}},{key:"getScreenSpaceError",value:function(t,e){switch(this.tileset.type){case ue:return Ae(this,t);case ce:return function(t,e,n){var r=t.tileset,i=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,o=n?i:t.lodMetricValue;if(0===o)return 0;var a=Math.max(t._distanceToCamera,1e-7),s=e.height,u=e.sseDenominator,c=o*s*(r.options.viewDistanceScale||1)/(a*u);return c-Ee(r,a)}(this,t,e);default:throw new Error("Unsupported tileset type")}}},{key:"_getPriority",value:function(){var t=this.tileset._traverser,e=t.options.skipLevelOfDetail,n=this.refine===ne||e;if(n&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===Yt)return-1;var r=this.parent,i=r&&(!n||0===this._screenSpaceError||r.hasTilesetContent)?r._screenSpaceError:this._screenSpaceError,o=t.root?t.root._screenSpaceError:0;return Math.max(o-i,0)}},{key:"loadContent",value:function(){var t=Object(j.a)(G.a.mark((function t(){var e,n,r,i;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasEmptyContent){t.next=2;break}return t.abrupt("return",!1);case 2:if(!this.content){t.next=4;break}return t.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=Qt,t.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(e=t.sent){t.next=13;break}return this.contentState=Yt,t.abrupt("return",!1);case 13:return t.prev=13,n=this.tileset.getTileUrl(this.contentUrl),r=this.tileset.loader,i=Object(u.a)(Object(u.a)({},this.tileset.loadOptions),{},Object(Q.a)({},r.id,Object(u.a)(Object(u.a)({},this.tileset.loadOptions[r.id]),{},{isTileset:"json"===this.type},this._getLoaderSpecificOptions(r.id)))),t.next=19,Object(Y.a)(n,r,i);case 19:if(this.content=t.sent,!this.tileset.options.contentLoader){t.next=23;break}return t.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=$t,this._onContentLoaded(),t.abrupt("return",!0);case 29:throw t.prev=29,t.t0=t.catch(13),this.contentState=ee,t.t0;case 33:return t.prev=33,e.done(),t.finish(33);case 36:case"end":return t.stop()}}),t,this,[[13,29,33,36]])})));return function(){return t.apply(this,arguments)}}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=Yt,!0}},{key:"updateVisibility",value:function(t,e){if(this._frameNumber!==t.frameNumber){var n=this.parent,r=n?n._visibilityPlaneMask:Ht.c.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var i=n?n.computedTransform:this.tileset.modelMatrix;this._updateTransform(i)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,r),this._visible=this._visibilityPlaneMask!==Ht.c.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=e}}},{key:"visibility",value:function(t,e){var n=t.cullingVolume,r=this.boundingVolume;return n.computeVisibilityWithPlaneMask(r,e)}},{key:"contentVisibility",value:function(){return!0}},{key:"distanceToTile",value:function(t){var e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(t){var e=t.camera,n=this.boundingVolume;return Te.subVectors(n.center,e.position),e.direction.dot(Te)}},{key:"insideViewerRequestVolume",value:function(t){var e=this._viewerRequestVolume;return!e||e.distanceSquaredTo(t.camera.position)<=0}},{key:"updateExpiration",value:function(){if(void 0!==(e=this._expireDate)&&null!==e&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=te,this._expiredContent=this.content)}var e}},{key:"extras",get:function(){return this.header.extras}},{key:"_initializeLodMetric",value:function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(t){this.transform=t.transform?new $.a(t.transform):new $.a;var e=this.parent,n=this.tileset,r=e&&e.computedTransform?e.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new $.a(r).multiplyRight(this.transform);var i=e&&e._initialTransform?e._initialTransform.clone():new $.a;this._initialTransform=new $.a(i).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}},{key:"_initializeContent",value:function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=Yt,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=Ht.c.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(t){return t||this.parent&&this.parent.refine||re}},{key:"_isTileset",value:function(){return-1!==this.contentUrl.indexOf(".json")}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(t){this.boundingVolume=_e(t.boundingVolume,this.computedTransform,this.boundingVolume);var e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=_e(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=_e(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $.a,e=t.clone().multiplyRight(this.transform),n=!e.equals(this.computedTransform);n&&(this.computedTransform=e,this._updateBoundingVolume(this.header))}},{key:"_getLoaderSpecificOptions",value:function(t){return"i3s"===t?Object(u.a)(Object(u.a)({},this.tileset.options.i3s),{},{tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1}):{assetGltfUpAxis:(e=this.tileset.tileset).asset&&e.asset.gltfUpAxis||"Y"};var e}}]),t}(),Ie=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"compareDistanceToCamera",value:function(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera}},{key:"updateTileVisibility",value:function(t,e){if(Object(P.a)(Object(R.a)(n.prototype),"updateTileVisibility",this).call(this,t,e),t.isVisibleAndInRequestVolume){var r=t.children.length>0;if(t.hasTilesetContent&&r){var i=t.children[0];return this.updateTileVisibility(i,e),void(t._visible=i._visible)}if(this.meetsScreenSpaceErrorEarly(t,e))t._visible=!1;else{var o=t.refine===re,a=t._optimChildrenWithinParent===fe;o&&a&&r&&!this.anyChildrenVisible(t,e)&&(t._visible=!1)}}}},{key:"meetsScreenSpaceErrorEarly",value:function(t,e){var n=t.parent;return!(!n||n.hasTilesetContent||n.refine!==ne)&&!this.shouldRefine(t,e,!0)}}]),n}(Oe),we=n(37),Pe="REQUESTED",Re="COMPLETED",Me="ERROR",xe=function(){function t(){Object(i.a)(this,t),Object(Q.a)(this,"_statusMap",void 0),this._statusMap={}}return Object(r.a)(t,[{key:"add",value:function(t,e,n,r){var i=this;this._statusMap[e]||(this._statusMap[e]={request:t,callback:n,key:e,frameState:r,status:Pe},t().then((function(t){i._statusMap[e].status=Re,i._statusMap[e].callback(t,r)})).catch((function(t){i._statusMap[e].status=Me,n(t)})))}},{key:"update",value:function(t,e){this._statusMap[t]&&(this._statusMap[t].frameState=e)}},{key:"find",value:function(t){return this._statusMap[t]}}]),t}(),Ne=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var r;return Object(i.a)(this,n),r=e.call(this,t),Object(Q.a)(Object(we.a)(r),"_tileManager",void 0),r._tileManager=new xe,r}return Object(r.a)(n,[{key:"shouldRefine",value:function(t,e){return t._lodJudge=function(t,e){if(0===t.lodMetricValue||isNaN(t.lodMetricValue))return"DIG";var n=2*Ae(t,e);return n<2?"OUT":!t.header.children||n<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}(t,e),"DIG"===t._lodJudge}},{key:"updateChildTiles",value:function(t,e){var n,r=this,i=t.header.children||[],o=t.children,a=t.tileset,s=Object(x.a)(i);try{var u=function(){var i=n.value,s="".concat(i.id,"-").concat(e.viewport.id),u=o&&o.find((function(t){return t.id===s}));if(u)u&&r.updateTile(u,e);else{var c=function(){return r._loadTile(i.id,a)};r._tileManager.find(s)?r._tileManager.update(s,e):(a.tileset.nodePages&&(c=function(){return a.tileset.nodePagesTile.formTileFromNodePages(i.id)}),r._tileManager.add(c,s,(function(e){return r._onTileLoad(e,t,s)}),e))}};for(s.s();!(n=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}return!1}},{key:"_loadTile",value:function(){var t=Object(j.a)(G.a.mark((function t(e,n){var r,i,o;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.loader,i=n.getTileUrl("".concat(n.url,"/nodes/").concat(e)),o=Object(u.a)(Object(u.a)({},n.loadOptions),{},{i3s:Object(u.a)(Object(u.a)({},n.loadOptions.i3s),{},{isTileHeader:!0,loadContent:!1})}),t.next=5,Object(Y.a)(i,r,o);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(t,e,n){var r=new Le(e.tileset,t,e,n);e.children.push(r);var i=this._tileManager.find(r.id).frameState;this.updateTile(r,i),this._frameNumber===i.frameNumber&&this.executeTraversal(r,i)}}]),n}(Oe),De={description:"",ellipsoid:Nt.WGS84,modelMatrix:new $.a,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(t){return t},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},Be="Tiles In Tileset(s)",Fe="Tiles In Memory",je="Tiles In View",ke="Tiles To Render",Ge="Tiles Loaded",Ue="Tiles Loading",Ze="Tiles Unloaded",He="Failed Tile Loads",ze="Points",Ve="Tile Memory Use",Ke=function(){function t(e,n){Object(i.a)(this,t),Object(Q.a)(this,"options",void 0),Object(Q.a)(this,"loadOptions",void 0),Object(Q.a)(this,"type",void 0),Object(Q.a)(this,"tileset",void 0),Object(Q.a)(this,"loader",void 0),Object(Q.a)(this,"url",void 0),Object(Q.a)(this,"basePath",void 0),Object(Q.a)(this,"modelMatrix",void 0),Object(Q.a)(this,"ellipsoid",void 0),Object(Q.a)(this,"lodMetricType",void 0),Object(Q.a)(this,"lodMetricValue",void 0),Object(Q.a)(this,"refine",void 0),Object(Q.a)(this,"root",void 0),Object(Q.a)(this,"roots",void 0),Object(Q.a)(this,"asset",void 0),Object(Q.a)(this,"description",void 0),Object(Q.a)(this,"properties",void 0),Object(Q.a)(this,"extras",void 0),Object(Q.a)(this,"attributions",void 0),Object(Q.a)(this,"credits",void 0),Object(Q.a)(this,"stats",void 0),Object(Q.a)(this,"traverseCounter",void 0),Object(Q.a)(this,"geometricError",void 0),Object(Q.a)(this,"selectedTiles",void 0),Object(Q.a)(this,"cartographicCenter",void 0),Object(Q.a)(this,"cartesianCenter",void 0),Object(Q.a)(this,"zoom",void 0),Object(Q.a)(this,"boundingVolume",void 0),Object(Q.a)(this,"gpuMemoryUsageInBytes",void 0),Object(Q.a)(this,"dynamicScreenSpaceErrorComputedDensity",void 0),Object(Q.a)(this,"_traverser",void 0),Object(Q.a)(this,"_cache",void 0),Object(Q.a)(this,"_requestScheduler",void 0),Object(Q.a)(this,"_frameNumber",void 0),Object(Q.a)(this,"_queryParamsString",void 0),Object(Q.a)(this,"_queryParams",void 0),Object(Q.a)(this,"_extensionsUsed",void 0),Object(Q.a)(this,"_tiles",void 0),Object(Q.a)(this,"_pendingCount",void 0),Object(Q.a)(this,"lastUpdatedVieports",void 0),Object(Q.a)(this,"_requestedTiles",void 0),Object(Q.a)(this,"_emptyTiles",void 0),Object(Q.a)(this,"frameStateData",void 0),Object(Q.a)(this,"maximumMemoryUsage",void 0),Object(Bt.a)(e),this.options=Object(u.a)(Object(u.a)({},De),n),this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||Ft.a.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new Zt,this._requestScheduler=new jt.a({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new Dt.a({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this._initializeTileSet(e)}return Object(r.a)(t,[{key:"destroy",value:function(){this._destroy()}},{key:"isLoaded",value:function(){return 0===this._pendingCount&&0!==this._frameNumber}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(t){for(var e=[],n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e.push("".concat(i,"=").concat(t[i]))}switch(e.length){case 0:return"";case 1:return"?".concat(e[0]);default:return"?".concat(e.join("&"))}}(this._queryParams)),this._queryParamsString}},{key:"setProps",value:function(t){this.options=Object(u.a)(Object(u.a)({},this.options),t)}},{key:"setOptions",value:function(t){this.options=Object(u.a)(Object(u.a)({},this.options),t)}},{key:"getTileUrl",value:function(t){return t.startsWith("data:")?t:"".concat(t).concat(this.queryParams)}},{key:"hasExtension",value:function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)}},{key:"update",value:function(t){if((!("loadTiles"in this.options)||this.options.loadTiles)&&!(this.traverseCounter>0)){!t&&this.lastUpdatedVieports?t=this.lastUpdatedVieports:this.lastUpdatedVieports=t,t instanceof Array||(t=[t]),this._cache.reset(),this._frameNumber++,this.traverseCounter=t.length;var e,n=[],r=Object(x.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value.id;this._needTraverse(i)?n.push(i):this.traverseCounter--}}catch(l){r.e(l)}finally{r.f()}var o,a=Object(x.a)(t);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.id;if(this.roots[u]||(this.roots[u]=this._initializeTileHeaders(this.tileset,null)),n.includes(u)){var c=Xt(s,this._frameNumber);this._traverser.traverse(this.roots[u],c,this.options)}}}catch(l){a.e(l)}finally{a.f()}}}},{key:"_needTraverse",value:function(t){var e=t;return this.options.viewportTraversersMap&&(e=this.options.viewportTraversersMap[t]),e===t}},{key:"_onTraversalEnd",value:function(t){var e=t.viewport.id;this.frameStateData[e]||(this.frameStateData[e]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var n=this.frameStateData[e],r=Object.values(this._traverser.selectedTiles);n.selectedTiles=r,n._requestedTiles=Object.values(this._traverser.requestedTiles),n._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}},{key:"_updateTiles",value:function(){for(var t in this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[],this.frameStateData){var e=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(e.selectedTiles),this._requestedTiles=this._requestedTiles.concat(e._requestedTiles),this._emptyTiles=this._emptyTiles.concat(e._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);var n,r=Object(x.a)(this.selectedTiles);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._tiles[i.id]=i}}catch(o){r.e(o)}finally{r.f()}this._loadTiles(),this._unloadTiles(),this._updateStats()}},{key:"_tilesChanged",value:function(t,e){if(t.length!==e.length)return!0;var n=new Set(t.map((function(t){return t.id}))),r=new Set(e.map((function(t){return t.id}))),i=t.filter((function(t){return!r.has(t.id)})).length>0;return i=i||e.filter((function(t){return!n.has(t.id)})).length>0}},{key:"_loadTiles",value:function(){var t,e=Object(x.a)(this._requestedTiles);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.contentUnloaded&&this._loadTile(n)}}catch(r){e.e(r)}finally{e.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,(function(t,e){return t._unloadTile(e)}))}},{key:"_updateStats",value:function(){var t,e=0,n=0,r=Object(x.a)(this.selectedTiles);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.contentAvailable&&i.content&&(e++,i.content.pointCount&&(n+=i.content.pointCount))}}catch(o){r.e(o)}finally{r.f()}this.stats.get(je).count=this.selectedTiles.length,this.stats.get(ke).count=e,this.stats.get(ze).count=n}},{key:"_initializeTileSet",value:function(t){this.root=this._initializeTileHeaders(t,null),this.type===ce&&this._initializeCesiumTileset(t),this.type===ue&&this._initializeI3STileset(),this._calculateViewProps()}},{key:"_calculateViewProps",value:function(){var t=this.root;Object(Bt.a)(t);var e=t.boundingVolume.center;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new tt.a,void(this.zoom=1);this.cartographicCenter=Nt.WGS84.cartesianToCartographic(e,new tt.a),this.cartesianCenter=e,this.zoom=Wt(t.boundingVolume,this.cartographicCenter)}},{key:"_initializeStats",value:function(){this.stats.get(Be),this.stats.get(Ue),this.stats.get(Fe),this.stats.get(je),this.stats.get(ke),this.stats.get(Ge),this.stats.get(Ze),this.stats.get(He),this.stats.get(ze,"memory"),this.stats.get(Ve,"memory")}},{key:"_initializeTileHeaders",value:function(t,e){var n=new Le(this,t.root,e);if(e&&(e.children.push(n),n.depth=e.depth+1),this.type===ce){var r=[];for(r.push(n);r.length>0;){var i=r.pop();this.stats.get(Be).incrementCount();var o,a=i.header.children||[],s=Object(x.a)(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=new Le(this,u,i);i.children.push(c),c.depth=i.depth+1,r.push(c)}}catch(l){s.e(l)}finally{s.f()}}}return n}},{key:"_initializeTraverser",value:function(){var t;switch(this.type){case ce:t=Ie;break;case ue:t=Ne;break;default:t=Oe}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(t){this._destroySubtree(t)}},{key:"_loadTile",value:function(){var t=Object(j.a)(G.a.mark((function t(e){var n;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._onStartTileLoading(),t.next=4,e.loadContent();case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this._onTileLoadError(e,t.t0);case 10:return t.prev=10,this._onEndTileLoading(),this._onTileLoad(e,n),t.finish(10);case 14:case"end":return t.stop()}}),t,this,[[0,7,10,14]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_onTileLoadError",value:function(t,e){this.stats.get(He).incrementCount();var n=e.message||e.toString(),r=t.url;console.error("A 3D tile failed to load: ".concat(t.url," ").concat(n)),this.options.onTileError(t,n,r)}},{key:"_onTileLoad",value:function(t,e){e&&(t&&t.content&&function(t,e){Object(Bt.a)(t),Object(Bt.a)(e);var n=e.rtcCenter,r=e.gltfUpAxis,i=t.computedTransform,o=t.boundingVolume.center,a=new $.a(i);switch(n&&a.translate(n),r){case"Z":default:break;case"Y":var s=(new $.a).rotateX(Math.PI/2);a=a.multiplyRight(s);break;case"X":var u=(new $.a).rotateY(-Math.PI/2);a=a.multiplyRight(u)}e.isQuantized&&a.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);var c=new tt.a(o);e.cartesianModelMatrix=a,e.cartesianOrigin=c;var l=Nt.WGS84.cartesianToCartographic(c,new tt.a),f=Nt.WGS84.eastNorthUpToFixedFrame(c).invert();e.cartographicModelMatrix=f.multiplyRight(a),e.cartographicOrigin=l,e.coordinateSystem||(e.modelMatrix=e.cartographicModelMatrix)}(t,t.content),this._addTileToCache(t),this.options.onTileLoad(t))}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(Ue).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(Ue).decrementCount()}},{key:"_addTileToCache",value:function(t){this._cache.add(this,t,(function(e){return e._updateCacheStats(t)}))}},{key:"_updateCacheStats",value:function(t){this.stats.get(Ge).incrementCount(),this.stats.get(Fe).incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get(Ve).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(t){this.gpuMemoryUsageInBytes-=t.content&&t.content.byteLength||0,this.stats.get(Fe).decrementCount(),this.stats.get(Ze).incrementCount(),this.stats.get(Ve).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}},{key:"_destroy",value:function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){var e,n=t.pop(),r=Object(x.a)(n.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.push(i)}}catch(o){r.e(o)}finally{r.f()}this._destroyTile(n)}this.root=null}},{key:"_destroySubtree",value:function(t){var e=t,n=[];for(n.push(e);n.length>0;){t=n.pop();var r,i=Object(x.a)(t.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(a){i.e(a)}finally{i.f()}t!==e&&this._destroyTile(t)}e.children=[]}},{key:"_destroyTile",value:function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}},{key:"_initializeCesiumTileset",value:function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras}},{key:"_initializeI3STileset",value:function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}]),t}();var Xe="3.1.8",qe={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};Object.keys(qe);function Je(t,e,n){Object(Bt.a)(t instanceof ArrayBuffer);var r=new TextDecoder("utf8"),i=new Uint8Array(t,e,n);return r.decode(i)}function We(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new DataView(t);return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}var Ye,Qe=n(739),$e={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},tn=Object(u.a)(Object(u.a)({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6}),$e),en=(Ye={},Object(Q.a)(Ye,$e.DOUBLE,Float64Array),Object(Q.a)(Ye,$e.FLOAT,Float32Array),Object(Q.a)(Ye,$e.UNSIGNED_SHORT,Uint16Array),Object(Q.a)(Ye,$e.UNSIGNED_INT,Uint32Array),Object(Q.a)(Ye,$e.UNSIGNED_BYTE,Uint8Array),Object(Q.a)(Ye,$e.BYTE,Int8Array),Object(Q.a)(Ye,$e.SHORT,Int16Array),Object(Q.a)(Ye,$e.INT,Int32Array),Ye),nn={DOUBLE:$e.DOUBLE,FLOAT:$e.FLOAT,UNSIGNED_SHORT:$e.UNSIGNED_SHORT,UNSIGNED_INT:$e.UNSIGNED_INT,UNSIGNED_BYTE:$e.UNSIGNED_BYTE,BYTE:$e.BYTE,SHORT:$e.SHORT,INT:$e.INT},rn="Failed to convert GL type",on=function(){function t(){Object(i.a)(this,t)}return Object(r.a)(t,null,[{key:"fromTypedArray",value:function(t){for(var e in t=ArrayBuffer.isView(t)?t.constructor:t,en){if(en[e]===t)return e}throw new Error(rn)}},{key:"fromName",value:function(t){var e=nn[t];if(!e)throw new Error(rn);return e}},{key:"getArrayType",value:function(t){switch(t){case $e.UNSIGNED_SHORT_5_6_5:case $e.UNSIGNED_SHORT_4_4_4_4:case $e.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var e=en[t];if(!e)throw new Error(rn);return e}}},{key:"getByteSize",value:function(e){return t.getArrayType(e).BYTES_PER_ELEMENT}},{key:"validate",value:function(e){return Boolean(t.getArrayType(e))}},{key:"createTypedArray",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;void 0===i&&(i=(n.byteLength-r)/t.getByteSize(e));var o=t.getArrayType(e);return new o(n,r,i)}}]),t}(),an=function(){function t(e,n){Object(i.a)(this,t),Object(Q.a)(this,"json",void 0),Object(Q.a)(this,"buffer",void 0),Object(Q.a)(this,"featuresLength",0),Object(Q.a)(this,"_cachedTypedArrays",{}),this.json=e,this.buffer=n}return Object(r.a)(t,[{key:"getExtension",value:function(t){return this.json.extensions&&this.json.extensions[t]}},{key:"hasProperty",value:function(t){return Boolean(this.json[t])}},{key:"getGlobalProperty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn.UNSIGNED_INT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.json[t];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(t,e,n,1,r.byteOffset):r}},{key:"getPropertyArray",value:function(t,e,n){var r=this.json[t];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(e=on.fromName(r.componentType)),this._getTypedArrayFromBinary(t,e,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(t,e,r)}},{key:"getProperty",value:function(t,e,n,r,i){var o=this.json[t];if(!o)return o;var a=this.getPropertyArray(t,e,n);if(1===n)return a[r];for(var s=0;s<n;++s)i[s]=a[n*r+s];return i}},{key:"_getTypedArrayFromBinary",value:function(t,e,n,r,i){var o=this._cachedTypedArrays,a=o[t];return a||(a=on.createTypedArray(e,this.buffer.buffer,this.buffer.byteOffset+i,r*n),o[t]=a),a}},{key:"_getTypedArrayFromArray",value:function(t,e,n){var r=this._cachedTypedArrays,i=r[t];return i||(i=on.createTypedArray(e,n),r[t]=i),i}}]),t}(),sn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},un={SCALAR:function(t,e){return t[e]},VEC2:function(t,e){return[t[2*e+0],t[2*e+1]]},VEC3:function(t,e){return[t[3*e+0],t[3*e+1],t[3*e+2]]},VEC4:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT2:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT3:function(t,e){return[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]]},MAT4:function(t,e){return[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]}},cn={SCALAR:function(t,e,n){e[n]=t},VEC2:function(t,e,n){e[2*n+0]=t[0],e[2*n+1]=t[1]},VEC3:function(t,e,n){e[3*n+0]=t[0],e[3*n+1]=t[1],e[3*n+2]=t[2]},VEC4:function(t,e,n){e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT2:function(t,e,n){e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT3:function(t,e,n){e[9*n+0]=t[0],e[9*n+1]=t[1],e[9*n+2]=t[2],e[9*n+3]=t[3],e[9*n+4]=t[4],e[9*n+5]=t[5],e[9*n+6]=t[6],e[9*n+7]=t[7],e[9*n+8]=t[8],e[9*n+9]=t[9]},MAT4:function(t,e,n){e[16*n+0]=t[0],e[16*n+1]=t[1],e[16*n+2]=t[2],e[16*n+3]=t[3],e[16*n+4]=t[4],e[16*n+5]=t[5],e[16*n+6]=t[6],e[16*n+7]=t[7],e[16*n+8]=t[8],e[16*n+9]=t[9],e[16*n+10]=t[10],e[16*n+11]=t[11],e[16*n+12]=t[12],e[16*n+13]=t[13],e[16*n+14]=t[14],e[16*n+15]=t[15]}};var ln=function(t){return void 0!==t};function fn(t,e,n){if(!e)return null;var r=t.getExtension("3DTILES_batch_table_hierarchy"),i=e.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(t,e){var n,r,i,o=t.instancesLength,a=t.classes,s=t.classIds,u=t.parentCounts,c=t.parentIds,l=o;ln(s.byteOffset)&&(s.componentType=defaultValue(s.componentType,GL.UNSIGNED_SHORT),s.type=AttributeType.SCALAR,s=getBinaryAccessor(s).createArrayBufferView(e.buffer,e.byteOffset+s.byteOffset,o));if(ln(u))for(ln(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,u=getBinaryAccessor(u).createArrayBufferView(e.buffer,e.byteOffset+u.byteOffset,o)),i=new Uint16Array(o),l=0,n=0;n<o;++n)i[n]=l,l+=u[n];ln(c)&&ln(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,c=getBinaryAccessor(c).createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,l));var f=a.length;for(n=0;n<f;++n){var p=a[n].length,h=a[n].instances,d=getBinaryProperties(p,h,e);a[n].instances=combine(d,h)}var y=new Array(f).fill(0),g=new Uint16Array(o);for(n=0;n<o;++n)r=s[n],g[n]=y[r],++y[r];var m={classes:a,classIds:s,classIndexes:g,parentCounts:u,parentIndexes:i,parentIds:c};return function(t){for(var e=t.classIds.length,n=0;n<e;++n)hn(t,n,stack)}(m),m}(r,n):null}function pn(t,e,n){if(t){var r=t.parentCounts;return t.parentIds?n(t,e):r>0?function(t,e,n){var r=t.classIds,i=t.parentCounts,o=t.parentIds,a=t.parentIndexes,s=r.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,l=scratchStack;l.length=0,l.push(e);for(;l.length>0;)if(u[e=l.pop()]!==c){u[e]=c;var f=n(t,e);if(ln(f))return f;for(var p=i[e],h=a[e],d=0;d<p;++d){var y=o[h+d];y!==e&&l.push(y)}}return null}(t,e,n):function(t,e,n){var r=!0;for(;r;){var i=n(t,e);if(ln(i))return i;var o=t.parentIds[e];r=o!==e,e=o}throw new Error("traverseHierarchySingleParent")}(t,e,n)}}function hn(t,e,n){var r=t.parentCounts,i=t.parentIds,o=t.parentIndexes,a=t.classIds.length;if(ln(i)){assert(e<a,"Parent index ".concat(e," exceeds the total number of instances: ").concat(a)),assert(-1===n.indexOf(e),"Circular dependency detected in the batch table hierarchy."),n.push(e);for(var s=ln(r)?r[e]:1,u=ln(r)?o[e]:e,c=0;c<s;++c){var l=i[u+c];l!==e&&hn(t,l,n)}n.pop(e)}}function dn(t){return void 0!==t&&null!==t}var yn=function(t,e){return t},gn={HIERARCHY:!0,extensions:!0,extras:!0},mn=function(){function t(e,n,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(var s in Object(i.a)(this,t),Object(Q.a)(this,"json",void 0),Object(Q.a)(this,"binary",void 0),Object(Q.a)(this,"featureCount",void 0),Object(Q.a)(this,"_extensions",void 0),Object(Q.a)(this,"_properties",void 0),Object(Q.a)(this,"_binaryProperties",void 0),Object(Q.a)(this,"_hierarchy",void 0),Object(Bt.a)(r>=0),this.json=e||{},this.binary=n,this.featureCount=r,this._extensions=(null===(o=this.json)||void 0===o?void 0:o.extensions)||{},this._properties={},this.json)gn[s]||(this._properties[s]=this.json[s]);this._binaryProperties=this._initializeBinaryProperties(),a["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=fn(this,this.json,this.binary))}return Object(r.a)(t,[{key:"getExtension",value:function(t){return this.json&&this.json.extensions&&this.json.extensions[t]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(t,e){return this._checkBatchId(t),Object(Bt.a)("string"===typeof e,e),!!this._hierarchy&&dn(pn(this._hierarchy,t,(function(t,n){var r=t.classIds[n];return t.classes[r].name===e})))}},{key:"isExactClass",value:function(t,e){return Object(Bt.a)("string"===typeof e,e),this.getExactClassName(t)===e}},{key:"getExactClassName",value:function(t){if(this._checkBatchId(t),this._hierarchy){var e=this._hierarchy.classIds[t];return this._hierarchy.classes[e].name}}},{key:"hasProperty",value:function(t,e){return this._checkBatchId(t),Object(Bt.a)("string"===typeof e,e),dn(this._properties[e])||this._hasPropertyInHierarchy(t,e)}},{key:"getPropertyNames",value:function(t,e){var n;this._checkBatchId(t),(e=dn(e)?e:[]).length=0;var r=Object.keys(this._properties);return(n=e).push.apply(n,Object(pe.a)(r)),this._hierarchy&&this._getPropertyNamesInHierarchy(t,e),e}},{key:"getProperty",value:function(t,e){if(this._checkBatchId(t),Object(Bt.a)("string"===typeof e,e),this._binaryProperties){var n=this._binaryProperties[e];if(dn(n))return this._getBinaryProperty(n,t)}var r=this._properties[e];if(dn(r))return yn(r[t]);if(this._hierarchy){var i=this._getHierarchyProperty(t,e);if(dn(i))return i}}},{key:"setProperty",value:function(t,e,n){var r=this.featureCount;if(this._checkBatchId(t),Object(Bt.a)("string"===typeof e,e),this._binaryProperties){var i=this._binaryProperties[e];if(i)return void this._setBinaryProperty(i,t,n)}if(!this._hierarchy||!this._setHierarchyProperty(this,t,e,n)){var o=this._properties[e];dn(o)||(this._properties[e]=new Array(r),o=this._properties[e]),o[t]=yn(n)}}},{key:"_checkBatchId",value:function(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(t,e){return t.unpack(t.typedArray,e)}},{key:"_setBinaryProperty",value:function(t,e,n){t.pack(n,t.typedArray,e)}},{key:"_initializeBinaryProperties",value:function(){var t=null;for(var e in this._properties){var n=this._properties[e],r=this._initializeBinaryProperty(e,n);r&&((t=t||{})[e]=r)}return t}},{key:"_initializeBinaryProperty",value:function(t,e){if("byteOffset"in e){var n=e;Object(Bt.a)(this.binary,"Property ".concat(t," requires a batch table binary.")),Object(Bt.a)(n.type,"Property ".concat(t," requires a type."));var r=function(t,e,n,r){var i=t.componentType;Object(Bt.a)(t.componentType);var o="string"===typeof i?on.fromName(i):i,a=sn[t.type],s=un[t.type],u=cn[t.type];return n+=t.byteOffset,{values:on.createTypedArray(o,e,n,a*r),type:o,size:a,unpacker:s,packer:u}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(t,e){if(!this._hierarchy)return!1;var n=pn(this._hierarchy,t,(function(t,n){var r=t.classIds[n];return dn(t.classes[r].instances[e])}));return dn(n)}},{key:"_getPropertyNamesInHierarchy",value:function(t,e){pn(this._hierarchy,t,(function(t,n){var r=t.classIds[n],i=t.classes[r].instances;for(var o in i)i.hasOwnProperty(o)&&-1===e.indexOf(o)&&e.push(o)}))}},{key:"_getHierarchyProperty",value:function(t,e){var n=this;return pn(this._hierarchy,t,(function(t,r){var i=t.classIds[r],o=t.classes[i],a=t.classIndexes[r],s=o.instances[e];return dn(s)?dn(s.typedArray)?n._getBinaryProperty(s,a):yn(s[a]):null}))}},{key:"_setHierarchyProperty",value:function(t,e,n,r){var i=this,o=pn(this._hierarchy,e,(function(t,o){var a=t.classIds[o],s=t.classes[a],u=t.classIndexes[o],c=s.instances[n];return!!dn(c)&&(Object(Bt.a)(o===e,'Inherited property "'.concat(n,'" is read-only.')),dn(c.typedArray)?i._setBinaryProperty(c,u,r):c[u]=yn(r),!0)}));return dn(o)}}]),t}();function vn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new DataView(e);if(t.magic=r.getUint32(n,!0),n+=4,t.version=r.getUint32(n,!0),n+=4,t.byteLength=r.getUint32(n,!0),n+=4,1!==t.version)throw new Error("3D Tile Version ".concat(t.version," not supported"));return n}var _n="b3dm tile in legacy format.";function bn(t,e,n){var r,i=new DataView(e);t.header=t.header||{};var o=i.getUint32(n,!0);n+=4;var a=i.getUint32(n,!0);n+=4;var s=i.getUint32(n,!0);n+=4;var u=i.getUint32(n,!0);return n+=4,s>=570425344?(n-=8,r=o,s=a,u=0,o=0,a=0,console.warn(_n)):u>=570425344&&(n-=4,r=s,s=o,u=a,o=0,a=0,console.warn(_n)),t.header.featureTableJsonByteLength=o,t.header.featureTableBinaryByteLength=a,t.header.batchTableJsonByteLength=s,t.header.batchTableBinaryByteLength=u,t.header.batchLength=r,n}function En(t,e,n,r){return n=function(t,e,n,r){var i=t.header,o=i.featureTableJsonByteLength,a=i.featureTableBinaryByteLength,s=i.batchLength;if(t.featureTableJson={BATCH_LENGTH:s||0},o>0){var u=Je(e,n,o);t.featureTableJson=JSON.parse(u)}return n+=o,t.featureTableBinary=new Uint8Array(e,n,a),n+=a}(t,e,n),n=function(t,e,n,r){var i=t.header,o=i.batchTableJsonByteLength,a=i.batchTableBinaryByteLength;if(o>0){var s=Je(e,n,o);t.batchTableJson=JSON.parse(s),n+=o,a>0&&(t.batchTableBinary=new Uint8Array(e,n,a),t.batchTableBinary=new Uint8Array(t.batchTableBinary),n+=a)}return n}(t,e,n),n}function An(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=t>>11&31,r=t>>5&63,i=31&t;return e[0]=n<<3,e[1]=r<<2,e[2]=i<<3,e}function Cn(t,e,n){if(!e&&(!t||!t.batchIds||!n))return null;var r=t.batchIds,i=t.isRGB565,o=t.pointCount;if(r&&n){for(var a=new Uint8ClampedArray(3*o),s=0;s<o;s++){var u=r[s],c=n.getProperty(u,"dimensions").map((function(t){return 255*t}));a[3*s]=c[0],a[3*s+1]=c[1],a[3*s+2]=c[2]}return{type:tn.UNSIGNED_BYTE,value:a,size:3,normalized:!0}}if(i){for(var l=new Uint8ClampedArray(3*o),f=0;f<o;f++){var p=An(e[f]);l[3*f]=p[0],l[3*f+1]=p[1],l[3*f+2]=p[2]}return{type:tn.UNSIGNED_BYTE,value:l,size:3,normalized:!0}}return e&&e.length===3*o?{type:tn.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:tn.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}var Sn=n(484);function On(t,e){if(!t)throw new Error("math.gl assertion failed. ".concat(e))}new Sn.a,new tt.a,new Sn.a,new Sn.a,new Uint8Array(1);function Tn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Object(rt.d)(t,0,e)/e*2-1}function Ln(t){return t<0?-1:1}function In(t,e,n,r){if(On(r),t<0||t>n||e<0||e>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(r.x=Tn(t,n),r.y=Tn(e,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){var i=r.x;r.x=(1-Math.abs(r.y))*Ln(i),r.y=(1-Math.abs(i))*Ln(r.y)}return r.normalize()}function wn(t,e,n){return In(t,e,255,n)}var Pn=new tt.a;function Rn(t,e,n){return t.isQuantized?n["3d-tiles"]&&n["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,function(t,e){for(var n=new tt.a,r=new Float32Array(3*t.pointCount),i=0;i<t.pointCount;i++)n.set(e[3*i],e[3*i+1],e[3*i+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(r,3*i);return r}(t,e)):{type:tn.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}function Mn(t,e,n,r,i){return xn.apply(this,arguments)}function xn(){return(xn=Object(j.a)(G.a.mark((function t(e,n,r,i,o){var a,s,u;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=vn(e,n,r),r=bn(e,n,r),r=En(e,n,r),Nn(e),a=Dn(e),s=a.featureTable,u=a.batchTable,t.next=7,kn(e,s,u,i,o);case 7:return Bn(e,s,i),Fn(e,s,u),jn(e,s),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nn(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function Dn(t){var e=new an(t.featureTableJson,t.featureTableBinary),n=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=n,t.featuresLength=n,t.pointsLength=n,t.pointCount=n,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",tn.FLOAT,3);var r=function(t,e){var n=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",tn.UNSIGNED_SHORT,1),t.batchIds)){var r=e.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=t.batchTableJson,o=t.batchTableBinary;n=new mn(i,o,r)}return n}(t,e);return{featureTable:e,batchTable:r}}function Bn(t,e,n){if(!t.attributes.positions)if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",tn.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){var r=e.getPropertyArray("POSITION_QUANTIZED",tn.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",tn.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",tn.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=Rn(t,r,n)}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function Fn(t,e,n){if(!t.attributes.colors){var r=null;e.hasProperty("RGBA")?(r=e.getPropertyArray("RGBA",tn.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?r=e.getPropertyArray("RGB",tn.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(r=e.getPropertyArray("RGB565",tn.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=Cn(t,r,n)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",tn.UNSIGNED_BYTE,4))}function jn(t,e){if(!t.attributes.normals){var n=null;e.hasProperty("NORMAL")?n=e.getPropertyArray("NORMAL",tn.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(n=e.getPropertyArray("NORMAL_OCT16P",tn.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=function(t,e){if(!e)return null;if(t.isOctEncoded16P){for(var n=new Float32Array(3*t.pointsLength),r=0;r<t.pointsLength;r++)wn(e[2*r],e[2*r+1],Pn),Pn.toArray(n,3*r);return{type:tn.FLOAT,size:2,value:n}}return{type:tn.FLOAT,size:2,value:e}}(t,n)}}function kn(t,e,n,r,i){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(j.a)(G.a.mark((function t(e,n,r,i,o){var a,s,c,l,f,p,h,d;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((l=e.batchTableJson&&e.batchTableJson.extensions&&e.batchTableJson.extensions["3DTILES_draco_point_compression"])&&(c=l.properties),!(f=n.getExtension("3DTILES_draco_point_compression"))){t.next=15;break}if(s=f.properties,p=f.byteOffset,h=f.byteLength,s&&Number.isFinite(p)&&h){t.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:a=e.featureTableBinary.slice(p,p+h),e.hasPositions=Number.isFinite(s.POSITION),e.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),e.hasNormals=Number.isFinite(s.NORMAL),e.hasBatchIds=Number.isFinite(s.BATCH_ID),e.isTranslucent=Number.isFinite(s.RGBA);case 15:if(a){t.next=17;break}return t.abrupt("return",!0);case 17:return d={buffer:a,properties:Object(u.a)(Object(u.a)({},s),c),featureTableProperties:s,batchTableProperties:c,dequantizeInShader:!1},t.next=20,Un(e,d,i,o);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Un(t,e,n,r){return Zn.apply(this,arguments)}function Zn(){return(Zn=Object(j.a)(G.a.mark((function t(e,n,r,i){var o,a,s,c,l,f,p,h,d,y,g,m,v,_,b;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=i.parse,delete(a=Object(u.a)(Object(u.a)({},r),{},{draco:Object(u.a)(Object(u.a)({},r.draco),{},{extraAttributes:n.batchTableProperties||{}})}))["3d-tiles"],t.next=5,o(n.buffer,Qe.a,a);case 5:if(s=t.sent,c=s.attributes.POSITION&&s.attributes.POSITION.value,l=s.attributes.COLOR_0&&s.attributes.COLOR_0.value,f=s.attributes.NORMAL&&s.attributes.NORMAL.value,p=s.attributes.BATCH_ID&&s.attributes.BATCH_ID.value,h=c&&s.attributes.POSITION.value.quantization,d=f&&s.attributes.NORMAL.value.quantization,h&&(y=s.POSITION.data.quantization,g=y.range,e.quantizedVolumeScale=new tt.a(g,g,g),e.quantizedVolumeOffset=new tt.a(y.minValues),e.quantizedRange=(1<<y.quantizationBits)-1,e.isQuantizedDraco=!0),d&&(e.octEncodedRange=(1<<s.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0),m={},n.batchTableProperties)for(v=0,_=Object.keys(n.batchTableProperties);v<_.length;v++)b=_[v],s.attributes[b]&&s.attributes[b].value&&(m[b.toLowerCase()]=s.attributes[b].value);e.attributes=Object(u.a)({positions:c,colors:Cn(e,l,void 0),normals:f,batchIds:p},m);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Hn=n(840),zn=n(149),Vn=0,Kn=1;function Xn(t,e,n,r){t.rotateYtoZ=!0;var i=t.byteOffset+t.byteLength-n;if(0===i)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=Object(zn.c)(e,n,i),t.gltfByteOffset=0,t.gltfByteLength=i,n%4===0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}function qn(t,e,n,r){return Jn.apply(this,arguments)}function Jn(){return(Jn=Object(j.a)(G.a.mark((function t(e,n,r,i){var o,a,s;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r["3d-tiles"]||{},Wn(e,n,r),!o.loadGLTF){t.next=16;break}if(a=i.parse,s=i.fetch,!e.gltfUrl){t.next=9;break}return t.next=7,s(e.gltfUrl,r);case 7:e.gltfArrayBuffer=t.sent,e.gltfByteOffset=0;case 9:if(!e.gltfArrayBuffer){t.next=16;break}return t.next=12,a(e.gltfArrayBuffer,Hn.a,r,i);case 12:e.gltf=t.sent,delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wn(t,e,n){switch(e){case Vn:var r=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),i=(new TextDecoder).decode(r);t.gltfUrl=i.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case Kn:break;default:throw new Error("b3dm: Illegal glTF format field")}}function Yn(t,e,n,r,i){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(j.a)(G.a.mark((function t(e,n,r,i,o){var a,s;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=$n(e,n,r,i,o),t.next=3,qn(e,Kn,i,o);case 3:return(s=null===e||void 0===e||null===(a=e.gltf)||void 0===a?void 0:a.extensions)&&s.CESIUM_RTC&&(e.rtcCenter=s.CESIUM_RTC.center),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $n(t,e,n,r,i){n=Xn(t,e,n=En(t,e,n=bn(t,e,n=vn(t,e,n))),r);var o=new an(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=o.getGlobalProperty("RTC_CENTER",tn.FLOAT,3),n}function tr(t,e,n,r,i){return er.apply(this,arguments)}function er(){return(er=Object(j.a)(G.a.mark((function t(e,n,r,i,o){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nr(e,n,r,i,o),t.next=3,qn(e,e.gltfFormat,i,o);case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nr(t,e,n,r,i){if(n=vn(t,e,n),1!==t.version)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));n=bn(t,e,n);var o=new DataView(e);if(t.gltfFormat=o.getUint32(n,!0),n=Xn(t,e,n=En(t,e,n+=4),r),0===t.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var a=new an(t.featureTableJson,t.featureTableBinary),s=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=a.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=a.getGlobalProperty("RTC_CENTER",tn.FLOAT,3);new mn(t.batchTableJson,t.batchTableBinary,s);return function(t,e,n,r){for(var i=[new Array(r),t._batchTable][0],o=new tt.a,a=new tt.a,s=new tt.a,u=new tt.a,c=new de.a,l=new he.a,f=new tt.a,p={},h=new $.a,d=[],y=[],g=new tt.a,m=new tt.a,v=0;v<r;v++){var _=void 0;if(e.hasProperty("POSITION"))_=e.getProperty("POSITION",tn.FLOAT,3,v,o);else if(e.hasProperty("POSITION_QUANTIZED")){_=e.getProperty("POSITION_QUANTIZED",tn.UNSIGNED_SHORT,3,v,o);var b=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",tn.FLOAT,3,g);if(!b)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var E=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",tn.FLOAT,3,m);if(!E)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var A=65535,C=0;C<3;C++)_[C]=_[C]/A*E[C]+b[C]}if(!_)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");o.copy(_),p.translation=o,t.normalUp=e.getProperty("NORMAL_UP",tn.FLOAT,3,v,d),t.normalRight=e.getProperty("NORMAL_RIGHT",tn.FLOAT,3,v,y);var S=!1;if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",tn.UNSIGNED_SHORT,2,d),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",tn.UNSIGNED_SHORT,2,y),t.octNormalUp){if(!t.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}t.eastNorthUp?(Nt.WGS84.eastNorthUpToFixedFrame(o,h),h.getRotationMatrix3(c)):c.identity()}S&&(u.copy(a).cross(s).normalize(),c.setColumn(0,a),c.setColumn(1,s),c.setColumn(2,u)),l.fromMatrix3(c),p.rotation=l,f.set(1,1,1);var O=e.getProperty("SCALE",tn.FLOAT,1,v);Number.isFinite(O)&&f.multiplyByScalar(O);var T=e.getProperty("SCALE_NON_UNIFORM",tn.FLOAT,3,v,d);T&&f.scale(T),p.scale=f;var L=e.getProperty("BATCH_ID",tn.UNSIGNED_SHORT,1,v);void 0===L&&(L=v);var I=(new $.a).fromQuaternion(p.rotation);h.identity(),h.translate(p.translation),h.multiplyRight(I),h.scale(p.scale);var w=h.clone();i[v]={modelMatrix:w,batchId:L}}t.instances=i}(t,a,0,s),n}function rr(t,e,n,r,i,o){return ir.apply(this,arguments)}function ir(){return(ir=Object(j.a)(G.a.mark((function t(e,n,r,i,o,a){var s,u;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=vn(e,n,r),s=new DataView(n),e.tilesLength=s.getUint32(r,!0),r+=4,e.tiles=[];case 5:if(!(e.tiles.length<e.tilesLength&&e.byteLength-r>12)){t.next=13;break}return u={},e.tiles.push(u),t.next=10,a(n,r,i,o,u);case 10:r=t.sent,t.next=5;break;case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function or(t,e,n,r){return ar.apply(this,arguments)}function ar(){return(ar=Object(j.a)(G.a.mark((function t(e,n,r,i){var o;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.rotateYtoZ=!0,e.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",o=i.parse,t.next=5,o(n,Hn.a,r,i);case 5:e.gltf=t.sent;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function sr(t){return ur.apply(this,arguments)}function ur(){return ur=Object(j.a)(G.a.mark((function t(e){var n,r,i,o,a=arguments;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:0,r=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,(o=a.length>4&&void 0!==a[4]?a[4]:{}).byteOffset=n,o.type=We(e,n),t.t0=o.type,t.next=t.t0===qe.COMPOSITE?9:t.t0===qe.BATCHED_3D_MODEL?12:t.t0===qe.GLTF?15:t.t0===qe.INSTANCED_3D_MODEL?18:t.t0===qe.POINT_CLOUD?21:24;break;case 9:return t.next=11,rr(o,e,n,r,i,sr);case 11:case 14:case 17:case 20:case 23:return t.abrupt("return",t.sent);case 12:return t.next=14,Yn(o,e,n,r,i);case 15:return t.next=17,or(o,e,r,i);case 18:return t.next=20,tr(o,e,n,r,i);case 21:return t.next=23,Mn(o,e,n,r,i);case 24:throw new Error("3DTileLoader: unknown type ".concat(o.type));case 25:case"end":return t.stop()}}),t)}))),ur.apply(this,arguments)}var cr=n(358),lr=1952609651;function fr(){return(fr=Object(j.a)(G.a.mark((function t(e){var n,r,i,o,a,s,u;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(new Uint32Array(e.slice(0,4))[0]===lr){t.next=3;break}throw new Error("Wrong subtree file magic number");case 3:if(1===new Uint32Array(e.slice(4,8))[0]){t.next=6;break}throw new Error("Wrong subtree file verson, must be 1");case 6:if(n=dr(e.slice(8,16)),r=new Uint8Array(e,24,n),i=new TextDecoder("utf8"),o=i.decode(r),a=JSON.parse(o),s=dr(e.slice(16,24)),u=new ArrayBuffer(0),s&&(u=e.slice(24+n)),!("bufferView"in a.tileAvailability)){t.next=18;break}return t.next=17,pr(a,"tileAvailability",u);case 17:a.tileAvailability.explicitBitstream=t.sent;case 18:if(!("bufferView"in a.contentAvailability)){t.next=22;break}return t.next=21,pr(a,"contentAvailability",u);case 21:a.contentAvailability.explicitBitstream=t.sent;case 22:if(!("bufferView"in a.childSubtreeAvailability)){t.next=26;break}return t.next=25,pr(a,"childSubtreeAvailability",u);case 25:a.childSubtreeAvailability.explicitBitstream=t.sent;case 26:return t.abrupt("return",a);case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pr(t,e,n){return hr.apply(this,arguments)}function hr(){return(hr=Object(j.a)(G.a.mark((function t(e,n,r){var i,o,a,s,u;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e[n].bufferView,o=e.bufferViews[i],!(a=e.buffers[o.buffer]).uri){t.next=11;break}return t.next=6,Object(cr.a)(a.uri);case 6:return s=t.sent,t.next=9,s.arrayBuffer();case 9:return u=t.sent,t.abrupt("return",new Uint8Array(u,o.byteOffset,o.byteLength));case 11:return t.abrupt("return",new Uint8Array(r,o.byteOffset,o.byteLength));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dr(t){var e=new DataView(t),n=e.getUint32(0,!0),r=e.getUint32(4,!0);return n+Math.pow(2,32)*r}var yr={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:Xe,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:function(t){return fr.apply(this,arguments)},options:{}},gr={QUADTREE:4,OCTREE:8};function mr(t,e){return vr.apply(this,arguments)}function vr(){return vr=Object(j.a)(G.a.mark((function t(e,n){var r,i,o,a,s,u,c,l,f,p,h,d,y,g,m,v,_,b,E,A,C,S,O,T,L,I,w,P,R,M,x,N,D,B,F=arguments;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=F.length>2&&void 0!==F[2]?F[2]:{mortonIndex:0,x:0,y:0,z:0},i=F.length>3&&void 0!==F[3]?F[3]:0,o=F.length>4&&void 0!==F[4]?F[4]:0,a=F.length>5&&void 0!==F[5]?F[5]:{level:0,mortonIndex:0,x:0,y:0,z:0},s=n.subdivisionScheme,u=n.subtreeLevels,c=n.maximumLevel,l=n.contentUrlTemplate,f=n.subtreesUriTemplate,p=n.basePath,h={children:[],lodMetricValue:0,contentUrl:""},d=gr[s],y=1&i,g=i>>1&1,m=i>>2&1,v=(Math.pow(d,o)-1)/(d-1),_=Er(r.mortonIndex,i),b=v+_,E=Er(r.x,y),A=Er(r.y,g),C=Er(r.z,m),S=!1,o+1>u&&(S=_r(e.childSubtreeAvailability,_)),O=Er(a.x,E),T=Er(a.y,A),L=Er(a.z,C),I=o+a.level,!S){t.next=40;break}return w="".concat(p,"/").concat(f),P=Ar(w,I,O,T,L),t.next=27,Object(Y.a)(P,yr);case 27:R=t.sent,e=R,a.mortonIndex=_,a.x=E,a.y=A,a.z=C,a.level=o,_=0,b=0,E=0,A=0,C=0,o=0;case 40:if(_r(e.tileAvailability,b)&&!(o>c)){t.next=43;break}return t.abrupt("return",h);case 43:_r(e.contentAvailability,b)&&(h.contentUrl=Ar(l,I,O,T,L)),M=o+1,x={mortonIndex:_,x:E,y:A,z:C},N=0;case 48:if(!(N<d)){t.next=56;break}return t.next=51,mr(e,n,x,N,M,a);case 51:((D=t.sent).contentUrl||D.children.length)&&(B=br(D,I+1,{childTileX:E,childTileY:A,childTileZ:C},n),h.children.push(B));case 53:N++,t.next=48;break;case 56:return t.abrupt("return",h);case 57:case"end":return t.stop()}}),t)}))),vr.apply(this,arguments)}function _r(t,e){return"constant"in t?Boolean(t.constant):!!t.explicitBitstream&&function(t,e){var n=Math.floor(t/8),r=t%8;return 1===(e[n]>>r&1)}(e,t.explicitBitstream)}function br(t,e,n,r){var i=r.basePath,o=r.refine,a=r.getRefine,s=r.lodMetricType,u=r.getTileType,c=r.rootLodMetricValue,l=r.rootBoundingVolume,f=t.contentUrl&&t.contentUrl.replace("".concat(i,"/"),""),p=c/Math.pow(2,e),d=function(t,e,n){if(e.region){var r=n.childTileX,i=n.childTileY,o=n.childTileZ,a=Object(h.a)(e.region,6),s=a[0],u=a[1],c=a[2],l=a[3],f=a[4],p=a[5],d=Math.pow(2,t),y=(c-s)/d,g=(l-u)/d,m=(p-f)/d;return{region:[s+y*r,u+g*i,s+y*(r+1),u+g*(i+1),f+m*o,f+m*(o+1)]}}return console.warn("Unsupported bounding volume type: ",e),null}(e,l,n);return{children:t.children,contentUrl:t.contentUrl,content:{uri:f},id:t.contentUrl,refine:a(o),type:u(t),lodMetricType:s,lodMetricValue:p,boundingVolume:d}}function Er(t,e){return parseInt(t.toString(2)+e.toString(2),2)}function Ar(t,e,n,r,i){var o=function(t){var e={};for(var n in t)e["{".concat(n,"}")]=t[n];return e}({level:e,x:n,y:r,z:i});return t.replace(/{level}|{x}|{y}|{z}/gi,(function(t){return o[t]}))}function Cr(t){if(!t.contentUrl)return ie;var e=t.contentUrl.split(".").pop();switch(e){case"pnts":return ae;case"i3dm":case"b3dm":case"glb":case"gltf":return oe;default:return e}}function Sr(t){switch(t){case"REPLACE":case"replace":return re;case"ADD":case"add":return ne;default:return t}}function Or(t,e){if(!t)return null;if(t.content){var n=t.content.uri||t.content.url;t.contentUrl="".concat(e.basePath,"/").concat(n)}return t.id=t.contentUrl,t.lodMetricType=le,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=Cr(t),t.refine=Sr(t.refine),t}function Tr(t){var e=t.basePath,n=Or(t.root,t),r=[];for(r.push(n);r.length>0;){var i,o=(r.pop()||{}).children||[],a=Object(x.a)(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;Or(s,{basePath:e}),r.push(s)}}catch(u){a.e(u)}finally{a.f()}}return n}function Lr(t){return Ir.apply(this,arguments)}function Ir(){return(Ir=Object(j.a)(G.a.mark((function t(e){var n,r,i,o,a,s,u,c,l,f,p,h,d,y;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.root){t.next=2;break}return t.abrupt("return",null);case 2:return n=e.basePath,r=e.root.extensions["3DTILES_implicit_tiling"],i=r.subdivisionScheme,o=r.maximumLevel,a=r.subtreeLevels,s=r.subtrees.uri,u=Ar(s,0,0,0,0),c="".concat(n,"/").concat(u),t.next=9,Object(Y.a)(c,yr);case 9:return l=t.sent,f="".concat(n,"/").concat(e.root.content.uri),p=e.root.refine,h=e.root.geometricError,d=e.root.boundingVolume,y={contentUrlTemplate:f,subtreesUriTemplate:s,subdivisionScheme:i,subtreeLevels:a,maximumLevel:o,refine:p,basePath:n,lodMetricType:le,rootLodMetricValue:h,rootBoundingVolume:d,getTileType:Cr,getRefine:Sr},t.next=17,wr(e.root,l,y);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wr(t,e,n){return Pr.apply(this,arguments)}function Pr(){return(Pr=Object(j.a)(G.a.mark((function t(e,n,r){var i,o,a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return e.lodMetricType=le,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform,t.next=7,mr(n,r);case 7:return i=t.sent,o=i.children,(a=i.contentUrl)&&(e.contentUrl=a,e.content={uri:a.replace("".concat(r.basePath,"/"),"")}),e.refine=Sr(e.refine),e.type=Cr(e),e.children=o,e.id=e.contentUrl,t.abrupt("return",e);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Rr="3DTILES_implicit_tiling",Mr={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:Xe,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:function(t,e,n){return jr.apply(this,arguments)},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function xr(t){return Ft.a.dirname(t.url)}function Nr(t,e,n){return Dr.apply(this,arguments)}function Dr(){return(Dr=Object(j.a)(G.a.mark((function t(e,n,r){var i;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={content:{featureIds:null}},0,t.next=4,sr(e,0,n,r,i.content);case 4:return t.abrupt("return",i.content);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Br(t,e,n){return Fr.apply(this,arguments)}function Fr(){return(Fr=Object(j.a)(G.a.mark((function t(e,n,r){var i,o;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((o=JSON.parse((new TextDecoder).decode(e))).loader=n.loader||Mr,o.url=r.url,o.basePath=xr(o),!kr(o)){t.next=10;break}return t.next=7,Lr(o);case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=Tr(o);case 11:return o.root=t.t0,o.type=ce,o.lodMetricType=le,o.lodMetricValue=(null===(i=o.root)||void 0===i?void 0:i.lodMetricValue)||0,t.abrupt("return",o);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jr(){return(jr=Object(j.a)(G.a.mark((function t(e,n,r){var i;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n["3d-tiles"]||{},!("auto"===i.isTileset?r.url&&-1!==r.url.indexOf(".json"):i.isTileset)){t.next=8;break}return t.next=5,Br(e,n,r);case 5:e=t.sent,t.next=11;break;case 8:return t.next=10,Nr(e,n,r);case 10:e=t.sent;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kr(t){var e,n;return(null===t||void 0===t||null===(e=t.extensionsRequired)||void 0===e?void 0:e.includes(Rr))&&(null===t||void 0===t||null===(n=t.extensionsUsed)||void 0===n?void 0:n.includes(Rr))}var Gr=[0],Ur={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:null,loader:Mr,onTilesetLoad:{type:"function",value:function(t){},compare:!1},onTileLoad:{type:"function",value:function(t){},compare:!1},onTileUnload:{type:"function",value:function(t){},compare:!1},onTileError:{type:"function",value:function(t,e,n){},compare:!1},_getMeshColor:{type:"function",value:function(t){return[255,255,255]},compare:!1}},Zr=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&W.a.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}},{key:"isLoaded",get:function(){var t=this.state.tileset3d;return t&&t.isLoaded()}},{key:"shouldUpdateState",value:function(t){return t.changeFlags.somethingChanged}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags;if(e.data&&e.data!==n.data&&this._loadTileset(e.data),r.viewportChanged){var i=this.state.activeViewports;Object.keys(i).length&&(this._updateTileset(i),this.state.lastUpdatedViewports=i,this.state.activeViewports={})}if(r.propsChanged){var o=this.state.layerMap;for(var a in o)o[a].needsUpdate=!0}}},{key:"activateViewport",value:function(t){var e=this.state,n=e.activeViewports,r=e.lastUpdatedViewports;this.internalState.viewport=t,n[t.id]=t;var i=null===r||void 0===r?void 0:r[t.id];i&&t.equals(i)||(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}},{key:"getPickingInfo",value:function(t){var e=t.info,n=t.sourceLayer,r=this.state.layerMap,i=n&&n.id;if(i){var o=i.substring(this.id.length+1),a=o.substring(o.indexOf("-")+1);e.object=r[a]&&r[a].tile}return e}},{key:"filterSubLayer",value:function(t){var e=t.layer,n=t.viewport,r=e.props.tile,i=n.id;return r.selected&&r.viewportIds.includes(i)}},{key:"_updateAutoHighlight",value:function(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}},{key:"_loadTileset",value:function(){var t=Object(j.a)(G.a.mark((function t(e){var n,r,i,o,a,s,c;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props.loadOptions,r=void 0===n?{}:n,i=this.props.loader||this.props.loaders,Array.isArray(i)&&(i=i[0]),o={loadOptions:Object(u.a)({},r)},!i.preload){t.next=10;break}return t.next=7,i.preload(e,r);case 7:(a=t.sent).headers&&(o.loadOptions.fetch=Object(u.a)(Object(u.a)({},o.loadOptions.fetch),{},{headers:a.headers})),Object.assign(o,a);case 10:return t.next=12,Object(Y.a)(e,i,o.loadOptions);case 12:s=t.sent,c=new Ke(s,Object(u.a)({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileLoadFail:this.props.onTileError},o)),this.setState({tileset3d:c,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(c);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(t){var e=this.state.lastUpdatedViewports;this.props.onTileLoad(t),this._updateTileset(e),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(t){delete this.state.layerMap[t.id],this.props.onTileUnload(t)}},{key:"_updateTileset",value:function(t){var e=this.state.tileset3d,n=this.context.timeline,r=Object.keys(t).length;if(n&&r&&e){var i=e.update(Object.values(t));this.state.frameNumber!==i&&this.setState({frameNumber:i})}}},{key:"_getSubLayer",value:function(t,e){if(!t.content)return null;switch(t.type){case ae:return this._makePointCloudLayer(t,e);case oe:return this._make3DModelLayer(t,e);case se:return this._makeSimpleMeshLayer(t,e);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(t.content.type))}}},{key:"_makePointCloudLayer",value:function(t,e){var n=t.content,r=n.attributes,i=n.pointCount,o=n.constantRGBA,a=n.cartographicOrigin,s=n.modelMatrix,u=r.positions,c=r.normals,l=r.colors;if(!u)return null;var f=e&&e.props.data||{header:{vertexCount:i},attributes:{POSITION:u,NORMAL:c,COLOR_0:l}},p=this.props,h=p.pointSize,d=p.getPointColor;return new(this.getSubLayerClass("pointcloud",H.a))({pointSize:h},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(t.id),tile:t,data:f,coordinateSystem:Z.a.METER_OFFSETS,coordinateOrigin:a,modelMatrix:s,getColor:o||d,_offset:0})}},{key:"_make3DModelLayer",value:function(t){var e=t.content,n=e.gltf,r=e.instances,i=e.cartographicOrigin,o=e.modelMatrix;return new(this.getSubLayerClass("scenegraph",z.a))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(t.id),tile:t,data:r||Gr,scenegraph:n,coordinateSystem:Z.a.METER_OFFSETS,coordinateOrigin:i,modelMatrix:o,getTransformMatrix:function(t){return t.modelMatrix},getPosition:[0,0,0],_offset:0})}},{key:"_makeSimpleMeshLayer",value:function(t,e){var n=t.content,r=n.attributes,i=n.indices,o=n.modelMatrix,a=n.cartographicOrigin,s=n.coordinateSystem,u=void 0===s?Z.a.METER_OFFSETS:s,c=n.material,l=n.featureIds,f=this.props._getMeshColor,p=e&&e.props.mesh||new U.a({drawMode:4,attributes:Hr(r),indices:i});return new(this.getSubLayerClass("mesh",J))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(t.id),tile:t,mesh:p,data:Gr,getColor:f(t),pbrMaterial:c,modelMatrix:o,coordinateOrigin:a,coordinateSystem:u,featureIds:l,_offset:0})}},{key:"renderLayers",value:function(){var t=this,e=this.state,n=e.tileset3d,r=e.layerMap;return n?n.tiles.map((function(e){var n=r[e.id]=r[e.id]||{tile:e},i=n.layer;return e.selected&&(i?n.needsUpdate&&(i=t._getSubLayer(e,i),n.needsUpdate=!1):i=t._getSubLayer(e)),n.layer=i,i})).filter(Boolean):null}}]),n}(c.a);function Hr(t){var e={};return e.positions=Object(u.a)(Object(u.a)({},t.positions),{},{value:new Float32Array(t.positions.value)}),t.normals&&(e.normals=t.normals),t.texCoords&&(e.texCoords=t.texCoords),t.colors&&(e.colors=t.colors),t.uvRegions&&(e.uvRegions=t.uvRegions),e}Zr.layerName="Tile3DLayer",Zr.defaultProps=Ur;var zr={name:"Terrain",id:"terrain",module:"terrain",version:"3.1.8",worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}},Vr=n(133),Kr=[1],Xr=Object(u.a)(Object(u.a)({},w.a.defaultProps),{},{elevationData:Vr.f,texture:Object(u.a)(Object(u.a)({},Vr.f),{},{optional:!0}),meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:{type:"string",value:null},wireframe:!1,material:!0,loaders:[zr]});function qr(t){return Array.isArray(t)?t.join(";"):t}var Jr=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=e.elevationData!==n.elevationData;if(r){var i=e.elevationData,o=i&&(Array.isArray(i)||i.includes("{x}")&&i.includes("{y}"));this.setState({isTiled:o})}var a=r||e.meshMaxError!==n.meshMaxError||e.elevationDecoder!==n.elevationDecoder||e.bounds!==n.bounds;if(!this.state.isTiled&&a){var s=this.loadTerrain(e);this.setState({terrain:s})}e.workerUrl&&W.a.removed("workerUrl","loadOptions.terrain.workerUrl")()}},{key:"loadTerrain",value:function(t){var e,n=t.elevationData,r=t.bounds,i=t.elevationDecoder,o=t.meshMaxError,a=t.signal;if(!n)return null;var s=this.getLoadOptions();return s=Object(u.a)(Object(u.a)({},s),{},{terrain:Object(u.a)(Object(u.a)({skirtHeight:this.state.isTiled?2*o:0},null===(e=s)||void 0===e?void 0:e.terrain),{},{bounds:r,meshMaxError:o,elevationDecoder:i})}),(0,this.props.fetch)(n,{propName:"elevationData",layer:this,loadOptions:s,signal:a})}},{key:"getTiledTerrainData",value:function(t){var e=this.props,n=e.elevationData,r=e.fetch,i=e.texture,o=e.elevationDecoder,a=e.meshMaxError,s=this.context.viewport,u=Object(Vr.b)(n,t),c=Object(Vr.b)(i,t),l=t.bbox,f=t.signal,p=s.isGeospatial?s.projectFlat([l.west,l.south]):[l.left,l.bottom],h=s.isGeospatial?s.projectFlat([l.east,l.north]):[l.right,l.top],d=[p[0],p[1],h[0],h[1]],y=this.loadTerrain({elevationData:u,bounds:d,elevationDecoder:o,meshMaxError:a,signal:f}),g=c?r(c,{propName:"texture",layer:this,loaders:[],signal:f}).catch((function(t){return null})):Promise.resolve(null);return Promise.all([y,g])}},{key:"renderSubLayers",value:function(t){var e=this.getSubLayerClass("mesh",q.a),n=t.data,r=t.color;if(!n)return null;var i=Object(h.a)(n,2),o=i[0],a=i[1];return new e(t,{data:Kr,mesh:o,texture:a,_instanced:!1,coordinateSystem:Z.a.CARTESIAN,getPosition:function(t){return[0,0,0]},getColor:r})}},{key:"onViewportLoad",value:function(t){if(t){var e=this.state.zRange,n=t.map((function(t){return t.content})).filter(Boolean).map((function(t){return t[0].header.boundingBox.map((function(t){return t[2]}))}));if(0!==n.length){var r=Math.min.apply(Math,Object(pe.a)(n.map((function(t){return t[0]})))),i=Math.max.apply(Math,Object(pe.a)(n.map((function(t){return t[1]}))));(!e||r<e[0]||i>e[1])&&this.setState({zRange:[r,i]})}}}},{key:"renderLayers",value:function(){var t=this.props,e=t.color,n=t.material,r=t.elevationData,i=t.texture,o=t.wireframe,a=t.meshMaxError,s=t.elevationDecoder,u=t.tileSize,c=t.maxZoom,l=t.minZoom,f=t.extent,p=t.maxRequests,h=t.onTileLoad,d=t.onTileUnload,y=t.onTileError,g=t.maxCacheSize,m=t.maxCacheByteSize,v=t.refinementStrategy;return this.state.isTiled?new w.a(this.getSubLayerProps({id:"tiles"}),{wireframe:o,color:e,material:n,getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:qr(r),texture:qr(i),meshMaxError:a,elevationDecoder:s}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:u,maxZoom:c,minZoom:l,extent:f,maxRequests:p,onTileLoad:h,onTileUnload:d,onTileError:y,maxCacheSize:g,maxCacheByteSize:m,refinementStrategy:v}):new(this.getSubLayerClass("mesh",q.a))(this.getSubLayerProps({id:"mesh"}),{data:Kr,mesh:this.state.terrain,texture:i,_instanced:!1,getPosition:function(t){return[0,0,0]},getColor:e,material:n,wireframe:o})}}]),n}(c.a);Jr.layerName="TerrainLayer",Jr.defaultProps=Xr;var Wr=n(501)},46:function(t,e,n){"use strict";n.r(e),n.d(e,"createGLContext",(function(){return r.c})),n.d(e,"instrumentGLContext",(function(){return r.h})),n.d(e,"isWebGL",(function(){return r.i})),n.d(e,"isWebGL2",(function(){return r.j})),n.d(e,"getParameters",(function(){return r.f})),n.d(e,"setParameters",(function(){return r.n})),n.d(e,"withParameters",(function(){return r.o})),n.d(e,"resetParameters",(function(){return r.l})),n.d(e,"cssToDeviceRatio",(function(){return r.e})),n.d(e,"cssToDevicePixels",(function(){return r.d})),n.d(e,"lumaStats",(function(){return i.a})),n.d(e,"FEATURES",(function(){return o.a})),n.d(e,"hasFeature",(function(){return a.b})),n.d(e,"hasFeatures",(function(){return a.c})),n.d(e,"Buffer",(function(){return s.a})),n.d(e,"Program",(function(){return u.a})),n.d(e,"Framebuffer",(function(){return c.a})),n.d(e,"Renderbuffer",(function(){return l.a})),n.d(e,"Texture2D",(function(){return f.a})),n.d(e,"TextureCube",(function(){return p.a})),n.d(e,"clear",(function(){return h.a})),n.d(e,"readPixelsToArray",(function(){return d.c})),n.d(e,"readPixelsToBuffer",(function(){return d.d})),n.d(e,"cloneTextureFrom",(function(){return y.a})),n.d(e,"copyToTexture",(function(){return d.b})),n.d(e,"Texture3D",(function(){return g.a})),n.d(e,"TransformFeedback",(function(){return m.a})),n.d(e,"AnimationLoop",(function(){return v.a})),n.d(e,"Model",(function(){return _.a})),n.d(e,"Transform",(function(){return b.a})),n.d(e,"ProgramManager",(function(){return E.a})),n.d(e,"Timeline",(function(){return A.a})),n.d(e,"Geometry",(function(){return C.a})),n.d(e,"ClipSpace",(function(){return S.a})),n.d(e,"ConeGeometry",(function(){return N})),n.d(e,"CubeGeometry",(function(){return D.a})),n.d(e,"CylinderGeometry",(function(){return B})),n.d(e,"IcoSphereGeometry",(function(){return G})),n.d(e,"PlaneGeometry",(function(){return Z})),n.d(e,"SphereGeometry",(function(){return z})),n.d(e,"TruncatedConeGeometry",(function(){return M})),n.d(e,"normalizeShaderModule",(function(){return K.b})),n.d(e,"fp32",(function(){return X.a})),n.d(e,"fp64",(function(){return q.a})),n.d(e,"project",(function(){return $})),n.d(e,"dirlight",(function(){return et})),n.d(e,"picking",(function(){return nt.a})),n.d(e,"gouraudLighting",(function(){return rt.a})),n.d(e,"phongLighting",(function(){return rt.b})),n.d(e,"pbr",(function(){return it.a})),n.d(e,"log",(function(){return r.k})),n.d(e,"assert",(function(){return ot.a})),n.d(e,"uid",(function(){return P.c}));var r=n(17),i=n(241),o=n(357),a=n(588),s=n(62),u=n(660),c=n(126),l=n(175),f=n(202),p=n(508),h=n(299),d=n(365),y=n(507),g=n(509),m=n(629),v=n(665),_=n(295),b=n(661),E=n(363),A=n(630),C=n(245),S=n(628),O=n(5),T=n(6),L=n(7),I=n(14),w=n(15),P=n(86),R={x:[2,0,1],y:[0,1,2],z:[1,2,0]},M=function(t){Object(I.a)(n,t);var e=Object(w.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L.a)(this,n);var r=t.id,i=void 0===r?Object(P.c)("truncated-code-geometry"):r,o=x(t),a=o.indices,s=o.attributes;return e.call(this,Object(O.a)(Object(O.a)({},t),{},{id:i,indices:a,attributes:Object(O.a)(Object(O.a)({},s),t.attributes)}))}return Object(T.a)(n)}(C.a);function x(t){for(var e=t.bottomRadius,n=void 0===e?0:e,r=t.topRadius,i=void 0===r?0:r,o=t.height,a=void 0===o?1:o,s=t.nradial,u=void 0===s?10:s,c=t.nvertical,l=void 0===c?10:c,f=t.verticalAxis,p=void 0===f?"y":f,h=t.topCap,d=void 0!==h&&h,y=t.bottomCap,g=void 0!==y&&y,m=(d?2:0)+(g?2:0),v=(u+1)*(l+1+m),_=Math.atan2(n-i,a),b=Math.sin,E=Math.cos,A=Math.PI,C=E(_),S=b(_),O=d?-2:0,T=l+(g?2:0),L=u+1,I=new Uint16Array(u*(l+m)*6),w=R[p],P=new Float32Array(3*v),M=new Float32Array(3*v),x=new Float32Array(2*v),N=0,D=0,B=O;B<=T;B++){var F=B/l,j=a*F,k=void 0;B<0?(j=0,F=1,k=n):B>l?(j=a,F=1,k=i):k=n+B/l*(i-n),-2!==B&&B!==l+2||(k=0,F=0),j-=a/2;for(var G=0;G<L;G++){var U=b(G*A*2/u),Z=E(G*A*2/u);P[N+w[0]]=U*k,P[N+w[1]]=j,P[N+w[2]]=Z*k,M[N+w[0]]=B<0||B>l?0:U*C,M[N+w[1]]=B<0?-1:B>l?1:S,M[N+w[2]]=B<0||B>l?0:Z*C,x[D+0]=G/u,x[D+1]=F,D+=2,N+=3}}for(var H=0;H<l+m;H++)for(var z=0;z<u;z++){var V=6*(H*u+z);I[V+0]=L*(H+0)+0+z,I[V+1]=L*(H+0)+1+z,I[V+2]=L*(H+1)+1+z,I[V+3]=L*(H+0)+0+z,I[V+4]=L*(H+1)+1+z,I[V+5]=L*(H+1)+0+z}return{indices:I,attributes:{POSITION:{size:3,value:P},NORMAL:{size:3,value:M},TEXCOORD_0:{size:2,value:x}}}}var N=function(t){Object(I.a)(n,t);var e=Object(w.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L.a)(this,n);var r=t.id,i=void 0===r?Object(P.c)("cone-geometry"):r,o=t.radius,a=void 0===o?1:o,s=t.cap,u=void 0===s||s;return e.call(this,Object(O.a)(Object(O.a)({},t),{},{id:i,topRadius:0,topCap:Boolean(u),bottomCap:Boolean(u),bottomRadius:a}))}return Object(T.a)(n)}(M),D=n(591),B=function(t){Object(I.a)(n,t);var e=Object(w.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L.a)(this,n);var r=t.id,i=void 0===r?Object(P.c)("cylinder-geometry"):r,o=t.radius,a=void 0===o?1:o;return e.call(this,Object(O.a)(Object(O.a)({},t),{},{id:i,bottomRadius:a,topRadius:a}))}return Object(T.a)(n)}(M),F=n(88),j=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],k=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],G=function(t){Object(I.a)(n,t);var e=Object(w.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L.a)(this,n);var r=t.id,i=void 0===r?Object(P.c)("ico-sphere-geometry"):r,o=U(t),a=o.indices,s=o.attributes;return e.call(this,Object(O.a)(Object(O.a)({},t),{},{id:i,indices:a,attributes:Object(O.a)(Object(O.a)({},s),t.attributes)}))}return Object(T.a)(n)}(C.a);function U(t){var e=t.iterations,n=void 0===e?0:e,r=Math.PI,i=2*r,o=[].concat(j),a=[].concat(k);o.push(),a.push();for(var s=function(){var t={};return function(e,n){var r=(e*=3)>(n*=3)?e:n,i="".concat(e<n?e:n,"|").concat(r);if(i in t)return t[i];var a=o[e],s=o[e+1],u=o[e+2],c=(a+o[n])/2,l=(s+o[n+1])/2,f=(u+o[n+2])/2,p=Math.sqrt(c*c+l*l+f*f);return c/=p,l/=p,f/=p,o.push(c,l,f),t[i]=o.length/3-1}}(),u=0;u<n;u++){for(var c=[],l=0;l<a.length;l+=3){var f=s(a[l+0],a[l+1]),p=s(a[l+1],a[l+2]),h=s(a[l+2],a[l+0]);c.push(h,a[l+0],f,f,a[l+1],p,p,a[l+2],h,f,p,h)}a=c}for(var d=new Array(o.length),y=new Array(o.length/3*2),g=a.length-3;g>=0;g-=3){var m=a[g+0],v=a[g+1],_=a[g+2],b=3*m,E=3*v,A=3*_,C=2*m,S=2*v,O=2*_,T=o[b+0],L=o[b+1],I=o[b+2],w=Math.acos(I/Math.sqrt(T*T+L*L+I*I))/r,P=1-(Math.atan2(L,T)+r)/i,R=o[E+0],M=o[E+1],x=o[E+2],N=Math.acos(x/Math.sqrt(R*R+M*M+x*x))/r,D=1-(Math.atan2(M,R)+r)/i,B=o[A+0],G=o[A+1],U=o[A+2],Z=Math.acos(U/Math.sqrt(B*B+G*G+U*U))/r,H=1-(Math.atan2(G,B)+r)/i,z=[B-R,G-M,U-x],V=[T-R,L-M,I-x],K=new F.a(z).cross(V).normalize(),X=void 0;(0===P||0===D||0===H)&&(0===P||P>.5)&&(0===D||D>.5)&&(0===H||H>.5)&&(o.push(o[b+0],o[b+1],o[b+2]),X=o.length/3-1,a.push(X),y[2*X+0]=1,y[2*X+1]=w,d[3*X+0]=K.x,d[3*X+1]=K.y,d[3*X+2]=K.z,o.push(o[E+0],o[E+1],o[E+2]),X=o.length/3-1,a.push(X),y[2*X+0]=1,y[2*X+1]=N,d[3*X+0]=K.x,d[3*X+1]=K.y,d[3*X+2]=K.z,o.push(o[A+0],o[A+1],o[A+2]),X=o.length/3-1,a.push(X),y[2*X+0]=1,y[2*X+1]=Z,d[3*X+0]=K.x,d[3*X+1]=K.y,d[3*X+2]=K.z),d[b+0]=d[E+0]=d[A+0]=K.x,d[b+1]=d[E+1]=d[A+1]=K.y,d[b+2]=d[E+2]=d[A+2]=K.z,y[C+0]=P,y[C+1]=w,y[S+0]=D,y[S+1]=N,y[O+0]=H,y[O+1]=Z}return{indices:{size:1,value:new Uint16Array(a)},attributes:{POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(d)},TEXCOORD_0:{size:2,value:new Float32Array(y)}}}}var Z=function(t){Object(I.a)(n,t);var e=Object(w.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L.a)(this,n);var r=t.id,i=void 0===r?Object(P.c)("plane-geometry"):r,o=H(t),a=o.indices,s=o.attributes;return e.call(this,Object(O.a)(Object(O.a)({},t),{},{id:i,indices:a,attributes:Object(O.a)(Object(O.a)({},s),t.attributes)}))}return Object(T.a)(n)}(C.a);function H(t){var e=t.type,n=void 0===e?"x,y":e,r=t.offset,i=void 0===r?0:r,o=t.flipCull,a=void 0!==o&&o,s=t.unpack,u=void 0!==s&&s,c=n.split(","),l=t["".concat(c[0],"len")]||1,f=t["".concat(c[1],"len")]||1,p=t["n".concat(c[0])]||1,h=t["n".concat(c[1])]||1,d=(p+1)*(h+1),y=new Float32Array(3*d),g=new Float32Array(3*d),m=new Float32Array(2*d);a&&(l=-l);for(var v=0,_=0,b=0;b<=h;b++)for(var E=0;E<=p;E++){var A=E/p,C=b/h;switch(m[v+0]=a?1-A:A,m[v+1]=C,n){case"x,y":y[_+0]=l*A-.5*l,y[_+1]=f*C-.5*f,y[_+2]=i,g[_+0]=0,g[_+1]=0,g[_+2]=a?1:-1;break;case"x,z":y[_+0]=l*A-.5*l,y[_+1]=i,y[_+2]=f*C-.5*f,g[_+0]=0,g[_+1]=a?1:-1,g[_+2]=0;break;case"y,z":y[_+0]=i,y[_+1]=l*A-.5*l,y[_+2]=f*C-.5*f,g[_+0]=a?1:-1,g[_+1]=0,g[_+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}v+=2,_+=3}for(var S=p+1,O=new Uint16Array(p*h*6),T=0;T<h;T++)for(var L=0;L<p;L++){var I=6*(T*p+L);O[I+0]=(T+0)*S+L,O[I+1]=(T+1)*S+L,O[I+2]=(T+0)*S+L+1,O[I+3]=(T+1)*S+L,O[I+4]=(T+1)*S+L+1,O[I+5]=(T+0)*S+L+1}var w={indices:{size:1,value:O},attributes:{POSITION:{size:3,value:y},NORMAL:{size:3,value:g},TEXCOORD_0:{size:2,value:m}}};return u?function(t){var e=t.indices,n=t.attributes;if(!e)return t;var r=e.value.length,i={};for(var o in n){var a=n[o],s=a.constant,u=a.value,c=a.size;if(!s&&c){for(var l=new u.constructor(r*c),f=0;f<r;++f)for(var p=e.value[f],h=0;h<c;h++)l[f*c+h]=u[p*c+h];i[o]={size:c,value:l}}}return{attributes:Object.assign({},n,i)}}(w):w}var z=function(t){Object(I.a)(n,t);var e=Object(w.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L.a)(this,n);var r=t.id,i=void 0===r?Object(P.c)("sphere-geometry"):r,o=V(t),a=o.indices,s=o.attributes;return e.call(this,Object(O.a)(Object(O.a)({},t),{},{id:i,indices:a,attributes:Object(O.a)(Object(O.a)({},s),t.attributes)}))}return Object(T.a)(n)}(C.a);function V(t){var e=t.nlat,n=void 0===e?10:e,r=t.nlong,i=void 0===r?10:r,o=t.radius,a=void 0===o?1:o,s=Math.PI-0,u=2*Math.PI-0,c=(n+1)*(i+1);if("number"===typeof a){var l=a;a=function(t,e,n,r,i){return l}}for(var f=new Float32Array(3*c),p=new Float32Array(3*c),h=new Float32Array(2*c),d=new(c>65535?Uint32Array:Uint16Array)(n*i*6),y=0;y<=n;y++)for(var g=0;g<=i;g++){var m=g/i,v=y/n,_=g+y*(i+1),b=2*_,E=3*_,A=u*m,C=s*v,S=Math.sin(A),O=Math.cos(A),T=Math.sin(C),L=O*T,I=Math.cos(C),w=S*T,P=a(L,I,w,m,v);f[E+0]=P*L,f[E+1]=P*I,f[E+2]=P*w,p[E+0]=L,p[E+1]=I,p[E+2]=w,h[b+0]=m,h[b+1]=1-v}for(var R=i+1,M=0;M<i;M++)for(var x=0;x<n;x++){var N=6*(M*n+x);d[N+0]=x*R+M,d[N+1]=x*R+M+1,d[N+2]=(x+1)*R+M,d[N+3]=(x+1)*R+M,d[N+4]=x*R+M+1,d[N+5]=(x+1)*R+M+1}return{indices:{size:1,value:d},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:h}}}}var K=n(364),X=n(627),q=n(844),J=n(97),W=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Y={modelMatrix:W,viewMatrix:W,projectionMatrix:W,cameraPositionWorld:[0,0,0]};var Q="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",$={name:"project",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e={};return void 0!==t.modelMatrix&&(e.modelMatrix=t.modelMatrix),void 0!==t.viewMatrix&&(e.viewMatrix=t.viewMatrix),void 0!==t.projectionMatrix&&(e.projectionMatrix=t.projectionMatrix),void 0!==t.cameraPositionWorld&&(e.cameraPositionWorld=t.cameraPositionWorld),void 0===t.projectionMatrix&&void 0===t.viewMatrix||(e.viewProjectionMatrix=new J.a(t.projectionMatrix).multiplyRight(t.viewMatrix)),e},vs:"".concat(Q,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(Q)},tt={lightDirection:new Float32Array([1,1,2])};var et={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e={};return t.lightDirection&&(e.dirlight_uLightDirection=t.lightDirection),e},dependencies:[$]},nt=n(589),rt=n(505),it=n(846),ot=n(23)},530:function(t,e,n){"use strict";n.r(e),n.d(e,"BrushingExtension",(function(){return f})),n.d(e,"DataFilterExtension",(function(){return I})),n.d(e,"Fp64Extension",(function(){return F})),n.d(e,"PathStyleExtension",(function(){return Z})),n.d(e,"FillStyleExtension",(function(){return J})),n.d(e,"ClipExtension",(function(){return W.a})),n.d(e,"MaskExtension",(function(){return $})),n.d(e,"project64",(function(){return N}));var r=n(7),i=n(6),o=n(14),a=n(15),s=n(352),u=n(168),c={source:0,target:1,custom:2,source_target:3},l={name:"brushing",dependencies:[u.a],vs:"\n  uniform bool brushing_enabled;\n  uniform int brushing_target;\n  uniform vec2 brushing_mousePos;\n  uniform float brushing_radius;\n\n  #ifdef NON_INSTANCED_MODEL\n  attribute vec2 brushingTargets;\n  #else\n  attribute vec2 instanceBrushingTargets;\n  #endif\n\n  varying float brushing_isVisible;\n\n  bool brushing_isPointInRange(vec2 position) {\n    if (!brushing_enabled) {\n      return true;\n    }\n    vec2 source_commonspace = project_position(position);\n    vec2 target_commonspace = project_position(brushing_mousePos);\n    float distance = length((target_commonspace - source_commonspace) / project_uCommonUnitsPerMeter.xy);\n\n    return distance <= brushing_radius;\n  }\n\n  bool brushing_arePointsInRange(vec2 sourcePos, vec2 targetPos) {\n    return brushing_isPointInRange(sourcePos) || brushing_isPointInRange(targetPos);\n  }\n\n  void brushing_setVisible(bool visible) {\n    brushing_isVisible = float(visible);\n  }\n",fs:"\n  uniform bool brushing_enabled;\n  varying float brushing_isVisible;\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    vec2 brushingTarget;\n    vec2 brushingSource;\n    if (brushing_target == 3) {\n      brushingTarget = geometry.worldPositionAlt.xy;\n      brushingSource = geometry.worldPosition.xy;\n    } else if (brushing_target == 0) {\n      brushingTarget = geometry.worldPosition.xy;\n    } else if (brushing_target == 1) {\n      brushingTarget = geometry.worldPositionAlt.xy;\n    } else {\n      #ifdef NON_INSTANCED_MODEL\n      brushingTarget = brushingTargets;\n      #else\n      brushingTarget = instanceBrushingTargets;\n      #endif\n    }\n    bool visible;\n    if (brushing_target == 3) {\n      visible = brushing_arePointsInRange(brushingSource, brushingTarget);\n    } else {\n      visible = brushing_isPointInRange(brushingTarget);\n    }\n    brushing_setVisible(visible);\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (brushing_enabled && brushing_isVisible < 0.5) {\n      discard;\n    }\n  "},getUniforms:function(t){if(!t||!t.viewport)return{};var e=t.brushingEnabled,n=void 0===e||e,r=t.brushingRadius,i=void 0===r?1e4:r,o=t.brushingTarget,a=void 0===o?"source":o,s=t.mousePosition,u=t.viewport;return{brushing_enabled:Boolean(n&&s&&u.containsPixel(s)),brushing_radius:i,brushing_target:c[a]||0,brushing_mousePos:s?u.unproject([s.x-u.x,s.y-u.y]):[0,0]}}},f=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(t){return{modules:[l]}}},{key:"initializeState",value:function(t,e){var n=this,r=this.getAttributeManager();r&&r.add({brushingTargets:{size:2,accessor:"getBrushingTarget",update:!this.props.getBrushingTarget&&e.useConstantTargetPositions,shaderAttributes:{brushingTargets:{divisor:0},instanceBrushingTargets:{divisor:1}}}}),e.onMouseMove=function(){n.getCurrentLayer().setNeedsRedraw()},this.context.deck&&this.context.deck.eventManager.on({pointermove:e.onMouseMove,pointerleave:e.onMouseMove})}},{key:"finalizeState",value:function(t){this.context.deck&&this.context.deck.eventManager.off({pointermove:t.onMouseMove,pointerleave:t.onMouseMove})}},{key:"useConstantTargetPositions",value:function(t){t.constant=!0,t.value=new Float32Array(2)}}]),n}(s.a);f.extensionName="BrushingExtension",f.defaultProps={getBrushingTarget:{type:"accessor",value:[0,0]},brushingTarget:"source",brushingEnabled:!0,brushingRadius:1e4};var p=n(5),h="\nuniform DATAFILTER_TYPE filter_min;\nuniform DATAFILTER_TYPE filter_softMin;\nuniform DATAFILTER_TYPE filter_softMax;\nuniform DATAFILTER_TYPE filter_max;\nuniform bool filter_useSoftMargin;\nuniform bool filter_enabled;\nuniform bool filter_transformSize;\n\n#ifdef NON_INSTANCED_MODEL\n  #define DATAFILTER_ATTRIB filterValues\n  #define DATAFILTER_ATTRIB_64LOW filterValues64Low\n#else\n  #define DATAFILTER_ATTRIB instanceFilterValues\n  #define DATAFILTER_ATTRIB_64LOW instanceFilterValues64Low\n#endif\n\nattribute DATAFILTER_TYPE DATAFILTER_ATTRIB;\n#ifdef DATAFILTER_DOUBLE\n  attribute DATAFILTER_TYPE DATAFILTER_ATTRIB_64LOW;\n\n  uniform DATAFILTER_TYPE filter_min64High;\n  uniform DATAFILTER_TYPE filter_max64High;\n#endif\n\nvarying float dataFilter_value;\n\nfloat dataFilter_reduceValue(float value) {\n  return value;\n}\nfloat dataFilter_reduceValue(vec2 value) {\n  return min(value.x, value.y);\n}\nfloat dataFilter_reduceValue(vec3 value) {\n  return min(min(value.x, value.y), value.z);\n}\nfloat dataFilter_reduceValue(vec4 value) {\n  return min(min(value.x, value.y), min(value.z, value.w));\n}\nvoid dataFilter_setValue(DATAFILTER_TYPE valueFromMin, DATAFILTER_TYPE valueFromMax) {\n  if (filter_enabled) {\n    if (filter_useSoftMargin) {\n      dataFilter_value = dataFilter_reduceValue(\n        smoothstep(filter_min, filter_softMin, valueFromMin) *\n        (1.0 - smoothstep(filter_softMax, filter_max, valueFromMax))\n      );\n    } else {\n      dataFilter_value = dataFilter_reduceValue(\n        step(filter_min, valueFromMin) * step(valueFromMax, filter_max)\n      );\n    }\n  } else {\n    dataFilter_value = 1.0;\n  }\n}\n",d="\nuniform bool filter_transformColor;\nvarying float dataFilter_value;\n",y=function(t){if(!t||!t.extensions)return{};var e=t.filterRange,n=void 0===e?[-1,1]:e,r=t.filterEnabled,i=void 0===r||r,o=t.filterTransformSize,a=void 0===o||o,s=t.filterTransformColor,u=void 0===s||s,c=t.filterSoftRange||n,l=Number.isFinite(n[0])?{filter_min:n[0],filter_softMin:c[0],filter_softMax:c[1],filter_max:n[1]}:{filter_min:n.map((function(t){return t[0]})),filter_softMin:c.map((function(t){return t[0]})),filter_softMax:c.map((function(t){return t[1]})),filter_max:n.map((function(t){return t[1]}))};return l.filter_enabled=i,l.filter_useSoftMargin=Boolean(t.filterSoftRange),l.filter_transformSize=i&&a,l.filter_transformColor=i&&u,l},g={"vs:#main-start":"\n    #ifdef DATAFILTER_DOUBLE\n      dataFilter_setValue(\n        DATAFILTER_ATTRIB - filter_min64High + DATAFILTER_ATTRIB_64LOW,\n        DATAFILTER_ATTRIB - filter_max64High + DATAFILTER_ATTRIB_64LOW\n      );\n    #else\n      dataFilter_setValue(DATAFILTER_ATTRIB, DATAFILTER_ATTRIB);\n    #endif\n  ","vs:DECKGL_FILTER_SIZE":"\n    if (filter_transformSize) {\n      size = size * dataFilter_value;\n    }\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (dataFilter_value == 0.0) discard;\n    if (filter_transformColor) {\n      color.a *= dataFilter_value;\n    }\n  "},m={name:"data-filter",vs:h,fs:d,inject:g,getUniforms:y},v={name:"data-filter-fp64",vs:h,fs:d,inject:g,getUniforms:function(t){if(!t||!t.extensions)return{};var e=y(t);if(Number.isFinite(e.filter_min)){var n=Math.fround(e.filter_min);e.filter_min-=n,e.filter_softMin-=n,e.filter_min64High=n;var r=Math.fround(e.filter_max);e.filter_max-=r,e.filter_softMax-=r,e.filter_max64High=r}else{var i=e.filter_min.map(Math.fround);e.filter_min=e.filter_min.map((function(t,e){return t-i[e]})),e.filter_softMin=e.filter_softMin.map((function(t,e){return t-i[e]})),e.filter_min64High=i;var o=e.filter_max.map(Math.fround);e.filter_max=e.filter_max.map((function(t,e){return t-o[e]})),e.filter_softMax=e.filter_softMax.map((function(t,e){return t-o[e]})),e.filter_max64High=o}return e}},_=n(3),b=n(126),E=n(202),A=n(17),C=n(295);var S={blend:!0,blendFunc:[1,1,1,1],blendEquation:[32774,32774],depthTest:!1},O=n(299),T=n(365),L={1:"float",2:"vec2",3:"vec3",4:"vec4"},I=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.filterSize,o=void 0===i?1:i,a=t.fp64,s=void 0!==a&&a,u=t.countItems,c=void 0!==u&&u;if(Object(r.a)(this,n),!L[o])throw new Error("filterSize out of range");return e.call(this,{filterSize:o,fp64:s,countItems:c})}return Object(i.a)(n,[{key:"getShaders",value:function(t){var e=t.opts,n=e.filterSize,r=e.fp64;return{modules:[r?v:m],defines:{DATAFILTER_TYPE:L[n],DATAFILTER_DOUBLE:Boolean(r)}}}},{key:"initializeState",value:function(t,e){var n=this.getAttributeManager();n&&n.add({filterValues:{size:e.opts.filterSize,type:e.opts.fp64?5130:5126,accessor:"getFilterValue",shaderAttributes:{filterValues:{divisor:0},instanceFilterValues:{divisor:1}}}});var r=this.context.gl;if(n&&e.opts.countItems){var i=function(t){return t.getExtension("EXT_float_blend")&&(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float"))}(r);n.add({filterIndices:{size:i?1:2,vertexOffset:1,type:5121,normalized:!0,accessor:function(t,e){var n=e.index,r=t&&t.__source?t.__source.index:n;return i?(r+1)%255:[(r+1)%255,Math.floor(r/255)%255]},shaderAttributes:{filterPrevIndices:{vertexOffset:0},filterIndices:{vertexOffset:1}}}});var o=function(t,e){return e?new b.a(t,{width:1,height:1,attachments:Object(_.a)({},36064,new E.a(t,{format:Object(A.j)(t)?34836:6408,type:5126,mipmaps:!1}))}):new b.a(t,{width:256,height:64,depth:!1})}(r,i),a=function(t,e,n){return e.defines.NON_INSTANCED_MODEL=1,n&&(e.defines.FLOAT_TARGET=1),new C.a(t,Object(p.a)({id:"data-filter-aggregation-model",vertexCount:1,isInstanced:!1,drawMode:0,vs:"#define SHADER_NAME data-filter-vertex-shader\n\n#ifdef FLOAT_TARGET\n  attribute float filterIndices;\n  attribute float filterPrevIndices;\n#else\n  attribute vec2 filterIndices;\n  attribute vec2 filterPrevIndices;\n#endif\n\nvarying vec4 vColor;\nconst float component = 1.0 / 255.0;\n\nvoid main() {\n  #ifdef FLOAT_TARGET\n    dataFilter_value *= float(filterIndices != filterPrevIndices);\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n    vColor = vec4(0.0, 0.0, 0.0, 1.0);\n  #else\n    // Float texture is not supported: pack result into 4 channels x 256 px x 64px\n    dataFilter_value *= float(filterIndices.x != filterPrevIndices.x);\n    float col = filterIndices.x;\n    float row = filterIndices.y * 4.0;\n    float channel = floor(row);\n    row = fract(row);\n    vColor = component * vec4(bvec4(channel == 0.0, channel == 1.0, channel == 2.0, channel == 3.0));\n    gl_Position = vec4(col * 2.0 - 1.0, row * 2.0 - 1.0, 0.0, 1.0);\n  #endif\n  gl_PointSize = 1.0;\n}\n",fs:"#define SHADER_NAME data-filter-fragment-shader\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main() {\n  if (dataFilter_value < 0.5) {\n    discard;\n  }\n  gl_FragColor = vColor;\n}\n"},e))}(r,e.getShaders(e),i);this.setState({filterFBO:o,filterModel:a})}}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps;if(this.state.filterModel){var r=this.getAttributeManager().attributes.filterValues.needsUpdate()||e.filterEnabled!==n.filterEnabled||e.filterRange!==n.filterRange||e.filterSoftRange!==n.filterSoftRange;r&&this.setState({filterNeedsUpdate:r})}}},{key:"draw",value:function(t,e){var n=this.state,r=n.filterFBO,i=n.filterModel,o=n.filterNeedsUpdate,a=this.props.onFilteredItemsChange;if(o&&a&&i){var s=this.getAttributeManager().attributes,u=s.filterValues,c=s.filterIndices;i.setVertexCount(this.getNumInstances());var l=this.context.gl;Object(O.a)(l,{framebuffer:r,color:[0,0,0,0]}),i.updateModuleSettings(t.moduleParameters).setAttributes(Object(p.a)(Object(p.a)({},u.getShaderAttributes()),c&&c.getShaderAttributes())).draw({framebuffer:r,parameters:Object(p.a)(Object(p.a)({},S),{},{viewport:[0,0,r.width,r.height]})});for(var f=Object(T.c)(r),h=0,d=0;d<f.length;d++)h+=f[d];a({id:this.id,count:h}),this.state.filterNeedsUpdate=!1}}},{key:"finalizeState",value:function(){var t=this.state,e=t.filterFBO,n=t.filterModel;e&&(e.color.delete(),e.delete(),n.delete())}}]),n}(s.a);I.extensionName="DataFilterExtension",I.defaultProps={getFilterValue:{type:"accessor",value:0},onFilteredItemsChange:{type:"function",value:null,compare:!1},filterEnabled:!0,filterRange:[-1,1],filterSoftRange:null,filterTransformSize:!0,filterTransformColor:!0};var w=n(31),P=n(844),R=n(134),M=P.a.fp64ify,x=P.a.fp64ifyMatrix4,N={name:"project64",dependencies:[u.a,P.a],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project_uViewProjectionMatrixFP64[16];\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sum_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  out_val[0] = mul_fp64(pos_fp64[0], WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(pos_fp64[1], WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_size(position.z);\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow.xy, projectedPosition64xy);\n\n  vec2 commonPosition64[4];\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  commonPosition64[3] = vec2(1.0, 0.0);\n\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_common_position_to_clipspace_fp64(commonPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, commonPosition\n  );\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;if(t.viewport){var e=t.viewport,n=e.viewProjectionMatrix,r=e.scale;return B({viewProjectionMatrix:n,scale:r})}return{}}},D={},B=Object(R.a)((function(t){var e=t.viewProjectionMatrix,n=t.scale,r=x(e),i=M(n);return{project_uViewProjectionMatrixFP64:r,project64_uViewProjectionMatrix:r,project64_uScale:i}}));var F=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(t){var e=this.props.coordinateSystem;if(e!==w.a.LNGLAT&&e!==w.a.DEFAULT)throw new Error("fp64: coordinateSystem must be LNGLAT");return{modules:[N]}}}]),n}(s.a);F.extensionName="Fp64Extension";var j=n(273),k={inject:{"vs:#decl":"\nattribute vec2 instanceDashArrays;\nattribute float instanceDashOffsets;\nvarying vec2 vDashArray;\nvarying float vDashOffset;\n","vs:#main-end":"\nvDashArray = instanceDashArrays;\nvDashOffset = instanceDashOffsets / width.x;\n","fs:#decl":"\nuniform float dashAlignMode;\nuniform float capType;\nuniform bool dashGapPickable;\nvarying vec2 vDashArray;\nvarying float vDashOffset;\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n","fs:#main-start":"\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n  float unitLength = solidLength + gapLength;\n\n  float offset;\n\n  if (unitLength > 0.0) {\n    if (dashAlignMode == 0.0) {\n      offset = vDashOffset;\n    } else {\n      unitLength = vPathLength / round(vPathLength / unitLength);\n      offset = solidLength / 2.0;\n    }\n\n    float unitOffset = mod(clamp(vPathPosition.y, 0.0, vPathLength) + offset, unitLength);\n\n    if (gapLength > 0.0 && unitOffset > solidLength) {\n      if (capType <= 0.5) {\n        if (!(dashGapPickable && picking_uActive)) {\n          discard;\n        }\n      } else {\n        float distToEnd = length(vec2(\n          min(unitOffset - solidLength, unitLength - unitOffset),\n          vPathPosition.x\n        ));\n        if (distToEnd > 1.0) {\n          if (!(dashGapPickable && picking_uActive)) {\n            discard;\n          }\n        }\n      }\n    }\n  }\n"}},G={inject:{"vs:#decl":"\nattribute float instanceOffsets;\n","vs:DECKGL_FILTER_SIZE":"\n  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\n  size *= offsetWidth;\n","vCornerOffset = offsetVec;":"\n  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\n  vec2 offsetCenter = -instanceOffsets * (isCap ? perp : miterVec * miterSize) * 2.0;\n  vCornerOffset = vCornerOffset * offsetWidth - offsetCenter;\n","fs:#main-start":"\n  float isInside;\n  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);\n  if (isInside == 0.0) {\n    discard;\n  }\n"}},U=n(143),Z=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.dash,o=void 0!==i&&i,a=t.offset,s=void 0!==a&&a,u=t.highPrecisionDash,c=void 0!==u&&u;return Object(r.a)(this,n),e.call(this,{dash:o||c,offset:s,highPrecisionDash:c})}return Object(i.a)(n,[{key:"isEnabled",value:function(t){return t.state.pathTesselator}},{key:"getShaders",value:function(t){if(!t.isEnabled(this))return null;var e={};return t.opts.dash&&(e=Object(j.a)(e,k)),t.opts.offset&&(e=Object(j.a)(e,G)),e}},{key:"initializeState",value:function(t,e){var n=this.getAttributeManager();n&&e.isEnabled(this)&&(e.enabled=!0,e.opts.dash&&n.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),e.opts.highPrecisionDash&&n.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:e.getDashOffsets.bind(this)}}),e.opts.offset&&n.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}},{key:"updateState",value:function(t,e){if(e.isEnabled(this)){var n={};e.opts.dash&&(n.dashAlignMode=this.props.dashJustified?1:0,n.dashGapPickable=Boolean(this.props.dashGapPickable)),this.state.model.setUniforms(n)}}},{key:"getDashOffsets",value:function(t){for(var e,n,r=[0],i="XY"===this.props.positionFormat?2:3,o=Array.isArray(t[0]),a=o?t.length:t.length/i,s=0;s<a-1;s++)e=o?t[s]:t.slice(s*i,s*i+i),e=this.projectPosition(e),s>0&&(r[s]=r[s-1]+Object(U.a)(n,e)),n=e;return r}}]),n}(s.a);Z.extensionName="PathStyleExtension",Z.defaultProps={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};var H=n(28),z=n(16),V=n.n(z);var K,X={name:"fill-pattern",vs:"\n#ifdef NON_INSTANCED_MODEL\n  #define FILL_PATTERN_FRAME_ATTRIB fillPatternFrames\n  #define FILL_PATTERN_SCALE_ATTRIB fillPatternScales\n  #define FILL_PATTERN_OFFSET_ATTRIB fillPatternOffsets\n#else\n  #define FILL_PATTERN_FRAME_ATTRIB instanceFillPatternFrames\n  #define FILL_PATTERN_SCALE_ATTRIB instanceFillPatternScales\n  #define FILL_PATTERN_OFFSET_ATTRIB instanceFillPatternOffsets\n#endif\n\nattribute vec4 FILL_PATTERN_FRAME_ATTRIB;\nattribute float FILL_PATTERN_SCALE_ATTRIB;\nattribute vec2 FILL_PATTERN_OFFSET_ATTRIB;\n\nuniform bool fill_patternEnabled;\nuniform vec2 fill_patternTextureSize;\n\nvarying vec2 fill_uv;\nvarying vec4 fill_patternBounds;\nvarying vec3 fill_patternPlacement;\n",fs:"\nuniform bool fill_patternEnabled;\nuniform bool fill_patternMask;\nuniform sampler2D fill_patternTexture;\nuniform vec2 fill_uvCoordinateOrigin;\n\nvarying vec4 fill_patternBounds;\nvarying vec3 fill_patternPlacement;\nvarying vec2 fill_uv;\n\nconst float FILL_UV_SCALE = 512.0 / 40000000.0;\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    fill_uv = geometry.position.xy;\n  ","vs:DECKGL_FILTER_COLOR":"\n    if (fill_patternEnabled) {\n      fill_patternBounds = FILL_PATTERN_FRAME_ATTRIB / vec4(fill_patternTextureSize, fill_patternTextureSize);\n      fill_patternPlacement.xy = FILL_PATTERN_OFFSET_ATTRIB;\n      fill_patternPlacement.z = FILL_PATTERN_SCALE_ATTRIB * FILL_PATTERN_FRAME_ATTRIB.w;\n    }\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (fill_patternEnabled) {\n      float scale = FILL_UV_SCALE * fill_patternPlacement.z;\n      vec2 patternUV = mod(mod(fill_uvCoordinateOrigin, scale) + fill_uv, scale) / scale;\n      patternUV = mod(fill_patternPlacement.xy + patternUV, 1.0);\n\n      vec2 texCoords = fill_patternBounds.xy + fill_patternBounds.zw * patternUV;\n\n      vec4 patternColor = texture2D(fill_patternTexture, texCoords);\n      color.a *= patternColor.a;\n      if (!fill_patternMask) {\n        color.rgb = patternColor.rgb;\n      }\n    }\n  "},dependencies:[u.a],getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if("fillPatternTexture"in t){var n=t.fillPatternTexture;return{fill_patternTexture:n,fill_patternTextureSize:[n.width,n.height]}}if(t.viewport){var r=t.viewport,i=t.fillPatternMask,o=void 0===i||i,a=t.fillPatternEnabled,s=void 0===a||a,u=e.project_uCoordinateOrigin,c=e.project_uCoordinateSystem,l=c===w.a.CARTESIAN?u:r.projectPosition(u);return{fill_uvCoordinateOrigin:l.slice(0,2),fill_patternMask:o,fill_patternEnabled:s}}return{}}},q=(K={},Object(_.a)(K,10241,9729),Object(_.a)(K,10240,9729),Object(_.a)(K,10242,33071),Object(_.a)(K,10243,33071),K),J=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.pattern,o=void 0!==i&&i;return Object(r.a)(this,n),e.call(this,{pattern:o})}return Object(i.a)(n,[{key:"isEnabled",value:function(t){return t.getAttributeManager()&&!t.state.pathTesselator}},{key:"getShaders",value:function(t){return t.isEnabled(this)?{modules:[t.opts.pattern&&X].filter(Boolean)}:null}},{key:"initializeState",value:function(t,e){if(e.isEnabled(this)){var n=this.getAttributeManager();e.opts.pattern&&n.add({fillPatternFrames:{size:4,accessor:"getFillPattern",transform:e.getPatternFrame.bind(this),shaderAttributes:{fillPatternFrames:{divisor:0},instanceFillPatternFrames:{divisor:1}}},fillPatternScales:{size:1,accessor:"getFillPatternScale",defaultValue:1,shaderAttributes:{fillPatternScales:{divisor:0},instanceFillPatternScales:{divisor:1}}},fillPatternOffsets:{size:2,accessor:"getFillPatternOffset",shaderAttributes:{fillPatternOffsets:{divisor:0},instanceFillPatternOffsets:{divisor:1}}}}),this.setState({emptyTexture:new E.a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}}},{key:"updateState",value:function(t,e){var n=t.props,r=t.oldProps;e.isEnabled(this)&&(n.fillPatternAtlas&&n.fillPatternAtlas!==r.fillPatternAtlas&&e.loadPatternAtlas.call(this,n),n.fillPatternMapping&&n.fillPatternMapping!==r.fillPatternMapping&&e.loadPatternMapping.call(this,n))}},{key:"draw",value:function(t,e){if(e.isEnabled(this)){var n=this.state.patternTexture;this.setModuleParameters({fillPatternTexture:n||this.state.emptyTexture})}}},{key:"finalizeState",value:function(){var t=this.state,e=t.patternTexture,n=t.emptyTexture;null===e||void 0===e||e.delete(),null===n||void 0===n||n.delete()}},{key:"loadPatternAtlas",value:function(){var t=Object(H.a)(V.a.mark((function t(e){var n,r,i,o,a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.fillPatternAtlas,r=e.fetch,null===(i=this.state.patternTexture)||void 0===i||i.delete(),this.setState({patternTexture:null}),"string"!==typeof(o=n)){t.next=8;break}return t.next=7,r(o,{propName:"fillPatternAtlas",layer:this});case 7:o=t.sent;case 8:a=o instanceof E.a?o:new E.a(this.context.gl,{data:o,parameters:q}),this.setState({patternTexture:a});case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadPatternMapping",value:function(){var t=Object(H.a)(V.a.mark((function t(e){var n,r,i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.fillPatternMapping,r=e.fetch,this.setState({patternMapping:null}),"string"!==typeof(i=n)){t.next=7;break}return t.next=6,r(i,{propName:"fillPatternMapping",layer:this});case 6:i=t.sent;case 7:this.setState({patternMapping:i}),this.getAttributeManager().invalidate("getFillPattern"),this.setNeedsUpdate();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPatternFrame",value:function(t){var e=this.state.patternMapping,n=e&&e[t];return n?[n.x,n.y,n.width,n.height]:[0,0,0,0]}}]),n}(s.a);J.extensionName="FillStyleExtension",J.defaultProps={fillPatternEnabled:!0,fillPatternAtlas:null,fillPatternMapping:null,fillPatternMask:!0,getFillPattern:{type:"accessor",value:function(t){return t.pattern}},getFillPatternScale:{type:"accessor",value:1},getFillPatternOffset:{type:"accessor",value:[0,0]}};var W=n(611),Y=n(35),Q={name:"mask",dependencies:[u.a],vs:"\nuniform vec4 mask_bounds;\nuniform bool mask_maskByInstance;\nvec2 mask_getCoords(vec4 position) {\n  return (position.xy - mask_bounds.xy) / (mask_bounds.zw - mask_bounds.xy);\n}\n",fs:"\nuniform sampler2D mask_texture;\nuniform int mask_channel;\nuniform bool mask_enabled;\nbool mask_isInBounds(vec2 texCoords) {\n  if (!mask_enabled) {\n    return true;\n  }\n  vec4 maskColor = texture2D(mask_texture, texCoords);\n  float maskValue = 1.0;\n  if (mask_channel == 0) {\n    maskValue = maskColor.r;\n  } else if (mask_channel == 1) {\n    maskValue = maskColor.g;\n  } else if (mask_channel == 2) {\n    maskValue = maskColor.b;\n  } else if (mask_channel == 3) {\n    maskValue = maskColor.a;\n  }\n  return maskValue < 0.5;\n}\n",inject:{"vs:#decl":"\nvarying vec2 mask_texCoords;\n","vs:#main-end":"\n   vec4 mask_common_position;\n   if (mask_maskByInstance) {\n     mask_common_position = project_position(vec4(geometry.worldPosition, 1.0));\n   } else {\n     mask_common_position = geometry.position;\n   }\n   mask_texCoords = mask_getCoords(mask_common_position);\n","fs:#decl":"\nvarying vec2 mask_texCoords;\n","fs:#main-start":"\n  if (mask_enabled) {\n    bool mask = mask_isInBounds(mask_texCoords);\n\n    // Debug: show extent of render target\n    // gl_FragColor = vec4(mask_texCoords, 0.0, 1.0);\n    gl_FragColor = texture2D(mask_texture, mask_texCoords);\n\n    if (!mask) discard;\n  }\n"},getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return t.maskMap&&(e.mask_texture=t.maskMap),e}},$=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){var t="instancePositions"in this.getAttributeManager().attributes;return"maskByInstance"in this.props&&(t=this.props.maskByInstance),this.state.maskByInstance=t,{modules:[Q]}}},{key:"draw",value:function(t){var e=t.uniforms,n=t.context,r=t.moduleParameters;e.mask_maskByInstance=this.state.maskByInstance;var i=this.props.maskId,o=r.maskChannels,a=n.viewport;if(o&&o[i]){var s=o[i],u=s.index,c=s.bounds,l=s.coordinateOrigin,f=o[i].coordinateSystem;e.mask_enabled=!0,e.mask_channel=u,f===w.a.DEFAULT&&(f=a.isGeospatial?w.a.LNGLAT:w.a.CARTESIAN);var p={modelMatrix:null,fromCoordinateOrigin:l,fromCoordinateSystem:f},h=this.projectPosition([c[0],c[1],0],p),d=this.projectPosition([c[2],c[3],0],p);e.mask_bounds=[h[0],h[1],d[0],d[1]]}else i&&Y.a.warn("Could not find a mask layer with id: ".concat(i))(),e.mask_enabled=!1}}]),n}(s.a);$.extensionName="MaskExtension",$.defaultProps={maskId:""}},534:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(371);function i(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat(Object(r.a)(t),'"'))}}},671:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIntermediatePosition=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},e.GeoJsonEditMode=void 0;var r=c(n(776)),i=c(n(697)),o=c(n(533)),a=c(n(831)),s=n(672),u=n(675);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d={type:"FeatureCollection",features:[]},y=[],g=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=[],(n="_clickSequence")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n,c;return e=t,(n=[{key:"getGuides",value:function(t){return d}},{key:"getTooltips",value:function(t){return y}},{key:"getSelectedFeature",value:function(t){return 1===t.selectedIndexes.length?t.data.features[t.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(t){var e=this.getSelectedFeature(t);return e?e.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(t){var e=t.data.features;return{type:"FeatureCollection",features:t.selectedIndexes.map((function(t){return e[t]}))}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(t){var e=t.mapCoords;this._clickSequence.push(e)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(t){return this.getGuides(t).features.find((function(t){return t.properties&&"tentative"===t.properties.guideType}))}},{key:"isSelectionPicked",value:function(t,e){if(!t.length)return!1;var n=(0,s.getNonGuidePicks)(t).map((function(t){return t.index})),r=(0,s.getPickedEditHandles)(t).map((function(t){return t.properties.featureIndex})),i=new Set([].concat(l(n),l(r)));return e.selectedIndexes.some((function(t){return i.has(t)}))}},{key:"rewindPolygon",value:function(t){var e=t.geometry;return"Polygon"===e.type||"MultiPolygon"===e.type?(0,a.default)(t):t}},{key:"getAddFeatureAction",value:function(t,e){var n=t,r="Feature"===n.type?n:{type:"Feature",properties:{},geometry:n},i=this.rewindPolygon(r),o=new u.ImmutableFeatureCollection(e).addFeature(i).getObject();return{updatedData:o,editType:"addFeature",editContext:{featureIndexes:[o.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(t,e){var n,r=t.features,i=new u.ImmutableFeatureCollection(e),o=i.getObject().features.length,a=[],s=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(r);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=c.properties,p=c.geometry;i=i.addFeature({type:"Feature",properties:l,geometry:p}),a.push(o+a.length)}}catch(h){s.e(h)}finally{s.f()}return{updatedData:i.getObject(),editType:"addFeature",editContext:{featureIndexes:a}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(t,e){var n=t,a=this.getSelectedFeature(e),s=e.modeConfig;if(s&&s.booleanOperation){if(!a||"Polygon"!==a.geometry.type&&"MultiPolygon"!==a.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var c,l="Feature"===n.type?n:{type:"Feature",geometry:n};if("union"===s.booleanOperation)c=(0,r.default)(a,l);else if("difference"===s.booleanOperation)c=(0,i.default)(a,l);else{if("intersection"!==s.booleanOperation)return console.warn("Invalid booleanOperation ".concat(s.booleanOperation)),null;c=(0,o.default)(a,l)}if(!c)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var f=e.selectedIndexes[0];return{updatedData:new u.ImmutableFeatureCollection(e.data).replaceGeometry(f,c.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[f]}}}return this.getAddFeatureAction(t,e.data)}},{key:"createTentativeFeature",value:function(t){return null}},{key:"handleClick",value:function(t,e){}},{key:"handlePointerMove",value:function(t,e){var n=this.createTentativeFeature(e);n&&e.onEdit({updatedData:e.data,editType:"updateTentativeFeature",editContext:{feature:n}})}},{key:"handleStartDragging",value:function(t,e){}},{key:"handleStopDragging",value:function(t,e){}},{key:"handleDragging",value:function(t,e){}},{key:"handleKeyUp",value:function(t,e){"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}])&&h(e.prototype,n),c&&h(e,c),t}();e.GeoJsonEditMode=g},672:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(t))return e;return[255*t[0],255*t[1],255*t[2],255*t[3]]},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(p(n),[i]),r)){r(e,n);break}return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var a={type:"LineString",coordinates:[t,e]},u=(0,s.point)(n),c=(0,o.default)(u,a),l=(0,i.default)(t,e),f=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?l-90:l-270,p=(0,r.default)(e,c,f),h=(0,r.default)(t,c,f);return[p.geometry.coordinates,h.geometry.coordinates]},e.distance2d=y,e.mix=g,e.nearestPointOnProjectedLine=function(t,e,n){var r=new c.default(n),i=t.geometry.coordinates.map((function(t){var e=f(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?0:o;return r.project([n,i,a])})),o=f(r.project(e.geometry.coordinates),2),a=o[0],s=o[1],u=1/0,l={};i.forEach((function(t,e){var n=f(t,2),r=n[0],o=n[1];if(0!==e){var c=f(i[e-1],2),p=c[0],h=c[1],d=h-o,y=r-p,g=p*o-r*h,m=d*d+y*y,v=Math.abs(d*a+y*s+g)/Math.sqrt(m);v<u&&(u=v,l={index:e,x0:(y*(y*a-d*s)-d*g)/m,y0:(d*(-y*a+d*s)-y*g)/m})}}));var p=l,h=p.index,d=p.x0,m=p.y0,v=f(i[h-1],3),_=v[0],b=v[1],E=v[2],A=void 0===E?0:E,C=f(i[h],3),S=C[0],O=C[1],T=C[2],L=void 0===T?0:T,I=y(_,b,S,O),w=y(_,b,d,m),P=g(A,L,w/I);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([d,m,P])},properties:{dist:u,index:h-1}}},e.nearestPointOnLine=function(t,e,n){var r,i,o;n&&(o=new c.default(n));var l=(0,s.point)([1/0,1/0],{dist:1/0});if(!(null===(r=t.geometry)||void 0===r?void 0:r.coordinates.length)||(null===(i=t.geometry)||void 0===i?void 0:i.coordinates.length)<2)return l;return(0,a.flattenEach)(t,(function(t){var n,r,i,a,c,f,p,h=(0,u.getCoords)(t),d=(0,u.getCoords)(e);if(h.length>1&&d.length){var y,g;o?(y=h.map((function(t){return o.project(t)})),g=o.project(d)):(y=h,g=d);for(var m=1;m<y.length;m++){if(y[m][0]!==y[m-1][0]){var v=(y[m][1]-y[m-1][1])/(y[m][0]-y[m-1][0]),_=y[m][1]-v*y[m][0];p=Math.abs(v*g[0]+_-g[1])/Math.sqrt(v*v+1)}else p=Math.abs(g[0]-y[m][0]);var b=Math.pow(y[m][1]-y[m-1][1],2)+Math.pow(y[m][0]-y[m-1][0],2),E=Math.pow(y[m][1]-g[1],2)+Math.pow(y[m][0]-g[0],2),A=Math.pow(y[m-1][1]-g[1],2)+Math.pow(y[m-1][0]-g[0],2),C=Math.pow(p,2),S=E-C+A-C;S>b&&(p=Math.sqrt(Math.min(E,A))),(null===n||void 0===n||n>p)&&(S>b?A<E?(r=0,i=1):(i=0,r=1):(r=Math.sqrt(A-C)/Math.sqrt(b),i=Math.sqrt(E-C)/Math.sqrt(b)),n=p,f=m)}var O=y[f-1][0]-y[f][0],T=y[f-1][1]-y[f][1];a=y[f-1][0]-O*r,c=y[f-1][1]-T*r}var L={x:a,y:c,idx:f-1,to:r,from:i};if(o){var I=o.unproject([L.x,L.y]);L={x:I[0],y:I[1],idx:f-1,to:r,from:i}}l=(0,s.point)([L.x,L.y],{dist:Math.abs(L.from-L.to),index:L.idx})})),l},e.getPickedEditHandle=function(t){var e=m(t);return e.length?e[0]:null},e.getPickedSnapSourceEditHandle=function(t){return m(t).find((function(t){return"snap-source"===t.properties.editHandleType}))},e.getNonGuidePicks=function(t){return t&&t.filter((function(t){return!t.isGuide}))},e.getPickedExistingEditHandle=function(t){return m(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"existing"===e.editHandleType}))},e.getPickedIntermediateEditHandle=function(t){return m(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"intermediate"===e.editHandleType}))},e.getPickedEditHandles=m,e.getEditHandlesForGeometry=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",r=[];switch(t.type){case"Point":r=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:e},geometry:{type:"Point",coordinates:t.coordinates}}];break;case"MultiPoint":case"LineString":r=r.concat(v(t.coordinates,[],e,n));break;case"Polygon":case"MultiLineString":for(var i=0;i<t.coordinates.length;i++)r=r.concat(v(t.coordinates[i],[i],e,n)),"Polygon"===t.type&&(r=r.slice(0,-1));break;case"MultiPolygon":for(var o=0;o<t.coordinates.length;o++)for(var a=0;a<t.coordinates[o].length;a++)r=(r=r.concat(v(t.coordinates[o][a],[o,a],e,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(t.type))}return r},e.updateRectanglePosition=function(t,e,n){var r=t.geometry.coordinates;if(!r)return null;var i=r[0].slice(0,4);i[e%4]=n;var o=i[(e+2)%4],a=i[e%4];return i[(e+1)%4]=[a[0],o[1]],i[(e+3)%4]=[o[0],a[1]],[[].concat(p(i),[i[0]])]},e.mapCoords=function t(e,n){if("number"===typeof e[0])return!isNaN(e[0])&&isFinite(e[0])?n(e):e;return e.map((function(e){return t(e,n)})).filter(Boolean)};var r=l(n(677)),i=l(n(674)),o=l(n(719)),a=n(89),s=n(42),u=n(60),c=l(n(676));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function g(t,e,n){return e*n+t*(1-n)}function m(t){return t&&t.filter((function(t){return t.isGuide&&"editHandle"===t.object.properties.guideType})).map((function(t){return t.object}))||[]}function v(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",i=[],o=0;o<t.length;o++){var a=t[o];i.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(p(e),[o]),featureIndex:n,editHandleType:r},geometry:{type:"Point",coordinates:a}})}return i}},673:function(t,e,n){"use strict";n.r(e);var r=n(60),i=n(42);e.default=function(t,e,n){void 0===n&&(n={});var o=Object(r.getCoord)(t),a=Object(r.getCoord)(e),s=Object(i.degreesToRadians)(a[1]-o[1]),u=Object(i.degreesToRadians)(a[0]-o[0]),c=Object(i.degreesToRadians)(o[1]),l=Object(i.degreesToRadians)(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(l);return Object(i.radiansToLength)(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}},674:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n(42),i=n(60);function o(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=o(e,t);return n=(n+180)%360}(t,e);var a=Object(i.getCoord)(t),s=Object(i.getCoord)(e),u=Object(r.degreesToRadians)(a[0]),c=Object(r.degreesToRadians)(s[0]),l=Object(r.degreesToRadians)(a[1]),f=Object(r.degreesToRadians)(s[1]),p=Math.sin(c-u)*Math.cos(f),h=Math.cos(l)*Math.sin(f)-Math.sin(l)*Math.cos(f)*Math.cos(c-u);return Object(r.radiansToDegrees)(Math.atan2(p,h))}},675:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ImmutableFeatureCollection=void 0;var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"featureCollection",void 0),this.featureCollection=e}var e,n,i;return e=t,(n=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry,i="Polygon"===r.type||"MultiPolygon"===r.type,o=a({},r,{coordinates:f(r.coordinates,e,n,i)});return this.replaceGeometry(t,o)}},{key:"removePosition",value:function(t,e){var n=this.featureCollection.features[t].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&Array.isArray(e)&&0===e[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&Array.isArray(e)&&0===e[0]&&0===e[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var r="Polygon"===n.type||"MultiPolygon"===n.type,i=a({},n,{coordinates:p(n.coordinates,e,r)});return function(t){switch(t.type){case"Polygon":!function(t){for(var e=t.coordinates,n=1;n<e.length;n++)d(e,n)&&n--}(t);break;case"MultiLineString":!function(t){for(var e=0;e<t.coordinates.length;e++)1===t.coordinates[e].length&&(t.coordinates.splice(e,1),e--)}(t);break;case"MultiPolygon":!function(t){for(var e=0;e<t.coordinates.length;e++){var n=t.coordinates[e];n[0].length<=3&&(t.coordinates.splice(e,1),e--);for(var r=1;r<n.length;r++)d(n,r)&&r--}}(t)}}(i),this.replaceGeometry(t,i)}},{key:"addPosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry;if("Point"===r.type)throw new Error("Unable to add a position to a Point feature");var i="Polygon"===r.type||"MultiPolygon"===r.type,o=a({},r,{coordinates:h(r.coordinates,e,n,i)});return this.replaceGeometry(t,o)}},{key:"replaceGeometry",value:function(e,n){var i=a({},this.featureCollection.features[e],{geometry:n});return new t(a({},this.featureCollection,{features:[].concat(r(this.featureCollection.features.slice(0,e)),[i],r(this.featureCollection.features.slice(e+1)))}))}},{key:"addFeature",value:function(t){return this.addFeatures([t])}},{key:"addFeatures",value:function(e){return new t(a({},this.featureCollection,{features:[].concat(r(this.featureCollection.features),r(e))}))}},{key:"deleteFeature",value:function(t){return this.deleteFeatures([t])}},{key:"deleteFeatures",value:function(e){var n=r(this.featureCollection.features);e.sort();for(var i=e.length-1;i>=0;i--){var o=e[i];o>=0&&o<n.length&&n.splice(o,1)}return new t(a({},this.featureCollection,{features:n}))}}])&&s(e.prototype,n),i&&s(e,i),t}();function l(t,e){if(2===t.length&&3===e.length){var n=e[2];return[t[0],t[1],n]}return t}function f(t,e,n,i){if(!e)return t;if(0===e.length)return l(n,t);if(1===e.length){var o=[].concat(r(t.slice(0,e[0])),[l(n,t[e[0]])],r(t.slice(e[0]+1)));return!i||0!==e[0]&&e[0]!==t.length-1||(o[0]=l(n,t[0]),o[t.length-1]=l(n,t[0])),o}return[].concat(r(t.slice(0,e[0])),[f(t[e[0]],e.slice(1,e.length),n,i)],r(t.slice(e[0]+1)))}function p(t,e,n){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");if(1===e.length){var i=[].concat(r(t.slice(0,e[0])),r(t.slice(e[0]+1)));return!n||0!==e[0]&&e[0]!==t.length-1||(0===e[0]?i[i.length-1]=i[0]:e[0]===t.length-1&&(i[0]=i[i.length-1])),i}return[].concat(r(t.slice(0,e[0])),[p(t[e[0]],e.slice(1,e.length),n)],r(t.slice(e[0]+1)))}function h(t,e,n,i){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");return 1===e.length?[].concat(r(t.slice(0,e[0])),[n],r(t.slice(e[0]))):[].concat(r(t.slice(0,e[0])),[h(t[e[0]],e.slice(1,e.length),n,i)],r(t.slice(e[0]+1)))}function d(t,e){return t[e].length<=3&&(t.splice(e,1),!0)}e.ImmutableFeatureCollection=c},676:function(t,e,n){"use strict";n.r(e);var r=n(40);n.d(e,"default",(function(){return r.b})),n.d(e,"WebMercatorViewport",(function(){return r.b})),n.d(e,"getBounds",(function(){return r.h})),n.d(e,"fitBounds",(function(){return r.e})),n.d(e,"normalizeViewportProps",(function(){return r.p})),n.d(e,"flyToViewport",(function(){return r.f})),n.d(e,"getFlyToDuration",(function(){return r.j})),n.d(e,"MAX_LATITUDE",(function(){return r.a})),n.d(e,"lngLatToWorld",(function(){return r.o})),n.d(e,"worldToLngLat",(function(){return r.s})),n.d(e,"worldToPixels",(function(){return r.t})),n.d(e,"pixelsToWorld",(function(){return r.q})),n.d(e,"zoomToScale",(function(){return r.u})),n.d(e,"scaleToZoom",(function(){return r.r})),n.d(e,"altitudeToFovy",(function(){return r.d})),n.d(e,"fovyToAltitude",(function(){return r.g})),n.d(e,"getMeterZoom",(function(){return r.k})),n.d(e,"getDistanceScales",(function(){return r.i})),n.d(e,"addMetersToLngLat",(function(){return r.c})),n.d(e,"getViewMatrix",(function(){return r.n})),n.d(e,"getProjectionMatrix",(function(){return r.l})),n.d(e,"getProjectionParameters",(function(){return r.m}))},677:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n(42),i=n(60);function o(t,e,n,o){void 0===o&&(o={});var a=Object(i.getCoord)(t),s=Object(r.degreesToRadians)(a[0]),u=Object(r.degreesToRadians)(a[1]),c=Object(r.degreesToRadians)(n),l=Object(r.lengthToRadians)(e,o.units),f=Math.asin(Math.sin(u)*Math.cos(l)+Math.cos(u)*Math.sin(l)*Math.cos(c)),p=s+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(u),Math.cos(l)-Math.sin(u)*Math.sin(f)),h=Object(r.radiansToDegrees)(p),d=Object(r.radiansToDegrees)(f);return Object(r.point)([h,d],o.properties)}},679:function(t,e,n){var r,i,o,a,s,u,c,l,f;self,t.exports=(r=n(305),i=n(303),o=n(0),a=n(177),s=n(244),u=n(529),c=n(41),l=n(530),f=n(305),function(){var t={162:function(t,e,n){t.exports=n(47)},47:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?d:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",y={};function g(){}function m(){}function v(){}var _={};u(_,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(w([])));E&&E!==n&&r.call(E,o)&&(_=E);var A=v.prototype=g.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function w(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=v,u(A,"constructor",v),u(v,"constructor",m),m.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},C(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(A),u(A,s,"Generator"),u(A,o,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=w,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:w(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},485:function(t){"use strict";t.exports=r},38:function(t){"use strict";t.exports=f},347:function(t){"use strict";t.exports=s},116:function(t){"use strict";t.exports=u},332:function(t){"use strict";t.exports=i},946:function(t){"use strict";t.exports=c},487:function(t){"use strict";t.exports=l},156:function(t){"use strict";t.exports=o},756:function(t){"use strict";t.exports=a}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var p={};return function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function r(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}n.r(p),n.d(p,{executeSQL:function(){return m},getDataFilterExtensionProps:function(){return B},useCartoLayerProps:function(){return G}});var a=n(162),s=n.n(a),u=n(485),c=n(332);function l(t){t.credentials;var e,n=t.response,r=t.data;switch(n.status){case 401:throw new Error("Unauthorized access. Invalid credentials");case 403:throw new Error("Forbidden access to the requested data");default:throw new Error("".concat(JSON.stringify(r.hint||(null===(e=r.error)||void 0===e?void 0:e[0]))))}}function f(t){var e,n=t.credentials,r=t.connection,i=t.parameters,o=n.apiVersion,a=void 0===o?c.API_VERSIONS.V2:o,s=n.apiBaseUrl;switch(a){case c.API_VERSIONS.V1:case c.API_VERSIONS.V2:e="".concat(function(t){var e=t.serverUrlTemplate.replace("{user}",t.username);return e.endsWith("/")||(e+="/"),e}(n),"api/v2/sql");break;case c.API_VERSIONS.V3:e="".concat(s,"/v3/sql/").concat(r,"/query");break;default:throw new Error("Unknown apiVersion ".concat(a))}return i?"".concat(e,"?").concat(i.join("&")):e}var h=["abortController"];function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g="carto-react",m=function(){var t,e=(t=s().mark((function t(e){var n,r,i,o,a,u,f,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.credentials,r=e.query,i=e.connection,o=e.opts,n){t.next=3;break}throw new Error("No credentials provided");case 3:return t.prev=3,u=v({credentials:n,connection:i,query:r,opts:o}),t.next=7,fetch(u);case 7:a=t.sent,t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(3),"AbortError"!==t.t0.name){t.next=14;break}throw t.t0;case 14:throw new Error("Failed to connect to SQL API: ".concat(t.t0));case 15:return t.next=17,a.json();case 17:if(f=t.sent,a.ok||l({credentials:n,response:a,data:f}),(void 0===(p=n.apiVersion)?c.API_VERSIONS.V2:p)!==c.API_VERSIONS.V3){t.next=22;break}return t.abrupt("return",f.rows);case 22:return t.abrupt("return",o&&"geojson"===o.format?f:f.rows);case 23:case"end":return t.stop()}}),t,null,[[3,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}();function v(t){var e=t.credentials,n=t.connection,i=t.query,o=t.opts,a=void 0===o?{}:o,s=a.abortController,l=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(a,h),p=e.apiVersion,d=void 0===p?c.API_VERSIONS.V2:p,m=y({client:g,q:null==i?void 0:i.trim()},l);d===c.API_VERSIONS.V3?m.access_token=e.accessToken:d!==c.API_VERSIONS.V1&&d!==c.API_VERSIONS.V2||(m.api_key=e.apiKey);var v=y({},l);s&&(v.signal=s.signal);var _=f({credentials:e,connection:n,parameters:Object.entries(m).map((function(t){var e=r(t,2),n=e[0],i=e[1];return(0,u.encodeParameter)(n,i)}))});if(_.length<u.REQUEST_GET_MAX_URL_LENGTH)return(0,u.getRequest)(_,v);var b=f({credentials:e,connection:n,parameters:d===c.API_VERSIONS.V3?["access_token=".concat(e.accessToken),"client=".concat(g)]:null});return(0,u.postRequest)(b,m,v)}function _(n){return function(e){if(Array.isArray(e))return t(e)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=n(156),E=n(756),A=n(347),C=n(116);function S(t){if("DataCloneError"===t.name)throw new Error('DataCloneError: Unable to retrieve GeoJSON features. Please check that your query is returning a column called "geom" or that you are using the geoColumn property to indicate the geometry column in the table.');if("AbortError"!==t.name)throw t}function O(t){var e=t.source,n=(0,E.useDispatch)(),i=r((0,b.useState)(!1),2),o=i[0],a=i[1],s=(0,b.useRef)(null);(0,b.useEffect)((function(){e||a(!1)}),[e]);var u=(0,b.useCallback)((function(){s.current&&clearTimeout(s.current),s.current=null}),[]),c=(0,b.useCallback)((function(){u(),a(!1)}),[u,a]),l=null==e?void 0:e.id,f=(0,b.useCallback)((function(t){l&&n((0,A.setFeaturesReady)({sourceId:l,ready:t}))}),[n,l]);return[s,o,a,u,c,f]}var T=n(946),L=n(487),I=n(38);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R=new L.DataFilterExtension({filterSize:4});function M(t){var e={},n=null;return Object.entries(t).forEach((function(t){var o=r(t,2),a=o[0],s=o[1];Object.entries(s).forEach((function(t){var o=r(t,2),s=o[0],u=o[1];s!==I._FilterTypes.TIME?e[a]=i({},s,u):n={column:a,values:u.values,type:s}}))})),{filtersWithoutTimeType:e,timeFilter:n}}function x(t){var e=Array(4).fill([0,0]);return e[0]=[1,1],t&&(e[1]=t.values[0]),e}function N(t,e){var n=P({},t);return e&&(n[e.column]=P(P({},n[e.column]),{},i({},e.type,{}))),{getFilterValue:JSON.stringify(n)}}function D(t,e){var n=Array(4).fill(0),r=(0,I._buildFeatureFilter)({filters:t,type:"number"});return function(t){if(n[0]=r(t),e){var i=t.properties||t;n[1]=i[e.column]}return n}}function B(){var t=M(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=t.filtersWithoutTimeType,n=t.timeFilter;return{filterRange:x(n),updateTriggers:N(e,n),getFilterValue:D(e,n),extensions:[R]}}var F=new L.MaskExtension;function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t){var e,n,i,o=t.source,a=t.layerConfig,s=t.uniqueIdProperty,l=t.viewportFeatures,f=void 0===l||l,p=t.viewporFeaturesDebounceTimeout,h=void 0===p?250:p,d=(0,E.useSelector)((function(t){return t.carto.viewport})),y=(0,E.useSelector)((function(t){return(0,A.selectSpatialFilter)(t,null==o?void 0:o.id)})),g=function(t){var e=t.source,n=t.viewport,i=t.spatialFilter,o=t.uniqueIdProperty,a=t.debounceTimeout,s=void 0===a?250:a,c=r(O({source:e}),6),l=c[0],f=c[1],p=c[2],h=c[3],d=c[4],y=c[5],g=null==e?void 0:e.id,m=(0,b.useCallback)((function(t){var e=t.viewport,n=t.spatialFilter,r=t.uniqueIdProperty;(0,C.executeTask)(g,C.Methods.GEOJSON_FEATURES,{viewport:e,geometry:n,uniqueIdProperty:r}).then((function(){y(!0)})).catch(S)}),[y,g]),v=(0,b.useCallback)((0,u.debounce)(m,s),[m]);return(0,b.useEffect)((function(){g&&f&&(h(),y(!1),l.current=v({viewport:n,spatialFilter:i,uniqueIdProperty:o}))}),[n,i,o,g,f,v,y,h,l]),[(0,b.useCallback)((function(t){d(),y(!1),(0,C.executeTask)(g,C.Methods.LOAD_GEOJSON_FEATURES,{geojson:t}).then((function(){return p(!0)})).catch(S)}),[g,y,d,p])]}({source:o,viewport:d,spatialFilter:y,uniqueIdProperty:s,debounceTimeout:h}),m=r(g,1)[0],v=function(t){var e=t.source,n=t.viewport,i=t.spatialFilter,o=t.uniqueIdProperty,a=t.debounceTimeout,s=void 0===a?250:a,l=r(O({source:e}),6),f=l[0],p=l[1],h=l[2],d=l[3],y=l[4],g=l[5],m=r((0,b.useState)(""),2),v=m[0],_=m[1],E=null==e?void 0:e.id,A=(0,b.useCallback)((function(t){var e=t.viewport,n=t.spatialFilter,r=t.uniqueIdProperty;if(!v)return null;g(!1),(0,C.executeTask)(E,C.Methods.TILE_FEATURES,{viewport:e,geometry:n,uniqueIdProperty:r,tileFormat:v}).then((function(){g(!0)})).catch(S).finally(d)}),[g,E,v,d]),L=(0,b.useCallback)((function(t){var e=t.reduce((function(t,e){var n=e.data,r=e.isVisible,i=e.bbox;return r&&n&&t.push({data:n,bbox:i}),t}),[]);(0,C.executeTask)(E,C.Methods.LOAD_TILES,{tiles:e}).then((function(){return h(!0)})).catch(S)}),[E,h]),I=(0,b.useCallback)((0,u.debounce)(A,s),[A]),w=(0,b.useCallback)((0,u.debounce)(L,s),[L]);(0,b.useEffect)((function(){E&&p&&(d(),g(!1),f.current=I({viewport:n,spatialFilter:i,uniqueIdProperty:o}))}),[n,i,o,I,E,p,g,d,f]);var P=(0,b.useCallback)((function(t){y(),g(!1),f.current=w(t)}),[y,g,w,f]),R=(0,b.useCallback)((function(){var t;return y(),(t=T.Layer.defaultProps.fetch).value.apply(t,arguments)}),[y]);return[(0,b.useCallback)((function(t){var e=r(t.tiles,1)[0],n=new URL(e).searchParams.get("formatTiles");_(n||c.TILE_FORMATS.MVT)}),[]),P,R]}({source:o,viewport:d,spatialFilter:y,uniqueIdProperty:s,debounceTimeout:h}),L=r(v,3),w=L[0],P=L[1],R=L[2],M=(0,b.useCallback)((function(t){return null!=t&&t.tilejson?w(t):m(t)}),[m,w]),x=k({binary:!0},f&&{onViewportLoad:P,fetch:R,onDataLoad:M}),N=B(null==o?void 0:o.filters),D=(i=null==y||null===(e=y.geometry)||void 0===e?void 0:e.coordinates,{maskId:Boolean(i&&i.length)&&I.MASK_ID,extensions:[F]}),j=[].concat(_(N.extensions),_(D.extensions));return k(k(k(k({},x),{},{id:null==a?void 0:a.id,visible:void 0===(null==a?void 0:a.visible)||a.visible,opacity:null!==(n=null==a?void 0:a.opacity)&&void 0!==n?n:1,uniqueIdProperty:s,data:null==o?void 0:o.data,type:null==o?void 0:o.type,connection:null==o?void 0:o.connection,credentials:null==o?void 0:o.credentials,clientId:"carto-for-react"},N),D),{},{extensions:j})}}(),p}())},680:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},a(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoClickPolygonMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,r,f,p=(e=h,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return i(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"handleClick",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw||(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"handleStartDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),t.cancelPan())}},{key:"handleStopDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"checkAndFinishPolygon",value:function(t){var e=this.getClickSequence(),n=this.getTentativeGuide(t);if(e.length>1&&n&&"Polygon"===n.geometry.type){var r={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},i=this.getAddFeatureOrBooleanPolygonAction(r,t);this.resetClickSequence(),i&&t.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=r[0],a=e.mapCoords,s=this.getTwoClickPolygon(o,a,n);return s&&i.features.push({type:"Feature",properties:{shape:s.properties&&s.properties.shape,guideType:"tentative"},geometry:s.geometry}),i}},{key:"getTwoClickPolygon",value:function(t,e,n){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),a(c(h.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length&&(e=this.getTwoClickPolygon(r[0],i[0],t.modeConfig)),e}}])&&o(n.prototype,r),f&&o(n,f),h}(n(671).GeoJsonEditMode);e.TwoClickPolygonMode=f},681:function(t,e,n){"use strict";function r(t){return Intl.getCanonicalLocales(t)}function i(t,e){var n=e.tzData,r=e.uppercaseLinks,i=t.toUpperCase(),o=Object.keys(n).reduce((function(t,e){return t[e.toUpperCase()]=e,t}),{}),a=r[i]||o[i];return"Etc/UTC"===a||"Etc/GMT"===a?"UTC":a}function o(t){if("symbol"===typeof t)throw TypeError("Cannot convert a Symbol value to a string");return String(t)}function a(t){if(void 0===t)return NaN;if(null===t)return 0;if("boolean"===typeof t)return t?1:0;if("number"===typeof t)return t;if("symbol"===typeof t||"bigint"===typeof t)throw new TypeError("Cannot convert symbol/bigint to number");return Number(t)}function s(t){return isFinite(t)?Math.abs(t)>8640000000000001?NaN:function(t){var e=a(t);if(isNaN(e)||c(e,-0))return 0;if(isFinite(e))return e;var n=Math.floor(Math.abs(e));return e<0&&(n=-n),c(n,-0)?0:n}(t):NaN}function u(t){if(null==t)throw new TypeError("undefined/null cannot be converted to object");return Object(t)}function c(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t===1/e:t!==t&&e!==e}function l(t){return new Array(t)}function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t){return null===t?"Null":"undefined"===typeof t?"Undefined":"function"===typeof t||"object"===typeof t?"Object":"number"===typeof t?"Number":"boolean"===typeof t?"Boolean":"string"===typeof t?"String":"symbol"===typeof t?"Symbol":"bigint"===typeof t?"BigInt":void 0}n.r(e),n.d(e,"CanonicalizeLocaleList",(function(){return r})),n.d(e,"CanonicalizeTimeZoneName",(function(){return i})),n.d(e,"CoerceOptionsToObject",(function(){return R})),n.d(e,"GetNumberOption",(function(){return x})),n.d(e,"GetOption",(function(){return N})),n.d(e,"GetOptionsObject",(function(){return D})),n.d(e,"SANCTIONED_UNITS",(function(){return B})),n.d(e,"removeUnitNamespace",(function(){return F})),n.d(e,"SIMPLE_UNITS",(function(){return j})),n.d(e,"IsSanctionedSimpleUnitIdentifier",(function(){return k})),n.d(e,"IsValidTimeZoneName",(function(){return G})),n.d(e,"IsWellFormedCurrencyCode",(function(){return Z})),n.d(e,"IsWellFormedUnitIdentifier",(function(){return H})),n.d(e,"ComputeExponent",(function(){return rt})),n.d(e,"ComputeExponentForMagnitude",(function(){return $})),n.d(e,"CurrencyDigits",(function(){return it})),n.d(e,"FormatNumericToParts",(function(){return yt})),n.d(e,"FormatNumericToString",(function(){return nt})),n.d(e,"InitializeNumberFormat",(function(){return _t})),n.d(e,"PartitionNumberPattern",(function(){return dt})),n.d(e,"SetNumberFormatDigitOptions",(function(){return vt})),n.d(e,"SetNumberFormatUnitOptions",(function(){return mt})),n.d(e,"ToRawFixed",(function(){return et})),n.d(e,"ToRawPrecision",(function(){return tt})),n.d(e,"_formatToParts",(function(){return lt})),n.d(e,"PartitionPattern",(function(){return bt})),n.d(e,"SupportedLocales",(function(){return Et})),n.d(e,"getInternalSlot",(function(){return q})),n.d(e,"getMultiInternalSlots",(function(){return J})),n.d(e,"isLiteralPart",(function(){return W})),n.d(e,"setInternalSlot",(function(){return K})),n.d(e,"setMultiInternalSlots",(function(){return X})),n.d(e,"getMagnitude",(function(){return z})),n.d(e,"defineProperty",(function(){return Y})),n.d(e,"isMissingLocaleDataError",(function(){return St})),n.d(e,"RangePatternType",(function(){return At})),n.d(e,"invariant",(function(){return Q})),n.d(e,"ToString",(function(){return o})),n.d(e,"ToNumber",(function(){return a})),n.d(e,"TimeClip",(function(){return s})),n.d(e,"ToObject",(function(){return u})),n.d(e,"SameValue",(function(){return c})),n.d(e,"ArrayCreate",(function(){return l})),n.d(e,"HasOwnProperty",(function(){return f})),n.d(e,"Type",(function(){return p})),n.d(e,"Day",(function(){return y})),n.d(e,"WeekDay",(function(){return g})),n.d(e,"DayFromYear",(function(){return m})),n.d(e,"TimeFromYear",(function(){return v})),n.d(e,"YearFromTime",(function(){return _})),n.d(e,"DaysInYear",(function(){return b})),n.d(e,"DayWithinYear",(function(){return E})),n.d(e,"InLeapYear",(function(){return A})),n.d(e,"MonthFromTime",(function(){return C})),n.d(e,"DateFromTime",(function(){return S})),n.d(e,"HourFromTime",(function(){return T})),n.d(e,"MinFromTime",(function(){return L})),n.d(e,"SecFromTime",(function(){return I})),n.d(e,"OrdinaryHasInstance",(function(){return w})),n.d(e,"msFromTime",(function(){return P}));var h=864e5;function d(t,e){return t-Math.floor(t/e)*e}function y(t){return Math.floor(t/h)}function g(t){return d(y(t)+4,7)}function m(t){return Date.UTC(t,0)/h}function v(t){return Date.UTC(t,0)}function _(t){return new Date(t).getUTCFullYear()}function b(t){return t%4!==0?365:t%100!==0?366:t%400!==0?365:366}function E(t){return y(t)-m(_(t))}function A(t){return 365===b(_(t))?0:1}function C(t){var e=E(t),n=A(t);if(e>=0&&e<31)return 0;if(e<59+n)return 1;if(e<90+n)return 2;if(e<120+n)return 3;if(e<151+n)return 4;if(e<181+n)return 5;if(e<212+n)return 6;if(e<243+n)return 7;if(e<273+n)return 8;if(e<304+n)return 9;if(e<334+n)return 10;if(e<365+n)return 11;throw new Error("Invalid time")}function S(t){var e=E(t),n=C(t),r=A(t);if(0===n)return e+1;if(1===n)return e-30;if(2===n)return e-58-r;if(3===n)return e-89-r;if(4===n)return e-119-r;if(5===n)return e-150-r;if(6===n)return e-180-r;if(7===n)return e-211-r;if(8===n)return e-242-r;if(9===n)return e-272-r;if(10===n)return e-303-r;if(11===n)return e-333-r;throw new Error("Invalid time")}var O=1e3;function T(t){return d(Math.floor(t/36e5),24)}function L(t){return d(Math.floor(t/6e4),60)}function I(t){return d(Math.floor(t/O),60)}function w(t,e,n){if("function"!==typeof t)return!1;if(null===n||void 0===n?void 0:n.boundTargetFunction)return e instanceof(null===n||void 0===n?void 0:n.boundTargetFunction);if("object"!==typeof e)return!1;var r=t.prototype;if("object"!==typeof r)throw new TypeError("OrdinaryHasInstance called on an object with an invalid prototype property.");return Object.prototype.isPrototypeOf.call(r,e)}function P(t){return d(t,O)}function R(t){return"undefined"===typeof t?Object.create(null):u(t)}function M(t,e,n,r){if(void 0!==t){if(t=Number(t),isNaN(t)||t<e||t>n)throw new RangeError("".concat(t," is outside of range [").concat(e,", ").concat(n,"]"));return Math.floor(t)}return r}function x(t,e,n,r,i){return M(t[e],n,r,i)}function N(t,e,n,r,i){if("object"!==typeof t)throw new TypeError("Options must be an object");var a=t[e];if(void 0!==a){if("boolean"!==n&&"string"!==n)throw new TypeError("invalid type");if("boolean"===n&&(a=Boolean(a)),"string"===n&&(a=o(a)),void 0!==r&&!r.filter((function(t){return t==a})).length)throw new RangeError("".concat(a," is not within ").concat(r.join(", ")));return a}return i}function D(t){if("undefined"===typeof t)return Object.create(null);if("object"===typeof t)return t;throw new TypeError("Options must be an object")}var B=["angle-degree","area-acre","area-hectare","concentr-percent","digital-bit","digital-byte","digital-gigabit","digital-gigabyte","digital-kilobit","digital-kilobyte","digital-megabit","digital-megabyte","digital-petabyte","digital-terabit","digital-terabyte","duration-day","duration-hour","duration-millisecond","duration-minute","duration-month","duration-second","duration-week","duration-year","length-centimeter","length-foot","length-inch","length-kilometer","length-meter","length-mile-scandinavian","length-mile","length-millimeter","length-yard","mass-gram","mass-kilogram","mass-ounce","mass-pound","mass-stone","temperature-celsius","temperature-fahrenheit","volume-fluid-ounce","volume-gallon","volume-liter","volume-milliliter"];function F(t){return t.slice(t.indexOf("-")+1)}var j=B.map(F);function k(t){return j.indexOf(t)>-1}function G(t,e){var n=e.tzData,r=e.uppercaseLinks,i=t.toUpperCase(),o=new Set,a=new Set;return Object.keys(n).map((function(t){return t.toUpperCase()})).forEach((function(t){return o.add(t)})),Object.keys(r).forEach((function(t){a.add(t.toUpperCase()),o.add(r[t].toUpperCase())})),o.has(i)||a.has(i)}var U=/[^A-Z]/;function Z(t){return 3===(t=t.replace(/([a-z])/g,(function(t,e){return e.toUpperCase()}))).length&&!U.test(t)}function H(t){if(k(t=t.replace(/([A-Z])/g,(function(t,e){return e.toLowerCase()}))))return!0;var e=t.split("-per-");if(2!==e.length)return!1;var n=e[0],r=e[1];return!(!k(n)||!k(r))}function z(t){return Math.floor(Math.log(t)*Math.LOG10E)}function V(t,e){if("function"===typeof t.repeat)return t.repeat(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=t;return n.join("")}function K(t,e,n,r){t.get(e)||t.set(e,Object.create(null)),t.get(e)[n]=r}function X(t,e,n){for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];K(t,e,o,n[o])}}function q(t,e,n){return J(t,e,n)[n]}function J(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t.get(e);if(!i)throw new TypeError("".concat(e," InternalSlot has not been initialized"));return n.reduce((function(t,e){return t[e]=i[e],t}),Object.create(null))}function W(t){return"literal"===t.type}function Y(t,e,n){var r=n.value;Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}function Q(t,e,n){if(void 0===n&&(n=Error),!t)throw new n(e)}function $(t,e,n){var r=(0,n.getInternalSlots)(t),i=r.notation,o=r.dataLocaleData,a=r.numberingSystem;switch(i){case"standard":return 0;case"scientific":return e;case"engineering":return 3*Math.floor(e/3);default:var s=r.compactDisplay,u=r.style,c=r.currencyDisplay,l=void 0;if("currency"===u&&"name"!==c){l=(o.numbers.currency[a]||o.numbers.currency[o.numbers.nu[0]]).short}else{var f=o.numbers.decimal[a]||o.numbers.decimal[o.numbers.nu[0]];l="long"===s?f.long:f.short}if(!l)return 0;var p=String(Math.pow(10,e)),h=Object.keys(l);if(p<h[0])return 0;if(p>h[h.length-1])return h[h.length-1].length-1;var d=h.indexOf(p);if(-1===d)return 0;var y=h[d];return"0"===l[y].other?0:y.length-l[y].other.match(/0+/)[0].length}}function tt(t,e,n){var r,i,o,a,s=n;if(0===t)r=V("0",s),i=0,o=0;else{var u=t.toString(),c=u.indexOf("e"),l=u.split("e"),f=l[0],p=l[1],h=f.replace(".","");if(c>=0&&h.length<=s)i=+p,r=h+V("0",s-h.length),o=t;else{var d=(i=z(t))-s+1,y=Math.round(m(t,d));m(y,s-1)>=10&&(i+=1,y=Math.floor(y/10)),r=y.toString(),o=m(y,s-1-i)}}if(i>=s-1?(r+=V("0",i-s+1),a=i+1):i>=0?(r="".concat(r.slice(0,i+1),".").concat(r.slice(i+1)),a=i+1):(r="0.".concat(V("0",-i-1)).concat(r),a=1),r.indexOf(".")>=0&&n>e){for(var g=n-e;g>0&&"0"===r[r.length-1];)r=r.slice(0,-1),g--;"."===r[r.length-1]&&(r=r.slice(0,-1))}return{formattedString:r,roundedNumber:o,integerDigitsCount:a};function m(t,e){return e<0?t*Math.pow(10,-e):t/Math.pow(10,e)}}function et(t,e,n){var r,i,o=n,a=Math.round(t*Math.pow(10,o)),s=a/Math.pow(10,o);if(a<1e21)r=a.toString();else{var u=(r=a.toString()).split("e"),c=u[0],l=u[1];r=c.replace(".",""),r+=V("0",Math.max(+l-r.length+1,0))}if(0!==o){var f=r.length;if(f<=o)r=V("0",o+1-f)+r,f=o+1;var p=r.slice(0,f-o),h=r.slice(f-o);r="".concat(p,".").concat(h),i=p.length}else i=r.length;for(var d=n-e;d>0&&"0"===r[r.length-1];)r=r.slice(0,-1),d--;return"."===r[r.length-1]&&(r=r.slice(0,-1)),{formattedString:r,roundedNumber:s,integerDigitsCount:i}}function nt(t,e){var n,r=e<0||c(e,-0);switch(r&&(e=-e),t.roundingType){case"significantDigits":n=tt(e,t.minimumSignificantDigits,t.maximumSignificantDigits);break;case"fractionDigits":n=et(e,t.minimumFractionDigits,t.maximumFractionDigits);break;default:(n=tt(e,1,2)).integerDigitsCount>1&&(n=et(e,0,0))}e=n.roundedNumber;var i=n.formattedString,o=n.integerDigitsCount,a=t.minimumIntegerDigits;o<a&&(i=V("0",a-o)+i);return r&&(e=-e),{roundedNumber:e,formattedString:i}}function rt(t,e,n){var r=n.getInternalSlots;if(0===e)return[0,0];e<0&&(e=-e);var i=z(e),o=$(t,i,{getInternalSlots:r});e=o<0?e*Math.pow(10,-o):e/Math.pow(10,o);var a=nt(r(t),e);return 0===a.roundedNumber||z(a.roundedNumber)===i-o?[o,i]:[$(t,i+1,{getInternalSlots:r}),i+1]}function it(t,e){var n=e.currencyDigitsData;return f(n,t)?n[t]:2}var ot={adlm:["\ud83a\udd50","\ud83a\udd51","\ud83a\udd52","\ud83a\udd53","\ud83a\udd54","\ud83a\udd55","\ud83a\udd56","\ud83a\udd57","\ud83a\udd58","\ud83a\udd59"],ahom:["\ud805\udf30","\ud805\udf31","\ud805\udf32","\ud805\udf33","\ud805\udf34","\ud805\udf35","\ud805\udf36","\ud805\udf37","\ud805\udf38","\ud805\udf39"],arab:["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],arabext:["\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9"],bali:["\u1b50","\u1b51","\u1b52","\u1b53","\u1b54","\u1b55","\u1b56","\u1b57","\u1b58","\u1b59"],beng:["\u09e6","\u09e7","\u09e8","\u09e9","\u09ea","\u09eb","\u09ec","\u09ed","\u09ee","\u09ef"],bhks:["\ud807\udc50","\ud807\udc51","\ud807\udc52","\ud807\udc53","\ud807\udc54","\ud807\udc55","\ud807\udc56","\ud807\udc57","\ud807\udc58","\ud807\udc59"],brah:["\ud804\udc66","\ud804\udc67","\ud804\udc68","\ud804\udc69","\ud804\udc6a","\ud804\udc6b","\ud804\udc6c","\ud804\udc6d","\ud804\udc6e","\ud804\udc6f"],cakm:["\ud804\udd36","\ud804\udd37","\ud804\udd38","\ud804\udd39","\ud804\udd3a","\ud804\udd3b","\ud804\udd3c","\ud804\udd3d","\ud804\udd3e","\ud804\udd3f"],cham:["\uaa50","\uaa51","\uaa52","\uaa53","\uaa54","\uaa55","\uaa56","\uaa57","\uaa58","\uaa59"],deva:["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],diak:["\ud806\udd50","\ud806\udd51","\ud806\udd52","\ud806\udd53","\ud806\udd54","\ud806\udd55","\ud806\udd56","\ud806\udd57","\ud806\udd58","\ud806\udd59"],fullwide:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"],gong:["\ud807\udda0","\ud807\udda1","\ud807\udda2","\ud807\udda3","\ud807\udda4","\ud807\udda5","\ud807\udda6","\ud807\udda7","\ud807\udda8","\ud807\udda9"],gonm:["\ud807\udd50","\ud807\udd51","\ud807\udd52","\ud807\udd53","\ud807\udd54","\ud807\udd55","\ud807\udd56","\ud807\udd57","\ud807\udd58","\ud807\udd59"],gujr:["\u0ae6","\u0ae7","\u0ae8","\u0ae9","\u0aea","\u0aeb","\u0aec","\u0aed","\u0aee","\u0aef"],guru:["\u0a66","\u0a67","\u0a68","\u0a69","\u0a6a","\u0a6b","\u0a6c","\u0a6d","\u0a6e","\u0a6f"],hanidec:["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],hmng:["\ud81a\udf50","\ud81a\udf51","\ud81a\udf52","\ud81a\udf53","\ud81a\udf54","\ud81a\udf55","\ud81a\udf56","\ud81a\udf57","\ud81a\udf58","\ud81a\udf59"],hmnp:["\ud838\udd40","\ud838\udd41","\ud838\udd42","\ud838\udd43","\ud838\udd44","\ud838\udd45","\ud838\udd46","\ud838\udd47","\ud838\udd48","\ud838\udd49"],java:["\ua9d0","\ua9d1","\ua9d2","\ua9d3","\ua9d4","\ua9d5","\ua9d6","\ua9d7","\ua9d8","\ua9d9"],kali:["\ua900","\ua901","\ua902","\ua903","\ua904","\ua905","\ua906","\ua907","\ua908","\ua909"],khmr:["\u17e0","\u17e1","\u17e2","\u17e3","\u17e4","\u17e5","\u17e6","\u17e7","\u17e8","\u17e9"],knda:["\u0ce6","\u0ce7","\u0ce8","\u0ce9","\u0cea","\u0ceb","\u0cec","\u0ced","\u0cee","\u0cef"],lana:["\u1a80","\u1a81","\u1a82","\u1a83","\u1a84","\u1a85","\u1a86","\u1a87","\u1a88","\u1a89"],lanatham:["\u1a90","\u1a91","\u1a92","\u1a93","\u1a94","\u1a95","\u1a96","\u1a97","\u1a98","\u1a99"],laoo:["\u0ed0","\u0ed1","\u0ed2","\u0ed3","\u0ed4","\u0ed5","\u0ed6","\u0ed7","\u0ed8","\u0ed9"],lepc:["\u1a90","\u1a91","\u1a92","\u1a93","\u1a94","\u1a95","\u1a96","\u1a97","\u1a98","\u1a99"],limb:["\u1946","\u1947","\u1948","\u1949","\u194a","\u194b","\u194c","\u194d","\u194e","\u194f"],mathbold:["\ud835\udfce","\ud835\udfcf","\ud835\udfd0","\ud835\udfd1","\ud835\udfd2","\ud835\udfd3","\ud835\udfd4","\ud835\udfd5","\ud835\udfd6","\ud835\udfd7"],mathdbl:["\ud835\udfd8","\ud835\udfd9","\ud835\udfda","\ud835\udfdb","\ud835\udfdc","\ud835\udfdd","\ud835\udfde","\ud835\udfdf","\ud835\udfe0","\ud835\udfe1"],mathmono:["\ud835\udff6","\ud835\udff7","\ud835\udff8","\ud835\udff9","\ud835\udffa","\ud835\udffb","\ud835\udffc","\ud835\udffd","\ud835\udffe","\ud835\udfff"],mathsanb:["\ud835\udfec","\ud835\udfed","\ud835\udfee","\ud835\udfef","\ud835\udff0","\ud835\udff1","\ud835\udff2","\ud835\udff3","\ud835\udff4","\ud835\udff5"],mathsans:["\ud835\udfe2","\ud835\udfe3","\ud835\udfe4","\ud835\udfe5","\ud835\udfe6","\ud835\udfe7","\ud835\udfe8","\ud835\udfe9","\ud835\udfea","\ud835\udfeb"],mlym:["\u0d66","\u0d67","\u0d68","\u0d69","\u0d6a","\u0d6b","\u0d6c","\u0d6d","\u0d6e","\u0d6f"],modi:["\ud805\ude50","\ud805\ude51","\ud805\ude52","\ud805\ude53","\ud805\ude54","\ud805\ude55","\ud805\ude56","\ud805\ude57","\ud805\ude58","\ud805\ude59"],mong:["\u1810","\u1811","\u1812","\u1813","\u1814","\u1815","\u1816","\u1817","\u1818","\u1819"],mroo:["\ud81a\ude60","\ud81a\ude61","\ud81a\ude62","\ud81a\ude63","\ud81a\ude64","\ud81a\ude65","\ud81a\ude66","\ud81a\ude67","\ud81a\ude68","\ud81a\ude69"],mtei:["\uabf0","\uabf1","\uabf2","\uabf3","\uabf4","\uabf5","\uabf6","\uabf7","\uabf8","\uabf9"],mymr:["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049"],mymrshan:["\u1090","\u1091","\u1092","\u1093","\u1094","\u1095","\u1096","\u1097","\u1098","\u1099"],mymrtlng:["\ua9f0","\ua9f1","\ua9f2","\ua9f3","\ua9f4","\ua9f5","\ua9f6","\ua9f7","\ua9f8","\ua9f9"],newa:["\ud805\udc50","\ud805\udc51","\ud805\udc52","\ud805\udc53","\ud805\udc54","\ud805\udc55","\ud805\udc56","\ud805\udc57","\ud805\udc58","\ud805\udc59"],nkoo:["\u07c0","\u07c1","\u07c2","\u07c3","\u07c4","\u07c5","\u07c6","\u07c7","\u07c8","\u07c9"],olck:["\u1c50","\u1c51","\u1c52","\u1c53","\u1c54","\u1c55","\u1c56","\u1c57","\u1c58","\u1c59"],orya:["\u0b66","\u0b67","\u0b68","\u0b69","\u0b6a","\u0b6b","\u0b6c","\u0b6d","\u0b6e","\u0b6f"],osma:["\ud801\udca0","\ud801\udca1","\ud801\udca2","\ud801\udca3","\ud801\udca4","\ud801\udca5","\ud801\udca6","\ud801\udca7","\ud801\udca8","\ud801\udca9"],rohg:["\ud803\udd30","\ud803\udd31","\ud803\udd32","\ud803\udd33","\ud803\udd34","\ud803\udd35","\ud803\udd36","\ud803\udd37","\ud803\udd38","\ud803\udd39"],saur:["\ua8d0","\ua8d1","\ua8d2","\ua8d3","\ua8d4","\ua8d5","\ua8d6","\ua8d7","\ua8d8","\ua8d9"],segment:["\ud83e\udff0","\ud83e\udff1","\ud83e\udff2","\ud83e\udff3","\ud83e\udff4","\ud83e\udff5","\ud83e\udff6","\ud83e\udff7","\ud83e\udff8","\ud83e\udff9"],shrd:["\ud804\uddd0","\ud804\uddd1","\ud804\uddd2","\ud804\uddd3","\ud804\uddd4","\ud804\uddd5","\ud804\uddd6","\ud804\uddd7","\ud804\uddd8","\ud804\uddd9"],sind:["\ud804\udef0","\ud804\udef1","\ud804\udef2","\ud804\udef3","\ud804\udef4","\ud804\udef5","\ud804\udef6","\ud804\udef7","\ud804\udef8","\ud804\udef9"],sinh:["\u0de6","\u0de7","\u0de8","\u0de9","\u0dea","\u0deb","\u0dec","\u0ded","\u0dee","\u0def"],sora:["\ud804\udcf0","\ud804\udcf1","\ud804\udcf2","\ud804\udcf3","\ud804\udcf4","\ud804\udcf5","\ud804\udcf6","\ud804\udcf7","\ud804\udcf8","\ud804\udcf9"],sund:["\u1bb0","\u1bb1","\u1bb2","\u1bb3","\u1bb4","\u1bb5","\u1bb6","\u1bb7","\u1bb8","\u1bb9"],takr:["\ud805\udec0","\ud805\udec1","\ud805\udec2","\ud805\udec3","\ud805\udec4","\ud805\udec5","\ud805\udec6","\ud805\udec7","\ud805\udec8","\ud805\udec9"],talu:["\u19d0","\u19d1","\u19d2","\u19d3","\u19d4","\u19d5","\u19d6","\u19d7","\u19d8","\u19d9"],tamldec:["\u0be6","\u0be7","\u0be8","\u0be9","\u0bea","\u0beb","\u0bec","\u0bed","\u0bee","\u0bef"],telu:["\u0c66","\u0c67","\u0c68","\u0c69","\u0c6a","\u0c6b","\u0c6c","\u0c6d","\u0c6e","\u0c6f"],thai:["\u0e50","\u0e51","\u0e52","\u0e53","\u0e54","\u0e55","\u0e56","\u0e57","\u0e58","\u0e59"],tibt:["\u0f20","\u0f21","\u0f22","\u0f23","\u0f24","\u0f25","\u0f26","\u0f27","\u0f28","\u0f29"],tirh:["\ud805\udcd0","\ud805\udcd1","\ud805\udcd2","\ud805\udcd3","\ud805\udcd4","\ud805\udcd5","\ud805\udcd6","\ud805\udcd7","\ud805\udcd8","\ud805\udcd9"],vaii:["\u1620","\u1621","\u1622","\u1623","\u1624","\u1625","\u1626","\u1627","\u1628","\u1629"],wara:["\ud806\udce0","\ud806\udce1","\ud806\udce2","\ud806\udce3","\ud806\udce4","\ud806\udce5","\ud806\udce6","\ud806\udce7","\ud806\udce8","\ud806\udce9"],wcho:["\ud838\udef0","\ud838\udef1","\ud838\udef2","\ud838\udef3","\ud838\udef4","\ud838\udef5","\ud838\udef6","\ud838\udef7","\ud838\udef8","\ud838\udef9"]},at=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20BF\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC1\uFDFC\uFDFD\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEE0-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDD78\uDD7A-\uDDCB\uDDCD-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6\uDF00-\uDF92\uDF94-\uDFCA]/,st=new RegExp("^".concat(at.source)),ut=new RegExp("".concat(at.source,"$")),ct=/[#0](?:[\.,][#0]+)*/g;function lt(t,e,n,r){var i,o,a=t.sign,s=t.exponent,u=t.magnitude,c=r.notation,l=r.style,f=r.numberingSystem,p=e.numbers.nu[0],h=null;if("compact"===c&&u&&(h=function(t,e,n,r,i,o,a){var s,u,c=t.roundedNumber,l=t.sign,f=t.magnitude,p=String(Math.pow(10,f)),h=n.numbers.nu[0];if("currency"===r&&"name"!==o){var d=null===(s=((y=n.numbers.currency)[a]||y[h]).short)||void 0===s?void 0:s[p];if(!d)return null;u=ht(e,c,d)}else{var y,g=((y=n.numbers.decimal)[a]||y[h])[i][p];if(!g)return null;u=ht(e,c,g)}if("0"===u)return null;return u=pt(u,l).replace(/([^\s;\-\+\d\xa4]+)/g,"{c:$1}").replace(/0+/,"0")}(t,n,e,l,r.compactDisplay,r.currencyDisplay,f)),"currency"===l&&"name"!==r.currencyDisplay){var d=e.currencies[r.currency];if(d)switch(r.currencyDisplay){case"code":i=r.currency;break;case"symbol":i=d.symbol;break;default:i=d.narrow}else i=r.currency}if(h)o=h;else if("decimal"===l||"unit"===l||"currency"===l&&"name"===r.currencyDisplay)o=pt((e.numbers.decimal[f]||e.numbers.decimal[p]).standard,a);else if("currency"===l){o=pt((g=e.numbers.currency[f]||e.numbers.currency[p])[r.currencySign],a)}else{o=pt(e.numbers.percent[f]||e.numbers.percent[p],a)}var y=ct.exec(o)[0];if(o=o.replace(ct,"{0}").replace(/'(.)'/g,"$1"),"currency"===l&&"name"!==r.currencyDisplay){var g,m=(g=e.numbers.currency[f]||e.numbers.currency[p]).currencySpacing.afterInsertBetween;m&&!ut.test(i)&&(o=o.replace("\xa4{0}","\xa4".concat(m,"{0}")));var v=g.currencySpacing.beforeInsertBetween;v&&!st.test(i)&&(o=o.replace("{0}\xa4","{0}".concat(v,"\xa4")))}for(var _=o.split(/({c:[^}]+}|\{0\}|[\xa4%\-\+])/g),b=[],E=e.numbers.symbols[f]||e.numbers.symbols[p],A=0,C=_;A<C.length;A++){if(Z=C[A])switch(Z){case"{0}":b.push.apply(b,ft(E,t,c,s,f,!h&&r.useGrouping,y));break;case"-":b.push({type:"minusSign",value:E.minusSign});break;case"+":b.push({type:"plusSign",value:E.plusSign});break;case"%":b.push({type:"percentSign",value:E.percentSign});break;case"\xa4":b.push({type:"currency",value:i});break;default:/^\{c:/.test(Z)?b.push({type:"compact",value:Z.substring(3,Z.length-1)}):b.push({type:"literal",value:Z})}}switch(l){case"currency":if("name"===r.currencyDisplay){var S=(e.numbers.currency[f]||e.numbers.currency[p]).unitPattern,O=void 0,T=e.currencies[r.currency];O=T?ht(n,t.roundedNumber*Math.pow(10,s),T.displayName):r.currency;for(var L=[],I=0,w=S.split(/(\{[01]\})/g);I<w.length;I++){switch(Z=w[I]){case"{0}":L.push.apply(L,b);break;case"{1}":L.push({type:"currency",value:O});break;default:Z&&L.push({type:"literal",value:Z})}}return L}return b;case"unit":var P=r.unit,R=r.unitDisplay,M=e.units.simple[P];S=void 0;if(M)S=ht(n,t.roundedNumber*Math.pow(10,s),e.units.simple[P][R]);else{var x=P.split("-per-"),N=x[0],D=x[1];M=e.units.simple[N];var B=ht(n,t.roundedNumber*Math.pow(10,s),e.units.simple[N][R]),F=e.units.simple[D].perUnit[R];if(F)S=F.replace("{0}",B);else{var j=e.units.compound.per[R],k=ht(n,1,e.units.simple[D][R]);S=S=j.replace("{0}",B).replace("{1}",k.replace("{0}",""))}}L=[];for(var G=0,U=S.split(/(\s*\{0\}\s*)/);G<U.length;G++){var Z=U[G],H=/^(\s*)\{0\}(\s*)$/.exec(Z);H?(H[1]&&L.push({type:"literal",value:H[1]}),L.push.apply(L,b),H[2]&&L.push({type:"literal",value:H[2]})):Z&&L.push({type:"unit",value:Z})}return L;default:return b}}function ft(t,e,n,r,i,o,a){var s=[],u=e.formattedString,c=e.roundedNumber;if(isNaN(c))return[{type:"nan",value:u}];if(!isFinite(c))return[{type:"infinity",value:u}];var l=ot[i];l&&(u=u.replace(/\d/g,(function(t){return l[+t]||t})));var f,p,h=u.indexOf(".");if(h>0?(f=u.slice(0,h),p=u.slice(h+1)):f=u,o&&("compact"!==n||c>=1e4)){var d=t.group,y=[],g=a.split(".")[0].split(","),m=3,v=3;g.length>1&&(m=g[g.length-1].length),g.length>2&&(v=g[g.length-2].length);var _=f.length-m;if(_>0){for(y.push(f.slice(_,_+m)),_-=v;_>0;_-=v)y.push(f.slice(_,_+v));y.push(f.slice(0,_+v))}else y.push(f);for(;y.length>0;){var b=y.pop();s.push({type:"integer",value:b}),y.length>0&&s.push({type:"group",value:d})}}else s.push({type:"integer",value:f});if(void 0!==p&&s.push({type:"decimal",value:t.decimal},{type:"fraction",value:p}),("scientific"===n||"engineering"===n)&&isFinite(c)){s.push({type:"exponentSeparator",value:t.exponential}),r<0&&(s.push({type:"exponentMinusSign",value:t.minusSign}),r=-r);var E=et(r,0,0);s.push({type:"exponentInteger",value:E.formattedString})}return s}function pt(t,e){t.indexOf(";")<0&&(t="".concat(t,";-").concat(t));var n=t.split(";"),r=n[0],i=n[1];switch(e){case 0:return r;case-1:return i;default:return i.indexOf("-")>=0?i.replace(/-/g,"+"):"+".concat(r)}}function ht(t,e,n){return n[t.select(e)]||n.other}function dt(t,e,n){var r,i,o,a=n.getInternalSlots,s=a(t),u=s.pl,l=s.dataLocaleData,f=s.numberingSystem,p=l.numbers.symbols[f]||l.numbers.symbols[l.numbers.nu[0]],h=0,d=0;if(isNaN(e))i=p.nan;else if(isFinite(e)){"percent"===s.style&&(e*=100),d=(r=rt(t,e,{getInternalSlots:a}))[0],h=r[1];var y=nt(s,e=d<0?e*Math.pow(10,-d):e/Math.pow(10,d));i=y.formattedString,e=y.roundedNumber}else i=p.infinity;switch(s.signDisplay){case"never":o=0;break;case"auto":o=c(e,0)||e>0||isNaN(e)?0:-1;break;case"always":o=c(e,0)||e>0||isNaN(e)?1:-1;break;default:o=0===e||isNaN(e)?0:e>0?1:-1}return lt({roundedNumber:e,formattedString:i,exponent:d,magnitude:h,sign:o},s.dataLocaleData,u,s)}function yt(t,e,n){for(var r=dt(t,e,n),i=l(0),o=0,a=r;o<a.length;o++){var s=a[o];i.push({type:s.type,value:s.value})}return i}var gt=n(684);function mt(t,e,n){void 0===e&&(e=Object.create(null));var r=(0,n.getInternalSlots)(t),i=N(e,"style","string",["decimal","percent","currency","unit"],"decimal");r.style=i;var o=N(e,"currency","string",void 0,void 0);if(void 0!==o&&!Z(o))throw RangeError("Malformed currency code");if("currency"===i&&void 0===o)throw TypeError("currency cannot be undefined");var a=N(e,"currencyDisplay","string",["code","symbol","narrowSymbol","name"],"symbol"),s=N(e,"currencySign","string",["standard","accounting"],"standard"),u=N(e,"unit","string",void 0,void 0);if(void 0!==u&&!H(u))throw RangeError("Invalid unit argument for Intl.NumberFormat()");if("unit"===i&&void 0===u)throw TypeError("unit cannot be undefined");var c=N(e,"unitDisplay","string",["short","narrow","long"],"short");"currency"===i&&(r.currency=o.toUpperCase(),r.currencyDisplay=a,r.currencySign=s),"unit"===i&&(r.unit=u,r.unitDisplay=c)}function vt(t,e,n,r,i){var o=x(e,"minimumIntegerDigits",1,21,1),a=e.minimumFractionDigits,s=e.maximumFractionDigits,u=e.minimumSignificantDigits,c=e.maximumSignificantDigits;if(t.minimumIntegerDigits=o,void 0!==u||void 0!==c)t.roundingType="significantDigits",u=M(u,1,21,1),c=M(c,u,21,21),t.minimumSignificantDigits=u,t.maximumSignificantDigits=c;else if(void 0!==a||void 0!==s){t.roundingType="fractionDigits",a=M(a,0,20,n),s=M(s,a,20,Math.max(a,r)),t.minimumFractionDigits=a,t.maximumFractionDigits=s}else"compact"===i?t.roundingType="compactRounding":(t.roundingType="fractionDigits",t.minimumFractionDigits=n,t.maximumFractionDigits=r)}function _t(t,e,n,i){var o=i.getInternalSlots,a=i.localeData,s=i.availableLocales,u=i.numberingSystemNames,c=i.getDefaultLocale,l=i.currencyDigitsData,f=r(e),p=R(n),h=Object.create(null),d=N(p,"localeMatcher","string",["lookup","best fit"],"best fit");h.localeMatcher=d;var y=N(p,"numberingSystem","string",void 0,void 0);if(void 0!==y&&u.indexOf(y)<0)throw RangeError("Invalid numberingSystems: ".concat(y));h.nu=y;var g=Object(gt.ResolveLocale)(s,f,h,["nu"],a,c),m=a[g.dataLocale];Q(!!m,"Missing locale data for ".concat(g.dataLocale));var v=o(t);v.locale=g.locale,v.dataLocale=g.dataLocale,v.numberingSystem=g.nu,v.dataLocaleData=m,mt(t,p,{getInternalSlots:o});var _,b,E=v.style;if("currency"===E){var A=it(v.currency,{currencyDigitsData:l});_=A,b=A}else _=0,b="percent"===E?0:3;var C=N(p,"notation","string",["standard","scientific","engineering","compact"],"standard");v.notation=C,vt(v,p,_,b,C);var S=N(p,"compactDisplay","string",["short","long"],"short");"compact"===C&&(v.compactDisplay=S);var O=N(p,"useGrouping","boolean",void 0,!0);v.useGrouping=O;var T=N(p,"signDisplay","string",["auto","never","always","exceptZero"],"auto");return v.signDisplay=T,t}function bt(t){for(var e=[],n=t.indexOf("{"),r=0,i=0,o=t.length;n<t.length&&n>-1;)Q((r=t.indexOf("}",n))>n,"Invalid pattern ".concat(t)),n>i&&e.push({type:"literal",value:t.substring(i,n)}),e.push({type:t.substring(n+1,r),value:void 0}),i=r+1,n=t.indexOf("{",i);return i<o&&e.push({type:"literal",value:t.substring(i,o)}),e}function Et(t,e,n){return void 0!==n&&N(n=u(n),"localeMatcher","string",["lookup","best fit"],"best fit"),Object(gt.LookupSupportedLocales)(t,e)}var At,Ct=n(206);!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="MISSING_LOCALE_DATA",e}Object(Ct.__extends)(e,t)}(Error);function St(t){return"MISSING_LOCALE_DATA"===t.type}!function(t){t.startRange="startRange",t.shared="shared",t.endRange="endRange"}(At||(At={}))},683:function(t,e,n){"use strict";n.r(e);var r=n(89),i=n(42);e.default=function(t,e){void 0===e&&(e={});var n=0,o=0,a=0;return Object(r.coordEach)(t,(function(t){n+=t[0],o+=t[1],a++}),!0),Object(i.point)([n/a,o/a],e.properties)}},684:function(t,e,n){"use strict";n.r(e),n.d(e,"match",(function(){return c})),n.d(e,"LookupSupportedLocales",(function(){return u})),n.d(e,"ResolveLocale",(function(){return s}));var r=/-u(?:-[0-9a-z]{2,8})+/gi;function i(t,e,n){if(void 0===n&&(n=Error),!t)throw new n(e)}function o(t,e){for(var n=e;;){if(t.has(n))return n;var r=n.lastIndexOf("-");if(!~r)return;r>=2&&"-"===n[r-2]&&(r-=2),n=n.slice(0,r)}}function a(t,e){i(2===e.length,"key must have 2 elements");var n=t.length,r="-".concat(e,"-"),o=t.indexOf(r);if(-1!==o){for(var a=o+4,s=a,u=a,c=!1;!c;){var l=t.indexOf("-",u);2===(-1===l?n-u:l-u)?c=!0:-1===l?(s=n,c=!0):(s=l,u=l+1)}return t.slice(a,s)}if(r="-".concat(e),-1!==(o=t.indexOf(r))&&o+3===n)return""}function s(t,e,n,s,u,c){var l;l="lookup"===n.localeMatcher?function(t,e,n){for(var i={locale:""},a=0,s=e;a<s.length;a++){var u=s[a],c=u.replace(r,""),l=o(t,c);if(l)return i.locale=l,u!==c&&(i.extension=u.slice(c.length+1,u.length)),i}return i.locale=n(),i}(t,e,c):function(t,e,n){var i,a={},s={},u={},c=new Set;t.forEach((function(t){var e=new Intl.Locale(t).minimize().toString(),n=Intl.getCanonicalLocales(t)[0]||t;a[e]=t,s[t]=t,u[n]=t,c.add(e),c.add(t),c.add(n)}));for(var l=0,f=e;l<f.length;l++){var p=f[l];if(i)break;var h=p.replace(r,"");if(t.has(h)){i=h;break}if(c.has(h)){i=h;break}var d=new Intl.Locale(h),y=d.maximize().toString(),g=d.minimize().toString();if(c.has(g)){i=g;break}i=o(c,y)}return i?{locale:s[i]||u[i]||a[i]||i}:{locale:n()}}(t,e,c);for(var f=l.locale,p={locale:"",dataLocale:f},h="-u",d=0,y=s;d<y.length;d++){var g=y[d];i(f in u,"Missing locale data for ".concat(f));var m=u[f];i("object"===typeof m&&null!==m,"locale data ".concat(g," must be an object"));var v=m[g];i(Array.isArray(v),"keyLocaleData for ".concat(g," must be an array"));var _=v[0];i("string"===typeof _||null===_,"value must be string or null but got ".concat(typeof _," in key ").concat(g));var b="";if(l.extension){var E=a(l.extension,g);void 0!==E&&(""!==E?~v.indexOf(E)&&(_=E,b="-".concat(g,"-").concat(_)):~E.indexOf("true")&&(_="true",b="-".concat(g)))}if(g in n){var A=n[g];i("string"===typeof A||"undefined"===typeof A||null===A,"optionsValue must be String, Undefined or Null"),~v.indexOf(A)&&A!==_&&(_=A,b="")}p[g]=_,h+=b}if(h.length>2){var C=f.indexOf("-x-");if(-1===C)f+=h;else{var S=f.slice(0,C),O=f.slice(C,f.length);f=S+h+O}f=Intl.getCanonicalLocales(f)[0]}return p.locale=f,p}function u(t,e){for(var n=[],i=0,a=e;i<a.length;i++){var s=o(t,a[i].replace(r,""));s&&n.push(s)}return n}function c(t,e,n,r){return s(e.reduce((function(t,e){return t.add(e),t}),new Set),function(t){return Intl.getCanonicalLocales(t)}(t),{localeMatcher:(null===r||void 0===r?void 0:r.algorithm)||"best fit"},[],{},(function(){return n})).locale}},685:function(t,e,n){var r,i,o,a,s,u,c,l,f,p,h,d,y,g,m,v,_=n(531).default,b=n(773).default,E=n(774).default,A=n(775).default;self,t.exports=(r=n(0),i=n(177),o=n(244),a=n(376),s=n(305),u=n(529),c=n(679),l=n(305),f=n(244),p=n(178),h=n(57),d=n(686),y=n(808),g=n(367),m=n(41),v=n(161),function(){var t={162:function(t,e,n){t.exports=n(47)},629:function(t,e,n){var r;!function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),f=Math.round,p=Math.abs,h=Date.now;function d(t,e,n){return setTimeout(E(t,n),e)}function y(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function m(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var v=m((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_=m((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function E(t,e){return function(){return t.apply(e,arguments)}}function A(t,e){return"function"==typeof t?t.apply(e&&e[0]||s,e):t}function C(t,e){return t===s?e:t}function S(t,e,n){g(I(e),(function(e){t.addEventListener(e,n,!1)}))}function O(t,e,n){g(I(e),(function(e){t.removeEventListener(e,n,!1)}))}function T(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function L(t,e){return t.indexOf(e)>-1}function I(t){return t.trim().split(/\s+/g)}function w(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];w(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function M(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var x=1;function N(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var D="ontouchstart"in i,B=M(i,"PointerEvent")!==s,F=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",k="mouse",G=["x","y"],U=["clientX","clientY"];function Z(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){A(t.options.enable,[t])&&n.handler(e)},this.init()}function H(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,a=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=z(e)),i>1&&!n.firstMultiple?n.firstMultiple=z(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,c=e.center=V(r);e.timeStamp=h(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=J(u,c),e.distance=q(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=X(e.deltaX,e.deltaY);var l,f,d=K(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=p(d.x)>p(d.y)?d.x:d.y,e.scale=a?(l=a.pointers,q((f=r)[0],f[1],U)/q(l[0],l[1],U)):1,e.rotation=a?function(t,e){return J(e[1],e[0],U)+J(t[1],t[0],U)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(u>25||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=K(u,c,l);r=f.x,i=f.y,n=p(f.x)>p(f.y)?f.x:f.y,o=X(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var y=t.element;T(e.srcEvent.target,y)&&(y=e.srcEvent.target),e.target=y}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:f(t.pointers[n].clientX),clientY:f(t.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:e,center:V(e),deltaX:t.deltaX,deltaY:t.deltaY}}function V(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:f(n/e),y:f(r/e)}}function K(t,e,n){return{x:e/t||0,y:n/t||0}}function X(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function q(t,e,n){n||(n=G);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function J(t,e,n){n||(n=G);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(N(this.element),this.evWin,this.domHandler)}};var W={mousedown:1,mousemove:2,mouseup:4},Y="mousedown",Q="mousemove mouseup";function $(){this.evEl=Y,this.evWin=Q,this.pressed=!1,Z.apply(this,arguments)}b($,Z,{handler:function(t){var e=W[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:k,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:j,3:"pen",4:k,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=rt,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),b(it,Z,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=tt[r],o=et[t.pointerType]||t.pointerType,a=o==j,s=w(e,t.pointerId,"pointerId");1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",st="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=at,this.evWin=st,this.started=!1,Z.apply(this,arguments)}function ct(t,e){var n=P(t.touches),r=P(t.changedTouches);return 12&e&&(n=R(n.concat(r),"identifier",!0)),[n,r]}b(ut,Z,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var n=ct.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}});var lt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ft="touchstart touchmove touchend touchcancel";function pt(){this.evTarget=ft,this.targetIds={},Z.apply(this,arguments)}function ht(t,e){var n=P(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=P(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return T(t.target,u)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&e&&delete r[a[i].identifier],i++;return s.length?[R(o.concat(s),"identifier",!0),s]:void 0}function dt(){Z.apply(this,arguments);var t=E(this.handler,this);this.touch=new pt(this.manager,t),this.mouse=new $(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function yt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function mt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}b(pt,Z,{handler:function(t){var e=lt[t.type],n=ht.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}),b(dt,Z,{handler:function(t,e,n){var r=n.pointerType==j,i=n.pointerType==k;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)yt.call(this,e,n);else if(i&&mt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=M(l.style,"touchAction"),_t=vt!==s,bt="compute",Et="auto",At="manipulation",Ct="none",St="pan-x",Ot="pan-y",Tt=function(){if(!_t)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Lt(t,e){this.manager=t,this.set(e)}Lt.prototype={set:function(t){t==bt&&(t=this.compute()),_t&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){A(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(L(t,Ct))return Ct;var e=L(t,St),n=L(t,Ot);return e&&n?Ct:e||n?e?St:Ot:L(t,At)?At:Et}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=L(r,Ct)&&!Tt.none,o=L(r,Ot)&&!Tt["pan-y"],a=L(r,St)&&!Tt["pan-x"];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&6&n||a&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var It=32;function wt(t){this.options=u({},this.defaults,t||{}),this.id=x++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Rt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Mt(t,e){var n=e.manager;return n?n.get(t):t}function xt(){wt.apply(this,arguments)}function Nt(){xt.apply(this,arguments),this.pX=null,this.pY=null}function Dt(){xt.apply(this,arguments)}function Bt(){wt.apply(this,arguments),this._timer=null,this._input=null}function Ft(){xt.apply(this,arguments)}function jt(){xt.apply(this,arguments)}function kt(){wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Gt(t,e){return(e=e||{}).recognizers=C(e.recognizers,Gt.defaults.preset),new Ut(t,e)}function Ut(t,e){this.options=u({},Gt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(B?it:F?pt:D?dt:$))(this,H),this.touchAction=new Lt(this,this.options.touchAction),Zt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Zt(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,(function(i,o){n=M(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}wt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(y(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Mt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return y(t,"dropRecognizeWith",this)||(t=Mt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(y(t,"requireFailure",this))return this;var e=this.requireFail;return-1===w(e,t=Mt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(y(t,"dropRequireFailure",this))return this;t=Mt(t,this);var e=w(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Pt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Pt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=It},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!A(this.options.enable,[this,e]))return this.reset(),void(this.state=It);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(xt,wt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:It}}),b(Nt,xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Ot),24&t&&e.push(St),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return xt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Rt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Dt,xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Bt,wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Et]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return It},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),b(Ft,xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(jt,xt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Nt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Rt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(kt,wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[At]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||q(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return It},failTimeout:function(){return this._timer=d((function(){this.state=It}),this.options.interval,this),It},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Gt.VERSION="2.0.7",Gt.defaults={domEvents:!1,touchAction:bt,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Dt,{enable:!1},["rotate"]],[jt,{direction:6}],[Nt,{direction:6},["swipe"]],[kt],[kt,{event:"doubletap",taps:2},["tap"]],[Bt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ut.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof wt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(y(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(y(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=w(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return g(I(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return g(I(t),(function(t){e?n[t]&&n[t].splice(w(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Zt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Gt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:It,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ut,Input:Z,TouchAction:Lt,TouchInput:pt,MouseInput:$,PointerEventInput:it,TouchMouseInput:dt,SingleTouchInput:ut,Recognizer:wt,AttrRecognizer:xt,Tap:kt,Pan:Nt,Swipe:jt,Pinch:Dt,Rotate:Ft,Press:Bt,on:S,off:O,each:g,merge:_,extend:v,assign:u,inherit:b,bindFn:E,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Gt,(r=function(){return Gt}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},262:function(t,e,n){"use strict";var r=n(586);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},980:function(t,e,n){t.exports=n(262)()},586:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},47:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?d:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",y={};function g(){}function m(){}function v(){}var _={};u(_,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(w([])));E&&E!==n&&r.call(E,o)&&(_=E);var A=v.prototype=g.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function w(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=v,u(A,"constructor",v),u(v,"constructor",m),m.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},C(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(A),u(A,s,"Generator"),u(A,o,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=w,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:w(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},178:function(t){"use strict";t.exports=c},306:function(t){"use strict";t.exports=g},485:function(t){"use strict";t.exports=s},38:function(t){"use strict";t.exports=l},347:function(t){"use strict";t.exports=o},987:function(t){"use strict";t.exports=f},214:function(t){"use strict";t.exports=a},116:function(t){"use strict";t.exports=u},946:function(t){"use strict";t.exports=m},445:function(t){"use strict";t.exports=v},670:function(t){"use strict";t.exports=p},793:function(t){"use strict";t.exports=h},59:function(t){"use strict";t.exports=d},102:function(t){"use strict";t.exports=y},156:function(t){"use strict";t.exports=r},756:function(t){"use strict";t.exports=i}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var C={};return function(){"use strict";function t(){return t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(this,arguments)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(C),n.d(C,{CategoryWidget:function(){return G},FeatureSelectionLayer:function(){return Ne},FeatureSelectionWidget:function(){return Ot},FormulaWidget:function(){return Z},GeocoderWidget:function(){return W},HistogramWidget:function(){return et},LegendWidget:function(){return at},PieWidget:function(){return it},ScatterPlotWidget:function(){return ct},TableWidget:function(){return Lt},TimeSeriesWidget:function(){return ht},geocodeStreetPoint:function(){return L},getCategories:function(){return O},getFormula:function(){return v},getHistogram:function(){return S},getScatter:function(){return I},getTable:function(){return P},useSourceFilters:function(){return B}});var o=n(156),a=n.n(o),s=n(756),u=n(980),c=n.n(u),l=n(347),f=n(214),p=n(485);function h(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){h(o,r,i,a,s,"next",t)}function s(t){h(o,r,i,a,s,"throw",t)}a(void 0)}))}}var y=n(162),g=n.n(y),m=n(116),v=function(){var t=d(g().mark((function t(e){var n,r,i,o;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.operation,r=e.column,i=e.filters,o=e.dataSource,t.abrupt("return",(0,m.executeTask)(o,m.Methods.FEATURES_FORMULA,{filters:i,operation:n,column:r}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=d(g().mark((function t(e){var n,r,i,o,a;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.column,r=e.operation,i=e.ticks,o=e.filters,a=e.dataSource,t.abrupt("return",(0,m.executeTask)(a,m.Methods.FEATURES_HISTOGRAM,{filters:o,operation:r,column:n,ticks:i}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=d(g().mark((function t(e){var n,r,i,o,a;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.column,r=e.operationColumn,i=e.operation,o=e.filters,a=e.dataSource,t.abrupt("return",(0,m.executeTask)(a,m.Methods.FEATURES_CATEGORY,{filters:o,operation:i,column:n,operationColumn:r||n}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=n(178),L=function(){var t=d(g().mark((function t(e,n){var r,o,a,s,u,c,l,f,p,h,d,y=arguments;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.searchText,o=n.city,a=n.state,s=n.country,u=y.length>2&&void 0!==y[2]?y[2]:{},"default_public"!==e.apiKey){t.next=4;break}throw new Error("To search a location you need to login or provide an API KEY");case 4:return c="SELECT ST_AsGeoJSON(cdb_geocode_street_point('".concat(r,"', '").concat(null!=o?o:"","', '").concat(null!=a?a:"","', '").concat(null!=s?s:"","')) AS geometry"),t.next=7,(0,T.executeSQL)({credentials:e,query:c,opts:u});case 7:if(l=t.sent,null!==(f=JSON.parse(l[0].geometry))){t.next=11;break}return t.abrupt("return",null);case 11:return p=i(f.coordinates,2),h=p[0],d=p[1],t.abrupt("return",{longitude:h,latitude:d});case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),I=function(){var t=d(g().mark((function t(e){var n,r,i,o;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.xAxisColumn,r=e.yAxisColumn,i=e.filters,o=e.dataSource,t.abrupt("return",(0,m.executeTask)(o,m.Methods.FEATURES_SCATTERPLOT,{filters:i,xAxisColumn:n,yAxisColumn:r}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=d(g().mark((function t(e){var n,r,i,o,a,s;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filters,r=e.dataSource,i=e.column,o=e.operationColumn,a=e.operation,s=e.stepSize,t.abrupt("return",(0,m.executeTask)(r,m.Methods.FEATURES_TIME_SERIES,{filters:n,column:i,stepSize:s,operationColumn:o||i,operation:a}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=d(g().mark((function t(e){var n,r,i,o,a,s;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filters,r=e.dataSource,i=e.rowsPerPage,o=e.page,a=e.sortBy,s=e.sortDirection,t.abrupt("return",(0,m.executeTask)(r,m.Methods.FEATURES_RAW,{filters:n,limit:i,page:o,sortBy:a,sortByDirection:s}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=n(38),M=n(987),x=Object.prototype.hasOwnProperty;function N(t,e,n){var r,i=A(t.keys());try{for(i.s();!(r=i.n()).done;)if(D(n=r.value,e))return n}catch(o){i.e(o)}finally{i.f()}}function D(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&D(t[r],e[r]););return-1===r}if(n===Set){if(t.size!==e.size)return!1;var o,a=A(t);try{for(a.s();!(o=a.n()).done;){if((i=r=o.value)&&"object"==typeof i&&!(i=N(e,i)))return!1;if(!e.has(i))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}if(n===Map){if(t.size!==e.size)return!1;var s,u=A(t);try{for(u.s();!(s=u.n()).done;){if((i=(r=s.value)[0])&&"object"==typeof i&&!(i=N(e,i)))return!1;if(!D(r[1],e.get(i)))return!1}}catch(c){u.e(c)}finally{u.f()}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return-1===r}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return-1===r}if(!n||"object"==typeof t){for(n in r=0,t){if(x.call(t,n)&&++r&&!x.call(e,n))return!1;if(!(n in e)||!D(t[n],e[n]))return!1}return Object.keys(e).length===r}}return t!=t&&e!=e}function B(t){var e,n,r=t.dataSource,i=t.id,a=(0,s.useSelector)((function(t){return(0,M.selectSourceById)(t,r)||{}})).filters;return e=(0,o.useMemo)((function(){return(0,R._getApplicableFilters)(a,i)}),[a,i]),D((n=(0,o.useRef)(e)).current,e)||(n.current=e),n.current}function F(t){var e=t.dataSource,n=t.id,r=t.column,i=t.type,a=(0,s.useSelector)((function(t){return(0,M.selectSourceById)(t,e)||{}})).filters;return(0,o.useMemo)((function(){var t,e=null==a||null===(t=a[r])||void 0===t?void 0:t[i];return e&&e.owner===n?e.values:null}),[a,r,i,n])}var j=[];function k(e){var n=e.id,r=e.title,u=e.dataSource,c=e.column,h=e.operationColumn,d=e.operation,y=e.formatter,g=e.labels,m=e.animation,v=e.filterable,_=e.searchable,b=e.onError,E=e.wrapperProps,A=e.noDataAlertProps,C=(0,s.useDispatch)(),S=(0,s.useSelector)((function(t){return(0,M.selectAreFeaturesReadyForSource)(t,u)})),T=i((0,o.useState)([]),2),L=T[0],I=T[1],w=i((0,o.useState)(!0),2),P=w[0],R=w[1],x=B({dataSource:u,id:n}),N=F({dataSource:u,id:n,column:c,type:p._FilterTypes.IN})||j;(0,o.useEffect)((function(){R(!0),S&&O({column:c,operationColumn:h,operation:d,filters:x,dataSource:u}).then((function(t){t&&(R(!1),I(t))})).catch((function(t){R(!1),b&&b(t)}))}),[n,c,h,d,x,u,R,b,S]);var D=(0,o.useCallback)((function(t){t&&t.length?C((0,l.addFilter)({id:u,column:c,type:p._FilterTypes.IN,values:t,owner:n})):C((0,l.removeFilter)({id:u,column:c}))}),[c,u,n,C]);return a().createElement(f.WrapperWidgetUI,t({title:r,isLoading:P},E),L.length||P?a().createElement(f.CategoryWidgetUI,{data:L,formatter:y,labels:g,selectedCategories:N,onSelectedCategoriesChange:D,animation:m,filterable:v,searchable:_}):a().createElement(f.NoDataAlert,A))}k.propTypes={id:c().string.isRequired,title:c().string.isRequired,dataSource:c().string.isRequired,column:c().string.isRequired,operationColumn:c().string,operation:c().oneOf(Object.values(p.AggregationTypes)).isRequired,formatter:c().func,labels:c().object,animation:c().bool,filterable:c().bool,searchable:c().bool,onError:c().func,wrapperProps:c().object,noDataAlertProps:c().object},k.defaultProps={labels:{},animation:!0,filterable:!0,searchable:!0,wrapperProps:{},noDataAlertProps:{}};var G=k;function U(e){var n=e.id,r=e.title,u=e.dataSource,c=e.column,p=e.operation,h=e.formatter,d=e.animation,y=e.onError,g=e.wrapperProps,m=(0,s.useSelector)((function(t){return(0,l.selectAreFeaturesReadyForSource)(t,u)})),_=B({dataSource:u,id:n}),b=i((0,o.useState)(null),2),E=b[0],A=b[1],C=i((0,o.useState)(!0),2),S=C[0],O=C[1];return(0,o.useEffect)((function(){O(!0),m&&v({operation:p,column:c,filters:_,dataSource:u}).then((function(t){t&&t[0]&&(O(!1),A(t[0].value))})).catch((function(t){O(!1),y&&y(t)}))}),[p,c,_,u,O,y,m]),a().createElement(f.WrapperWidgetUI,t({title:r,isLoading:S},g),a().createElement(f.FormulaWidgetUI,{data:E,formatter:h,unitBefore:!0,animation:d}))}U.propTypes={id:u.PropTypes.string.isRequired,title:u.PropTypes.string.isRequired,dataSource:u.PropTypes.string.isRequired,column:u.PropTypes.string.isRequired,operation:u.PropTypes.oneOf(Object.values(p.AggregationTypes)).isRequired,formatter:u.PropTypes.func,animation:u.PropTypes.bool,onError:u.PropTypes.func,wrapperProps:u.PropTypes.object},U.defaultProps={animation:!0,wrapperProps:{}};var Z=U;function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z=n(670);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X=(0,n(793).makeStyles)((function(t){return{paperInput:{height:t.spacing(4.5),width:t.spacing(30),paddingLeft:t.spacing(1.5),borderRadius:4,display:"flex",alignItems:"center"},icon:{fill:t.palette.text.secondary,height:"1em",fontSize:"".concat(t.typography.body2.lineHeight,"em")},clear:K({},t.typography.body2),input:K(K({},t.typography.body2),{},{width:"calc(100% - ".concat(t.spacing(5),"px)"),marginLeft:t.spacing(1)})}})),q=function(t){return a().createElement(z.SvgIcon,t,a().createElement("path",{d:"M11,4 C14.8659932,4 18,7.13400675 18,11 C18,12.7003211 17.3937669,14.2590489 16.3856562,15.4718279 L19.4748737,18.5606602 L18.0606602,19.9748737 L14.8998887,16.8138615 C13.7854137,17.5629194 12.4437497,18 11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 Z M11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 Z",fill:"inherit"}))};function J(t){var e=(0,o.useRef)(),n=(0,s.useSelector)(l.selectOAuthCredentials),r=(0,s.useSelector)((function(t){return t.carto.credentials})),u=n||r,c=i((0,o.useState)(""),2),f=c[0],p=c[1],h=i((0,o.useState)(!1),2),y=h[0],m=h[1],v=(0,s.useDispatch)();(0,o.useEffect)((function(){v((0,l.addLayer)({id:"geocoderLayer"}))}),[v]);var _=X(),b=function(){var t=d(g().mark((function t(e){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:13===e.keyCode&&e.target.blur();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=d(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.length&&A();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=d(g().mark((function t(){var e;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=15;break}return t.prev=1,m(!0),t.next=5,L(u,{searchText:f,country:""});case 5:(e=t.sent)&&(C(e),S(e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),O(t.t0);case 12:return t.prev=12,m(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(){return t.apply(this,arguments)}}(),C=function(t){v((0,l.setViewState)({longitude:t.longitude,latitude:t.latitude,zoom:16,transitionDuration:500}))},S=function(t){v({type:"carto/setGeocoderResult",payload:t})},O=function(e){t.onError&&t.onError(e)};return a().createElement(z.Paper,{className:"".concat(t.className," ").concat(_.paperInput),elevation:2},y?a().createElement(z.CircularProgress,{size:20,className:_.icon}):a().createElement(q,{className:_.icon}),a().createElement(z.InputBase,{type:"search",tabIndex:-1,inputRef:e,size:"small",placeholder:"Search address",className:_.input,value:f,inputProps:{"aria-label":"GeocoderSearch"},onChange:function(t){p(t.target.value)},onInput:function(t){""===t.target.value&&S(null)},onKeyDown:b,onBlur:E}))}J.propTypes={className:u.PropTypes.string,onError:u.PropTypes.func},J.defaultProps={};var W=J;function Y(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}var $=[];function tt(e){var n=e.id,r=e.title,u=e.dataSource,c=e.column,h=e.operation,d=e.ticks,y=e.xAxisFormatter,g=e.dataAxis,m=e.formatter,v=e.tooltip,_=e.animation,b=e.filterable,E=e.onError,A=e.wrapperProps,C=e.noDataAlertProps,O=(0,s.useDispatch)(),T=i((0,o.useState)([]),2),L=T[0],I=T[1],w=i((0,o.useState)(!0),2),P=w[0],R=w[1],x=B({dataSource:u,id:n}),N=(0,s.useSelector)((function(t){return(0,M.selectAreFeaturesReadyForSource)(t,u)})),D=F({dataSource:u,id:n,column:c,type:p._FilterTypes.CLOSED_OPEN}),j=(0,o.useMemo)((function(){return(D||$).map((function(t){var e=i(t,2),n=e[0],r=e[1];if(null==n)return 0;if(null==r)return d.length;var o=d.indexOf(n);return-1!==o?o+1:null})).filter((function(t){return null!==t}))}),[D,d]),k=(0,o.useCallback)((function(t){var e=i(t,1)[0],n=m?m(e.value,e.dataIndex,d):{prefix:"",value:e.value};return"object"===Q(n)?"".concat(n.prefix).concat(n.value):n}),[m,d]);(0,o.useEffect)((function(){R(!0),N&&S({column:c,operation:h,ticks:d,filters:x,dataSource:u}).then((function(t){t&&(R(!1),I(t))})).catch((function(t){R(!1),E&&E(t)}))}),[n,c,h,d,u,x,R,E,N]);var G=(0,o.useCallback)((function(t){var e=t.bars;if(e&&e.length){var r=e.map((function(t){return[d[t-1],d.length!==t+1?d[t]:void 0]}));O((0,l.addFilter)({id:u,column:c,type:p._FilterTypes.CLOSED_OPEN,values:r,owner:n}))}else O((0,l.removeFilter)({id:u,column:c}))}),[c,u,n,O,d]),U=d.reduce((function(t,e,n){return 0===t.length?["< ".concat(e)]:n===d.length-1?[].concat(Y(t),["< ".concat(e),">= ".concat(e)]):[].concat(Y(t),["< ".concat(e)])}),[]);return a().createElement(f.WrapperWidgetUI,t({title:r},A,{isLoading:P}),L.length||P?a().createElement(f.HistogramWidgetUI,{data:L,dataAxis:g||U,selectedBars:j,onSelectedBarsChange:G,tooltip:v,tooltipFormatter:k,xAxisFormatter:y,yAxisFormatter:m,animation:_,filterable:b}):a().createElement(f.NoDataAlert,C))}tt.propTypes={id:u.PropTypes.string.isRequired,title:u.PropTypes.string.isRequired,dataSource:u.PropTypes.string.isRequired,column:u.PropTypes.string.isRequired,operation:u.PropTypes.oneOf(Object.values(p.AggregationTypes)).isRequired,xAxisFormatter:u.PropTypes.func,formatter:u.PropTypes.func,tooltip:u.PropTypes.bool,animation:u.PropTypes.bool,filterable:u.PropTypes.bool,ticks:u.PropTypes.array.isRequired,onError:u.PropTypes.func,wrapperProps:u.PropTypes.object,noDataAlertProps:u.PropTypes.object},tt.defaultProps={tooltip:!0,animation:!0,filterable:!0,wrapperProps:{},noDataAlertProps:{}};var et=tt,nt=[];function rt(e){var n=e.id,r=e.title,u=e.height,c=e.dataSource,h=e.column,d=e.operationColumn,y=e.operation,g=e.formatter,m=e.tooltipFormatter,v=e.labels,_=e.animation,b=e.filterable,E=e.colors,A=e.onError,C=e.wrapperProps,S=e.noDataAlertProps,T=(0,s.useDispatch)(),L=i((0,o.useState)([]),2),I=L[0],w=L[1],P=F({dataSource:c,id:n,column:h,type:p._FilterTypes.IN})||nt,R=i((0,o.useState)(!0),2),x=R[0],N=R[1],D=(0,s.useSelector)((function(t){return(0,M.selectAreFeaturesReadyForSource)(t,c)})),j=B({dataSource:c,id:n});(0,o.useEffect)((function(){N(!0),D&&O({column:h,operation:y,operationColumn:d,filters:j,dataSource:c}).then((function(t){t&&(N(!1),w(t))})).catch((function(t){N(!1),A&&A(t)}))}),[n,h,d,y,j,c,N,A,D]);var k=(0,o.useCallback)((function(t){t&&t.length?T((0,l.addFilter)({id:c,column:h,type:p._FilterTypes.IN,values:t,owner:n})):T((0,l.removeFilter)({id:c,column:h}))}),[h,c,n,T]);return a().createElement(f.WrapperWidgetUI,t({title:r,isLoading:x},C),I.length||x?a().createElement(f.PieWidgetUI,{data:I,formatter:g,height:u,tooltipFormatter:m,colors:E,labels:v,animation:_,filterable:b,selectedCategories:P,onSelectedCategoriesChange:k}):a().createElement(f.NoDataAlert,S))}rt.propTypes={id:c().string.isRequired,title:c().string.isRequired,height:c().number,dataSource:c().string.isRequired,column:c().string.isRequired,operationColumn:c().string,operation:c().oneOf(Object.values(p.AggregationTypes)).isRequired,formatter:c().func,tooltipFormatter:c().func,labels:c().object,animation:c().bool,filterable:c().bool,onError:c().func,colors:c().arrayOf(c().string),wrapperProps:c().object,noDataAlertProps:c().object},rt.defaultProps={animation:!0,filterable:!0,wrapperProps:{},noDataAlertProps:{}};var it=rt;function ot(t){var e=t.className,n=t.customLegendTypes,r=t.initialCollapsed,u=(0,s.useDispatch)(),c=(0,s.useSelector)((function(t){return Object.values(t.carto.layers).filter((function(t){return!!t.legend}))})),l=i((0,o.useState)(r),2),p=l[0],h=l[1];return c.length?a().createElement(f.LegendWidgetUI,{className:e,customLegendTypes:n,layers:c,onChangeVisibility:function(t){var e=t.id,n=t.visible;u((0,M.updateLayer)({id:e,layerAttributes:{visible:n}}))},onChangeOpacity:function(t){var e=t.id,n=t.opacity;u((0,M.updateLayer)({id:e,layerAttributes:{opacity:n}}))},collapsed:p,onChangeCollapsed:h,onChangeLegendRowCollapsed:function(t){var e=t.id,n=t.collapsed;u((0,M.updateLayer)({id:e,layerAttributes:{legend:{collapsed:n}}}))}}):null}ot.propTypes={className:c().string,customLegendTypes:c().objectOf(c().func),initialCollapsed:c().bool},ot.defaultProps={initialCollapsed:!1};var at=ot;function st(e){var n=e.id,r=e.title,u=e.dataSource,c=e.xAxisColumn,p=e.yAxisColumn,h=e.animation,d=e.yAxisFormatter,y=e.xAxisFormatter,g=e.tooltipFormatter,m=e.onError,v=e.wrapperProps,_=e.noDataAlertProps,b=i((0,o.useState)([]),2),E=b[0],A=b[1],C=i((0,o.useState)(!0),2),S=C[0],O=C[1],T=(0,s.useSelector)((function(t){return(0,l.selectAreFeaturesReadyForSource)(t,u)})),L=B({dataSource:u,id:n});return(0,o.useEffect)((function(){O(!0),T&&I({xAxisColumn:c,yAxisColumn:p,filters:L,dataSource:u}).then((function(t){t&&(O(!1),A(t))})).catch((function(t){O(!1),m&&m(t)}))}),[n,c,p,u,L,O,T,m]),a().createElement(f.WrapperWidgetUI,t({title:r,isLoading:S},v),E.length||S?a().createElement(f.ScatterPlotWidgetUI,{data:E,tooltipFormatter:g,xAxisFormatter:y,yAxisFormatter:d,animation:h}):a().createElement(f.NoDataAlert,_))}st.propTypes={id:u.PropTypes.string.isRequired,title:u.PropTypes.string.isRequired,dataSource:u.PropTypes.string.isRequired,xAxisColumn:u.PropTypes.string.isRequired,yAxisColumn:u.PropTypes.string.isRequired,animation:u.PropTypes.bool,xAxisFormatter:u.PropTypes.func,yAxisFormatter:u.PropTypes.func,tooltipFormatter:u.PropTypes.func,onError:u.PropTypes.func,wrapperProps:u.PropTypes.object,noDataAlertProps:u.PropTypes.object},st.defaultProps={tooltip:!0,animation:!0,wrapperProps:{},noDataAlertProps:{},tooltipFormatter:function(t){return"[".concat(t.value[0],", ").concat(t.value[1],")")},xAxisFormatter:function(t){return t},yAxisFormatter:function(t){return t}};var ut,ct=st,lt=(H(ut={},p.GroupDateTypes.YEARS,31536e6),H(ut,p.GroupDateTypes.MONTHS,2592e6),H(ut,p.GroupDateTypes.WEEKS,6048e5),H(ut,p.GroupDateTypes.DAYS,864e5),H(ut,p.GroupDateTypes.HOURS,36e5),H(ut,p.GroupDateTypes.MINUTES,6e4),ut);function ft(e){var n=e.id,r=e.title,u=e.dataSource,c=e.column,h=e.operationColumn,d=e.operation,y=e.stepSizeOptions,g=e.onError,m=e.wrapperProps,v=e.noDataAlertProps,_=e.chartType,b=e.tooltip,E=e.tooltipFormatter,A=e.formatter,C=e.height,S=e.showControls,O=e.animation,T=e.isPlaying,L=e.onPlay,I=e.isPaused,P=e.onPause,R=e.onStop,M=e.onTimelineUpdate,x=e.timeWindow,N=e.onTimeWindowUpdate,D=e.stepSize,F=(0,s.useDispatch)(),j=(0,s.useSelector)((function(t){return(0,l.selectAreFeaturesReadyForSource)(t,u)})),k=B({dataSource:u,id:n}),G=i((0,o.useState)([]),2),U=G[0],Z=G[1],H=i((0,o.useState)(D),2),V=H[0],K=H[1],X=i((0,o.useState)(!0),2),q=X[0],J=X[1];(0,o.useEffect)((function(){D!==V&&K(D)}),[D]),(0,o.useEffect)((function(){J(!0),j&&w({filters:k,dataSource:u,column:c,stepSize:V,operationColumn:h,operation:d}).then((function(t){t&&(J(!1),Z(t))})).catch((function(t){J(!1),g&&g(t)}))}),[n,k,u,c,V,j,J,h,d,g]);var W=(0,o.useCallback)((function(t){q||(F((0,l.addFilter)({id:u,column:c,type:p._FilterTypes.TIME,values:[t.map((function(t){var e;return(null===(e=t.getTime)||void 0===e?void 0:e.call(t))||t}))],owner:n})),N&&N(t))}),[c,u,q,F,n,N]),Q=(0,o.useCallback)((function(t){if(!q){var e=U[t].name;F((0,l.addFilter)({id:u,column:c,type:p._FilterTypes.TIME,values:[[e,e+lt[V]]],owner:n})),M&&M(new Date(e))}}),[c,u,q,F,n,M,V,U]),$=(0,o.useCallback)((function(){F((0,l.removeFilter)({id:u,column:c})),R&&R()}),[c,u,F,R]),tt=i((0,o.useState)(null),2),et=tt[0],nt=tt[1],rt=function(){nt(null)};return a().createElement(a().Fragment,null,a().createElement(f.WrapperWidgetUI,t({title:r,isLoading:q},m,{actions:[].concat(Y((null==m?void 0:m.actions)||[]),Y(null!=y&&y.length?[{id:"a0",name:"Bucket size",icon:a().createElement(dt,null),action:function(t){null!=t&&t.currentTarget&&nt(t.currentTarget)}}]:[]))}),U.length||q?a().createElement(f.TimeSeriesWidgetUI,{data:U,stepSize:V,chartType:_,tooltip:b,tooltipFormatter:E,formatter:A,height:C,showControls:S,animation:O,isPlaying:T,onPlay:L,isPaused:I,onPause:P,onStop:$,onTimelineUpdate:Q,timeWindow:x,onTimeWindowUpdate:W}):a().createElement(f.NoDataAlert,v)),a().createElement(z.Menu,{anchorEl:et,keepMounted:!0,open:Boolean(et),onClose:rt},a().createElement(z.MenuItem,{disabled:!0},a().createElement(z.Typography,{variant:"caption",color:"textSecondary"},"Step size")),y.map((function(t){return a().createElement(z.MenuItem,{key:t,selected:V===t,onClick:function(){return function(t){K(t),rt()}(t)}},(0,z.capitalize)(t))}))))}ft.propTypes={id:u.PropTypes.string.isRequired,title:u.PropTypes.string.isRequired,dataSource:u.PropTypes.string.isRequired,column:u.PropTypes.string.isRequired,operationColumn:u.PropTypes.string,operation:u.PropTypes.oneOf(Object.values(p.AggregationTypes)).isRequired,stepSizeOptions:u.PropTypes.arrayOf(u.PropTypes.oneOf(Object.values(p.GroupDateTypes))),onError:u.PropTypes.func,wrapperProps:u.PropTypes.object,noDataAlertProps:u.PropTypes.object,tooltip:u.PropTypes.bool,tooltipFormatter:u.PropTypes.func,formatter:u.PropTypes.func,height:u.PropTypes.string,animation:u.PropTypes.bool,isPlaying:u.PropTypes.bool,onPlay:u.PropTypes.func,isPaused:u.PropTypes.bool,onPause:u.PropTypes.func,onStop:u.PropTypes.func,onTimelineUpdate:u.PropTypes.func,timeWindow:u.PropTypes.arrayOf(u.PropTypes.any),onTimeWindowUpdate:u.PropTypes.func,showControls:u.PropTypes.bool,chartType:u.PropTypes.oneOf(Object.values(f.TIME_SERIES_CHART_TYPES)),stepSize:u.PropTypes.oneOf(Object.values(p.GroupDateTypes)).isRequired},ft.defaultProps={operation:p.AggregationTypes.COUNT,stepSizeOptions:[],wrapperProps:{},noDataAlertProps:{},tooltip:!0,formatter:function(t){return t},animation:!0,isPlaying:!1,isPaused:!1,timeWindow:[],showControls:!0,chartType:f.TIME_SERIES_CHART_TYPES.LINE};var pt,ht=ft;function dt(){return a().createElement(z.SvgIcon,null,a().createElement("path",{d:"M19 14l.3 1.5c.32.12.614.278.883.475l.197.155 1.45-.49 1 1.73-1.14 1c.069.429.078.68.03 1.065l-.03.205 1.14 1-1 1.73-1.45-.49c-.256.216-.538.394-.845.533l-.235.097L19 24h-2l-.3-1.51c-.32-.12-.614-.278-.883-.475l-.197-.155-1.45.49-1-1.73 1.14-1c-.067-.417-.078-.667-.033-1.028l.033-.232-1.14-1 1-1.73 1.45.49c.256-.216.538-.394.845-.533l.235-.097L17 14h2zM8 2v2h8V2h2v2h1c1.05 0 1.918.82 1.994 1.851L21 6v6h-2v-2H5v10h6v2H5c-1.06 0-1.919-.82-1.995-1.851L3 20l.01-14c0-1.05.802-1.918 1.84-1.994L5 4h1V2h2zm10 15c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm1-11H5v2h14V6z",id:"-\u21b3Color",fill:"inherit"}))}function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mt=f.featureSelectionIcons.PolygonIcon,vt=f.featureSelectionIcons.RectangleIcon,_t=f.featureSelectionIcons.CircleIcon,bt=f.featureSelectionIcons.LassoIcon,Et=f.featureSelectionIcons.CursorIcon,At=(H(pt={},p.FEATURE_SELECTION_MODES.POLYGON,{label:"Polygon",icon:a().createElement(mt,null)}),H(pt,p.FEATURE_SELECTION_MODES.RECTANGLE,{label:"Rectangle",icon:a().createElement(vt,null)}),H(pt,p.FEATURE_SELECTION_MODES.CIRCLE,{label:"Circle",icon:a().createElement(_t,null)}),H(pt,p.FEATURE_SELECTION_MODES.LASSO_TOOL,{label:"Lasso tool",icon:a().createElement(bt,null)}),pt),Ct=H({},p.EDIT_MODES.EDIT,{label:"Edit mask",icon:a().createElement(Et,null)});function St(t){var e=t.className,n=t.selectionModes,r=t.editModes,i=t.tooltipPlacement,u=(0,s.useDispatch)(),c=(0,s.useSelector)((function(t){return t.carto.spatialFilter})),p=(0,s.useSelector)((function(t){return t.carto.featureSelectionMode})),h=(0,s.useSelector)((function(t){return t.carto.featureSelectionEnabled})),d=(0,o.useMemo)((function(){return n.filter((function(t){return At[t]})).map((function(t){return gt({id:t},At[t])}))}),[n]),y=(0,o.useMemo)((function(){return r.filter((function(t){return Ct[t]})).map((function(t){return gt({id:t},Ct[t])}))}),[r]),g=function(t){u((0,l.setFeatureSelectionEnabled)(t))};return a().createElement(f.FeatureSelectionWidgetUI,{className:e,selectionModes:d,editModes:y,selectedMode:p,onSelectMode:function(t){u((0,l.setFeatureSelectionMode)(t)),g(!0)},enabled:h,onEnabledChange:g,tooltipPlacement:i,geometry:c,onSelectGeometry:function(){u((0,l.addSpatialFilter)({geometry:gt(gt({},c),{},{properties:gt(gt({},c.properties),{},{disabled:!c.properties.disabled})})}))},onDeleteGeometry:function(){u((0,l.removeSpatialFilter)())}})}St.defaultProps={selectionModes:Object.values(p.FEATURE_SELECTION_MODES),editModes:Object.values(p.EDIT_MODES),defaultSelectedMode:Object.values(p.FEATURE_SELECTION_MODES)[0],defaultEnabled:f.FeatureSelectionWidgetUI.defaultProps.enabled,tooltipPlacement:f.FeatureSelectionWidgetUI.defaultProps.tooltipPlacement},St.propTypes={className:f.FeatureSelectionWidgetUI.propTypes.className,selectionModes:c().arrayOf(c().oneOf(Object.values(p.FEATURE_SELECTION_MODES))),editModes:c().arrayOf(c().oneOf(Object.values(p.EDIT_MODES))),defaultEnabled:f.FeatureSelectionWidgetUI.propTypes.enabled,defaultSelectedMode:c().oneOf([].concat(Y(Object.values(p.FEATURE_SELECTION_MODES)),Y(Object.values(p.EDIT_MODES)))),tooltipPlacement:f.FeatureSelectionWidgetUI.propTypes.tooltipPlacement};var Ot=St;function Tt(e){var n=e.id,r=e.title,u=e.dataSource,c=e.columns,l=e.wrapperProps,p=e.noDataAlertProps,h=e.onError,d=e.initialPageSize,y=void 0===d?10:d,g=e.height,m=e.dense,v=i((0,o.useState)(y),2),_=v[0],b=v[1],E=i((0,o.useState)(0),2),A=E[0],C=E[1],S=i((0,o.useState)(0),2),O=S[0],T=S[1],L=i((0,o.useState)(void 0),2),I=L[0],w=L[1],R=i((0,o.useState)("asc"),2),x=R[0],N=R[1],D=i((0,o.useState)([]),2),F=D[0],j=D[1],k=i((0,o.useState)(!0),2),G=k[0],U=k[1],Z=B({dataSource:u,id:n}),H=(0,s.useSelector)((function(t){return(0,M.selectAreFeaturesReadyForSource)(t,u)}));return(0,o.useEffect)((function(){C(0)}),[u,H,Z]),(0,o.useEffect)((function(){H&&(U(!0),P({filters:Z,dataSource:u,rowsPerPage:_,page:A,sortBy:I,sortDirection:x}).then((function(t){t&&(j(t.data),T(t.totalCount))})).catch((function(t){h&&h(t)})).finally((function(){U(!1)})))}),[n,u,Z,I,x,A,_,h,H]),a().createElement(f.WrapperWidgetUI,t({title:r},l,{isLoading:G}),F.length||G?a().createElement(f.TableWidgetUI,{columns:c,rows:F,pagination:!0,totalCount:O,page:A,onSetPage:C,onSetRowsPerPage:b,rowsPerPage:_,sorting:!0,sortBy:I,sortDirection:x,onSetSortBy:w,onSetSortDirection:N,height:g,dense:m}):a().createElement(f.NoDataAlert,p))}Tt.propTypes={id:c().string.isRequired,title:c().string.isRequired,dataSource:c().string.isRequired,columns:c().arrayOf(c().shape({field:c().string.isRequired,headerName:c().string.isRequired,align:c().oneOf(["left","right"])})).isRequired,onError:c().func,wrapperProps:c().object,noDataAlertProps:c().object,initialPageSize:c().number,height:c().string,dense:c().bool};var Lt=Tt,It=n(59);function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}function Mt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rt(t)););return t}function xt(){return xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Mt(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},xt.apply(this,arguments)}function Nt(t,e){return Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Nt(t,e)}function Dt(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var Bt=n(102);function Ft(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var kt=["anyclick","pointermove","panstart","panmove","panend","keyup"],Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&Nt(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(r);if(i){var n=Rt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Dt(this,t)});function a(){return wt(this,a),o.apply(this,arguments)}return e=a,n=[{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.context,i=t.changeFlags;e.eventManager!==n.eventManager&&(this._removeEventHandlers(e.eventManager),this._removeEventHandlers(n.eventManager),this._addEventHandlers()),xt(Rt(a.prototype),"updateState",this).call(this,{props:e,oldProps:n,context:r,changeFlags:i})}},{key:"_addEventHandlers",value:function(){var t,e=this._getEventManager(),n=this.state._editableLayerState.eventHandler,r=Ft(kt);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.on(i,n,{priority:100})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_removeEventHandlers",value:function(){var t,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)||this._getEventManager(),n=this.state._editableLayerState.eventHandler,r=Ft(kt);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.off(i,n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_getEventManager",value:function(){return this.props.eventManager||this.context.deck.eventManager}}],n&&Pt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Bt.EditableGeoJsonLayer),Ut=n(629),Zt=n.n(Ut),Ht={mousedown:1,mousemove:2,mouseup:4};!function(t){var e=t.prototype.handler;t.prototype.handler=function(t){var n=this.store;t.button>0&&"pointerdown"===t.type&&(function(e,n){for(var r=0;r<e.length;r++)if(e[r].pointerId===t.pointerId)return!0;return!1}(n)||n.push(t)),e.call(this,t)}}(Zt().PointerEventInput),Zt().MouseInput.prototype.handler=function(t){var e=Ht[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};var zt=Zt().Manager,Vt=Zt(),Kt=Vt?[[Vt.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Vt.Rotate,{enable:!1}],[Vt.Pinch,{enable:!1}],[Vt.Swipe,{enable:!1}],[Vt.Pan,{threshold:0,enable:!1}],[Vt.Press,{enable:!1}],[Vt.Tap,{event:"doubletap",taps:2,enable:!1}],[Vt.Tap,{event:"anytap",enable:!1}],[Vt.Tap,{enable:!1}]]:null,Xt={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},qt={doubletap:["tap"]},Jt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Wt={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Yt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Qt={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},$t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",te="undefined"!=typeof window?window:n.g;void 0!==n.g?n.g:window,"undefined"!=typeof document&&document;var ee=!1;try{var ne={get passive(){return ee=!0,!0}};te.addEventListener("test",ne,ne),te.removeEventListener("test",ne,ne)}catch(t){}var re=-1!==$t.indexOf("firefox"),ie=Wt.WHEEL_EVENTS,oe="wheel",ae=4.000244140625,se=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=ie.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent,!!ee&&{passive:!1})}))}return E(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===oe&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){var e=t.deltaY;te.WheelEvent&&(re&&t.deltaMode===te.WheelEvent.DOM_DELTA_PIXEL&&(e/=te.devicePixelRatio),t.deltaMode===te.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%ae==0&&(e=Math.floor(e/ae)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:oe,center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),ue=Wt.MOUSE_EVENTS,ce="pointermove",le="pointerover",fe="pointerout",pe="pointerleave",he=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=ue.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return E(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===ce&&(this.enableMoveEvent=e),t===le&&(this.enableOverEvent=e),t===fe&&(this.enableOutEvent=e),t===pe&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}},{key:"handleOverEvent",value:function(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:le,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleOutEvent",value:function(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:fe,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleLeaveEvent",value:function(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:pe,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleMoveEvent",value:function(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:ce,srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),de=Wt.KEY_EVENTS,ye="keydown",ge="keyup",me=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=de.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return E(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===ye&&(this.enableDownEvent=e),t===ge&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:ye,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:ge,srcEvent:t,key:t.key,target:t.target}))}}]),t}(),ve="contextmenu",_e=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return E(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(t,e){t===ve&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){this.options.enable&&this.callback({type:ve,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),be={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},Ee={srcElement:"root",priority:0},Ae=function(){function t(e){b(this,t),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return E(t,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.handlers,a=this.handlersByElement;n&&("object"!=typeof n||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},Ee,n):Ee;var s=a.get(n.srcElement);s||(s=[],a.set(n.srcElement,s));var u={type:t,handler:e,srcElement:n.srcElement,priority:n.priority};r&&(u.once=!0),i&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;for(var c=s.length-1;c>=0&&!(s[c].priority>=u.priority);)c--;s.splice(c+1,0,u)}},{key:"remove",value:function(t,e){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=n.some((function(t){return!t.passive}))}},{key:"handleEvent",value:function(t){if(!this.isEmpty()){for(var e=this._normalizeEvent(t),n=t.srcEvent.target;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")}}},{key:"_emit",value:function(t,e){var n=this.handlersByElement.get(e);if(n){for(var r=!1,i=function(){t.handled=!0},o=function(){t.handled=!0,r=!0},a=[],s=0;s<n.length;s++){var u=n[s],c=u.type,l=u.handler,f=u.once;if(l(Object.assign({},t,{type:c,stopPropagation:i,stopImmediatePropagation:o})),f&&a.push(n[s]),r)break}for(var p=0;p<a.length;p++){var h=a[p],d=h.type,y=h.handler;this.remove(d,y)}}}},{key:"_normalizeEvent",value:function(t){var e=this.eventManager.element;return Object.assign({},t,function(t){var e=be[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,u=!1;return 4===e||2===e&&!Number.isFinite(r)?(a=1===o,s=2===o,u=3===o):2===e?(a=Boolean(1&r),s=Boolean(4&r),u=Boolean(2&r)):1===e&&(a=0===i,s=1===i,u=2===i),{leftButton:a,middleButton:s,rightButton:u}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth||1,a=i.height/e.offsetHeight||1;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}}]),t}(),Ce={events:null,recognizers:null,recognizerOptions:{},Manager:zt,touchAction:"none",tabIndex:0},Se=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,t),this.options=Object.assign({},Ce,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return E(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;for(var i in this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||Kt}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Xt).forEach((function(t){var n=e.manager.get(t);n&&Xt[t].forEach((function(t){n.recognizeWith(t)}))})),n.recognizerOptions){var o=this.manager.get(i);if(o){var a=n.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new se(t,this._onOtherEvent,{enable:!1}),this.moveInput=new he(t,this._onOtherEvent,{enable:!1}),this.keyInput=new me(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new _e(t,this._onOtherEvent,{enable:!1});var s,u=A(this.events);try{for(u.s();!(s=u.n()).done;){var c=_(s.value,2),l=c[0],f=c[1];f.isEmpty()||(this._toggleRecognizer(f.recognizerName,!0),this.manager.on(l,f.handleEvent))}}catch(p){u.e(p)}finally{u.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){this._addEventHandler(t,e,n,!1)}},{key:"once",value:function(t,e,n){this._addEventHandler(t,e,n,!0)}},{key:"watch",value:function(t,e,n){this._addEventHandler(t,e,n,!1,!0)}},{key:"off",value:function(t,e){this._removeEventHandler(t,e)}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});var i=qt[t];i&&!this.options.recognizers&&i.forEach((function(i){var o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e,n,r,i){if("string"==typeof t){var o=this.manager,a=this.events,s=Qt[t]||t,u=a.get(s);u||(u=new Ae(this),a.set(s,u),u.recognizerName=Yt[s]||s,o&&o.on(s,u.handleEvent)),u.add(t,e,n,r,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}else for(var c in n=e,t)this._addEventHandler(c,t[c],n,r,i)}},{key:"_removeEventHandler",value:function(t,e){if("string"==typeof t){var n=this.events,r=Qt[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){var o,a=i.recognizerName,s=!1,u=A(n.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.recognizerName===a&&!c.isEmpty()){s=!0;break}}}catch(f){u.e(f)}finally{u.f()}s||this._toggleRecognizer(a,!1)}}else for(var l in t)this._removeEventHandler(l,t[l])}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=Jt[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}(),Oe=n(306);function Te(t){var e=t.eventManager,n=t.isEdit,r=t.isSelected,i=t.selectedMode,a=(0,s.useSelector)((function(t){return"gmaps"===Oe.BASEMAPS[t.carto.basemap].type})),u=window.cartoGmap,c=(0,o.useMemo)((function(){return e||(a&&u?new Se(u.getDiv()):void 0)}),[u,e,a]);return(0,o.useEffect)((function(){if(a&&u){var t=n&&r||i===R.FEATURE_SELECTION_MODES.LASSO_TOOL;u.setOptions({gestureHandling:t?"none":"auto"})}}),[u,n,a,r,i]),c}var Le=n(946),Ie=n(445);function we(){var t=(0,s.useSelector)((function(t){return(0,M.selectSpatialFilter)(t)})),e=t?[{polygon:null==t?void 0:t.geometry.coordinates}]:[];return new Ie.SolidPolygonLayer({id:R.MASK_ID,operation:Le.OPERATION.MASK,data:e,getFillColor:[255,255,255,255]})}var Pe=It.ViewMode,Re=It.TranslateMode,Me=It.ModifyMode,xe=new(0,It.CompositeMode)([new Re,new Me]);function Ne(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventManager:null,mask:!0},e=t.eventManager,n=t.mask,r=(0,s.useDispatch)(),a=(0,z.useTheme)(),u=i((0,o.useState)(null),2),c=u[0],f=u[1],p=(0,s.useSelector)((function(t){return(0,l.selectFeatureSelectionMode)(t)})),h=(0,s.useSelector)((function(t){return(0,l.selectSpatialFilter)(t)})),d=De(p),y=!!h,g=null!==c,m=Te({eventManager:e,isEdit:d,isSelected:g,selectedMode:p});(0,o.useEffect)((function(){!d&&g&&f(null)}),[d,h,g]);var v=(0,o.useMemo)((function(){if(p){if(d&&g)return xe;if(!d&&!g)return It[p]}return Pe}),[g,d,p]),_=Be((0,z.hexToRgb)(a.palette.primary.main)),b=Be((0,z.hexToRgb)(a.palette.secondary.main)),E=y&&!g?b:_;return[n&&we(),new Gt({eventManager:m,id:"FeatureSelectionLayer",pickable:!!p,data:{type:"FeatureCollection",features:h?[h]:[]},mode:v,selectedFeatureIndexes:isFinite(c)?[c]:[],onEdit:function(t){var e=t.updatedData,n=t.editType;if("addFeature"===n&&r((0,l.setFeatureSelectionEnabled)(!1)),0!==e.features.length&&!n.includes("Tentative")){var o=i(e.features.slice(-1),1)[0];o&&r((0,l.addSpatialFilter)({geometry:o}))}},onClick:function(t){var e=t.index,n=t.object;d&&"Polygon"===(null==n?void 0:n.geometry.type)&&f(e)},getLineColor:E,getFillColor:d?[].concat(Y(E.slice(0,3)),[255*.08]):[0,0,0,0],getTentativeFillColor:[].concat(Y(_.slice(0,3)),[255*.08]),getTentativeLineColor:_,getEditHandlePointColor:[255,255,255],getEditHandlePointOutlineColor:_,editHandlePointStrokeWidth:5,getEditHandlePointRadius:2})]}function De(t){return-1!==Object.values(p.EDIT_MODES).indexOf(t)}function Be(t){var e=i(t.replace(/[rgba() ]/g,"").split(","),4),n=e[0],r=e[1],o=e[2],a=e[3];return[n,r,o,a?255*a:255].map(Number)}}(),C}())},686:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GeoJsonEditMode",{enumerable:!0,get:function(){return o.GeoJsonEditMode}}),Object.defineProperty(e,"ModifyMode",{enumerable:!0,get:function(){return a.ModifyMode}}),Object.defineProperty(e,"ResizeCircleMode",{enumerable:!0,get:function(){return s.ResizeCircleMode}}),Object.defineProperty(e,"TranslateMode",{enumerable:!0,get:function(){return u.TranslateMode}}),Object.defineProperty(e,"ScaleMode",{enumerable:!0,get:function(){return c.ScaleMode}}),Object.defineProperty(e,"RotateMode",{enumerable:!0,get:function(){return l.RotateMode}}),Object.defineProperty(e,"DuplicateMode",{enumerable:!0,get:function(){return f.DuplicateMode}}),Object.defineProperty(e,"ExtendLineStringMode",{enumerable:!0,get:function(){return p.ExtendLineStringMode}}),Object.defineProperty(e,"SplitPolygonMode",{enumerable:!0,get:function(){return h.SplitPolygonMode}}),Object.defineProperty(e,"ExtrudeMode",{enumerable:!0,get:function(){return d.ExtrudeMode}}),Object.defineProperty(e,"ElevationMode",{enumerable:!0,get:function(){return y.ElevationMode}}),Object.defineProperty(e,"TransformMode",{enumerable:!0,get:function(){return g.TransformMode}}),Object.defineProperty(e,"DrawPointMode",{enumerable:!0,get:function(){return m.DrawPointMode}}),Object.defineProperty(e,"DrawLineStringMode",{enumerable:!0,get:function(){return v.DrawLineStringMode}}),Object.defineProperty(e,"DrawPolygonMode",{enumerable:!0,get:function(){return _.DrawPolygonMode}}),Object.defineProperty(e,"DrawRectangleMode",{enumerable:!0,get:function(){return b.DrawRectangleMode}}),Object.defineProperty(e,"DrawSquareMode",{enumerable:!0,get:function(){return E.DrawSquareMode}}),Object.defineProperty(e,"DrawRectangleFromCenterMode",{enumerable:!0,get:function(){return A.DrawRectangleFromCenterMode}}),Object.defineProperty(e,"DrawSquareFromCenterMode",{enumerable:!0,get:function(){return C.DrawSquareFromCenterMode}}),Object.defineProperty(e,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return S.DrawCircleByDiameterMode}}),Object.defineProperty(e,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return O.DrawCircleFromCenterMode}}),Object.defineProperty(e,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return T.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(e,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return L.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(e,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return I.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(e,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return w.Draw90DegreePolygonMode}}),Object.defineProperty(e,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return P.DrawPolygonByDraggingMode}}),Object.defineProperty(e,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return R.ImmutableFeatureCollection}}),Object.defineProperty(e,"ViewMode",{enumerable:!0,get:function(){return M.ViewMode}}),Object.defineProperty(e,"MeasureDistanceMode",{enumerable:!0,get:function(){return x.MeasureDistanceMode}}),Object.defineProperty(e,"MeasureAreaMode",{enumerable:!0,get:function(){return N.MeasureAreaMode}}),Object.defineProperty(e,"MeasureAngleMode",{enumerable:!0,get:function(){return D.MeasureAngleMode}}),Object.defineProperty(e,"CompositeMode",{enumerable:!0,get:function(){return B.CompositeMode}}),Object.defineProperty(e,"SnappableMode",{enumerable:!0,get:function(){return F.SnappableMode}}),Object.defineProperty(e,"_memoize",{enumerable:!0,get:function(){return j.default}}),e.utils=void 0;var i,o=n(671),a=n(699),s=n(777),u=n(701),c=n(721),l=n(723),f=n(780),p=n(781),h=n(782),d=n(784),y=n(785),g=n(786),m=n(787),v=n(788),_=n(702),b=n(789),E=n(790),A=n(791),C=n(792),S=n(793),O=n(794),T=n(795),L=n(796),I=n(797),w=n(798),P=n(799),R=n(675),M=n(801),x=n(802),N=n(804),D=n(806),B=n(725),F=n(807),j=(i=n(729))&&i.__esModule?i:{default:i},k=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=G();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(672));function G(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return G=function(){return t},t}e.utils=k},687:function(t,e,n){"use strict";function r(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=i(t.properties),e.geometry=o(t.geometry),e}function i(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"===typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=i(r):e[n]=r})),e):e}function o(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return o(t)})),e):(e.coordinates=a(t.coordinates),e)}function a(t){var e=t;return"object"!==typeof e[0]?e.slice():e.map((function(t){return a(t)}))}e.a=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return r(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return r(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(t);default:throw new Error("unknown GeoJSON type")}}},688:function(t,e,n){"use strict";n.r(e);var r=n(181),i=n(42);e.default=function(t,e){void 0===e&&(e={});var n=Object(r.default)(t),o=(n[0]+n[2])/2,a=(n[1]+n[3])/2;return Object(i.point)([o,a],e.properties,e)}},689:function(t,e,n){"use strict";var r=n(42),i=n(60);e.a=function(t,e,n,o){void 0===o&&(o={});var a=e<0,s=Object(r.convertLength)(Math.abs(e),o.units,"meters");a&&(s=-Math.abs(s));var u=Object(i.getCoord)(t),c=function(t,e,n,i){i=void 0===i?r.earthRadius:Number(i);var o=e/i,a=t[0]*Math.PI/180,s=Object(r.degreesToRadians)(t[1]),u=Object(r.degreesToRadians)(n),c=o*Math.cos(u),l=s+c;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var f=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),p=Math.abs(f)>1e-11?c/f:Math.cos(s),h=o*Math.sin(u)/p;return[(180*(a+h)/Math.PI+540)%360-180,180*l/Math.PI]}(u,s,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,Object(r.point)(c,o.properties)}},690:function(t,e,n){"use strict";n.r(e);var r=n(743);n.d(e,"SimpleMeshLayer",(function(){return r.a}));var i=n(740);n.d(e,"ScenegraphLayer",(function(){return i.a}))},692:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnicodeLocaleId=e.parseUnicodeLanguageId=e.isUnicodeVariantSubtag=e.isUnicodeScriptSubtag=e.isUnicodeRegionSubtag=e.isStructurallyValidLanguageTag=e.isUnicodeLanguageSubtag=e.SEPARATOR=void 0;var r=n(206),i=/^[a-z0-9]{1,8}$/i,o=/^[a-z0-9]{2,8}$/i,a=/^[a-z0-9]{3,8}$/i,s=/^[a-z0-9][a-z]$/i,u=/^[a-z0-9]{3,8}$/i,c=/^[a-z]{4}$/i,l=/^[0-9a-svwyz]$/i,f=/^([a-z]{2}|[0-9]{3})$/i,p=/^([a-z0-9]{5,8}|[0-9][a-z0-9]{3})$/i,h=/^([a-z]{2,3}|[a-z]{5,8})$/i,d=/^[a-z][0-9]$/i;function y(t){return h.test(t)}function g(t){return f.test(t)}function m(t){return c.test(t)}function v(t){return p.test(t)}function _(t){"string"===typeof t&&(t=t.split(e.SEPARATOR));var n,r,i=t.shift();if(!i)throw new RangeError("Missing unicode_language_subtag");if("root"===i)return{lang:"root",variants:[]};if(!y(i))throw new RangeError("Malformed unicode_language_subtag");t.length&&m(t[0])&&(n=t.shift()),t.length&&g(t[0])&&(r=t.shift());for(var o={};t.length&&v(t[0]);){var a=t.shift();if(a in o)throw new RangeError('Duplicate variant "'.concat(a,'"'));o[a]=1}return{lang:i,script:n,region:r,variants:Object.keys(o)}}function b(t){for(var e,n=[];t.length&&(e=E(t));)n.push(e);if(n.length)return{type:"u",keywords:n,attributes:[]};for(var r=[];t.length&&a.test(t[0]);)r.push(t.shift());for(;t.length&&(e=E(t));)n.push(e);if(n.length||r.length)return{type:"u",attributes:r,keywords:n};throw new RangeError("Malformed unicode_extension")}function E(t){var n;if(s.test(t[0])){n=t.shift();for(var r=[];t.length&&u.test(t[0]);)r.push(t.shift());var i="";return r.length&&(i=r.join(e.SEPARATOR)),[n,i]}}function A(t){var n;try{n=_(t)}catch(s){}for(var r=[];t.length&&d.test(t[0]);){for(var i=t.shift(),o=[];t.length&&a.test(t[0]);)o.push(t.shift());if(!o.length)throw new RangeError('Missing tvalue for tkey "'.concat(i,'"'));r.push([i,o.join(e.SEPARATOR)])}if(r.length)return{type:"t",fields:r,lang:n};throw new RangeError("Malformed transformed_extension")}function C(t){for(var n=[];t.length&&i.test(t[0]);)n.push(t.shift());if(n.length)return{type:"x",value:n.join(e.SEPARATOR)};throw new RangeError("Malformed private_use_extension")}function S(t){for(var n=[];t.length&&o.test(t[0]);)n.push(t.shift());return n.length?n.join(e.SEPARATOR):""}e.SEPARATOR="-",e.isUnicodeLanguageSubtag=y,e.isStructurallyValidLanguageTag=function(t){try{_(t.split(e.SEPARATOR))}catch(n){return!1}return!0},e.isUnicodeRegionSubtag=g,e.isUnicodeScriptSubtag=m,e.isUnicodeVariantSubtag=v,e.parseUnicodeLanguageId=_,e.parseUnicodeLocaleId=function(t){var n=t.split(e.SEPARATOR),i=_(n);return(0,r.__assign)({lang:i},function(t){if(!t.length)return{extensions:[]};var e,n,r,i=[],o={};do{var a=t.shift();switch(a){case"u":case"U":if(e)throw new RangeError("There can only be 1 -u- extension");e=b(t),i.push(e);break;case"t":case"T":if(n)throw new RangeError("There can only be 1 -t- extension");n=A(t),i.push(n);break;case"x":case"X":if(r)throw new RangeError("There can only be 1 -x- extension");r=C(t),i.push(r);break;default:if(!l.test(a))throw new RangeError("Malformed extension type");if(a in o)throw new RangeError("There can only be 1 -".concat(a,"- extension"));var s={type:a,value:S(t)};o[s.type]=s,i.push(s)}}while(t.length);return{extensions:i}}(n))}},693:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.emitUnicodeLocaleId=e.emitUnicodeLanguageId=void 0;var r=n(206);function i(t){return t?(0,r.__spreadArray)([t.lang,t.script,t.region],t.variants||[],!0).filter(Boolean).join("-"):""}e.emitUnicodeLanguageId=i,e.emitUnicodeLocaleId=function(t){for(var e=t.lang,n=t.extensions,o=[i(e)],a=0,s=n;a<s.length;a++){var u=s[a];switch(o.push(u.type),u.type){case"u":o.push.apply(o,(0,r.__spreadArray)((0,r.__spreadArray)([],u.attributes,!1),u.keywords.reduce((function(t,e){return t.concat(e)}),[]),!1));break;case"t":o.push.apply(o,(0,r.__spreadArray)([i(u.lang)],u.fields.reduce((function(t,e){return t.concat(e)}),[]),!1));break;default:o.push(u.value)}}return o.filter(Boolean).join("-")}},695:function(t,e,n){"use strict";n.r(e),e.default={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},697:function(t,e,n){"use strict";n.r(e);var r=n(375),i=n.n(r),o=n(42),a=n(60);e.default=function(t,e){var n=Object(a.getGeom)(t),r=Object(a.getGeom)(e),s=t.properties||{},u=i.a.difference(n.coordinates,r.coordinates);return 0===u.length?null:1===u.length?Object(o.polygon)(u[0],s):Object(o.multiPolygon)(u,s)}},698:function(t,e,n){"use strict";var r=n(42),i=n(60);e.a=function(t,e,n){void 0===n&&(n={});var o=Object(i.getCoord)(t),a=Object(i.getCoord)(e);a[0]+=a[0]-o[0]>180?-360:o[0]-a[0]>180?360:0;var s=function(t,e,n){var i=n=void 0===n?r.earthRadius:Number(n),o=t[1]*Math.PI/180,a=e[1]*Math.PI/180,s=a-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var c=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(c)>1e-11?s/c:Math.cos(o);return Math.sqrt(s*s+l*l*u*u)*i}(o,a);return Object(r.convertLength)(s,"meters",n.units)}},699:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModifyMode=void 0;var r=n(42),i=n(672),o=n(671),a=n(675);function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(m,t);var e,n,o,s,l=(e=m,function(){var t,n=y(e);if(d()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function m(){return f(this,m),l.apply(this,arguments)}return n=m,(o=[{key:"getGuides",value:function(t){var e,n=this,o=[],a=t.data,s=t.lastPointerMoveEvent,l=a.features,f=s&&s.picks,p=s&&s.mapCoords,h=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=c(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t.selectedIndexes);try{for(h.s();!(e=h.n()).done;){var d=e.value;if(d<l.length){var y=l[d].geometry;o.push.apply(o,u((0,i.getEditHandlesForGeometry)(y,d)))}else console.warn("selectedFeatureIndexes out of range ".concat(d))}}catch(S){h.e(S)}finally{h.f()}if(f&&f.length&&p){var g,m=!(0,i.getPickedExistingEditHandle)(f)&&f.find((function(t){return!t.isGuide}));if(m&&!m.object.geometry.type.includes("Point")&&(!(null===(g=t.modeConfig)||void 0===g?void 0:g.lockRectangles)||"Rectangle"!==m.object.properties.shape)&&t.selectedIndexes.includes(m.index)){var v=null,_=[],b=(0,r.point)(p);if((0,i.recursivelyTraverseNestedArrays)(m.object.geometry.coordinates,[],(function(e,i){var o=(0,r.lineString)(e),a=n.getNearestPoint(o,b,t.modeConfig&&t.modeConfig.viewport);(!v||a.properties.dist<v.properties.dist)&&(v=a,_=i)})),v){var E=v,A=E.geometry.coordinates,C=E.properties.index;o.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:m.index,positionIndexes:[].concat(u(_),[C+1])},geometry:{type:"Point",coordinates:A}})}}}return{type:"FeatureCollection",features:o}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(n)return(0,i.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,i.nearestPointOnLine)(t,e,n)}},{key:"handleClick",value:function(t,e){var n=(0,i.getPickedExistingEditHandle)(t.picks),r=(0,i.getPickedIntermediateEditHandle)(t.picks);if(n){var o,s=n.properties,u=s.featureIndex,c=s.positionIndexes;try{o=new a.ImmutableFeatureCollection(e.data).removePosition(u,c).getObject()}catch(g){}o&&e.onEdit({updatedData:o,editType:"removePosition",editContext:{featureIndexes:[u],positionIndexes:c,position:n.geometry.coordinates}})}else if(r){var l,f=r.properties,p=f.featureIndex,h=f.positionIndexes,d=e.data.features[p];if(!(null===(l=e.modeConfig)||void 0===l?void 0:l.lockRectangles)||"Rectangle"!==(null===d||void 0===d?void 0:d.properties.shape)){var y=new a.ImmutableFeatureCollection(e.data).addPosition(p,h,r.geometry.coordinates).getObject();y&&e.onEdit({updatedData:y,editType:"addPosition",editContext:{featureIndexes:[p],positionIndexes:h,position:r.geometry.coordinates}})}}}},{key:"handleDragging",value:function(t,e){var n=(0,i.getPickedEditHandle)(t.pointerDownPicks);n&&(t.cancelPan(),this._dragEditHandle("movePosition",e,n,t))}},{key:"_dragEditHandle",value:function(t,e,n,r){var o,s,u=n.properties,c=e.data.features[u.featureIndex];if((null===(o=e.modeConfig)||void 0===o?void 0:o.lockRectangles)&&"Rectangle"===c.properties.shape){var l=(0,i.updateRectanglePosition)(c,u.positionIndexes[1],r.mapCoords);s=new a.ImmutableFeatureCollection(e.data).replaceGeometry(u.featureIndex,{coordinates:l,type:"Polygon"}).getObject()}else s=new a.ImmutableFeatureCollection(e.data).replacePosition(u.featureIndex,u.positionIndexes,r.mapCoords).getObject();e.onEdit({updatedData:s,editType:t,editContext:{featureIndexes:[u.featureIndex],positionIndexes:u.positionIndexes,position:r.mapCoords}})}},{key:"handlePointerMove",value:function(t,e){var n=this.getCursor(t);e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var o=r.properties,s=new a.ImmutableFeatureCollection(e.data).addPosition(o.featureIndex,o.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:s,editType:"addPosition",editContext:{featureIndexes:[o.featureIndex],positionIndexes:o.positionIndexes,position:t.mapCoords}})}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedEditHandle)(t.picks);n.length&&r&&this._dragEditHandle("finishMovePosition",e,r,t)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,i.getPickedEditHandles)(e).length?"cell":null}}])&&p(n.prototype,o),s&&p(n,s),m}(o.GeoJsonEditMode);e.ModifyMode=m},700:function(t,e,n){"use strict";n.r(e);var r=n(677),i=n(42);e.default=function(t,e,n){void 0===n&&(n={});for(var o=n.steps||64,a=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},s=[],u=0;u<o;u++)s.push(Object(r.default)(t,e,-360*u/o,n).geometry.coordinates);return s.push(s[0]),Object(i.polygon)([s],a)}},701:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TranslateMode=void 0;var r=f(n(674)),i=f(n(673)),o=f(n(778)),a=n(42),s=f(n(676)),u=n(672),c=n(671),l=n(675);function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(E,t);var e,n,c,f,p=(e=E,function(){var t,n=v(e);if(m()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function E(){var t;h(this,E);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(g(t=p.call.apply(p,[this].concat(n))),"_geometryBeforeTranslate",void 0),b(g(t),"_isTranslatable",void 0),t}return n=E,(c=[{key:"handleDragging",value:function(t,e){if(this._isTranslatable){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translating",e);n&&e.onEdit(n)}t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){this._isTranslatable=this.isSelectionPicked(t.pointerDownPicks||t.picks,e),this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translated",e);n&&e.onEdit(n),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("move"):t.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(t,e,n,c){var f=this;if(!this._geometryBeforeTranslate)return null;var p=new l.ImmutableFeatureCollection(c.data),h=c.selectedIndexes,d=c.modeConfig||{},y=d.viewport,g=d.screenSpace;if(y&&g)!function(){for(var n=y.project?y:new s.default(y),r=n.project(t),i=n.project(e),o=i[0]-r[0],a=i[1]-r[1],c=0;c<h.length;c++){var l=h[c],d=f._geometryBeforeTranslate.features[c],g=d.geometry.coordinates;g&&(g=(0,u.mapCoords)(g,(function(t){var e=n.project(t);return e?(e[0]+=o,e[1]+=a,n.unproject(e)):null})),p=p.replaceGeometry(l,{type:d.geometry.type,coordinates:g}))}}();else for(var m=(0,a.point)(t),v=(0,a.point)(e),_=(0,i.default)(m,v),b=(0,r.default)(m,v),E=(0,o.default)(this._geometryBeforeTranslate,_,b),A=0;A<h.length;A++){var C=h[A],S=E.features[A];p=p.replaceGeometry(C,S.geometry)}return{updatedData:p.getObject(),editType:n,editContext:{featureIndexes:h}}}}])&&d(n.prototype,c),f&&d(n,f),E}(c.GeoJsonEditMode);e.TranslateMode=E},702:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonMode=void 0;var r,i=(r=n(248))&&r.__esModule?r:{default:r},o=n(42),a=n(672);function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},p(t,e,n||t)}function h(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(m,t);var e,n,r,s,c=(e=m,function(){var t,n=y(e);if(d()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function m(){return l(this,m),c.apply(this,arguments)}return n=m,(r=[{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length||2===r.length?e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(u(r),i)}}:r.length>2&&(e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(u(r),i,[r[0]])]}}),e}},{key:"getGuides",value:function(t){var e,n=this.getClickSequence(),r={type:"FeatureCollection",features:[]},i=this.createTentativeFeature(t);i&&r.features.push(i);var o=n.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=r.features).push.apply(e,u(o)),r}},{key:"handleClick",value:function(t,e){var n=t.picks,r=(0,a.getPickedEditHandle)(n),s=this.getClickSequence(),c=!1;if(s.length>2&&e.modeConfig&&e.modeConfig.preventOverlappingLines){var l=(0,o.lineString)([s[s.length-1],t.mapCoords]),f=(0,o.lineString)(u(s.slice(0,s.length-1)));(0,i.default)(l,f).features.length>0&&(c=!0)}var p=!1;if(r||c||(this.addClickSequence(t),p=!0),s.length>2&&r&&Array.isArray(r.properties.positionIndexes)&&(0===r.properties.positionIndexes[0]||r.properties.positionIndexes[0]===s.length-1)){var h={type:"Polygon",coordinates:[[].concat(u(s),[s[0]])]};this.resetClickSequence();var d=this.getAddFeatureOrBooleanPolygonAction(h,e);d&&e.onEdit(d)}else p&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>2){var r={type:"Polygon",coordinates:[[].concat(u(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),p(y(m.prototype),"handlePointerMove",this).call(this,t,e)}}])&&f(n.prototype,r),s&&f(n,s),m}(n(671).GeoJsonEditMode);e.DrawPolygonMode=m},703:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(161),i=n(686),o=n(704),a=u(n(730)),s=u(n(810));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},y(t,e,n||t)}function g(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=[0,0,0,153],A=[0,0,0,144],C=[0,0,0,255],S=[0,0,144,144],O=[144,144,144,255],T=[144,144,144,144],L=[192,0,0,255],I=[0,0,0,128],w=[124,0,192,255],P=[255,255,255,255],R=32*o.PROJECTED_PIXEL_SIZE_MULTIPLIER,M=i.DrawPolygonMode;function x(t){return t&&"function"===typeof t?function(e){return t(function(t){if(t.__source)return t.__source.object;if(t.sourceFeature)return t.sourceFeature.feature;return t}(e))}:t}function N(t){switch(t.properties.editHandleType){case"existing":return L;case"snap-source":return w;default:return I}}var D={mode:M,onEdit:function(){},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:o.PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,pickingLineWidthExtraPixels:0,lineWidthUnits:"pixels",lineJointRounded:!1,lineCapRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:function(t,e,n){return e?C:E},getFillColor:function(t,e,n){return e?S:A},getRadius:function(t){return t&&t.properties&&t.properties.radius||t&&t.properties&&t.properties.size||1},getLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},getTentativeLineColor:function(t){return O},getTentativeFillColor:function(t){return T},getTentativeLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusUnits:"pixels",editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:N,getEditHandlePointOutlineColor:function(t){return P},getEditHandlePointRadius:function(t){switch(t.properties.editHandleType){case"existing":return 5;case"snap":return 7;default:return 3}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,editHandleIconSizeUnits:"pixels",getEditHandleIcon:function(t){return t.properties.editHandleType},getEditHandleIconSize:10,getEditHandleIconColor:N,getEditHandleIconAngle:0,billboard:!0},B={view:i.ViewMode,modify:i.ModifyMode,translate:new i.SnappableMode(new i.TranslateMode),transform:new i.SnappableMode(new i.TransformMode),scale:i.ScaleMode,rotate:i.RotateMode,duplicate:i.DuplicateMode,split:i.SplitPolygonMode,extrude:i.ExtrudeMode,elevation:i.ElevationMode,drawPoint:i.DrawPointMode,drawLineString:i.DrawLineStringMode,drawPolygon:i.DrawPolygonMode,drawRectangle:i.DrawRectangleMode,drawSquare:i.DrawSquareMode,drawRectangleFromCenter:i.DrawRectangleFromCenterMode,drawSquareFromCenter:i.DrawSquareFromCenterMode,drawCircleFromCenter:i.DrawCircleFromCenterMode,drawCircleByBoundingBox:i.DrawCircleByDiameterMode,drawEllipseByBoundingBox:i.DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:i.DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:i.DrawEllipseUsingThreePointsMode,draw90DegreePolygon:i.Draw90DegreePolygonMode,drawPolygonByDragging:i.DrawPolygonByDraggingMode},F=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(u,t);var e,n,i,o,a=(e=u,function(){var t,n=v(e);if(m()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function u(){return h(this,u),a.apply(this,arguments)}return n=u,i=[{key:"renderLayers",value:function(){var t=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getPointRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{linestrings:{billboard:this.props.billboard,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}},"polygons-stroke":{billboard:this.props.billboard,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels,type:s.default,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getPointRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}}),e=[new r.GeoJsonLayer(t)];return e=e.concat(this.createGuidesLayers(),this.createTooltipsLayers())}},{key:"initializeState",value:function(){y(v(u.prototype),"initializeState",this).call(this),this.setState({selectedFeatures:[],editHandles:[]})}},{key:"shouldUpdateState",value:function(t){return y(v(u.prototype),"shouldUpdateState",this).call(this,t)||t.changeFlags.stateChanged}},{key:"updateState",value:function(t){var e,n=t.props,r=t.oldProps,i=t.changeFlags,o=t.context;(y(v(u.prototype),"updateState",this).call(this,{oldProps:r,props:n,changeFlags:i,context:o}),!i.propsOrDataChanged||0!==Object.keys(r).length&&n.mode===r.mode)||("function"===typeof n.mode?e=new(0,n.mode):"string"===typeof n.mode?(e=B[n.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):e=n.mode,e||(console.warn("No mode configured for ".concat(String(n.mode))),e=new M),e!==this.state.mode&&this.setState({mode:e,cursor:null}));var a=[];Array.isArray(n.selectedFeatureIndexes)&&(a=n.selectedFeatureIndexes.map((function(t){return n.data.features[t]}))),this.setState({selectedFeatures:a})}},{key:"getModeProps",value:function(t){var e=this;return{modeConfig:t.modeConfig,data:t.data,selectedIndexes:t.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:function(n){e.setNeedsUpdate(),t.onEdit(n)},onUpdateCursor:function(t){e.setState({cursor:t})}}}},{key:"selectionAwareAccessor",value:function(t){var e=this;return"function"!==typeof t?t:function(n){return t(n,e.isFeatureSelected(n),e.props.mode)}}},{key:"isFeatureSelected",value:function(t){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var e=this.props.data.features.indexOf(t);return this.props.selectedFeatureIndexes.includes(e)}},{key:"getPickingInfo",value:function(t){var e=t.info;return t.sourceLayer.id.endsWith("guides")&&(e.isGuide=!0),e}},{key:"_updateAutoHighlight",value:function(t){if(null===t||void 0===t?void 0:t.sourceLayer)if(t.isGuide){var e,n=f(t.sourceLayer.getSubLayers());try{for(n.s();!(e=n.n()).done;)e.value.updateAutoHighlight(t)}catch(r){n.e(r)}finally{n.f()}}else t.sourceLayer.updateAutoHighlight(t)}},{key:"createGuidesLayers",value:function(){var t=this.getActiveMode().getGuides(this.getModeProps(this.props));if(!t||!t.features.length)return[];var e={linestrings:{billboard:this.props.billboard,autoHighlight:!1},"polygons-fill":{autoHighlight:!1},"polygons-stroke":{billboard:this.props.billboard}};return"icon"===this.props.editHandleType?e["points-icon"]={type:r.IconLayer,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeUnits:this.props.editHandleIconSizeUnits,sizeScale:this.props.editHandleIconSizeScale,getIcon:x(this.props.getEditHandleIcon),getSize:x(this.props.getEditHandleIconSize),getColor:x(this.props.getEditHandleIconColor),getAngle:x(this.props.getEditHandleIconAngle)}:e["points-circle"]={type:r.ScatterplotLayer,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusUnits:this.props.editHandlePointRadiusUnits,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:x(this.props.getEditHandlePointRadius),getFillColor:x(this.props.getEditHandlePointColor),getLineColor:x(this.props.getEditHandlePointOutlineColor)},[new r.GeoJsonLayer(this.getSubLayerProps({id:"guides",data:t,fp64:this.props.fp64,_subLayerProps:e,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:x(this.props.getTentativeLineColor),getLineWidth:x(this.props.getTentativeLineWidth),getFillColor:x(this.props.getTentativeFillColor),pointType:"icon"===this.props.editHandleType?"icon":"circle",iconAtlas:this.props.editHandleIconAtlas}))]}},{key:"createTooltipsLayers",value:function(){var t=this.getActiveMode().getTooltips(this.getModeProps(this.props)),e=new r.TextLayer(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({getSize:R},this.getSubLayerProps({id:"tooltips",data:t})));return[e]}},{key:"onLayerClick",value:function(t){this.getActiveMode().handleClick(t,this.getModeProps(this.props))}},{key:"onLayerKeyUp",value:function(t){this.getActiveMode().handleKeyUp(t,this.getModeProps(this.props))}},{key:"onStartDragging",value:function(t){this.getActiveMode().handleStartDragging(t,this.getModeProps(this.props))}},{key:"onDragging",value:function(t){this.getActiveMode().handleDragging(t,this.getModeProps(this.props))}},{key:"onStopDragging",value:function(t){this.getActiveMode().handleStopDragging(t,this.getModeProps(this.props))}},{key:"onPointerMove",value:function(t){this.setState({lastPointerMoveEvent:t}),this.getActiveMode().handlePointerMove(t,this.getModeProps(this.props))}},{key:"getCursor",value:function(t){var e=t.isDragging;if(null===this.state)return null;var n=this.state.cursor;return n||(n=e?"grabbing":"grab"),n}},{key:"getActiveMode",value:function(){return this.state.mode}}],i&&d(n.prototype,i),o&&d(n,o),u}(a.default);e.default=F,b(F,"layerName","EditableGeoJsonLayer"),b(F,"defaultProps",D)},704:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UNIT=e.PROJECTED_PIXEL_SIZE_MULTIPLIER=void 0;e.PROJECTED_PIXEL_SIZE_MULTIPLIER=2/3;e.UNIT={common:0,meters:1,pixels:2}},710:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(753);(0,n(758).shouldPolyfill)()&&Object.defineProperty(Intl,"Locale",{value:r.Locale,writable:!0,enumerable:!1,configurable:!0})},711:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUnicodeLanguageSubtag=e.isUnicodeScriptSubtag=e.isUnicodeRegionSubtag=e.isStructurallyValidLanguageTag=e.parseUnicodeLanguageId=e.parseUnicodeLocaleId=e.getCanonicalLocales=void 0;var r=n(206),i=n(692),o=n(693),a=n(754);e.getCanonicalLocales=function(t){return function(t){if(void 0===t)return[];var e=[];"string"===typeof t&&(t=[t]);for(var n=0,r=t;n<r.length;n++){var s=r[n],u=(0,o.emitUnicodeLocaleId)((0,a.canonicalizeUnicodeLocaleId)((0,i.parseUnicodeLocaleId)(s)));e.indexOf(u)<0&&e.push(u)}return e}(t)};var s=n(692);Object.defineProperty(e,"parseUnicodeLocaleId",{enumerable:!0,get:function(){return s.parseUnicodeLocaleId}}),Object.defineProperty(e,"parseUnicodeLanguageId",{enumerable:!0,get:function(){return s.parseUnicodeLanguageId}}),Object.defineProperty(e,"isStructurallyValidLanguageTag",{enumerable:!0,get:function(){return s.isStructurallyValidLanguageTag}}),Object.defineProperty(e,"isUnicodeRegionSubtag",{enumerable:!0,get:function(){return s.isUnicodeRegionSubtag}}),Object.defineProperty(e,"isUnicodeScriptSubtag",{enumerable:!0,get:function(){return s.isUnicodeScriptSubtag}}),Object.defineProperty(e,"isUnicodeLanguageSubtag",{enumerable:!0,get:function(){return s.isUnicodeLanguageSubtag}}),(0,r.__exportStar)(n(756),e),(0,r.__exportStar)(n(693),e),(0,r.__exportStar)(n(712),e)},712:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.likelySubtags=void 0,e.likelySubtags={aa:"aa-Latn-ET",aai:"aai-Latn-ZZ",aak:"aak-Latn-ZZ",aau:"aau-Latn-ZZ",ab:"ab-Cyrl-GE",abi:"abi-Latn-ZZ",abq:"abq-Cyrl-ZZ",abr:"abr-Latn-GH",abt:"abt-Latn-ZZ",aby:"aby-Latn-ZZ",acd:"acd-Latn-ZZ",ace:"ace-Latn-ID",ach:"ach-Latn-UG",ada:"ada-Latn-GH",ade:"ade-Latn-ZZ",adj:"adj-Latn-ZZ",adp:"adp-Tibt-BT",ady:"ady-Cyrl-RU",adz:"adz-Latn-ZZ",ae:"ae-Avst-IR",aeb:"aeb-Arab-TN",aey:"aey-Latn-ZZ",af:"af-Latn-ZA",agc:"agc-Latn-ZZ",agd:"agd-Latn-ZZ",agg:"agg-Latn-ZZ",agm:"agm-Latn-ZZ",ago:"ago-Latn-ZZ",agq:"agq-Latn-CM",aha:"aha-Latn-ZZ",ahl:"ahl-Latn-ZZ",aho:"aho-Ahom-IN",ajg:"ajg-Latn-ZZ",ak:"ak-Latn-GH",akk:"akk-Xsux-IQ",ala:"ala-Latn-ZZ",ali:"ali-Latn-ZZ",aln:"aln-Latn-XK",alt:"alt-Cyrl-RU",am:"am-Ethi-ET",amm:"amm-Latn-ZZ",amn:"amn-Latn-ZZ",amo:"amo-Latn-NG",amp:"amp-Latn-ZZ",an:"an-Latn-ES",anc:"anc-Latn-ZZ",ank:"ank-Latn-ZZ",ann:"ann-Latn-ZZ",any:"any-Latn-ZZ",aoj:"aoj-Latn-ZZ",aom:"aom-Latn-ZZ",aoz:"aoz-Latn-ID",apc:"apc-Arab-ZZ",apd:"apd-Arab-TG",ape:"ape-Latn-ZZ",apr:"apr-Latn-ZZ",aps:"aps-Latn-ZZ",apz:"apz-Latn-ZZ",ar:"ar-Arab-EG",arc:"arc-Armi-IR","arc-Nbat":"arc-Nbat-JO","arc-Palm":"arc-Palm-SY",arh:"arh-Latn-ZZ",arn:"arn-Latn-CL",aro:"aro-Latn-BO",arq:"arq-Arab-DZ",ars:"ars-Arab-SA",ary:"ary-Arab-MA",arz:"arz-Arab-EG",as:"as-Beng-IN",asa:"asa-Latn-TZ",ase:"ase-Sgnw-US",asg:"asg-Latn-ZZ",aso:"aso-Latn-ZZ",ast:"ast-Latn-ES",ata:"ata-Latn-ZZ",atg:"atg-Latn-ZZ",atj:"atj-Latn-CA",auy:"auy-Latn-ZZ",av:"av-Cyrl-RU",avl:"avl-Arab-ZZ",avn:"avn-Latn-ZZ",avt:"avt-Latn-ZZ",avu:"avu-Latn-ZZ",awa:"awa-Deva-IN",awb:"awb-Latn-ZZ",awo:"awo-Latn-ZZ",awx:"awx-Latn-ZZ",ay:"ay-Latn-BO",ayb:"ayb-Latn-ZZ",az:"az-Latn-AZ","az-Arab":"az-Arab-IR","az-IQ":"az-Arab-IQ","az-IR":"az-Arab-IR","az-RU":"az-Cyrl-RU",ba:"ba-Cyrl-RU",bal:"bal-Arab-PK",ban:"ban-Latn-ID",bap:"bap-Deva-NP",bar:"bar-Latn-AT",bas:"bas-Latn-CM",bav:"bav-Latn-ZZ",bax:"bax-Bamu-CM",bba:"bba-Latn-ZZ",bbb:"bbb-Latn-ZZ",bbc:"bbc-Latn-ID",bbd:"bbd-Latn-ZZ",bbj:"bbj-Latn-CM",bbp:"bbp-Latn-ZZ",bbr:"bbr-Latn-ZZ",bcf:"bcf-Latn-ZZ",bch:"bch-Latn-ZZ",bci:"bci-Latn-CI",bcm:"bcm-Latn-ZZ",bcn:"bcn-Latn-ZZ",bco:"bco-Latn-ZZ",bcq:"bcq-Ethi-ZZ",bcu:"bcu-Latn-ZZ",bdd:"bdd-Latn-ZZ",be:"be-Cyrl-BY",bef:"bef-Latn-ZZ",beh:"beh-Latn-ZZ",bej:"bej-Arab-SD",bem:"bem-Latn-ZM",bet:"bet-Latn-ZZ",bew:"bew-Latn-ID",bex:"bex-Latn-ZZ",bez:"bez-Latn-TZ",bfd:"bfd-Latn-CM",bfq:"bfq-Taml-IN",bft:"bft-Arab-PK",bfy:"bfy-Deva-IN",bg:"bg-Cyrl-BG",bgc:"bgc-Deva-IN",bgn:"bgn-Arab-PK",bgx:"bgx-Grek-TR",bhb:"bhb-Deva-IN",bhg:"bhg-Latn-ZZ",bhi:"bhi-Deva-IN",bhl:"bhl-Latn-ZZ",bho:"bho-Deva-IN",bhy:"bhy-Latn-ZZ",bi:"bi-Latn-VU",bib:"bib-Latn-ZZ",big:"big-Latn-ZZ",bik:"bik-Latn-PH",bim:"bim-Latn-ZZ",bin:"bin-Latn-NG",bio:"bio-Latn-ZZ",biq:"biq-Latn-ZZ",bjh:"bjh-Latn-ZZ",bji:"bji-Ethi-ZZ",bjj:"bjj-Deva-IN",bjn:"bjn-Latn-ID",bjo:"bjo-Latn-ZZ",bjr:"bjr-Latn-ZZ",bjt:"bjt-Latn-SN",bjz:"bjz-Latn-ZZ",bkc:"bkc-Latn-ZZ",bkm:"bkm-Latn-CM",bkq:"bkq-Latn-ZZ",bku:"bku-Latn-PH",bkv:"bkv-Latn-ZZ",blg:"blg-Latn-MY",blt:"blt-Tavt-VN",bm:"bm-Latn-ML",bmh:"bmh-Latn-ZZ",bmk:"bmk-Latn-ZZ",bmq:"bmq-Latn-ML",bmu:"bmu-Latn-ZZ",bn:"bn-Beng-BD",bng:"bng-Latn-ZZ",bnm:"bnm-Latn-ZZ",bnp:"bnp-Latn-ZZ",bo:"bo-Tibt-CN",boj:"boj-Latn-ZZ",bom:"bom-Latn-ZZ",bon:"bon-Latn-ZZ",bpy:"bpy-Beng-IN",bqc:"bqc-Latn-ZZ",bqi:"bqi-Arab-IR",bqp:"bqp-Latn-ZZ",bqv:"bqv-Latn-CI",br:"br-Latn-FR",bra:"bra-Deva-IN",brh:"brh-Arab-PK",brx:"brx-Deva-IN",brz:"brz-Latn-ZZ",bs:"bs-Latn-BA",bsj:"bsj-Latn-ZZ",bsq:"bsq-Bass-LR",bss:"bss-Latn-CM",bst:"bst-Ethi-ZZ",bto:"bto-Latn-PH",btt:"btt-Latn-ZZ",btv:"btv-Deva-PK",bua:"bua-Cyrl-RU",buc:"buc-Latn-YT",bud:"bud-Latn-ZZ",bug:"bug-Latn-ID",buk:"buk-Latn-ZZ",bum:"bum-Latn-CM",buo:"buo-Latn-ZZ",bus:"bus-Latn-ZZ",buu:"buu-Latn-ZZ",bvb:"bvb-Latn-GQ",bwd:"bwd-Latn-ZZ",bwr:"bwr-Latn-ZZ",bxh:"bxh-Latn-ZZ",bye:"bye-Latn-ZZ",byn:"byn-Ethi-ER",byr:"byr-Latn-ZZ",bys:"bys-Latn-ZZ",byv:"byv-Latn-CM",byx:"byx-Latn-ZZ",bza:"bza-Latn-ZZ",bze:"bze-Latn-ML",bzf:"bzf-Latn-ZZ",bzh:"bzh-Latn-ZZ",bzw:"bzw-Latn-ZZ",ca:"ca-Latn-ES",cad:"cad-Latn-US",can:"can-Latn-ZZ",cbj:"cbj-Latn-ZZ",cch:"cch-Latn-NG",ccp:"ccp-Cakm-BD",ce:"ce-Cyrl-RU",ceb:"ceb-Latn-PH",cfa:"cfa-Latn-ZZ",cgg:"cgg-Latn-UG",ch:"ch-Latn-GU",chk:"chk-Latn-FM",chm:"chm-Cyrl-RU",cho:"cho-Latn-US",chp:"chp-Latn-CA",chr:"chr-Cher-US",cic:"cic-Latn-US",cja:"cja-Arab-KH",cjm:"cjm-Cham-VN",cjv:"cjv-Latn-ZZ",ckb:"ckb-Arab-IQ",ckl:"ckl-Latn-ZZ",cko:"cko-Latn-ZZ",cky:"cky-Latn-ZZ",cla:"cla-Latn-ZZ",cme:"cme-Latn-ZZ",cmg:"cmg-Soyo-MN",co:"co-Latn-FR",cop:"cop-Copt-EG",cps:"cps-Latn-PH",cr:"cr-Cans-CA",crh:"crh-Cyrl-UA",crj:"crj-Cans-CA",crk:"crk-Cans-CA",crl:"crl-Cans-CA",crm:"crm-Cans-CA",crs:"crs-Latn-SC",cs:"cs-Latn-CZ",csb:"csb-Latn-PL",csw:"csw-Cans-CA",ctd:"ctd-Pauc-MM",cu:"cu-Cyrl-RU","cu-Glag":"cu-Glag-BG",cv:"cv-Cyrl-RU",cy:"cy-Latn-GB",da:"da-Latn-DK",dad:"dad-Latn-ZZ",daf:"daf-Latn-CI",dag:"dag-Latn-ZZ",dah:"dah-Latn-ZZ",dak:"dak-Latn-US",dar:"dar-Cyrl-RU",dav:"dav-Latn-KE",dbd:"dbd-Latn-ZZ",dbq:"dbq-Latn-ZZ",dcc:"dcc-Arab-IN",ddn:"ddn-Latn-ZZ",de:"de-Latn-DE",ded:"ded-Latn-ZZ",den:"den-Latn-CA",dga:"dga-Latn-ZZ",dgh:"dgh-Latn-ZZ",dgi:"dgi-Latn-ZZ",dgl:"dgl-Arab-ZZ",dgr:"dgr-Latn-CA",dgz:"dgz-Latn-ZZ",dia:"dia-Latn-ZZ",dje:"dje-Latn-NE",dmf:"dmf-Medf-NG",dnj:"dnj-Latn-CI",dob:"dob-Latn-ZZ",doi:"doi-Deva-IN",dop:"dop-Latn-ZZ",dow:"dow-Latn-ZZ",drh:"drh-Mong-CN",dri:"dri-Latn-ZZ",drs:"drs-Ethi-ZZ",dsb:"dsb-Latn-DE",dtm:"dtm-Latn-ML",dtp:"dtp-Latn-MY",dts:"dts-Latn-ZZ",dty:"dty-Deva-NP",dua:"dua-Latn-CM",duc:"duc-Latn-ZZ",dud:"dud-Latn-ZZ",dug:"dug-Latn-ZZ",dv:"dv-Thaa-MV",dva:"dva-Latn-ZZ",dww:"dww-Latn-ZZ",dyo:"dyo-Latn-SN",dyu:"dyu-Latn-BF",dz:"dz-Tibt-BT",dzg:"dzg-Latn-ZZ",ebu:"ebu-Latn-KE",ee:"ee-Latn-GH",efi:"efi-Latn-NG",egl:"egl-Latn-IT",egy:"egy-Egyp-EG",eka:"eka-Latn-ZZ",eky:"eky-Kali-MM",el:"el-Grek-GR",ema:"ema-Latn-ZZ",emi:"emi-Latn-ZZ",en:"en-Latn-US","en-Shaw":"en-Shaw-GB",enn:"enn-Latn-ZZ",enq:"enq-Latn-ZZ",eo:"eo-Latn-001",eri:"eri-Latn-ZZ",es:"es-Latn-ES",esg:"esg-Gonm-IN",esu:"esu-Latn-US",et:"et-Latn-EE",etr:"etr-Latn-ZZ",ett:"ett-Ital-IT",etu:"etu-Latn-ZZ",etx:"etx-Latn-ZZ",eu:"eu-Latn-ES",ewo:"ewo-Latn-CM",ext:"ext-Latn-ES",eza:"eza-Latn-ZZ",fa:"fa-Arab-IR",faa:"faa-Latn-ZZ",fab:"fab-Latn-ZZ",fag:"fag-Latn-ZZ",fai:"fai-Latn-ZZ",fan:"fan-Latn-GQ",ff:"ff-Latn-SN","ff-Adlm":"ff-Adlm-GN",ffi:"ffi-Latn-ZZ",ffm:"ffm-Latn-ML",fi:"fi-Latn-FI",fia:"fia-Arab-SD",fil:"fil-Latn-PH",fit:"fit-Latn-SE",fj:"fj-Latn-FJ",flr:"flr-Latn-ZZ",fmp:"fmp-Latn-ZZ",fo:"fo-Latn-FO",fod:"fod-Latn-ZZ",fon:"fon-Latn-BJ",for:"for-Latn-ZZ",fpe:"fpe-Latn-ZZ",fqs:"fqs-Latn-ZZ",fr:"fr-Latn-FR",frc:"frc-Latn-US",frp:"frp-Latn-FR",frr:"frr-Latn-DE",frs:"frs-Latn-DE",fub:"fub-Arab-CM",fud:"fud-Latn-WF",fue:"fue-Latn-ZZ",fuf:"fuf-Latn-GN",fuh:"fuh-Latn-ZZ",fuq:"fuq-Latn-NE",fur:"fur-Latn-IT",fuv:"fuv-Latn-NG",fuy:"fuy-Latn-ZZ",fvr:"fvr-Latn-SD",fy:"fy-Latn-NL",ga:"ga-Latn-IE",gaa:"gaa-Latn-GH",gaf:"gaf-Latn-ZZ",gag:"gag-Latn-MD",gah:"gah-Latn-ZZ",gaj:"gaj-Latn-ZZ",gam:"gam-Latn-ZZ",gan:"gan-Hans-CN",gaw:"gaw-Latn-ZZ",gay:"gay-Latn-ID",gba:"gba-Latn-ZZ",gbf:"gbf-Latn-ZZ",gbm:"gbm-Deva-IN",gby:"gby-Latn-ZZ",gbz:"gbz-Arab-IR",gcr:"gcr-Latn-GF",gd:"gd-Latn-GB",gde:"gde-Latn-ZZ",gdn:"gdn-Latn-ZZ",gdr:"gdr-Latn-ZZ",geb:"geb-Latn-ZZ",gej:"gej-Latn-ZZ",gel:"gel-Latn-ZZ",gez:"gez-Ethi-ET",gfk:"gfk-Latn-ZZ",ggn:"ggn-Deva-NP",ghs:"ghs-Latn-ZZ",gil:"gil-Latn-KI",gim:"gim-Latn-ZZ",gjk:"gjk-Arab-PK",gjn:"gjn-Latn-ZZ",gju:"gju-Arab-PK",gkn:"gkn-Latn-ZZ",gkp:"gkp-Latn-ZZ",gl:"gl-Latn-ES",glk:"glk-Arab-IR",gmm:"gmm-Latn-ZZ",gmv:"gmv-Ethi-ZZ",gn:"gn-Latn-PY",gnd:"gnd-Latn-ZZ",gng:"gng-Latn-ZZ",god:"god-Latn-ZZ",gof:"gof-Ethi-ZZ",goi:"goi-Latn-ZZ",gom:"gom-Deva-IN",gon:"gon-Telu-IN",gor:"gor-Latn-ID",gos:"gos-Latn-NL",got:"got-Goth-UA",grb:"grb-Latn-ZZ",grc:"grc-Cprt-CY","grc-Linb":"grc-Linb-GR",grt:"grt-Beng-IN",grw:"grw-Latn-ZZ",gsw:"gsw-Latn-CH",gu:"gu-Gujr-IN",gub:"gub-Latn-BR",guc:"guc-Latn-CO",gud:"gud-Latn-ZZ",gur:"gur-Latn-GH",guw:"guw-Latn-ZZ",gux:"gux-Latn-ZZ",guz:"guz-Latn-KE",gv:"gv-Latn-IM",gvf:"gvf-Latn-ZZ",gvr:"gvr-Deva-NP",gvs:"gvs-Latn-ZZ",gwc:"gwc-Arab-ZZ",gwi:"gwi-Latn-CA",gwt:"gwt-Arab-ZZ",gyi:"gyi-Latn-ZZ",ha:"ha-Latn-NG","ha-CM":"ha-Arab-CM","ha-SD":"ha-Arab-SD",hag:"hag-Latn-ZZ",hak:"hak-Hans-CN",ham:"ham-Latn-ZZ",haw:"haw-Latn-US",haz:"haz-Arab-AF",hbb:"hbb-Latn-ZZ",hdy:"hdy-Ethi-ZZ",he:"he-Hebr-IL",hhy:"hhy-Latn-ZZ",hi:"hi-Deva-IN",hia:"hia-Latn-ZZ",hif:"hif-Latn-FJ",hig:"hig-Latn-ZZ",hih:"hih-Latn-ZZ",hil:"hil-Latn-PH",hla:"hla-Latn-ZZ",hlu:"hlu-Hluw-TR",hmd:"hmd-Plrd-CN",hmt:"hmt-Latn-ZZ",hnd:"hnd-Arab-PK",hne:"hne-Deva-IN",hnj:"hnj-Hmnp-US",hnn:"hnn-Latn-PH",hno:"hno-Arab-PK",ho:"ho-Latn-PG",hoc:"hoc-Deva-IN",hoj:"hoj-Deva-IN",hot:"hot-Latn-ZZ",hr:"hr-Latn-HR",hsb:"hsb-Latn-DE",hsn:"hsn-Hans-CN",ht:"ht-Latn-HT",hu:"hu-Latn-HU",hui:"hui-Latn-ZZ",hy:"hy-Armn-AM",hz:"hz-Latn-NA",ia:"ia-Latn-001",ian:"ian-Latn-ZZ",iar:"iar-Latn-ZZ",iba:"iba-Latn-MY",ibb:"ibb-Latn-NG",iby:"iby-Latn-ZZ",ica:"ica-Latn-ZZ",ich:"ich-Latn-ZZ",id:"id-Latn-ID",idd:"idd-Latn-ZZ",idi:"idi-Latn-ZZ",idu:"idu-Latn-ZZ",ife:"ife-Latn-TG",ig:"ig-Latn-NG",igb:"igb-Latn-ZZ",ige:"ige-Latn-ZZ",ii:"ii-Yiii-CN",ijj:"ijj-Latn-ZZ",ik:"ik-Latn-US",ikk:"ikk-Latn-ZZ",ikt:"ikt-Latn-CA",ikw:"ikw-Latn-ZZ",ikx:"ikx-Latn-ZZ",ilo:"ilo-Latn-PH",imo:"imo-Latn-ZZ",in:"in-Latn-ID",inh:"inh-Cyrl-RU",io:"io-Latn-001",iou:"iou-Latn-ZZ",iri:"iri-Latn-ZZ",is:"is-Latn-IS",it:"it-Latn-IT",iu:"iu-Cans-CA",iw:"iw-Hebr-IL",iwm:"iwm-Latn-ZZ",iws:"iws-Latn-ZZ",izh:"izh-Latn-RU",izi:"izi-Latn-ZZ",ja:"ja-Jpan-JP",jab:"jab-Latn-ZZ",jam:"jam-Latn-JM",jar:"jar-Latn-ZZ",jbo:"jbo-Latn-001",jbu:"jbu-Latn-ZZ",jen:"jen-Latn-ZZ",jgk:"jgk-Latn-ZZ",jgo:"jgo-Latn-CM",ji:"ji-Hebr-UA",jib:"jib-Latn-ZZ",jmc:"jmc-Latn-TZ",jml:"jml-Deva-NP",jra:"jra-Latn-ZZ",jut:"jut-Latn-DK",jv:"jv-Latn-ID",jw:"jw-Latn-ID",ka:"ka-Geor-GE",kaa:"kaa-Cyrl-UZ",kab:"kab-Latn-DZ",kac:"kac-Latn-MM",kad:"kad-Latn-ZZ",kai:"kai-Latn-ZZ",kaj:"kaj-Latn-NG",kam:"kam-Latn-KE",kao:"kao-Latn-ML",kbd:"kbd-Cyrl-RU",kbm:"kbm-Latn-ZZ",kbp:"kbp-Latn-ZZ",kbq:"kbq-Latn-ZZ",kbx:"kbx-Latn-ZZ",kby:"kby-Arab-NE",kcg:"kcg-Latn-NG",kck:"kck-Latn-ZW",kcl:"kcl-Latn-ZZ",kct:"kct-Latn-ZZ",kde:"kde-Latn-TZ",kdh:"kdh-Latn-TG",kdl:"kdl-Latn-ZZ",kdt:"kdt-Thai-TH",kea:"kea-Latn-CV",ken:"ken-Latn-CM",kez:"kez-Latn-ZZ",kfo:"kfo-Latn-CI",kfr:"kfr-Deva-IN",kfy:"kfy-Deva-IN",kg:"kg-Latn-CD",kge:"kge-Latn-ID",kgf:"kgf-Latn-ZZ",kgp:"kgp-Latn-BR",kha:"kha-Latn-IN",khb:"khb-Talu-CN",khn:"khn-Deva-IN",khq:"khq-Latn-ML",khs:"khs-Latn-ZZ",kht:"kht-Mymr-IN",khw:"khw-Arab-PK",khz:"khz-Latn-ZZ",ki:"ki-Latn-KE",kij:"kij-Latn-ZZ",kiu:"kiu-Latn-TR",kiw:"kiw-Latn-ZZ",kj:"kj-Latn-NA",kjd:"kjd-Latn-ZZ",kjg:"kjg-Laoo-LA",kjs:"kjs-Latn-ZZ",kjy:"kjy-Latn-ZZ",kk:"kk-Cyrl-KZ","kk-AF":"kk-Arab-AF","kk-Arab":"kk-Arab-CN","kk-CN":"kk-Arab-CN","kk-IR":"kk-Arab-IR","kk-MN":"kk-Arab-MN",kkc:"kkc-Latn-ZZ",kkj:"kkj-Latn-CM",kl:"kl-Latn-GL",kln:"kln-Latn-KE",klq:"klq-Latn-ZZ",klt:"klt-Latn-ZZ",klx:"klx-Latn-ZZ",km:"km-Khmr-KH",kmb:"kmb-Latn-AO",kmh:"kmh-Latn-ZZ",kmo:"kmo-Latn-ZZ",kms:"kms-Latn-ZZ",kmu:"kmu-Latn-ZZ",kmw:"kmw-Latn-ZZ",kn:"kn-Knda-IN",knf:"knf-Latn-GW",knp:"knp-Latn-ZZ",ko:"ko-Kore-KR",koi:"koi-Cyrl-RU",kok:"kok-Deva-IN",kol:"kol-Latn-ZZ",kos:"kos-Latn-FM",koz:"koz-Latn-ZZ",kpe:"kpe-Latn-LR",kpf:"kpf-Latn-ZZ",kpo:"kpo-Latn-ZZ",kpr:"kpr-Latn-ZZ",kpx:"kpx-Latn-ZZ",kqb:"kqb-Latn-ZZ",kqf:"kqf-Latn-ZZ",kqs:"kqs-Latn-ZZ",kqy:"kqy-Ethi-ZZ",kr:"kr-Latn-ZZ",krc:"krc-Cyrl-RU",kri:"kri-Latn-SL",krj:"krj-Latn-PH",krl:"krl-Latn-RU",krs:"krs-Latn-ZZ",kru:"kru-Deva-IN",ks:"ks-Arab-IN",ksb:"ksb-Latn-TZ",ksd:"ksd-Latn-ZZ",ksf:"ksf-Latn-CM",ksh:"ksh-Latn-DE",ksj:"ksj-Latn-ZZ",ksr:"ksr-Latn-ZZ",ktb:"ktb-Ethi-ZZ",ktm:"ktm-Latn-ZZ",kto:"kto-Latn-ZZ",ktr:"ktr-Latn-MY",ku:"ku-Latn-TR","ku-Arab":"ku-Arab-IQ","ku-LB":"ku-Arab-LB","ku-Yezi":"ku-Yezi-GE",kub:"kub-Latn-ZZ",kud:"kud-Latn-ZZ",kue:"kue-Latn-ZZ",kuj:"kuj-Latn-ZZ",kum:"kum-Cyrl-RU",kun:"kun-Latn-ZZ",kup:"kup-Latn-ZZ",kus:"kus-Latn-ZZ",kv:"kv-Cyrl-RU",kvg:"kvg-Latn-ZZ",kvr:"kvr-Latn-ID",kvx:"kvx-Arab-PK",kw:"kw-Latn-GB",kwj:"kwj-Latn-ZZ",kwo:"kwo-Latn-ZZ",kwq:"kwq-Latn-ZZ",kxa:"kxa-Latn-ZZ",kxc:"kxc-Ethi-ZZ",kxe:"kxe-Latn-ZZ",kxl:"kxl-Deva-IN",kxm:"kxm-Thai-TH",kxp:"kxp-Arab-PK",kxw:"kxw-Latn-ZZ",kxz:"kxz-Latn-ZZ",ky:"ky-Cyrl-KG","ky-Arab":"ky-Arab-CN","ky-CN":"ky-Arab-CN","ky-Latn":"ky-Latn-TR","ky-TR":"ky-Latn-TR",kye:"kye-Latn-ZZ",kyx:"kyx-Latn-ZZ",kzh:"kzh-Arab-ZZ",kzj:"kzj-Latn-MY",kzr:"kzr-Latn-ZZ",kzt:"kzt-Latn-MY",la:"la-Latn-VA",lab:"lab-Lina-GR",lad:"lad-Hebr-IL",lag:"lag-Latn-TZ",lah:"lah-Arab-PK",laj:"laj-Latn-UG",las:"las-Latn-ZZ",lb:"lb-Latn-LU",lbe:"lbe-Cyrl-RU",lbu:"lbu-Latn-ZZ",lbw:"lbw-Latn-ID",lcm:"lcm-Latn-ZZ",lcp:"lcp-Thai-CN",ldb:"ldb-Latn-ZZ",led:"led-Latn-ZZ",lee:"lee-Latn-ZZ",lem:"lem-Latn-ZZ",lep:"lep-Lepc-IN",leq:"leq-Latn-ZZ",leu:"leu-Latn-ZZ",lez:"lez-Cyrl-RU",lg:"lg-Latn-UG",lgg:"lgg-Latn-ZZ",li:"li-Latn-NL",lia:"lia-Latn-ZZ",lid:"lid-Latn-ZZ",lif:"lif-Deva-NP","lif-Limb":"lif-Limb-IN",lig:"lig-Latn-ZZ",lih:"lih-Latn-ZZ",lij:"lij-Latn-IT",lis:"lis-Lisu-CN",ljp:"ljp-Latn-ID",lki:"lki-Arab-IR",lkt:"lkt-Latn-US",lle:"lle-Latn-ZZ",lln:"lln-Latn-ZZ",lmn:"lmn-Telu-IN",lmo:"lmo-Latn-IT",lmp:"lmp-Latn-ZZ",ln:"ln-Latn-CD",lns:"lns-Latn-ZZ",lnu:"lnu-Latn-ZZ",lo:"lo-Laoo-LA",loj:"loj-Latn-ZZ",lok:"lok-Latn-ZZ",lol:"lol-Latn-CD",lor:"lor-Latn-ZZ",los:"los-Latn-ZZ",loz:"loz-Latn-ZM",lrc:"lrc-Arab-IR",lt:"lt-Latn-LT",ltg:"ltg-Latn-LV",lu:"lu-Latn-CD",lua:"lua-Latn-CD",luo:"luo-Latn-KE",luy:"luy-Latn-KE",luz:"luz-Arab-IR",lv:"lv-Latn-LV",lwl:"lwl-Thai-TH",lzh:"lzh-Hans-CN",lzz:"lzz-Latn-TR",mad:"mad-Latn-ID",maf:"maf-Latn-CM",mag:"mag-Deva-IN",mai:"mai-Deva-IN",mak:"mak-Latn-ID",man:"man-Latn-GM","man-GN":"man-Nkoo-GN","man-Nkoo":"man-Nkoo-GN",mas:"mas-Latn-KE",maw:"maw-Latn-ZZ",maz:"maz-Latn-MX",mbh:"mbh-Latn-ZZ",mbo:"mbo-Latn-ZZ",mbq:"mbq-Latn-ZZ",mbu:"mbu-Latn-ZZ",mbw:"mbw-Latn-ZZ",mci:"mci-Latn-ZZ",mcp:"mcp-Latn-ZZ",mcq:"mcq-Latn-ZZ",mcr:"mcr-Latn-ZZ",mcu:"mcu-Latn-ZZ",mda:"mda-Latn-ZZ",mde:"mde-Arab-ZZ",mdf:"mdf-Cyrl-RU",mdh:"mdh-Latn-PH",mdj:"mdj-Latn-ZZ",mdr:"mdr-Latn-ID",mdx:"mdx-Ethi-ZZ",med:"med-Latn-ZZ",mee:"mee-Latn-ZZ",mek:"mek-Latn-ZZ",men:"men-Latn-SL",mer:"mer-Latn-KE",met:"met-Latn-ZZ",meu:"meu-Latn-ZZ",mfa:"mfa-Arab-TH",mfe:"mfe-Latn-MU",mfn:"mfn-Latn-ZZ",mfo:"mfo-Latn-ZZ",mfq:"mfq-Latn-ZZ",mg:"mg-Latn-MG",mgh:"mgh-Latn-MZ",mgl:"mgl-Latn-ZZ",mgo:"mgo-Latn-CM",mgp:"mgp-Deva-NP",mgy:"mgy-Latn-TZ",mh:"mh-Latn-MH",mhi:"mhi-Latn-ZZ",mhl:"mhl-Latn-ZZ",mi:"mi-Latn-NZ",mif:"mif-Latn-ZZ",min:"min-Latn-ID",miw:"miw-Latn-ZZ",mk:"mk-Cyrl-MK",mki:"mki-Arab-ZZ",mkl:"mkl-Latn-ZZ",mkp:"mkp-Latn-ZZ",mkw:"mkw-Latn-ZZ",ml:"ml-Mlym-IN",mle:"mle-Latn-ZZ",mlp:"mlp-Latn-ZZ",mls:"mls-Latn-SD",mmo:"mmo-Latn-ZZ",mmu:"mmu-Latn-ZZ",mmx:"mmx-Latn-ZZ",mn:"mn-Cyrl-MN","mn-CN":"mn-Mong-CN","mn-Mong":"mn-Mong-CN",mna:"mna-Latn-ZZ",mnf:"mnf-Latn-ZZ",mni:"mni-Beng-IN",mnw:"mnw-Mymr-MM",mo:"mo-Latn-RO",moa:"moa-Latn-ZZ",moe:"moe-Latn-CA",moh:"moh-Latn-CA",mos:"mos-Latn-BF",mox:"mox-Latn-ZZ",mpp:"mpp-Latn-ZZ",mps:"mps-Latn-ZZ",mpt:"mpt-Latn-ZZ",mpx:"mpx-Latn-ZZ",mql:"mql-Latn-ZZ",mr:"mr-Deva-IN",mrd:"mrd-Deva-NP",mrj:"mrj-Cyrl-RU",mro:"mro-Mroo-BD",ms:"ms-Latn-MY","ms-CC":"ms-Arab-CC",mt:"mt-Latn-MT",mtc:"mtc-Latn-ZZ",mtf:"mtf-Latn-ZZ",mti:"mti-Latn-ZZ",mtr:"mtr-Deva-IN",mua:"mua-Latn-CM",mur:"mur-Latn-ZZ",mus:"mus-Latn-US",mva:"mva-Latn-ZZ",mvn:"mvn-Latn-ZZ",mvy:"mvy-Arab-PK",mwk:"mwk-Latn-ML",mwr:"mwr-Deva-IN",mwv:"mwv-Latn-ID",mww:"mww-Hmnp-US",mxc:"mxc-Latn-ZW",mxm:"mxm-Latn-ZZ",my:"my-Mymr-MM",myk:"myk-Latn-ZZ",mym:"mym-Ethi-ZZ",myv:"myv-Cyrl-RU",myw:"myw-Latn-ZZ",myx:"myx-Latn-UG",myz:"myz-Mand-IR",mzk:"mzk-Latn-ZZ",mzm:"mzm-Latn-ZZ",mzn:"mzn-Arab-IR",mzp:"mzp-Latn-ZZ",mzw:"mzw-Latn-ZZ",mzz:"mzz-Latn-ZZ",na:"na-Latn-NR",nac:"nac-Latn-ZZ",naf:"naf-Latn-ZZ",nak:"nak-Latn-ZZ",nan:"nan-Hans-CN",nap:"nap-Latn-IT",naq:"naq-Latn-NA",nas:"nas-Latn-ZZ",nb:"nb-Latn-NO",nca:"nca-Latn-ZZ",nce:"nce-Latn-ZZ",ncf:"ncf-Latn-ZZ",nch:"nch-Latn-MX",nco:"nco-Latn-ZZ",ncu:"ncu-Latn-ZZ",nd:"nd-Latn-ZW",ndc:"ndc-Latn-MZ",nds:"nds-Latn-DE",ne:"ne-Deva-NP",neb:"neb-Latn-ZZ",new:"new-Deva-NP",nex:"nex-Latn-ZZ",nfr:"nfr-Latn-ZZ",ng:"ng-Latn-NA",nga:"nga-Latn-ZZ",ngb:"ngb-Latn-ZZ",ngl:"ngl-Latn-MZ",nhb:"nhb-Latn-ZZ",nhe:"nhe-Latn-MX",nhw:"nhw-Latn-MX",nif:"nif-Latn-ZZ",nii:"nii-Latn-ZZ",nij:"nij-Latn-ID",nin:"nin-Latn-ZZ",niu:"niu-Latn-NU",niy:"niy-Latn-ZZ",niz:"niz-Latn-ZZ",njo:"njo-Latn-IN",nkg:"nkg-Latn-ZZ",nko:"nko-Latn-ZZ",nl:"nl-Latn-NL",nmg:"nmg-Latn-CM",nmz:"nmz-Latn-ZZ",nn:"nn-Latn-NO",nnf:"nnf-Latn-ZZ",nnh:"nnh-Latn-CM",nnk:"nnk-Latn-ZZ",nnm:"nnm-Latn-ZZ",nnp:"nnp-Wcho-IN",no:"no-Latn-NO",nod:"nod-Lana-TH",noe:"noe-Deva-IN",non:"non-Runr-SE",nop:"nop-Latn-ZZ",nou:"nou-Latn-ZZ",nqo:"nqo-Nkoo-GN",nr:"nr-Latn-ZA",nrb:"nrb-Latn-ZZ",nsk:"nsk-Cans-CA",nsn:"nsn-Latn-ZZ",nso:"nso-Latn-ZA",nss:"nss-Latn-ZZ",nst:"nst-Tnsa-IN",ntm:"ntm-Latn-ZZ",ntr:"ntr-Latn-ZZ",nui:"nui-Latn-ZZ",nup:"nup-Latn-ZZ",nus:"nus-Latn-SS",nuv:"nuv-Latn-ZZ",nux:"nux-Latn-ZZ",nv:"nv-Latn-US",nwb:"nwb-Latn-ZZ",nxq:"nxq-Latn-CN",nxr:"nxr-Latn-ZZ",ny:"ny-Latn-MW",nym:"nym-Latn-TZ",nyn:"nyn-Latn-UG",nzi:"nzi-Latn-GH",oc:"oc-Latn-FR",ogc:"ogc-Latn-ZZ",okr:"okr-Latn-ZZ",okv:"okv-Latn-ZZ",om:"om-Latn-ET",ong:"ong-Latn-ZZ",onn:"onn-Latn-ZZ",ons:"ons-Latn-ZZ",opm:"opm-Latn-ZZ",or:"or-Orya-IN",oro:"oro-Latn-ZZ",oru:"oru-Arab-ZZ",os:"os-Cyrl-GE",osa:"osa-Osge-US",ota:"ota-Arab-ZZ",otk:"otk-Orkh-MN",oui:"oui-Ougr-143",ozm:"ozm-Latn-ZZ",pa:"pa-Guru-IN","pa-Arab":"pa-Arab-PK","pa-PK":"pa-Arab-PK",pag:"pag-Latn-PH",pal:"pal-Phli-IR","pal-Phlp":"pal-Phlp-CN",pam:"pam-Latn-PH",pap:"pap-Latn-AW",pau:"pau-Latn-PW",pbi:"pbi-Latn-ZZ",pcd:"pcd-Latn-FR",pcm:"pcm-Latn-NG",pdc:"pdc-Latn-US",pdt:"pdt-Latn-CA",ped:"ped-Latn-ZZ",peo:"peo-Xpeo-IR",pex:"pex-Latn-ZZ",pfl:"pfl-Latn-DE",phl:"phl-Arab-ZZ",phn:"phn-Phnx-LB",pil:"pil-Latn-ZZ",pip:"pip-Latn-ZZ",pka:"pka-Brah-IN",pko:"pko-Latn-KE",pl:"pl-Latn-PL",pla:"pla-Latn-ZZ",pms:"pms-Latn-IT",png:"png-Latn-ZZ",pnn:"pnn-Latn-ZZ",pnt:"pnt-Grek-GR",pon:"pon-Latn-FM",ppa:"ppa-Deva-IN",ppo:"ppo-Latn-ZZ",pra:"pra-Khar-PK",prd:"prd-Arab-IR",prg:"prg-Latn-001",ps:"ps-Arab-AF",pss:"pss-Latn-ZZ",pt:"pt-Latn-BR",ptp:"ptp-Latn-ZZ",puu:"puu-Latn-GA",pwa:"pwa-Latn-ZZ",qu:"qu-Latn-PE",quc:"quc-Latn-GT",qug:"qug-Latn-EC",rai:"rai-Latn-ZZ",raj:"raj-Deva-IN",rao:"rao-Latn-ZZ",rcf:"rcf-Latn-RE",rej:"rej-Latn-ID",rel:"rel-Latn-ZZ",res:"res-Latn-ZZ",rgn:"rgn-Latn-IT",rhg:"rhg-Rohg-MM",ria:"ria-Latn-IN",rif:"rif-Tfng-MA","rif-NL":"rif-Latn-NL",rjs:"rjs-Deva-NP",rkt:"rkt-Beng-BD",rm:"rm-Latn-CH",rmf:"rmf-Latn-FI",rmo:"rmo-Latn-CH",rmt:"rmt-Arab-IR",rmu:"rmu-Latn-SE",rn:"rn-Latn-BI",rna:"rna-Latn-ZZ",rng:"rng-Latn-MZ",ro:"ro-Latn-RO",rob:"rob-Latn-ID",rof:"rof-Latn-TZ",roo:"roo-Latn-ZZ",rro:"rro-Latn-ZZ",rtm:"rtm-Latn-FJ",ru:"ru-Cyrl-RU",rue:"rue-Cyrl-UA",rug:"rug-Latn-SB",rw:"rw-Latn-RW",rwk:"rwk-Latn-TZ",rwo:"rwo-Latn-ZZ",ryu:"ryu-Kana-JP",sa:"sa-Deva-IN",saf:"saf-Latn-GH",sah:"sah-Cyrl-RU",saq:"saq-Latn-KE",sas:"sas-Latn-ID",sat:"sat-Olck-IN",sav:"sav-Latn-SN",saz:"saz-Saur-IN",sba:"sba-Latn-ZZ",sbe:"sbe-Latn-ZZ",sbp:"sbp-Latn-TZ",sc:"sc-Latn-IT",sck:"sck-Deva-IN",scl:"scl-Arab-ZZ",scn:"scn-Latn-IT",sco:"sco-Latn-GB",scs:"scs-Latn-CA",sd:"sd-Arab-PK","sd-Deva":"sd-Deva-IN","sd-Khoj":"sd-Khoj-IN","sd-Sind":"sd-Sind-IN",sdc:"sdc-Latn-IT",sdh:"sdh-Arab-IR",se:"se-Latn-NO",sef:"sef-Latn-CI",seh:"seh-Latn-MZ",sei:"sei-Latn-MX",ses:"ses-Latn-ML",sg:"sg-Latn-CF",sga:"sga-Ogam-IE",sgs:"sgs-Latn-LT",sgw:"sgw-Ethi-ZZ",sgz:"sgz-Latn-ZZ",shi:"shi-Tfng-MA",shk:"shk-Latn-ZZ",shn:"shn-Mymr-MM",shu:"shu-Arab-ZZ",si:"si-Sinh-LK",sid:"sid-Latn-ET",sig:"sig-Latn-ZZ",sil:"sil-Latn-ZZ",sim:"sim-Latn-ZZ",sjr:"sjr-Latn-ZZ",sk:"sk-Latn-SK",skc:"skc-Latn-ZZ",skr:"skr-Arab-PK",sks:"sks-Latn-ZZ",sl:"sl-Latn-SI",sld:"sld-Latn-ZZ",sli:"sli-Latn-PL",sll:"sll-Latn-ZZ",sly:"sly-Latn-ID",sm:"sm-Latn-WS",sma:"sma-Latn-SE",smj:"smj-Latn-SE",smn:"smn-Latn-FI",smp:"smp-Samr-IL",smq:"smq-Latn-ZZ",sms:"sms-Latn-FI",sn:"sn-Latn-ZW",snc:"snc-Latn-ZZ",snk:"snk-Latn-ML",snp:"snp-Latn-ZZ",snx:"snx-Latn-ZZ",sny:"sny-Latn-ZZ",so:"so-Latn-SO",sog:"sog-Sogd-UZ",sok:"sok-Latn-ZZ",soq:"soq-Latn-ZZ",sou:"sou-Thai-TH",soy:"soy-Latn-ZZ",spd:"spd-Latn-ZZ",spl:"spl-Latn-ZZ",sps:"sps-Latn-ZZ",sq:"sq-Latn-AL",sr:"sr-Cyrl-RS","sr-ME":"sr-Latn-ME","sr-RO":"sr-Latn-RO","sr-RU":"sr-Latn-RU","sr-TR":"sr-Latn-TR",srb:"srb-Sora-IN",srn:"srn-Latn-SR",srr:"srr-Latn-SN",srx:"srx-Deva-IN",ss:"ss-Latn-ZA",ssd:"ssd-Latn-ZZ",ssg:"ssg-Latn-ZZ",ssy:"ssy-Latn-ER",st:"st-Latn-ZA",stk:"stk-Latn-ZZ",stq:"stq-Latn-DE",su:"su-Latn-ID",sua:"sua-Latn-ZZ",sue:"sue-Latn-ZZ",suk:"suk-Latn-TZ",sur:"sur-Latn-ZZ",sus:"sus-Latn-GN",sv:"sv-Latn-SE",sw:"sw-Latn-TZ",swb:"swb-Arab-YT",swc:"swc-Latn-CD",swg:"swg-Latn-DE",swp:"swp-Latn-ZZ",swv:"swv-Deva-IN",sxn:"sxn-Latn-ID",sxw:"sxw-Latn-ZZ",syl:"syl-Beng-BD",syr:"syr-Syrc-IQ",szl:"szl-Latn-PL",ta:"ta-Taml-IN",taj:"taj-Deva-NP",tal:"tal-Latn-ZZ",tan:"tan-Latn-ZZ",taq:"taq-Latn-ZZ",tbc:"tbc-Latn-ZZ",tbd:"tbd-Latn-ZZ",tbf:"tbf-Latn-ZZ",tbg:"tbg-Latn-ZZ",tbo:"tbo-Latn-ZZ",tbw:"tbw-Latn-PH",tbz:"tbz-Latn-ZZ",tci:"tci-Latn-ZZ",tcy:"tcy-Knda-IN",tdd:"tdd-Tale-CN",tdg:"tdg-Deva-NP",tdh:"tdh-Deva-NP",tdu:"tdu-Latn-MY",te:"te-Telu-IN",ted:"ted-Latn-ZZ",tem:"tem-Latn-SL",teo:"teo-Latn-UG",tet:"tet-Latn-TL",tfi:"tfi-Latn-ZZ",tg:"tg-Cyrl-TJ","tg-Arab":"tg-Arab-PK","tg-PK":"tg-Arab-PK",tgc:"tgc-Latn-ZZ",tgo:"tgo-Latn-ZZ",tgu:"tgu-Latn-ZZ",th:"th-Thai-TH",thl:"thl-Deva-NP",thq:"thq-Deva-NP",thr:"thr-Deva-NP",ti:"ti-Ethi-ET",tif:"tif-Latn-ZZ",tig:"tig-Ethi-ER",tik:"tik-Latn-ZZ",tim:"tim-Latn-ZZ",tio:"tio-Latn-ZZ",tiv:"tiv-Latn-NG",tk:"tk-Latn-TM",tkl:"tkl-Latn-TK",tkr:"tkr-Latn-AZ",tkt:"tkt-Deva-NP",tl:"tl-Latn-PH",tlf:"tlf-Latn-ZZ",tlx:"tlx-Latn-ZZ",tly:"tly-Latn-AZ",tmh:"tmh-Latn-NE",tmy:"tmy-Latn-ZZ",tn:"tn-Latn-ZA",tnh:"tnh-Latn-ZZ",to:"to-Latn-TO",tof:"tof-Latn-ZZ",tog:"tog-Latn-MW",toq:"toq-Latn-ZZ",tpi:"tpi-Latn-PG",tpm:"tpm-Latn-ZZ",tpz:"tpz-Latn-ZZ",tqo:"tqo-Latn-ZZ",tr:"tr-Latn-TR",tru:"tru-Latn-TR",trv:"trv-Latn-TW",trw:"trw-Arab-PK",ts:"ts-Latn-ZA",tsd:"tsd-Grek-GR",tsf:"tsf-Deva-NP",tsg:"tsg-Latn-PH",tsj:"tsj-Tibt-BT",tsw:"tsw-Latn-ZZ",tt:"tt-Cyrl-RU",ttd:"ttd-Latn-ZZ",tte:"tte-Latn-ZZ",ttj:"ttj-Latn-UG",ttr:"ttr-Latn-ZZ",tts:"tts-Thai-TH",ttt:"ttt-Latn-AZ",tuh:"tuh-Latn-ZZ",tul:"tul-Latn-ZZ",tum:"tum-Latn-MW",tuq:"tuq-Latn-ZZ",tvd:"tvd-Latn-ZZ",tvl:"tvl-Latn-TV",tvu:"tvu-Latn-ZZ",twh:"twh-Latn-ZZ",twq:"twq-Latn-NE",txg:"txg-Tang-CN",txo:"txo-Toto-IN",ty:"ty-Latn-PF",tya:"tya-Latn-ZZ",tyv:"tyv-Cyrl-RU",tzm:"tzm-Latn-MA",ubu:"ubu-Latn-ZZ",udi:"udi-Aghb-RU",udm:"udm-Cyrl-RU",ug:"ug-Arab-CN","ug-Cyrl":"ug-Cyrl-KZ","ug-KZ":"ug-Cyrl-KZ","ug-MN":"ug-Cyrl-MN",uga:"uga-Ugar-SY",uk:"uk-Cyrl-UA",uli:"uli-Latn-FM",umb:"umb-Latn-AO",und:"en-Latn-US","und-002":"en-Latn-NG","und-003":"en-Latn-US","und-005":"pt-Latn-BR","und-009":"en-Latn-AU","und-011":"en-Latn-NG","und-013":"es-Latn-MX","und-014":"sw-Latn-TZ","und-015":"ar-Arab-EG","und-017":"sw-Latn-CD","und-018":"en-Latn-ZA","und-019":"en-Latn-US","und-021":"en-Latn-US","und-029":"es-Latn-CU","und-030":"zh-Hans-CN","und-034":"hi-Deva-IN","und-035":"id-Latn-ID","und-039":"it-Latn-IT","und-053":"en-Latn-AU","und-054":"en-Latn-PG","und-057":"en-Latn-GU","und-061":"sm-Latn-WS","und-142":"zh-Hans-CN","und-143":"uz-Latn-UZ","und-145":"ar-Arab-SA","und-150":"ru-Cyrl-RU","und-151":"ru-Cyrl-RU","und-154":"en-Latn-GB","und-155":"de-Latn-DE","und-202":"en-Latn-NG","und-419":"es-Latn-419","und-AD":"ca-Latn-AD","und-Adlm":"ff-Adlm-GN","und-AE":"ar-Arab-AE","und-AF":"fa-Arab-AF","und-Aghb":"udi-Aghb-RU","und-Ahom":"aho-Ahom-IN","und-AL":"sq-Latn-AL","und-AM":"hy-Armn-AM","und-AO":"pt-Latn-AO","und-AQ":"und-Latn-AQ","und-AR":"es-Latn-AR","und-Arab":"ar-Arab-EG","und-Arab-CC":"ms-Arab-CC","und-Arab-CN":"ug-Arab-CN","und-Arab-GB":"ks-Arab-GB","und-Arab-ID":"ms-Arab-ID","und-Arab-IN":"ur-Arab-IN","und-Arab-KH":"cja-Arab-KH","und-Arab-MM":"rhg-Arab-MM","und-Arab-MN":"kk-Arab-MN","und-Arab-MU":"ur-Arab-MU","und-Arab-NG":"ha-Arab-NG","und-Arab-PK":"ur-Arab-PK","und-Arab-TG":"apd-Arab-TG","und-Arab-TH":"mfa-Arab-TH","und-Arab-TJ":"fa-Arab-TJ","und-Arab-TR":"az-Arab-TR","und-Arab-YT":"swb-Arab-YT","und-Armi":"arc-Armi-IR","und-Armn":"hy-Armn-AM","und-AS":"sm-Latn-AS","und-AT":"de-Latn-AT","und-Avst":"ae-Avst-IR","und-AW":"nl-Latn-AW","und-AX":"sv-Latn-AX","und-AZ":"az-Latn-AZ","und-BA":"bs-Latn-BA","und-Bali":"ban-Bali-ID","und-Bamu":"bax-Bamu-CM","und-Bass":"bsq-Bass-LR","und-Batk":"bbc-Batk-ID","und-BD":"bn-Beng-BD","und-BE":"nl-Latn-BE","und-Beng":"bn-Beng-BD","und-BF":"fr-Latn-BF","und-BG":"bg-Cyrl-BG","und-BH":"ar-Arab-BH","und-Bhks":"sa-Bhks-IN","und-BI":"rn-Latn-BI","und-BJ":"fr-Latn-BJ","und-BL":"fr-Latn-BL","und-BN":"ms-Latn-BN","und-BO":"es-Latn-BO","und-Bopo":"zh-Bopo-TW","und-BQ":"pap-Latn-BQ","und-BR":"pt-Latn-BR","und-Brah":"pka-Brah-IN","und-Brai":"fr-Brai-FR","und-BT":"dz-Tibt-BT","und-Bugi":"bug-Bugi-ID","und-Buhd":"bku-Buhd-PH","und-BV":"und-Latn-BV","und-BY":"be-Cyrl-BY","und-Cakm":"ccp-Cakm-BD","und-Cans":"cr-Cans-CA","und-Cari":"xcr-Cari-TR","und-CD":"sw-Latn-CD","und-CF":"fr-Latn-CF","und-CG":"fr-Latn-CG","und-CH":"de-Latn-CH","und-Cham":"cjm-Cham-VN","und-Cher":"chr-Cher-US","und-Chrs":"xco-Chrs-UZ","und-CI":"fr-Latn-CI","und-CL":"es-Latn-CL","und-CM":"fr-Latn-CM","und-CN":"zh-Hans-CN","und-CO":"es-Latn-CO","und-Copt":"cop-Copt-EG","und-CP":"und-Latn-CP","und-Cpmn":"und-Cpmn-CY","und-Cpmn-CY":"und-Cpmn-CY","und-Cprt":"grc-Cprt-CY","und-CR":"es-Latn-CR","und-CU":"es-Latn-CU","und-CV":"pt-Latn-CV","und-CW":"pap-Latn-CW","und-CY":"el-Grek-CY","und-Cyrl":"ru-Cyrl-RU","und-Cyrl-AL":"mk-Cyrl-AL","und-Cyrl-BA":"sr-Cyrl-BA","und-Cyrl-GE":"os-Cyrl-GE","und-Cyrl-GR":"mk-Cyrl-GR","und-Cyrl-MD":"uk-Cyrl-MD","und-Cyrl-RO":"bg-Cyrl-RO","und-Cyrl-SK":"uk-Cyrl-SK","und-Cyrl-TR":"kbd-Cyrl-TR","und-Cyrl-XK":"sr-Cyrl-XK","und-CZ":"cs-Latn-CZ","und-DE":"de-Latn-DE","und-Deva":"hi-Deva-IN","und-Deva-BT":"ne-Deva-BT","und-Deva-FJ":"hif-Deva-FJ","und-Deva-MU":"bho-Deva-MU","und-Deva-PK":"btv-Deva-PK","und-Diak":"dv-Diak-MV","und-DJ":"aa-Latn-DJ","und-DK":"da-Latn-DK","und-DO":"es-Latn-DO","und-Dogr":"doi-Dogr-IN","und-Dupl":"fr-Dupl-FR","und-DZ":"ar-Arab-DZ","und-EA":"es-Latn-EA","und-EC":"es-Latn-EC","und-EE":"et-Latn-EE","und-EG":"ar-Arab-EG","und-Egyp":"egy-Egyp-EG","und-EH":"ar-Arab-EH","und-Elba":"sq-Elba-AL","und-Elym":"arc-Elym-IR","und-ER":"ti-Ethi-ER","und-ES":"es-Latn-ES","und-ET":"am-Ethi-ET","und-Ethi":"am-Ethi-ET","und-EU":"en-Latn-IE","und-EZ":"de-Latn-EZ","und-FI":"fi-Latn-FI","und-FO":"fo-Latn-FO","und-FR":"fr-Latn-FR","und-GA":"fr-Latn-GA","und-GE":"ka-Geor-GE","und-Geor":"ka-Geor-GE","und-GF":"fr-Latn-GF","und-GH":"ak-Latn-GH","und-GL":"kl-Latn-GL","und-Glag":"cu-Glag-BG","und-GN":"fr-Latn-GN","und-Gong":"wsg-Gong-IN","und-Gonm":"esg-Gonm-IN","und-Goth":"got-Goth-UA","und-GP":"fr-Latn-GP","und-GQ":"es-Latn-GQ","und-GR":"el-Grek-GR","und-Gran":"sa-Gran-IN","und-Grek":"el-Grek-GR","und-Grek-TR":"bgx-Grek-TR","und-GS":"und-Latn-GS","und-GT":"es-Latn-GT","und-Gujr":"gu-Gujr-IN","und-Guru":"pa-Guru-IN","und-GW":"pt-Latn-GW","und-Hanb":"zh-Hanb-TW","und-Hang":"ko-Hang-KR","und-Hani":"zh-Hani-CN","und-Hano":"hnn-Hano-PH","und-Hans":"zh-Hans-CN","und-Hant":"zh-Hant-TW","und-Hebr":"he-Hebr-IL","und-Hebr-CA":"yi-Hebr-CA","und-Hebr-GB":"yi-Hebr-GB","und-Hebr-SE":"yi-Hebr-SE","und-Hebr-UA":"yi-Hebr-UA","und-Hebr-US":"yi-Hebr-US","und-Hira":"ja-Hira-JP","und-HK":"zh-Hant-HK","und-Hluw":"hlu-Hluw-TR","und-HM":"und-Latn-HM","und-Hmng":"hnj-Hmng-LA","und-Hmnp":"hnj-Hmnp-US","und-HN":"es-Latn-HN","und-HR":"hr-Latn-HR","und-HT":"ht-Latn-HT","und-HU":"hu-Latn-HU","und-Hung":"hu-Hung-HU","und-IC":"es-Latn-IC","und-ID":"id-Latn-ID","und-IL":"he-Hebr-IL","und-IN":"hi-Deva-IN","und-IQ":"ar-Arab-IQ","und-IR":"fa-Arab-IR","und-IS":"is-Latn-IS","und-IT":"it-Latn-IT","und-Ital":"ett-Ital-IT","und-Jamo":"ko-Jamo-KR","und-Java":"jv-Java-ID","und-JO":"ar-Arab-JO","und-JP":"ja-Jpan-JP","und-Jpan":"ja-Jpan-JP","und-Kali":"eky-Kali-MM","und-Kana":"ja-Kana-JP","und-KE":"sw-Latn-KE","und-KG":"ky-Cyrl-KG","und-KH":"km-Khmr-KH","und-Khar":"pra-Khar-PK","und-Khmr":"km-Khmr-KH","und-Khoj":"sd-Khoj-IN","und-Kits":"zkt-Kits-CN","und-KM":"ar-Arab-KM","und-Knda":"kn-Knda-IN","und-Kore":"ko-Kore-KR","und-KP":"ko-Kore-KP","und-KR":"ko-Kore-KR","und-Kthi":"bho-Kthi-IN","und-KW":"ar-Arab-KW","und-KZ":"ru-Cyrl-KZ","und-LA":"lo-Laoo-LA","und-Lana":"nod-Lana-TH","und-Laoo":"lo-Laoo-LA","und-Latn-AF":"tk-Latn-AF","und-Latn-AM":"ku-Latn-AM","und-Latn-CN":"za-Latn-CN","und-Latn-CY":"tr-Latn-CY","und-Latn-DZ":"fr-Latn-DZ","und-Latn-ET":"en-Latn-ET","und-Latn-GE":"ku-Latn-GE","und-Latn-IR":"tk-Latn-IR","und-Latn-KM":"fr-Latn-KM","und-Latn-MA":"fr-Latn-MA","und-Latn-MK":"sq-Latn-MK","und-Latn-MM":"kac-Latn-MM","und-Latn-MO":"pt-Latn-MO","und-Latn-MR":"fr-Latn-MR","und-Latn-RU":"krl-Latn-RU","und-Latn-SY":"fr-Latn-SY","und-Latn-TN":"fr-Latn-TN","und-Latn-TW":"trv-Latn-TW","und-Latn-UA":"pl-Latn-UA","und-LB":"ar-Arab-LB","und-Lepc":"lep-Lepc-IN","und-LI":"de-Latn-LI","und-Limb":"lif-Limb-IN","und-Lina":"lab-Lina-GR","und-Linb":"grc-Linb-GR","und-Lisu":"lis-Lisu-CN","und-LK":"si-Sinh-LK","und-LS":"st-Latn-LS","und-LT":"lt-Latn-LT","und-LU":"fr-Latn-LU","und-LV":"lv-Latn-LV","und-LY":"ar-Arab-LY","und-Lyci":"xlc-Lyci-TR","und-Lydi":"xld-Lydi-TR","und-MA":"ar-Arab-MA","und-Mahj":"hi-Mahj-IN","und-Maka":"mak-Maka-ID","und-Mand":"myz-Mand-IR","und-Mani":"xmn-Mani-CN","und-Marc":"bo-Marc-CN","und-MC":"fr-Latn-MC","und-MD":"ro-Latn-MD","und-ME":"sr-Latn-ME","und-Medf":"dmf-Medf-NG","und-Mend":"men-Mend-SL","und-Merc":"xmr-Merc-SD","und-Mero":"xmr-Mero-SD","und-MF":"fr-Latn-MF","und-MG":"mg-Latn-MG","und-MK":"mk-Cyrl-MK","und-ML":"bm-Latn-ML","und-Mlym":"ml-Mlym-IN","und-MM":"my-Mymr-MM","und-MN":"mn-Cyrl-MN","und-MO":"zh-Hant-MO","und-Modi":"mr-Modi-IN","und-Mong":"mn-Mong-CN","und-MQ":"fr-Latn-MQ","und-MR":"ar-Arab-MR","und-Mroo":"mro-Mroo-BD","und-MT":"mt-Latn-MT","und-Mtei":"mni-Mtei-IN","und-MU":"mfe-Latn-MU","und-Mult":"skr-Mult-PK","und-MV":"dv-Thaa-MV","und-MX":"es-Latn-MX","und-MY":"ms-Latn-MY","und-Mymr":"my-Mymr-MM","und-Mymr-IN":"kht-Mymr-IN","und-Mymr-TH":"mnw-Mymr-TH","und-MZ":"pt-Latn-MZ","und-NA":"af-Latn-NA","und-Nand":"sa-Nand-IN","und-Narb":"xna-Narb-SA","und-Nbat":"arc-Nbat-JO","und-NC":"fr-Latn-NC","und-NE":"ha-Latn-NE","und-Newa":"new-Newa-NP","und-NI":"es-Latn-NI","und-Nkoo":"man-Nkoo-GN","und-NL":"nl-Latn-NL","und-NO":"nb-Latn-NO","und-NP":"ne-Deva-NP","und-Nshu":"zhx-Nshu-CN","und-Ogam":"sga-Ogam-IE","und-Olck":"sat-Olck-IN","und-OM":"ar-Arab-OM","und-Orkh":"otk-Orkh-MN","und-Orya":"or-Orya-IN","und-Osge":"osa-Osge-US","und-Osma":"so-Osma-SO","und-Ougr":"oui-Ougr-143","und-PA":"es-Latn-PA","und-Palm":"arc-Palm-SY","und-Pauc":"ctd-Pauc-MM","und-PE":"es-Latn-PE","und-Perm":"kv-Perm-RU","und-PF":"fr-Latn-PF","und-PG":"tpi-Latn-PG","und-PH":"fil-Latn-PH","und-Phag":"lzh-Phag-CN","und-Phli":"pal-Phli-IR","und-Phlp":"pal-Phlp-CN","und-Phnx":"phn-Phnx-LB","und-PK":"ur-Arab-PK","und-PL":"pl-Latn-PL","und-Plrd":"hmd-Plrd-CN","und-PM":"fr-Latn-PM","und-PR":"es-Latn-PR","und-Prti":"xpr-Prti-IR","und-PS":"ar-Arab-PS","und-PT":"pt-Latn-PT","und-PW":"pau-Latn-PW","und-PY":"gn-Latn-PY","und-QA":"ar-Arab-QA","und-QO":"en-Latn-DG","und-RE":"fr-Latn-RE","und-Rjng":"rej-Rjng-ID","und-RO":"ro-Latn-RO","und-Rohg":"rhg-Rohg-MM","und-RS":"sr-Cyrl-RS","und-RU":"ru-Cyrl-RU","und-Runr":"non-Runr-SE","und-RW":"rw-Latn-RW","und-SA":"ar-Arab-SA","und-Samr":"smp-Samr-IL","und-Sarb":"xsa-Sarb-YE","und-Saur":"saz-Saur-IN","und-SC":"fr-Latn-SC","und-SD":"ar-Arab-SD","und-SE":"sv-Latn-SE","und-Sgnw":"ase-Sgnw-US","und-Shaw":"en-Shaw-GB","und-Shrd":"sa-Shrd-IN","und-SI":"sl-Latn-SI","und-Sidd":"sa-Sidd-IN","und-Sind":"sd-Sind-IN","und-Sinh":"si-Sinh-LK","und-SJ":"nb-Latn-SJ","und-SK":"sk-Latn-SK","und-SM":"it-Latn-SM","und-SN":"fr-Latn-SN","und-SO":"so-Latn-SO","und-Sogd":"sog-Sogd-UZ","und-Sogo":"sog-Sogo-UZ","und-Sora":"srb-Sora-IN","und-Soyo":"cmg-Soyo-MN","und-SR":"nl-Latn-SR","und-ST":"pt-Latn-ST","und-Sund":"su-Sund-ID","und-SV":"es-Latn-SV","und-SY":"ar-Arab-SY","und-Sylo":"syl-Sylo-BD","und-Syrc":"syr-Syrc-IQ","und-Tagb":"tbw-Tagb-PH","und-Takr":"doi-Takr-IN","und-Tale":"tdd-Tale-CN","und-Talu":"khb-Talu-CN","und-Taml":"ta-Taml-IN","und-Tang":"txg-Tang-CN","und-Tavt":"blt-Tavt-VN","und-TD":"fr-Latn-TD","und-Telu":"te-Telu-IN","und-TF":"fr-Latn-TF","und-Tfng":"zgh-Tfng-MA","und-TG":"fr-Latn-TG","und-Tglg":"fil-Tglg-PH","und-TH":"th-Thai-TH","und-Thaa":"dv-Thaa-MV","und-Thai":"th-Thai-TH","und-Thai-CN":"lcp-Thai-CN","und-Thai-KH":"kdt-Thai-KH","und-Thai-LA":"kdt-Thai-LA","und-Tibt":"bo-Tibt-CN","und-Tirh":"mai-Tirh-IN","und-TJ":"tg-Cyrl-TJ","und-TK":"tkl-Latn-TK","und-TL":"pt-Latn-TL","und-TM":"tk-Latn-TM","und-TN":"ar-Arab-TN","und-Tnsa":"nst-Tnsa-IN","und-TO":"to-Latn-TO","und-Toto":"txo-Toto-IN","und-TR":"tr-Latn-TR","und-TV":"tvl-Latn-TV","und-TW":"zh-Hant-TW","und-TZ":"sw-Latn-TZ","und-UA":"uk-Cyrl-UA","und-UG":"sw-Latn-UG","und-Ugar":"uga-Ugar-SY","und-UY":"es-Latn-UY","und-UZ":"uz-Latn-UZ","und-VA":"it-Latn-VA","und-Vaii":"vai-Vaii-LR","und-VE":"es-Latn-VE","und-Vith":"sq-Vith-AL","und-VN":"vi-Latn-VN","und-VU":"bi-Latn-VU","und-Wara":"hoc-Wara-IN","und-Wcho":"nnp-Wcho-IN","und-WF":"fr-Latn-WF","und-WS":"sm-Latn-WS","und-XK":"sq-Latn-XK","und-Xpeo":"peo-Xpeo-IR","und-Xsux":"akk-Xsux-IQ","und-YE":"ar-Arab-YE","und-Yezi":"ku-Yezi-GE","und-Yiii":"ii-Yiii-CN","und-YT":"fr-Latn-YT","und-Zanb":"cmg-Zanb-MN","und-ZW":"sn-Latn-ZW",unr:"unr-Beng-IN","unr-Deva":"unr-Deva-NP","unr-NP":"unr-Deva-NP",unx:"unx-Beng-IN",uok:"uok-Latn-ZZ",ur:"ur-Arab-PK",uri:"uri-Latn-ZZ",urt:"urt-Latn-ZZ",urw:"urw-Latn-ZZ",usa:"usa-Latn-ZZ",uth:"uth-Latn-ZZ",utr:"utr-Latn-ZZ",uvh:"uvh-Latn-ZZ",uvl:"uvl-Latn-ZZ",uz:"uz-Latn-UZ","uz-AF":"uz-Arab-AF","uz-Arab":"uz-Arab-AF","uz-CN":"uz-Cyrl-CN",vag:"vag-Latn-ZZ",vai:"vai-Vaii-LR",van:"van-Latn-ZZ",ve:"ve-Latn-ZA",vec:"vec-Latn-IT",vep:"vep-Latn-RU",vi:"vi-Latn-VN",vic:"vic-Latn-SX",viv:"viv-Latn-ZZ",vls:"vls-Latn-BE",vmf:"vmf-Latn-DE",vmw:"vmw-Latn-MZ",vo:"vo-Latn-001",vot:"vot-Latn-RU",vro:"vro-Latn-EE",vun:"vun-Latn-TZ",vut:"vut-Latn-ZZ",wa:"wa-Latn-BE",wae:"wae-Latn-CH",waj:"waj-Latn-ZZ",wal:"wal-Ethi-ET",wan:"wan-Latn-ZZ",war:"war-Latn-PH",wbp:"wbp-Latn-AU",wbq:"wbq-Telu-IN",wbr:"wbr-Deva-IN",wci:"wci-Latn-ZZ",wer:"wer-Latn-ZZ",wgi:"wgi-Latn-ZZ",whg:"whg-Latn-ZZ",wib:"wib-Latn-ZZ",wiu:"wiu-Latn-ZZ",wiv:"wiv-Latn-ZZ",wja:"wja-Latn-ZZ",wji:"wji-Latn-ZZ",wls:"wls-Latn-WF",wmo:"wmo-Latn-ZZ",wnc:"wnc-Latn-ZZ",wni:"wni-Arab-KM",wnu:"wnu-Latn-ZZ",wo:"wo-Latn-SN",wob:"wob-Latn-ZZ",wos:"wos-Latn-ZZ",wrs:"wrs-Latn-ZZ",wsg:"wsg-Gong-IN",wsk:"wsk-Latn-ZZ",wtm:"wtm-Deva-IN",wuu:"wuu-Hans-CN",wuv:"wuv-Latn-ZZ",wwa:"wwa-Latn-ZZ",xav:"xav-Latn-BR",xbi:"xbi-Latn-ZZ",xco:"xco-Chrs-UZ",xcr:"xcr-Cari-TR",xes:"xes-Latn-ZZ",xh:"xh-Latn-ZA",xla:"xla-Latn-ZZ",xlc:"xlc-Lyci-TR",xld:"xld-Lydi-TR",xmf:"xmf-Geor-GE",xmn:"xmn-Mani-CN",xmr:"xmr-Merc-SD",xna:"xna-Narb-SA",xnr:"xnr-Deva-IN",xog:"xog-Latn-UG",xon:"xon-Latn-ZZ",xpr:"xpr-Prti-IR",xrb:"xrb-Latn-ZZ",xsa:"xsa-Sarb-YE",xsi:"xsi-Latn-ZZ",xsm:"xsm-Latn-ZZ",xsr:"xsr-Deva-NP",xwe:"xwe-Latn-ZZ",yam:"yam-Latn-ZZ",yao:"yao-Latn-MZ",yap:"yap-Latn-FM",yas:"yas-Latn-ZZ",yat:"yat-Latn-ZZ",yav:"yav-Latn-CM",yay:"yay-Latn-ZZ",yaz:"yaz-Latn-ZZ",yba:"yba-Latn-ZZ",ybb:"ybb-Latn-CM",yby:"yby-Latn-ZZ",yer:"yer-Latn-ZZ",ygr:"ygr-Latn-ZZ",ygw:"ygw-Latn-ZZ",yi:"yi-Hebr-001",yko:"yko-Latn-ZZ",yle:"yle-Latn-ZZ",ylg:"ylg-Latn-ZZ",yll:"yll-Latn-ZZ",yml:"yml-Latn-ZZ",yo:"yo-Latn-NG",yon:"yon-Latn-ZZ",yrb:"yrb-Latn-ZZ",yre:"yre-Latn-ZZ",yrl:"yrl-Latn-BR",yss:"yss-Latn-ZZ",yua:"yua-Latn-MX",yue:"yue-Hant-HK","yue-CN":"yue-Hans-CN","yue-Hans":"yue-Hans-CN",yuj:"yuj-Latn-ZZ",yut:"yut-Latn-ZZ",yuw:"yuw-Latn-ZZ",za:"za-Latn-CN",zag:"zag-Latn-SD",zdj:"zdj-Arab-KM",zea:"zea-Latn-NL",zgh:"zgh-Tfng-MA",zh:"zh-Hans-CN","zh-AU":"zh-Hant-AU","zh-BN":"zh-Hant-BN","zh-Bopo":"zh-Bopo-TW","zh-GB":"zh-Hant-GB","zh-GF":"zh-Hant-GF","zh-Hanb":"zh-Hanb-TW","zh-Hant":"zh-Hant-TW","zh-HK":"zh-Hant-HK","zh-ID":"zh-Hant-ID","zh-MO":"zh-Hant-MO","zh-PA":"zh-Hant-PA","zh-PF":"zh-Hant-PF","zh-PH":"zh-Hant-PH","zh-SR":"zh-Hant-SR","zh-TH":"zh-Hant-TH","zh-TW":"zh-Hant-TW","zh-US":"zh-Hant-US","zh-VN":"zh-Hant-VN",zhx:"zhx-Nshu-CN",zia:"zia-Latn-ZZ",zkt:"zkt-Kits-CN",zlm:"zlm-Latn-TG",zmi:"zmi-Latn-MY",zne:"zne-Latn-ZZ",zu:"zu-Latn-ZA",zza:"zza-Latn-TR"}},713:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(711),i=n(759);"undefined"===typeof Intl&&("undefined"!==typeof window?Object.defineProperty(window,"Intl",{value:{}}):"undefined"!==typeof t&&Object.defineProperty(t,"Intl",{value:{}})),(0,i.shouldPolyfill)()&&Object.defineProperty(Intl,"getCanonicalLocales",{value:r.getCanonicalLocales,writable:!0,enumerable:!1,configurable:!0})}).call(this,n(103))},714:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(760);(0,n(765).shouldPolyfill)()&&Object.defineProperty(Intl,"PluralRules",{value:r.PluralRules,writable:!0,enumerable:!1,configurable:!0})},715:function(t,e){Intl.PluralRules&&"function"===typeof Intl.PluralRules.__addLocaleData&&Intl.PluralRules.__addLocaleData({data:{categories:{cardinal:["one","other"],ordinal:["one","two","few","other"]},fn:function(t,e){var n=String(t).split("."),r=!n[1],i=Number(n[0])==t,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return e?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==t&&r?"one":"other"}},locale:"en"})},716:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(717),i=n(770),o=n(681);(0,n(771).shouldPolyfill)()&&((0,o.defineProperty)(Intl,"NumberFormat",{value:r.NumberFormat}),(0,o.defineProperty)(Number.prototype,"toLocaleString",{value:function(t,e){return(0,i.toLocaleString)(this,t,e)}}))},717:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberFormat=void 0;var r=n(206),i=n(681),o=n(767),a=n(768),s=(0,r.__importDefault)(n(769)),u=["locale","numberingSystem","style","currency","currencyDisplay","currencySign","unit","unitDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping","notation","compactDisplay","signDisplay"];function c(t){return(0,i.FormatNumericToParts)(this,f(t),{getInternalSlots:s.default})}e.NumberFormat=function(t,n){if(!this||!(0,i.OrdinaryHasInstance)(e.NumberFormat,this))return new e.NumberFormat(t,n);(0,i.InitializeNumberFormat)(this,t,n,{getInternalSlots:s.default,localeData:e.NumberFormat.localeData,availableLocales:e.NumberFormat.availableLocales,getDefaultLocale:e.NumberFormat.getDefaultLocale,currencyDigitsData:o.currencyDigitsData,numberingSystemNames:a.numberingSystemNames});var r=(0,s.default)(this),u=r.dataLocale,c=e.NumberFormat.localeData[u];return(0,i.invariant)(void 0!==c,"Cannot load locale-dependent data for ".concat(u,".")),r.pl=new Intl.PluralRules(u,{minimumFractionDigits:r.minimumFractionDigits,maximumFractionDigits:r.maximumFractionDigits,minimumIntegerDigits:r.minimumIntegerDigits,minimumSignificantDigits:r.minimumSignificantDigits,maximumSignificantDigits:r.maximumSignificantDigits}),this};try{Object.defineProperty(c,"name",{value:"formatToParts",enumerable:!1,writable:!1,configurable:!0})}catch(p){}(0,i.defineProperty)(e.NumberFormat.prototype,"formatToParts",{value:c}),(0,i.defineProperty)(e.NumberFormat.prototype,"resolvedOptions",{value:function(){if("object"!==typeof this||!(0,i.OrdinaryHasInstance)(e.NumberFormat,this))throw TypeError("Method Intl.NumberFormat.prototype.resolvedOptions called on incompatible receiver");for(var t=(0,s.default)(this),n={},r=0,o=u;r<o.length;r++){var a=o[r],c=t[a];void 0!==c&&(n[a]=c)}return n}});var l={enumerable:!1,configurable:!0,get:function(){if("object"!==typeof this||!(0,i.OrdinaryHasInstance)(e.NumberFormat,this))throw TypeError("Intl.NumberFormat format property accessor called on incompatible receiver");var t=(0,s.default)(this),n=this,r=t.boundFormat;if(void 0===r){r=function(t){var e=f(t);return n.formatToParts(e).map((function(t){return t.value})).join("")};try{Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,writable:!1,value:""})}catch(p){}t.boundFormat=r}return r}};try{Object.defineProperty(l.get,"name",{configurable:!0,enumerable:!1,writable:!1,value:"get format"})}catch(p){}function f(t){return"bigint"===typeof t?t:(0,i.ToNumber)(t)}Object.defineProperty(e.NumberFormat.prototype,"format",l),(0,i.defineProperty)(e.NumberFormat,"supportedLocalesOf",{value:function(t,n){return(0,i.SupportedLocales)(e.NumberFormat.availableLocales,(0,i.CanonicalizeLocaleList)(t),n)}}),e.NumberFormat.__addLocaleData=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r],a=o.data,s=o.locale,u=new Intl.Locale(s).minimize().toString();e.NumberFormat.localeData[s]=e.NumberFormat.localeData[u]=a,e.NumberFormat.availableLocales.add(u),e.NumberFormat.availableLocales.add(s),e.NumberFormat.__defaultLocale||(e.NumberFormat.__defaultLocale=u)}},e.NumberFormat.__addUnitData=function(t,n){var r=e.NumberFormat.localeData[t];if(!r)throw new Error('Locale data for "'.concat(t,'" has not been loaded in NumberFormat. \nPlease __addLocaleData before adding additional unit data'));for(var i in n.simple)r.units.simple[i]=n.simple[i];for(var i in n.compound)r.units.compound[i]=n.compound[i]},e.NumberFormat.__defaultLocale="",e.NumberFormat.localeData={},e.NumberFormat.availableLocales=new Set,e.NumberFormat.getDefaultLocale=function(){return e.NumberFormat.__defaultLocale},e.NumberFormat.polyfilled=!0;try{"undefined"!==typeof Symbol&&Object.defineProperty(e.NumberFormat.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,writable:!1,value:"Intl.NumberFormat"}),Object.defineProperty(e.NumberFormat.prototype.constructor,"length",{configurable:!0,enumerable:!1,writable:!1,value:0}),Object.defineProperty(e.NumberFormat.supportedLocalesOf,"length",{configurable:!0,enumerable:!1,writable:!1,value:1}),Object.defineProperty(e.NumberFormat,"prototype",{configurable:!1,enumerable:!1,writable:!1,value:e.NumberFormat.prototype})}catch(p){}},718:function(t,e){Intl.NumberFormat&&"function"===typeof Intl.NumberFormat.__addLocaleData&&Intl.NumberFormat.__addLocaleData({data:{units:{simple:{degree:{long:{other:"{0} degrees",one:"{0} degree"},short:{other:"{0} deg"},narrow:{other:"{0}\xb0"},perUnit:{}},hectare:{long:{other:"{0} hectares",one:"{0} hectare"},short:{other:"{0} ha"},narrow:{other:"{0}ha"},perUnit:{}},acre:{long:{other:"{0} acres",one:"{0} acre"},short:{other:"{0} ac"},narrow:{other:"{0}ac"},perUnit:{}},percent:{long:{other:"{0} percent"},short:{other:"{0}%"},narrow:{other:"{0}%"},perUnit:{}},"liter-per-kilometer":{long:{other:"{0} liters per kilometer",one:"{0} liter per kilometer"},short:{other:"{0} L/km"},narrow:{other:"{0}L/km"},perUnit:{}},"mile-per-gallon":{long:{other:"{0} miles per gallon",one:"{0} mile per gallon"},short:{other:"{0} mpg"},narrow:{other:"{0}mpg"},perUnit:{}},petabyte:{long:{other:"{0} petabytes",one:"{0} petabyte"},short:{other:"{0} PB"},narrow:{other:"{0}PB"},perUnit:{}},terabyte:{long:{other:"{0} terabytes",one:"{0} terabyte"},short:{other:"{0} TB"},narrow:{other:"{0}TB"},perUnit:{}},terabit:{long:{other:"{0} terabits",one:"{0} terabit"},short:{other:"{0} Tb"},narrow:{other:"{0}Tb"},perUnit:{}},gigabyte:{long:{other:"{0} gigabytes",one:"{0} gigabyte"},short:{other:"{0} GB"},narrow:{other:"{0}GB"},perUnit:{}},gigabit:{long:{other:"{0} gigabits",one:"{0} gigabit"},short:{other:"{0} Gb"},narrow:{other:"{0}Gb"},perUnit:{}},megabyte:{long:{other:"{0} megabytes",one:"{0} megabyte"},short:{other:"{0} MB"},narrow:{other:"{0}MB"},perUnit:{}},megabit:{long:{other:"{0} megabits",one:"{0} megabit"},short:{other:"{0} Mb"},narrow:{other:"{0}Mb"},perUnit:{}},kilobyte:{long:{other:"{0} kilobytes",one:"{0} kilobyte"},short:{other:"{0} kB"},narrow:{other:"{0}kB"},perUnit:{}},kilobit:{long:{other:"{0} kilobits",one:"{0} kilobit"},short:{other:"{0} kb"},narrow:{other:"{0}kb"},perUnit:{}},byte:{long:{other:"{0} bytes",one:"{0} byte"},short:{other:"{0} byte"},narrow:{other:"{0}B"},perUnit:{}},bit:{long:{other:"{0} bits",one:"{0} bit"},short:{other:"{0} bit"},narrow:{other:"{0}bit"},perUnit:{}},year:{long:{other:"{0} years",one:"{0} year"},short:{other:"{0} yrs",one:"{0} yr"},narrow:{other:"{0}y"},perUnit:{long:"{0} per year",short:"{0}/y",narrow:"{0}/y"}},month:{long:{other:"{0} months",one:"{0} month"},short:{other:"{0} mths",one:"{0} mth"},narrow:{other:"{0}m"},perUnit:{long:"{0} per month",short:"{0}/m",narrow:"{0}/m"}},week:{long:{other:"{0} weeks",one:"{0} week"},short:{other:"{0} wks",one:"{0} wk"},narrow:{other:"{0}w"},perUnit:{long:"{0} per week",short:"{0}/w",narrow:"{0}/w"}},day:{long:{other:"{0} days",one:"{0} day"},short:{other:"{0} days",one:"{0} day"},narrow:{other:"{0}d"},perUnit:{long:"{0} per day",short:"{0}/d",narrow:"{0}/d"}},hour:{long:{other:"{0} hours",one:"{0} hour"},short:{other:"{0} hr"},narrow:{other:"{0}h"},perUnit:{long:"{0} per hour",short:"{0}/h",narrow:"{0}/h"}},minute:{long:{other:"{0} minutes",one:"{0} minute"},short:{other:"{0} min"},narrow:{other:"{0}m"},perUnit:{long:"{0} per minute",short:"{0}/min",narrow:"{0}/min"}},second:{long:{other:"{0} seconds",one:"{0} second"},short:{other:"{0} sec"},narrow:{other:"{0}s"},perUnit:{long:"{0} per second",short:"{0}/s",narrow:"{0}/s"}},millisecond:{long:{other:"{0} milliseconds",one:"{0} millisecond"},short:{other:"{0} ms"},narrow:{other:"{0}ms"},perUnit:{}},kilometer:{long:{other:"{0} kilometers",one:"{0} kilometer"},short:{other:"{0} km"},narrow:{other:"{0}km"},perUnit:{long:"{0} per kilometer",short:"{0}/km",narrow:"{0}/km"}},meter:{long:{other:"{0} meters",one:"{0} meter"},short:{other:"{0} m"},narrow:{other:"{0}m"},perUnit:{long:"{0} per meter",short:"{0}/m",narrow:"{0}/m"}},centimeter:{long:{other:"{0} centimeters",one:"{0} centimeter"},short:{other:"{0} cm"},narrow:{other:"{0}cm"},perUnit:{long:"{0} per centimeter",short:"{0}/cm",narrow:"{0}/cm"}},millimeter:{long:{other:"{0} millimeters",one:"{0} millimeter"},short:{other:"{0} mm"},narrow:{other:"{0}mm"},perUnit:{}},mile:{long:{other:"{0} miles",one:"{0} mile"},short:{other:"{0} mi"},narrow:{other:"{0}mi"},perUnit:{}},yard:{long:{other:"{0} yards",one:"{0} yard"},short:{other:"{0} yd"},narrow:{other:"{0}yd"},perUnit:{}},foot:{long:{other:"{0} feet",one:"{0} foot"},short:{other:"{0} ft"},narrow:{other:"{0}\u2032"},perUnit:{long:"{0} per foot",short:"{0}/ft",narrow:"{0}/ft"}},inch:{long:{other:"{0} inches",one:"{0} inch"},short:{other:"{0} in"},narrow:{other:"{0}\u2033"},perUnit:{long:"{0} per inch",short:"{0}/in",narrow:"{0}/in"}},"mile-scandinavian":{long:{other:"{0} miles-scandinavian",one:"{0} mile-scandinavian"},short:{other:"{0} smi"},narrow:{other:"{0}smi"},perUnit:{}},kilogram:{long:{other:"{0} kilograms",one:"{0} kilogram"},short:{other:"{0} kg"},narrow:{other:"{0}kg"},perUnit:{long:"{0} per kilogram",short:"{0}/kg",narrow:"{0}/kg"}},gram:{long:{other:"{0} grams",one:"{0} gram"},short:{other:"{0} g"},narrow:{other:"{0}g"},perUnit:{long:"{0} per gram",short:"{0}/g",narrow:"{0}/g"}},stone:{long:{other:"{0} stones",one:"{0} stone"},short:{other:"{0} st"},narrow:{other:"{0}st"},perUnit:{}},pound:{long:{other:"{0} pounds",one:"{0} pound"},short:{other:"{0} lb"},narrow:{other:"{0}#"},perUnit:{long:"{0} per pound",short:"{0}/lb",narrow:"{0}/lb"}},ounce:{long:{other:"{0} ounces",one:"{0} ounce"},short:{other:"{0} oz"},narrow:{other:"{0}oz"},perUnit:{long:"{0} per ounce",short:"{0}/oz",narrow:"{0}/oz"}},"kilometer-per-hour":{long:{other:"{0} kilometers per hour",one:"{0} kilometer per hour"},short:{other:"{0} km/h"},narrow:{other:"{0}km/h"},perUnit:{}},"meter-per-second":{long:{other:"{0} meters per second",one:"{0} meter per second"},short:{other:"{0} m/s"},narrow:{other:"{0}m/s"},perUnit:{}},"mile-per-hour":{long:{other:"{0} miles per hour",one:"{0} mile per hour"},short:{other:"{0} mph"},narrow:{other:"{0}mph"},perUnit:{}},celsius:{long:{other:"{0} degrees Celsius",one:"{0} degree Celsius"},short:{other:"{0}\xb0C"},narrow:{other:"{0}\xb0C"},perUnit:{}},fahrenheit:{long:{other:"{0} degrees Fahrenheit",one:"{0} degree Fahrenheit"},short:{other:"{0}\xb0F"},narrow:{other:"{0}\xb0"},perUnit:{}},liter:{long:{other:"{0} liters",one:"{0} liter"},short:{other:"{0} L"},narrow:{other:"{0}L"},perUnit:{long:"{0} per liter",short:"{0}/L",narrow:"{0}/L"}},milliliter:{long:{other:"{0} milliliters",one:"{0} milliliter"},short:{other:"{0} mL"},narrow:{other:"{0}mL"},perUnit:{}},gallon:{long:{other:"{0} gallons",one:"{0} gallon"},short:{other:"{0} gal"},narrow:{other:"{0}gal"},perUnit:{long:"{0} per gallon",short:"{0}/gal US",narrow:"{0}/gal"}},"fluid-ounce":{long:{other:"{0} fluid ounces",one:"{0} fluid ounce"},short:{other:"{0} fl oz"},narrow:{other:"{0}fl oz"},perUnit:{}}},compound:{per:{long:"{0} per {1}",short:"{0}/{1}",narrow:"{0}/{1}"}}},currencies:{ADP:{displayName:{other:"Andorran pesetas",one:"Andorran peseta"},symbol:"ADP",narrow:"ADP"},AED:{displayName:{other:"UAE dirhams",one:"UAE dirham"},symbol:"AED",narrow:"AED"},AFA:{displayName:{other:"Afghan afghanis (1927\u20132002)",one:"Afghan afghani (1927\u20132002)"},symbol:"AFA",narrow:"AFA"},AFN:{displayName:{other:"Afghan Afghanis",one:"Afghan Afghani"},symbol:"AFN",narrow:"\u060b"},ALK:{displayName:{other:"Albanian lek\xeb (1946\u20131965)",one:"Albanian lek (1946\u20131965)"},symbol:"ALK",narrow:"ALK"},ALL:{displayName:{other:"Albanian lek\xeb",one:"Albanian lek"},symbol:"ALL",narrow:"ALL"},AMD:{displayName:{other:"Armenian drams",one:"Armenian dram"},symbol:"AMD",narrow:"\u058f"},ANG:{displayName:{other:"Netherlands Antillean guilders",one:"Netherlands Antillean guilder"},symbol:"ANG",narrow:"ANG"},AOA:{displayName:{other:"Angolan kwanzas",one:"Angolan kwanza"},symbol:"AOA",narrow:"Kz"},AOK:{displayName:{other:"Angolan kwanzas (1977\u20131991)",one:"Angolan kwanza (1977\u20131991)"},symbol:"AOK",narrow:"AOK"},AON:{displayName:{other:"Angolan new kwanzas (1990\u20132000)",one:"Angolan new kwanza (1990\u20132000)"},symbol:"AON",narrow:"AON"},AOR:{displayName:{other:"Angolan readjusted kwanzas (1995\u20131999)",one:"Angolan readjusted kwanza (1995\u20131999)"},symbol:"AOR",narrow:"AOR"},ARA:{displayName:{other:"Argentine australs",one:"Argentine austral"},symbol:"ARA",narrow:"ARA"},ARL:{displayName:{other:"Argentine pesos ley (1970\u20131983)",one:"Argentine peso ley (1970\u20131983)"},symbol:"ARL",narrow:"ARL"},ARM:{displayName:{other:"Argentine pesos (1881\u20131970)",one:"Argentine peso (1881\u20131970)"},symbol:"ARM",narrow:"ARM"},ARP:{displayName:{other:"Argentine pesos (1983\u20131985)",one:"Argentine peso (1983\u20131985)"},symbol:"ARP",narrow:"ARP"},ARS:{displayName:{other:"Argentine pesos",one:"Argentine peso"},symbol:"ARS",narrow:"$"},ATS:{displayName:{other:"Austrian schillings",one:"Austrian schilling"},symbol:"ATS",narrow:"ATS"},AUD:{displayName:{other:"Australian dollars",one:"Australian dollar"},symbol:"A$",narrow:"$"},AWG:{displayName:{other:"Aruban florin"},symbol:"AWG",narrow:"AWG"},AZM:{displayName:{other:"Azerbaijani manats (1993\u20132006)",one:"Azerbaijani manat (1993\u20132006)"},symbol:"AZM",narrow:"AZM"},AZN:{displayName:{other:"Azerbaijani manats",one:"Azerbaijani manat"},symbol:"AZN",narrow:"\u20bc"},BAD:{displayName:{other:"Bosnia-Herzegovina dinars (1992\u20131994)",one:"Bosnia-Herzegovina dinar (1992\u20131994)"},symbol:"BAD",narrow:"BAD"},BAM:{displayName:{other:"Bosnia-Herzegovina convertible marks",one:"Bosnia-Herzegovina convertible mark"},symbol:"BAM",narrow:"KM"},BAN:{displayName:{other:"Bosnia-Herzegovina new dinars (1994\u20131997)",one:"Bosnia-Herzegovina new dinar (1994\u20131997)"},symbol:"BAN",narrow:"BAN"},BBD:{displayName:{other:"Barbadian dollars",one:"Barbadian dollar"},symbol:"BBD",narrow:"$"},BDT:{displayName:{other:"Bangladeshi takas",one:"Bangladeshi taka"},symbol:"BDT",narrow:"\u09f3"},BEC:{displayName:{other:"Belgian francs (convertible)",one:"Belgian franc (convertible)"},symbol:"BEC",narrow:"BEC"},BEF:{displayName:{other:"Belgian francs",one:"Belgian franc"},symbol:"BEF",narrow:"BEF"},BEL:{displayName:{other:"Belgian francs (financial)",one:"Belgian franc (financial)"},symbol:"BEL",narrow:"BEL"},BGL:{displayName:{other:"Bulgarian hard leva",one:"Bulgarian hard lev"},symbol:"BGL",narrow:"BGL"},BGM:{displayName:{other:"Bulgarian socialist leva",one:"Bulgarian socialist lev"},symbol:"BGM",narrow:"BGM"},BGN:{displayName:{other:"Bulgarian leva",one:"Bulgarian lev"},symbol:"BGN",narrow:"BGN"},BGO:{displayName:{other:"Bulgarian leva (1879\u20131952)",one:"Bulgarian lev (1879\u20131952)"},symbol:"BGO",narrow:"BGO"},BHD:{displayName:{other:"Bahraini dinars",one:"Bahraini dinar"},symbol:"BHD",narrow:"BHD"},BIF:{displayName:{other:"Burundian francs",one:"Burundian franc"},symbol:"BIF",narrow:"BIF"},BMD:{displayName:{other:"Bermudan dollars",one:"Bermudan dollar"},symbol:"BMD",narrow:"$"},BND:{displayName:{other:"Brunei dollars",one:"Brunei dollar"},symbol:"BND",narrow:"$"},BOB:{displayName:{other:"Bolivian bolivianos",one:"Bolivian boliviano"},symbol:"BOB",narrow:"Bs"},BOL:{displayName:{other:"Bolivian bolivianos (1863\u20131963)",one:"Bolivian boliviano (1863\u20131963)"},symbol:"BOL",narrow:"BOL"},BOP:{displayName:{other:"Bolivian pesos",one:"Bolivian peso"},symbol:"BOP",narrow:"BOP"},BOV:{displayName:{other:"Bolivian mvdols",one:"Bolivian mvdol"},symbol:"BOV",narrow:"BOV"},BRB:{displayName:{other:"Brazilian new cruzeiros (1967\u20131986)",one:"Brazilian new cruzeiro (1967\u20131986)"},symbol:"BRB",narrow:"BRB"},BRC:{displayName:{other:"Brazilian cruzados (1986\u20131989)",one:"Brazilian cruzado (1986\u20131989)"},symbol:"BRC",narrow:"BRC"},BRE:{displayName:{other:"Brazilian cruzeiros (1990\u20131993)",one:"Brazilian cruzeiro (1990\u20131993)"},symbol:"BRE",narrow:"BRE"},BRL:{displayName:{other:"Brazilian reals",one:"Brazilian real"},symbol:"R$",narrow:"R$"},BRN:{displayName:{other:"Brazilian new cruzados (1989\u20131990)",one:"Brazilian new cruzado (1989\u20131990)"},symbol:"BRN",narrow:"BRN"},BRR:{displayName:{other:"Brazilian cruzeiros (1993\u20131994)",one:"Brazilian cruzeiro (1993\u20131994)"},symbol:"BRR",narrow:"BRR"},BRZ:{displayName:{other:"Brazilian cruzeiros (1942\u20131967)",one:"Brazilian cruzeiro (1942\u20131967)"},symbol:"BRZ",narrow:"BRZ"},BSD:{displayName:{other:"Bahamian dollars",one:"Bahamian dollar"},symbol:"BSD",narrow:"$"},BTN:{displayName:{other:"Bhutanese ngultrums",one:"Bhutanese ngultrum"},symbol:"BTN",narrow:"BTN"},BUK:{displayName:{other:"Burmese kyats",one:"Burmese kyat"},symbol:"BUK",narrow:"BUK"},BWP:{displayName:{other:"Botswanan pulas",one:"Botswanan pula"},symbol:"BWP",narrow:"P"},BYB:{displayName:{other:"Belarusian rubles (1994\u20131999)",one:"Belarusian ruble (1994\u20131999)"},symbol:"BYB",narrow:"BYB"},BYN:{displayName:{other:"Belarusian rubles",one:"Belarusian ruble"},symbol:"BYN",narrow:"BYN"},BYR:{displayName:{other:"Belarusian rubles (2000\u20132016)",one:"Belarusian ruble (2000\u20132016)"},symbol:"BYR",narrow:"BYR"},BZD:{displayName:{other:"Belize dollars",one:"Belize dollar"},symbol:"BZD",narrow:"$"},CAD:{displayName:{other:"Canadian dollars",one:"Canadian dollar"},symbol:"CA$",narrow:"$"},CDF:{displayName:{other:"Congolese francs",one:"Congolese franc"},symbol:"CDF",narrow:"CDF"},CHE:{displayName:{other:"WIR euros",one:"WIR euro"},symbol:"CHE",narrow:"CHE"},CHF:{displayName:{other:"Swiss francs",one:"Swiss franc"},symbol:"CHF",narrow:"CHF"},CHW:{displayName:{other:"WIR francs",one:"WIR franc"},symbol:"CHW",narrow:"CHW"},CLE:{displayName:{other:"Chilean escudos",one:"Chilean escudo"},symbol:"CLE",narrow:"CLE"},CLF:{displayName:{other:"Chilean units of account (UF)",one:"Chilean unit of account (UF)"},symbol:"CLF",narrow:"CLF"},CLP:{displayName:{other:"Chilean pesos",one:"Chilean peso"},symbol:"CLP",narrow:"$"},CNH:{displayName:{other:"Chinese yuan (offshore)"},symbol:"CNH",narrow:"CNH"},CNX:{displayName:{other:"Chinese People\u2019s Bank dollars",one:"Chinese People\u2019s Bank dollar"},symbol:"CNX",narrow:"CNX"},CNY:{displayName:{other:"Chinese yuan"},symbol:"CN\xa5",narrow:"\xa5"},COP:{displayName:{other:"Colombian pesos",one:"Colombian peso"},symbol:"COP",narrow:"$"},COU:{displayName:{other:"Colombian real value units",one:"Colombian real value unit"},symbol:"COU",narrow:"COU"},CRC:{displayName:{other:"Costa Rican col\xf3ns",one:"Costa Rican col\xf3n"},symbol:"CRC",narrow:"\u20a1"},CSD:{displayName:{other:"Serbian dinars (2002\u20132006)",one:"Serbian dinar (2002\u20132006)"},symbol:"CSD",narrow:"CSD"},CSK:{displayName:{other:"Czechoslovak hard korunas",one:"Czechoslovak hard koruna"},symbol:"CSK",narrow:"CSK"},CUC:{displayName:{other:"Cuban convertible pesos",one:"Cuban convertible peso"},symbol:"CUC",narrow:"$"},CUP:{displayName:{other:"Cuban pesos",one:"Cuban peso"},symbol:"CUP",narrow:"$"},CVE:{displayName:{other:"Cape Verdean escudos",one:"Cape Verdean escudo"},symbol:"CVE",narrow:"CVE"},CYP:{displayName:{other:"Cypriot pounds",one:"Cypriot pound"},symbol:"CYP",narrow:"CYP"},CZK:{displayName:{other:"Czech korunas",one:"Czech koruna"},symbol:"CZK",narrow:"K\u010d"},DDM:{displayName:{other:"East German marks",one:"East German mark"},symbol:"DDM",narrow:"DDM"},DEM:{displayName:{other:"German marks",one:"German mark"},symbol:"DEM",narrow:"DEM"},DJF:{displayName:{other:"Djiboutian francs",one:"Djiboutian franc"},symbol:"DJF",narrow:"DJF"},DKK:{displayName:{other:"Danish kroner",one:"Danish krone"},symbol:"DKK",narrow:"kr"},DOP:{displayName:{other:"Dominican pesos",one:"Dominican peso"},symbol:"DOP",narrow:"$"},DZD:{displayName:{other:"Algerian dinars",one:"Algerian dinar"},symbol:"DZD",narrow:"DZD"},ECS:{displayName:{other:"Ecuadorian sucres",one:"Ecuadorian sucre"},symbol:"ECS",narrow:"ECS"},ECV:{displayName:{other:"Ecuadorian units of constant value",one:"Ecuadorian unit of constant value"},symbol:"ECV",narrow:"ECV"},EEK:{displayName:{other:"Estonian kroons",one:"Estonian kroon"},symbol:"EEK",narrow:"EEK"},EGP:{displayName:{other:"Egyptian pounds",one:"Egyptian pound"},symbol:"EGP",narrow:"E\xa3"},ERN:{displayName:{other:"Eritrean nakfas",one:"Eritrean nakfa"},symbol:"ERN",narrow:"ERN"},ESA:{displayName:{other:"Spanish pesetas (A account)",one:"Spanish peseta (A account)"},symbol:"ESA",narrow:"ESA"},ESB:{displayName:{other:"Spanish pesetas (convertible account)",one:"Spanish peseta (convertible account)"},symbol:"ESB",narrow:"ESB"},ESP:{displayName:{other:"Spanish pesetas",one:"Spanish peseta"},symbol:"ESP",narrow:"\u20a7"},ETB:{displayName:{other:"Ethiopian birrs",one:"Ethiopian birr"},symbol:"ETB",narrow:"ETB"},EUR:{displayName:{other:"euros",one:"euro"},symbol:"\u20ac",narrow:"\u20ac"},FIM:{displayName:{other:"Finnish markkas",one:"Finnish markka"},symbol:"FIM",narrow:"FIM"},FJD:{displayName:{other:"Fijian dollars",one:"Fijian dollar"},symbol:"FJD",narrow:"$"},FKP:{displayName:{other:"Falkland Islands pounds",one:"Falkland Islands pound"},symbol:"FKP",narrow:"\xa3"},FRF:{displayName:{other:"French francs",one:"French franc"},symbol:"FRF",narrow:"FRF"},GBP:{displayName:{other:"British pounds",one:"British pound"},symbol:"\xa3",narrow:"\xa3"},GEK:{displayName:{other:"Georgian kupon larits",one:"Georgian kupon larit"},symbol:"GEK",narrow:"GEK"},GEL:{displayName:{other:"Georgian laris",one:"Georgian lari"},symbol:"GEL",narrow:"\u20be"},GHC:{displayName:{other:"Ghanaian cedis (1979\u20132007)",one:"Ghanaian cedi (1979\u20132007)"},symbol:"GHC",narrow:"GHC"},GHS:{displayName:{other:"Ghanaian cedis",one:"Ghanaian cedi"},symbol:"GHS",narrow:"GH\u20b5"},GIP:{displayName:{other:"Gibraltar pounds",one:"Gibraltar pound"},symbol:"GIP",narrow:"\xa3"},GMD:{displayName:{other:"Gambian dalasis",one:"Gambian dalasi"},symbol:"GMD",narrow:"GMD"},GNF:{displayName:{other:"Guinean francs",one:"Guinean franc"},symbol:"GNF",narrow:"FG"},GNS:{displayName:{other:"Guinean sylis",one:"Guinean syli"},symbol:"GNS",narrow:"GNS"},GQE:{displayName:{other:"Equatorial Guinean ekwele"},symbol:"GQE",narrow:"GQE"},GRD:{displayName:{other:"Greek drachmas",one:"Greek drachma"},symbol:"GRD",narrow:"GRD"},GTQ:{displayName:{other:"Guatemalan quetzals",one:"Guatemalan quetzal"},symbol:"GTQ",narrow:"Q"},GWE:{displayName:{other:"Portuguese Guinea escudos",one:"Portuguese Guinea escudo"},symbol:"GWE",narrow:"GWE"},GWP:{displayName:{other:"Guinea-Bissau pesos",one:"Guinea-Bissau peso"},symbol:"GWP",narrow:"GWP"},GYD:{displayName:{other:"Guyanaese dollars",one:"Guyanaese dollar"},symbol:"GYD",narrow:"$"},HKD:{displayName:{other:"Hong Kong dollars",one:"Hong Kong dollar"},symbol:"HK$",narrow:"$"},HNL:{displayName:{other:"Honduran lempiras",one:"Honduran lempira"},symbol:"HNL",narrow:"L"},HRD:{displayName:{other:"Croatian dinars",one:"Croatian dinar"},symbol:"HRD",narrow:"HRD"},HRK:{displayName:{other:"Croatian kunas",one:"Croatian kuna"},symbol:"HRK",narrow:"kn"},HTG:{displayName:{other:"Haitian gourdes",one:"Haitian gourde"},symbol:"HTG",narrow:"HTG"},HUF:{displayName:{other:"Hungarian forints",one:"Hungarian forint"},symbol:"HUF",narrow:"Ft"},IDR:{displayName:{other:"Indonesian rupiahs",one:"Indonesian rupiah"},symbol:"IDR",narrow:"Rp"},IEP:{displayName:{other:"Irish pounds",one:"Irish pound"},symbol:"IEP",narrow:"IEP"},ILP:{displayName:{other:"Israeli pounds",one:"Israeli pound"},symbol:"ILP",narrow:"ILP"},ILR:{displayName:{other:"Israeli shekels (1980\u20131985)",one:"Israeli shekel (1980\u20131985)"},symbol:"ILR",narrow:"ILR"},ILS:{displayName:{other:"Israeli new shekels",one:"Israeli new shekel"},symbol:"\u20aa",narrow:"\u20aa"},INR:{displayName:{other:"Indian rupees",one:"Indian rupee"},symbol:"\u20b9",narrow:"\u20b9"},IQD:{displayName:{other:"Iraqi dinars",one:"Iraqi dinar"},symbol:"IQD",narrow:"IQD"},IRR:{displayName:{other:"Iranian rials",one:"Iranian rial"},symbol:"IRR",narrow:"IRR"},ISJ:{displayName:{other:"Icelandic kr\xf3nur (1918\u20131981)",one:"Icelandic kr\xf3na (1918\u20131981)"},symbol:"ISJ",narrow:"ISJ"},ISK:{displayName:{other:"Icelandic kr\xf3nur",one:"Icelandic kr\xf3na"},symbol:"ISK",narrow:"kr"},ITL:{displayName:{other:"Italian liras",one:"Italian lira"},symbol:"ITL",narrow:"ITL"},JMD:{displayName:{other:"Jamaican dollars",one:"Jamaican dollar"},symbol:"JMD",narrow:"$"},JOD:{displayName:{other:"Jordanian dinars",one:"Jordanian dinar"},symbol:"JOD",narrow:"JOD"},JPY:{displayName:{other:"Japanese yen"},symbol:"\xa5",narrow:"\xa5"},KES:{displayName:{other:"Kenyan shillings",one:"Kenyan shilling"},symbol:"KES",narrow:"KES"},KGS:{displayName:{other:"Kyrgystani soms",one:"Kyrgystani som"},symbol:"KGS",narrow:"KGS"},KHR:{displayName:{other:"Cambodian riels",one:"Cambodian riel"},symbol:"KHR",narrow:"\u17db"},KMF:{displayName:{other:"Comorian francs",one:"Comorian franc"},symbol:"KMF",narrow:"CF"},KPW:{displayName:{other:"North Korean won"},symbol:"KPW",narrow:"\u20a9"},KRH:{displayName:{other:"South Korean hwan (1953\u20131962)"},symbol:"KRH",narrow:"KRH"},KRO:{displayName:{other:"South Korean won (1945\u20131953)"},symbol:"KRO",narrow:"KRO"},KRW:{displayName:{other:"South Korean won"},symbol:"\u20a9",narrow:"\u20a9"},KWD:{displayName:{other:"Kuwaiti dinars",one:"Kuwaiti dinar"},symbol:"KWD",narrow:"KWD"},KYD:{displayName:{other:"Cayman Islands dollars",one:"Cayman Islands dollar"},symbol:"KYD",narrow:"$"},KZT:{displayName:{other:"Kazakhstani tenges",one:"Kazakhstani tenge"},symbol:"KZT",narrow:"\u20b8"},LAK:{displayName:{other:"Laotian kips",one:"Laotian kip"},symbol:"LAK",narrow:"\u20ad"},LBP:{displayName:{other:"Lebanese pounds",one:"Lebanese pound"},symbol:"LBP",narrow:"L\xa3"},LKR:{displayName:{other:"Sri Lankan rupees",one:"Sri Lankan rupee"},symbol:"LKR",narrow:"Rs"},LRD:{displayName:{other:"Liberian dollars",one:"Liberian dollar"},symbol:"LRD",narrow:"$"},LSL:{displayName:{other:"Lesotho lotis",one:"Lesotho loti"},symbol:"LSL",narrow:"LSL"},LTL:{displayName:{other:"Lithuanian litai",one:"Lithuanian litas"},symbol:"LTL",narrow:"Lt"},LTT:{displayName:{other:"Lithuanian talonases",one:"Lithuanian talonas"},symbol:"LTT",narrow:"LTT"},LUC:{displayName:{other:"Luxembourgian convertible francs",one:"Luxembourgian convertible franc"},symbol:"LUC",narrow:"LUC"},LUF:{displayName:{other:"Luxembourgian francs",one:"Luxembourgian franc"},symbol:"LUF",narrow:"LUF"},LUL:{displayName:{other:"Luxembourg financial francs",one:"Luxembourg financial franc"},symbol:"LUL",narrow:"LUL"},LVL:{displayName:{other:"Latvian lati",one:"Latvian lats"},symbol:"LVL",narrow:"Ls"},LVR:{displayName:{other:"Latvian rubles",one:"Latvian ruble"},symbol:"LVR",narrow:"LVR"},LYD:{displayName:{other:"Libyan dinars",one:"Libyan dinar"},symbol:"LYD",narrow:"LYD"},MAD:{displayName:{other:"Moroccan dirhams",one:"Moroccan dirham"},symbol:"MAD",narrow:"MAD"},MAF:{displayName:{other:"Moroccan francs",one:"Moroccan franc"},symbol:"MAF",narrow:"MAF"},MCF:{displayName:{other:"Monegasque francs",one:"Monegasque franc"},symbol:"MCF",narrow:"MCF"},MDC:{displayName:{other:"Moldovan cupon"},symbol:"MDC",narrow:"MDC"},MDL:{displayName:{other:"Moldovan lei",one:"Moldovan leu"},symbol:"MDL",narrow:"MDL"},MGA:{displayName:{other:"Malagasy ariaries",one:"Malagasy ariary"},symbol:"MGA",narrow:"Ar"},MGF:{displayName:{other:"Malagasy francs",one:"Malagasy franc"},symbol:"MGF",narrow:"MGF"},MKD:{displayName:{other:"Macedonian denari",one:"Macedonian denar"},symbol:"MKD",narrow:"MKD"},MKN:{displayName:{other:"Macedonian denari (1992\u20131993)",one:"Macedonian denar (1992\u20131993)"},symbol:"MKN",narrow:"MKN"},MLF:{displayName:{other:"Malian francs",one:"Malian franc"},symbol:"MLF",narrow:"MLF"},MMK:{displayName:{other:"Myanmar kyats",one:"Myanmar kyat"},symbol:"MMK",narrow:"K"},MNT:{displayName:{other:"Mongolian tugriks",one:"Mongolian tugrik"},symbol:"MNT",narrow:"\u20ae"},MOP:{displayName:{other:"Macanese patacas",one:"Macanese pataca"},symbol:"MOP",narrow:"MOP"},MRO:{displayName:{other:"Mauritanian ouguiyas (1973\u20132017)",one:"Mauritanian ouguiya (1973\u20132017)"},symbol:"MRO",narrow:"MRO"},MRU:{displayName:{other:"Mauritanian ouguiyas",one:"Mauritanian ouguiya"},symbol:"MRU",narrow:"MRU"},MTL:{displayName:{other:"Maltese lira"},symbol:"MTL",narrow:"MTL"},MTP:{displayName:{other:"Maltese pounds",one:"Maltese pound"},symbol:"MTP",narrow:"MTP"},MUR:{displayName:{other:"Mauritian rupees",one:"Mauritian rupee"},symbol:"MUR",narrow:"Rs"},MVP:{displayName:{other:"Maldivian rupees (1947\u20131981)",one:"Maldivian rupee (1947\u20131981)"},symbol:"MVP",narrow:"MVP"},MVR:{displayName:{other:"Maldivian rufiyaas",one:"Maldivian rufiyaa"},symbol:"MVR",narrow:"MVR"},MWK:{displayName:{other:"Malawian kwachas",one:"Malawian kwacha"},symbol:"MWK",narrow:"MWK"},MXN:{displayName:{other:"Mexican pesos",one:"Mexican peso"},symbol:"MX$",narrow:"$"},MXP:{displayName:{other:"Mexican silver pesos (1861\u20131992)",one:"Mexican silver peso (1861\u20131992)"},symbol:"MXP",narrow:"MXP"},MXV:{displayName:{other:"Mexican investment units",one:"Mexican investment unit"},symbol:"MXV",narrow:"MXV"},MYR:{displayName:{other:"Malaysian ringgits",one:"Malaysian ringgit"},symbol:"MYR",narrow:"RM"},MZE:{displayName:{other:"Mozambican escudos",one:"Mozambican escudo"},symbol:"MZE",narrow:"MZE"},MZM:{displayName:{other:"Mozambican meticals (1980\u20132006)",one:"Mozambican metical (1980\u20132006)"},symbol:"MZM",narrow:"MZM"},MZN:{displayName:{other:"Mozambican meticals",one:"Mozambican metical"},symbol:"MZN",narrow:"MZN"},NAD:{displayName:{other:"Namibian dollars",one:"Namibian dollar"},symbol:"NAD",narrow:"$"},NGN:{displayName:{other:"Nigerian nairas",one:"Nigerian naira"},symbol:"NGN",narrow:"\u20a6"},NIC:{displayName:{other:"Nicaraguan c\xf3rdobas (1988\u20131991)",one:"Nicaraguan c\xf3rdoba (1988\u20131991)"},symbol:"NIC",narrow:"NIC"},NIO:{displayName:{other:"Nicaraguan c\xf3rdobas",one:"Nicaraguan c\xf3rdoba"},symbol:"NIO",narrow:"C$"},NLG:{displayName:{other:"Dutch guilders",one:"Dutch guilder"},symbol:"NLG",narrow:"NLG"},NOK:{displayName:{other:"Norwegian kroner",one:"Norwegian krone"},symbol:"NOK",narrow:"kr"},NPR:{displayName:{other:"Nepalese rupees",one:"Nepalese rupee"},symbol:"NPR",narrow:"Rs"},NZD:{displayName:{other:"New Zealand dollars",one:"New Zealand dollar"},symbol:"NZ$",narrow:"$"},OMR:{displayName:{other:"Omani rials",one:"Omani rial"},symbol:"OMR",narrow:"OMR"},PAB:{displayName:{other:"Panamanian balboas",one:"Panamanian balboa"},symbol:"PAB",narrow:"PAB"},PEI:{displayName:{other:"Peruvian intis",one:"Peruvian inti"},symbol:"PEI",narrow:"PEI"},PEN:{displayName:{other:"Peruvian soles",one:"Peruvian sol"},symbol:"PEN",narrow:"PEN"},PES:{displayName:{other:"Peruvian soles (1863\u20131965)",one:"Peruvian sol (1863\u20131965)"},symbol:"PES",narrow:"PES"},PGK:{displayName:{other:"Papua New Guinean kina"},symbol:"PGK",narrow:"PGK"},PHP:{displayName:{other:"Philippine pisos",one:"Philippine piso"},symbol:"\u20b1",narrow:"\u20b1"},PKR:{displayName:{other:"Pakistani rupees",one:"Pakistani rupee"},symbol:"PKR",narrow:"Rs"},PLN:{displayName:{other:"Polish zlotys",one:"Polish zloty"},symbol:"PLN",narrow:"z\u0142"},PLZ:{displayName:{other:"Polish zlotys (PLZ)",one:"Polish zloty (PLZ)"},symbol:"PLZ",narrow:"PLZ"},PTE:{displayName:{other:"Portuguese escudos",one:"Portuguese escudo"},symbol:"PTE",narrow:"PTE"},PYG:{displayName:{other:"Paraguayan guaranis",one:"Paraguayan guarani"},symbol:"PYG",narrow:"\u20b2"},QAR:{displayName:{other:"Qatari rials",one:"Qatari rial"},symbol:"QAR",narrow:"QAR"},RHD:{displayName:{other:"Rhodesian dollars",one:"Rhodesian dollar"},symbol:"RHD",narrow:"RHD"},ROL:{displayName:{other:"Romanian Lei (1952\u20132006)",one:"Romanian leu (1952\u20132006)"},symbol:"ROL",narrow:"ROL"},RON:{displayName:{other:"Romanian lei",one:"Romanian leu"},symbol:"RON",narrow:"lei"},RSD:{displayName:{other:"Serbian dinars",one:"Serbian dinar"},symbol:"RSD",narrow:"RSD"},RUB:{displayName:{other:"Russian rubles",one:"Russian ruble"},symbol:"RUB",narrow:"\u20bd"},RUR:{displayName:{other:"Russian rubles (1991\u20131998)",one:"Russian ruble (1991\u20131998)"},symbol:"RUR",narrow:"RUR"},RWF:{displayName:{other:"Rwandan francs",one:"Rwandan franc"},symbol:"RWF",narrow:"RF"},SAR:{displayName:{other:"Saudi riyals",one:"Saudi riyal"},symbol:"SAR",narrow:"SAR"},SBD:{displayName:{other:"Solomon Islands dollars",one:"Solomon Islands dollar"},symbol:"SBD",narrow:"$"},SCR:{displayName:{other:"Seychellois rupees",one:"Seychellois rupee"},symbol:"SCR",narrow:"SCR"},SDD:{displayName:{other:"Sudanese dinars (1992\u20132007)",one:"Sudanese dinar (1992\u20132007)"},symbol:"SDD",narrow:"SDD"},SDG:{displayName:{other:"Sudanese pounds",one:"Sudanese pound"},symbol:"SDG",narrow:"SDG"},SDP:{displayName:{other:"Sudanese pounds (1957\u20131998)",one:"Sudanese pound (1957\u20131998)"},symbol:"SDP",narrow:"SDP"},SEK:{displayName:{other:"Swedish kronor",one:"Swedish krona"},symbol:"SEK",narrow:"kr"},SGD:{displayName:{other:"Singapore dollars",one:"Singapore dollar"},symbol:"SGD",narrow:"$"},SHP:{displayName:{other:"St. Helena pounds",one:"St. Helena pound"},symbol:"SHP",narrow:"\xa3"},SIT:{displayName:{other:"Slovenian tolars",one:"Slovenian tolar"},symbol:"SIT",narrow:"SIT"},SKK:{displayName:{other:"Slovak korunas",one:"Slovak koruna"},symbol:"SKK",narrow:"SKK"},SLL:{displayName:{other:"Sierra Leonean leones",one:"Sierra Leonean leone"},symbol:"SLL",narrow:"SLL"},SOS:{displayName:{other:"Somali shillings",one:"Somali shilling"},symbol:"SOS",narrow:"SOS"},SRD:{displayName:{other:"Surinamese dollars",one:"Surinamese dollar"},symbol:"SRD",narrow:"$"},SRG:{displayName:{other:"Surinamese guilders",one:"Surinamese guilder"},symbol:"SRG",narrow:"SRG"},SSP:{displayName:{other:"South Sudanese pounds",one:"South Sudanese pound"},symbol:"SSP",narrow:"\xa3"},STD:{displayName:{other:"S\xe3o Tom\xe9 & Pr\xedncipe dobras (1977\u20132017)",one:"S\xe3o Tom\xe9 & Pr\xedncipe dobra (1977\u20132017)"},symbol:"STD",narrow:"STD"},STN:{displayName:{other:"S\xe3o Tom\xe9 & Pr\xedncipe dobras",one:"S\xe3o Tom\xe9 & Pr\xedncipe dobra"},symbol:"STN",narrow:"Db"},SUR:{displayName:{other:"Soviet roubles",one:"Soviet rouble"},symbol:"SUR",narrow:"SUR"},SVC:{displayName:{other:"Salvadoran colones",one:"Salvadoran col\xf3n"},symbol:"SVC",narrow:"SVC"},SYP:{displayName:{other:"Syrian pounds",one:"Syrian pound"},symbol:"SYP",narrow:"\xa3"},SZL:{displayName:{other:"Swazi emalangeni",one:"Swazi lilangeni"},symbol:"SZL",narrow:"SZL"},THB:{displayName:{other:"Thai baht"},symbol:"THB",narrow:"\u0e3f"},TJR:{displayName:{other:"Tajikistani rubles",one:"Tajikistani ruble"},symbol:"TJR",narrow:"TJR"},TJS:{displayName:{other:"Tajikistani somonis",one:"Tajikistani somoni"},symbol:"TJS",narrow:"TJS"},TMM:{displayName:{other:"Turkmenistani manat (1993\u20132009)"},symbol:"TMM",narrow:"TMM"},TMT:{displayName:{other:"Turkmenistani manat"},symbol:"TMT",narrow:"TMT"},TND:{displayName:{other:"Tunisian dinars",one:"Tunisian dinar"},symbol:"TND",narrow:"TND"},TOP:{displayName:{other:"Tongan pa\u02bbanga"},symbol:"TOP",narrow:"T$"},TPE:{displayName:{other:"Timorese escudos",one:"Timorese escudo"},symbol:"TPE",narrow:"TPE"},TRL:{displayName:{other:"Turkish Lira (1922\u20132005)",one:"Turkish lira (1922\u20132005)"},symbol:"TRL",narrow:"TRL"},TRY:{displayName:{other:"Turkish Lira",one:"Turkish lira"},symbol:"TRY",narrow:"\u20ba"},TTD:{displayName:{other:"Trinidad & Tobago dollars",one:"Trinidad & Tobago dollar"},symbol:"TTD",narrow:"$"},TWD:{displayName:{other:"New Taiwan dollars",one:"New Taiwan dollar"},symbol:"NT$",narrow:"$"},TZS:{displayName:{other:"Tanzanian shillings",one:"Tanzanian shilling"},symbol:"TZS",narrow:"TZS"},UAH:{displayName:{other:"Ukrainian hryvnias",one:"Ukrainian hryvnia"},symbol:"UAH",narrow:"\u20b4"},UAK:{displayName:{other:"Ukrainian karbovantsiv",one:"Ukrainian karbovanets"},symbol:"UAK",narrow:"UAK"},UGS:{displayName:{other:"Ugandan shillings (1966\u20131987)",one:"Ugandan shilling (1966\u20131987)"},symbol:"UGS",narrow:"UGS"},UGX:{displayName:{other:"Ugandan shillings",one:"Ugandan shilling"},symbol:"UGX",narrow:"UGX"},USD:{displayName:{other:"US dollars",one:"US dollar"},symbol:"$",narrow:"$"},USN:{displayName:{other:"US dollars (next day)",one:"US dollar (next day)"},symbol:"USN",narrow:"USN"},USS:{displayName:{other:"US dollars (same day)",one:"US dollar (same day)"},symbol:"USS",narrow:"USS"},UYI:{displayName:{other:"Uruguayan pesos (indexed units)",one:"Uruguayan peso (indexed units)"},symbol:"UYI",narrow:"UYI"},UYP:{displayName:{other:"Uruguayan pesos (1975\u20131993)",one:"Uruguayan peso (1975\u20131993)"},symbol:"UYP",narrow:"UYP"},UYU:{displayName:{other:"Uruguayan pesos",one:"Uruguayan peso"},symbol:"UYU",narrow:"$"},UYW:{displayName:{other:"Uruguayan nominal wage index units",one:"Uruguayan nominal wage index unit"},symbol:"UYW",narrow:"UYW"},UZS:{displayName:{other:"Uzbekistani som"},symbol:"UZS",narrow:"UZS"},VEB:{displayName:{other:"Venezuelan bol\xedvars (1871\u20132008)",one:"Venezuelan bol\xedvar (1871\u20132008)"},symbol:"VEB",narrow:"VEB"},VEF:{displayName:{other:"Venezuelan bol\xedvars (2008\u20132018)",one:"Venezuelan bol\xedvar (2008\u20132018)"},symbol:"VEF",narrow:"Bs"},VES:{displayName:{other:"Venezuelan bol\xedvars",one:"Venezuelan bol\xedvar"},symbol:"VES",narrow:"VES"},VND:{displayName:{other:"Vietnamese dong"},symbol:"\u20ab",narrow:"\u20ab"},VNN:{displayName:{other:"Vietnamese dong (1978\u20131985)"},symbol:"VNN",narrow:"VNN"},VUV:{displayName:{other:"Vanuatu vatus",one:"Vanuatu vatu"},symbol:"VUV",narrow:"VUV"},WST:{displayName:{other:"Samoan tala"},symbol:"WST",narrow:"WST"},XAF:{displayName:{other:"Central African CFA francs",one:"Central African CFA franc"},symbol:"FCFA",narrow:"FCFA"},XAG:{displayName:{other:"troy ounces of silver",one:"troy ounce of silver"},symbol:"XAG",narrow:"XAG"},XAU:{displayName:{other:"troy ounces of gold",one:"troy ounce of gold"},symbol:"XAU",narrow:"XAU"},XBA:{displayName:{other:"European composite units",one:"European composite unit"},symbol:"XBA",narrow:"XBA"},XBB:{displayName:{other:"European monetary units",one:"European monetary unit"},symbol:"XBB",narrow:"XBB"},XBC:{displayName:{other:"European units of account (XBC)",one:"European unit of account (XBC)"},symbol:"XBC",narrow:"XBC"},XBD:{displayName:{other:"European units of account (XBD)",one:"European unit of account (XBD)"},symbol:"XBD",narrow:"XBD"},XCD:{displayName:{other:"East Caribbean dollars",one:"East Caribbean dollar"},symbol:"EC$",narrow:"$"},XDR:{displayName:{other:"special drawing rights"},symbol:"XDR",narrow:"XDR"},XEU:{displayName:{other:"European currency units",one:"European currency unit"},symbol:"XEU",narrow:"XEU"},XFO:{displayName:{other:"French gold francs",one:"French gold franc"},symbol:"XFO",narrow:"XFO"},XFU:{displayName:{other:"French UIC-francs",one:"French UIC-franc"},symbol:"XFU",narrow:"XFU"},XOF:{displayName:{other:"West African CFA francs",one:"West African CFA franc"},symbol:"F\u202fCFA",narrow:"F\u202fCFA"},XPD:{displayName:{other:"troy ounces of palladium",one:"troy ounce of palladium"},symbol:"XPD",narrow:"XPD"},XPF:{displayName:{other:"CFP francs",one:"CFP franc"},symbol:"CFPF",narrow:"CFPF"},XPT:{displayName:{other:"troy ounces of platinum",one:"troy ounce of platinum"},symbol:"XPT",narrow:"XPT"},XRE:{displayName:{other:"RINET Funds units",one:"RINET Funds unit"},symbol:"XRE",narrow:"XRE"},XSU:{displayName:{other:"Sucres",one:"Sucre"},symbol:"XSU",narrow:"XSU"},XTS:{displayName:{other:"Testing Currency units",one:"Testing Currency unit"},symbol:"XTS",narrow:"XTS"},XUA:{displayName:{other:"ADB units of account",one:"ADB unit of account"},symbol:"XUA",narrow:"XUA"},XXX:{displayName:{other:"(unknown currency)",one:"(unknown unit of currency)"},symbol:"\xa4",narrow:"\xa4"},YDD:{displayName:{other:"Yemeni dinars",one:"Yemeni dinar"},symbol:"YDD",narrow:"YDD"},YER:{displayName:{other:"Yemeni rials",one:"Yemeni rial"},symbol:"YER",narrow:"YER"},YUD:{displayName:{other:"Yugoslavian hard dinars (1966\u20131990)",one:"Yugoslavian hard dinar (1966\u20131990)"},symbol:"YUD",narrow:"YUD"},YUM:{displayName:{other:"Yugoslavian new dinars (1994\u20132002)",one:"Yugoslavian new dinar (1994\u20132002)"},symbol:"YUM",narrow:"YUM"},YUN:{displayName:{other:"Yugoslavian convertible dinars (1990\u20131992)",one:"Yugoslavian convertible dinar (1990\u20131992)"},symbol:"YUN",narrow:"YUN"},YUR:{displayName:{other:"Yugoslavian reformed dinars (1992\u20131993)",one:"Yugoslavian reformed dinar (1992\u20131993)"},symbol:"YUR",narrow:"YUR"},ZAL:{displayName:{other:"South African rands (financial)",one:"South African rand (financial)"},symbol:"ZAL",narrow:"ZAL"},ZAR:{displayName:{other:"South African rand"},symbol:"ZAR",narrow:"R"},ZMK:{displayName:{other:"Zambian kwachas (1968\u20132012)",one:"Zambian kwacha (1968\u20132012)"},symbol:"ZMK",narrow:"ZMK"},ZMW:{displayName:{other:"Zambian kwachas",one:"Zambian kwacha"},symbol:"ZMW",narrow:"ZK"},ZRN:{displayName:{other:"Zairean new zaires (1993\u20131998)",one:"Zairean new zaire (1993\u20131998)"},symbol:"ZRN",narrow:"ZRN"},ZRZ:{displayName:{other:"Zairean zaires (1971\u20131993)",one:"Zairean zaire (1971\u20131993)"},symbol:"ZRZ",narrow:"ZRZ"},ZWD:{displayName:{other:"Zimbabwean dollars (1980\u20132008)",one:"Zimbabwean dollar (1980\u20132008)"},symbol:"ZWD",narrow:"ZWD"},ZWL:{displayName:{other:"Zimbabwean dollars (2009)",one:"Zimbabwean dollar (2009)"},symbol:"ZWL",narrow:"ZWL"},ZWR:{displayName:{other:"Zimbabwean dollars (2008)",one:"Zimbabwean dollar (2008)"},symbol:"ZWR",narrow:"ZWR"}},numbers:{nu:["latn"],symbols:{latn:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",approximatelySign:"~",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"}},percent:{latn:"#,##0%"},decimal:{latn:{standard:"#,##0.###",long:{1e3:{other:"0 thousand"},1e4:{other:"00 thousand"},1e5:{other:"000 thousand"},1e6:{other:"0 million"},1e7:{other:"00 million"},1e8:{other:"000 million"},1e9:{other:"0 billion"},1e10:{other:"00 billion"},1e11:{other:"000 billion"},1e12:{other:"0 trillion"},1e13:{other:"00 trillion"},1e14:{other:"000 trillion"}},short:{1e3:{other:"0K"},1e4:{other:"00K"},1e5:{other:"000K"},1e6:{other:"0M"},1e7:{other:"00M"},1e8:{other:"000M"},1e9:{other:"0B"},1e10:{other:"00B"},1e11:{other:"000B"},1e12:{other:"0T"},1e13:{other:"00T"},1e14:{other:"000T"}}}},currency:{latn:{currencySpacing:{beforeInsertBetween:"\xa0",afterInsertBetween:"\xa0"},standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)",unitPattern:"{0} {1}",short:{1e3:{other:"\xa40K"},1e4:{other:"\xa400K"},1e5:{other:"\xa4000K"},1e6:{other:"\xa40M"},1e7:{other:"\xa400M"},1e8:{other:"\xa4000M"},1e9:{other:"\xa40B"},1e10:{other:"\xa400B"},1e11:{other:"\xa4000B"},1e12:{other:"\xa40T"},1e13:{other:"\xa400T"},1e14:{other:"\xa4000T"}}}}},nu:["latn"]},locale:"en"})},719:function(t,e,n){"use strict";n.r(e);var r=n(673),i=n(42),o=n(60),a=n(89),s=n(698);function u(t,e){return t[0]*e[0]+t[1]*e[1]}function c(t,e,n){return"planar"===n.method?Object(s.a)(t,e,n):Object(r.default)(t,e,n)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=Object(i.point)(t):"Point"===t.type?t=Object(i.feature)(t):Object(o.featureOf)(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=Object(i.lineString)(e):"LineString"===e.type?e=Object(i.feature)(e):Object(o.featureOf)(e,"LineString","line");var r=1/0,s=t.geometry.coordinates;return Object(a.segmentEach)(e,(function(t){var e=t.geometry.coordinates[0],i=t.geometry.coordinates[1],o=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=u([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return c(t,e,{method:r.method,units:"degrees"});var a=u(i,i);if(a<=o)return c(t,n,{method:r.method,units:"degrees"});var s=o/a,l=[e[0]+s*i[0],e[1]+s*i[1]];return c(t,l,{method:r.method,units:"degrees"})}(s,e,i,n);o<r&&(r=o)})),Object(i.convertLength)(r,"degrees",n.units)}},720:function(t,e,n){"use strict";n.r(e);var r=n(674),i=n(673),o=n(677),a=n(248),s=n(89),u=n(42),c=n(60);e.default=function(t,e,n){void 0===n&&(n={});var l=Object(u.point)([1/0,1/0],{dist:1/0}),f=0;return Object(s.flattenEach)(t,(function(t){for(var s=Object(c.getCoords)(t),p=0;p<s.length-1;p++){var h=Object(u.point)(s[p]);h.properties.dist=Object(i.default)(e,h,n);var d=Object(u.point)(s[p+1]);d.properties.dist=Object(i.default)(e,d,n);var y=Object(i.default)(h,d,n),g=Math.max(h.properties.dist,d.properties.dist),m=Object(r.default)(h,d),v=Object(o.default)(e,g,m+90,n),_=Object(o.default)(e,g,m-90,n),b=Object(a.default)(Object(u.lineString)([v.geometry.coordinates,_.geometry.coordinates]),Object(u.lineString)([h.geometry.coordinates,d.geometry.coordinates])),E=null;b.features.length>0&&((E=b.features[0]).properties.dist=Object(i.default)(e,E,n),E.properties.location=f+Object(i.default)(h,E,n)),h.properties.dist<l.properties.dist&&((l=h).properties.index=p,l.properties.location=f),d.properties.dist<l.properties.dist&&((l=d).properties.index=p+1,l.properties.location=f+y),E&&E.properties.dist<l.properties.dist&&((l=E).properties.index=p),f+=y}})),l}},721:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScaleMode=void 0;var r=g(n(181)),i=g(n(683)),o=g(n(674)),a=g(n(526)),s=n(42),u=g(n(262)),c=n(89),l=g(n(673)),f=g(n(779)),p=n(60),h=n(672),d=n(671),y=n(675);function g(t){return t&&t.__esModule?t:{default:t}}function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e){return!e||"object"!==m(e)&&"function"!==typeof e?C(t):e}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function T(t,e){return T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},T(t,e)}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(m,t);var e,n,l,d,g=(e=m,function(){var t,n=O(e);if(S()){var r=O(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return A(this,t)});function m(){var t;b(this,m);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return L(C(t=g.call.apply(g,[this].concat(n))),"_geometryBeingScaled",void 0),L(C(t),"_selectedEditHandle",void 0),L(C(t),"_cornerGuidePoints",void 0),L(C(t),"_cursor",void 0),L(C(t),"_isScaling",!1),L(C(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,p.getGeom)(e[0]).type})),L(C(t),"_getOppositeScaleHandle",(function(e){var n=e&&e.properties&&Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0];if("number"!==typeof n)return null;var r=t._cornerGuidePoints.length,i=(n+r/2)%r;return t._cornerGuidePoints.find((function(t){return!!Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0]===i}))})),L(C(t),"_getUpdatedData",(function(t,e){for(var n=new y.ImmutableFeatureCollection(t.data),r=t.selectedIndexes,i=0;i<r.length;i++){var o=r[i],a=e.features[i];n=n.replaceGeometry(o,a.geometry)}return n.getObject()})),L(C(t),"isEditHandleSelected",(function(){return Boolean(t._selectedEditHandle)})),L(C(t),"getScaleAction",(function(e,n,r,i){if(!t._selectedEditHandle)return null;var o=t._getOppositeScaleHandle(t._selectedEditHandle),a=(0,p.getCoord)(o),s=w(a,e,n),u=(0,f.default)(t._geometryBeingScaled,s,{origin:a});return{updatedData:t._getUpdatedData(i,u),editType:r,editContext:{featureIndexes:i.selectedIndexes}}})),L(C(t),"updateCursor",(function(e){if(t._selectedEditHandle){t._cursor&&e.onUpdateCursor(t._cursor);var n=t.getSelectedFeaturesAsFeatureCollection(e),r=(0,i.default)(n),a=(0,o.default)(r,t._selectedEditHandle),s=a<0?a+180:a;s>=0&&s<=90||s>=180&&s<=270?(t._cursor="nesw-resize",e.onUpdateCursor("nesw-resize")):(t._cursor="nwse-resize",e.onUpdateCursor("nwse-resize"))}else e.onUpdateCursor(null),t._cursor=null})),t}return n=m,(l=[{key:"handlePointerMove",value:function(t,e){if(!this._isScaling){var n=(0,h.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,this.updateCursor(e)}}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleDragging",value:function(t,e){if(this._isScaling){e.onUpdateCursor(this._cursor);var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaling",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handleStopDragging",value:function(t,e){if(this._isScaling){var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaled",e);n&&e.onEdit(n),e.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(t){this._cornerGuidePoints=[];var e=this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};var n=(0,a.default)((0,r.default)(e));n.properties.mode="scale";var i=[];return(0,c.coordEach)(n,(function(t,e){if(e<4){var n=(0,s.point)(t,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[e]});i.push(n)}})),this._cornerGuidePoints=i,(0,s.featureCollection)([(0,u.default)(n)].concat(v(this._cornerGuidePoints)))}}])&&E(n.prototype,l),d&&E(n,d),m}(d.GeoJsonEditMode);function w(t,e,n){var r=(0,l.default)(t,e);return(0,l.default)(t,n)/r}e.ScaleMode=I},722:function(t,e,n){"use strict";var r=n(42),i=n(60);function o(t,e){var n=Object(r.degreesToRadians)(t[1]),i=Object(r.degreesToRadians)(e[1]),o=Object(r.degreesToRadians)(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var a=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=Math.atan2(o,a);return(Object(r.radiansToDegrees)(s)+360)%360}e.a=function(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?o(Object(i.getCoord)(e),Object(i.getCoord)(t)):o(Object(i.getCoord)(t),Object(i.getCoord)(e)))>180?-(360-r):r}},723:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RotateMode=void 0;var r=g(n(181)),i=g(n(683)),o=g(n(674)),a=g(n(526)),s=g(n(673)),u=n(89),c=n(60),l=n(42),f=g(n(724)),p=g(n(262)),h=n(672),d=n(671),y=n(675);function g(t){return t&&t.__esModule?t:{default:t}}function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return!e||"object"!==m(e)&&"function"!==typeof e?E(t):e}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(L,t);var e,n,g,m,T=(e=L,function(){var t,n=C(e);if(A()){var r=C(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b(this,t)});function L(){var t;v(this,L);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return O(E(t=T.call.apply(T,[this].concat(n))),"_selectedEditHandle",void 0),O(E(t),"_geometryBeingRotated",void 0),O(E(t),"_isRotating",!1),O(E(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,c.getGeom)(e[0]).type})),O(E(t),"getIsRotating",(function(){return t._isRotating})),t}return n=L,(g=[{key:"getGuides",value:function(t){var e=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};if(this._isRotating)return(0,l.featureCollection)([(0,i.default)(e)]);var n=(0,a.default)((0,r.default)(e)),o=null,c=null,f=0;(0,u.coordEach)(n,(function(t){if(o){var e=(0,d.getIntermediatePosition)(t,o);(!c||e[1]>c[1])&&(c=e);var n=(0,s.default)(t,o);f=Math.max(f,n)}o=t}));var h=c&&[c[0],c[1]+f/1e3],y=(0,l.lineString)([c,h]),g=(0,l.point)(h,{guideType:"editHandle",editHandleType:"rotate"});return(0,l.featureCollection)([(0,p.default)(n),g,y])}},{key:"handleDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotating",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){if(!this._isRotating){var n=(0,h.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"rotate"===n.properties.editHandleType?n:null}this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotated",e);n&&e.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(t){this._selectedEditHandle?t.onUpdateCursor("crosshair"):t.onUpdateCursor(null)}},{key:"getRotateAction",value:function(t,e,n,r){if(!this._geometryBeingRotated)return null;for(var a=(0,i.default)(this._geometryBeingRotated),s=function(t,e,n){var r=(0,o.default)(t,e);return(0,o.default)(t,n)-r}(a,t,e),u=(0,f.default)(this._geometryBeingRotated,s,{pivot:a}),c=new y.ImmutableFeatureCollection(r.data),l=r.selectedIndexes,p=0;p<l.length;p++){var h=l[p],d=u.features[p];c=c.replaceGeometry(h,d.geometry)}return{updatedData:c.getObject(),editType:n,editContext:{featureIndexes:l}}}}])&&_(n.prototype,g),m&&_(n,m),L}(d.GeoJsonEditMode);e.RotateMode=T},724:function(t,e,n){"use strict";n.r(e);var r=n(683),i=n(722),o=n(698),a=n(689),s=n(687),u=n(89),c=n(60),l=n(42);e.default=function(t,e,n){if(n=n||{},!Object(l.isObject)(n))throw new Error("options is invalid");var f=n.pivot,p=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e||(f||(f=Object(r.default)(t)),!1!==p&&void 0!==p||(t=Object(s.a)(t)),Object(u.coordEach)(t,(function(t){var n=Object(i.a)(f,t)+e,r=Object(o.a)(f,t),s=Object(c.getCoords)(Object(a.a)(f,r,n));t[0]=s[0],t[1]=s[1]}))),t}},725:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CompositeMode=void 0;var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,r,a,h=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function d(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),e=h.call(this),n=c(e),i=void 0,(r="_modes")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e._modes=t,e}return n=d,r=[{key:"_coalesce",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this._modes.length&&(e=t(this._modes[r]),!(n?n(e):e));r++);return e}},{key:"handleClick",value:function(t,e){this._coalesce((function(n){return n.handleClick(t,e)}))}},{key:"handlePointerMove",value:function(t,e){return this._coalesce((function(n){return n.handlePointerMove(t,e)}))}},{key:"handleStartDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStartDragging(t,e)}))}},{key:"handleStopDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStopDragging(t,e)}))}},{key:"handleDragging",value:function(t,e){return this._coalesce((function(n){return n.handleDragging(t,e)}))}},{key:"getGuides",value:function(t){var e,n=[],r=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(this._modes);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push.apply(n,i(a.getGuides(t).features))}}catch(s){r.e(s)}finally{r.f()}return{type:"FeatureCollection",features:n}}}],r&&s(n.prototype,r),a&&s(n,a),d}(n(671).GeoJsonEditMode);e.CompositeMode=h},726:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var r=n(674),i=n(677),o=n(673),a=n(42),s=n(60);function u(t,e,n){void 0===n&&(n={});for(var u=Object(s.getGeom)(t).coordinates,c=0,l=0;l<u.length&&!(e>=c&&l===u.length-1);l++){if(c>=e){var f=e-c;if(f){var p=Object(r.default)(u[l],u[l-1])-180;return Object(i.default)(u[l],f,p,n)}return Object(a.point)(u[l])}c+=Object(o.default)(u[l],u[l+1],n)}return Object(a.point)(u[u.length-1])}},727:function(t,e,n){"use strict";n.r(e);var r=n(42),i=n(689),o=n(724),a=n(60);function s(t){var e=t*Math.PI/180;return Math.tan(e)}e.default=function(t,e,n,u){var c=(u=u||{}).steps||64,l=u.units||"kilometers",f=u.angle||0,p=u.pivot||t,h=u.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!Object(r.isObject)(u))throw new Error("options must be an object");if(!Object(r.isNumber)(c))throw new Error("steps must be a number");if(!Object(r.isNumber)(f))throw new Error("angle must be a number");var d=Object(a.getCoord)(t);if("degrees"===l)var y=Object(r.degreesToRadians)(f);else e=Object(i.a)(t,e,90,{units:l}),n=Object(i.a)(t,n,0,{units:l}),e=Object(a.getCoord)(e)[0]-d[0],n=Object(a.getCoord)(n)[1]-d[1];for(var g=[],m=0;m<c;m+=1){var v=-360*m/c,_=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(s(v),2)),b=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(s(v),2));if(v<-90&&v>=-270&&(_=-_),v<-180&&v>=-360&&(b=-b),"degrees"===l){var E=_*Math.cos(y)+b*Math.sin(y),A=b*Math.cos(y)-_*Math.sin(y);_=E,b=A}g.push([_+d[0],b+d[1]])}return g.push(g[0]),"degrees"===l?Object(r.polygon)([g],h):Object(o.default)(Object(r.polygon)([g],h),f,{pivot:p})}},728:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},a(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeClickPolygonMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,r,f,p=(e=h,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return i(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"handleClick",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence(),r=this.getTentativeGuide(e);if(n.length>2&&r&&"Polygon"===r.geometry.type){var i=this.getAddFeatureOrBooleanPolygonAction(r.geometry,e);this.resetClickSequence(),i&&e.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=e.mapCoords;if(1===r.length)i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[0],o]}});else{var a=this.getThreeClickPolygon(r[0],r[1],o,n);a&&i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:a.geometry})}return i}},{key:"getThreeClickPolygon",value:function(t,e,n,r){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),a(c(h.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 2===r.length&&(e=this.getThreeClickPolygon(r[0],r[1],i[0],t.modeConfig)),e}}])&&o(n.prototype,r),f&&o(n,f),h}(n(671).GeoJsonEditMode);e.ThreeClickPolygonMode=f},729:function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n={};return function(i){for(var o in i)if(!r(i[o],n[o])){e=t(i),n=i;break}return e}}},730:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(41);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=["anyclick","pointermove","panstart","panmove","panend","keyup"],m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(u,t);var e,n,r,i,o=(e=u,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function u(){return c(this,u),o.apply(this,arguments)}return n=u,(r=[{key:"onLayerClick",value:function(t){}},{key:"onStartDragging",value:function(t){}},{key:"onStopDragging",value:function(t){}},{key:"onDragging",value:function(t){}},{key:"onPointerMove",value:function(t){}},{key:"onLayerKeyUp",value:function(t){}},{key:"initializeState",value:function(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}},{key:"finalizeState",value:function(){this._removeEventHandlers()}},{key:"_addEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=s(g);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.on(i,n,{priority:100})}}catch(o){r.e(o)}finally{r.f()}}},{key:"_removeEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=s(g);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.off(i,n)}}catch(o){r.e(o)}finally{r.f()}}},{key:"_forwardEventToCurrentLayer",value:function(t){var e=this.getCurrentLayer(),n=e["_on".concat(t.type)].bind(e);n?n(t):console.warn("no handler for mjolnir.js event ".concat(t.type))}},{key:"_onanyclick",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.getPicks(n);this.onLayerClick({mapCoords:r,screenCoords:n,picks:i,sourceEvent:e})}},{key:"_onkeyup",value:function(t){var e=t.srcEvent;this.onLayerKeyUp(e)}},{key:"_onpanstart",value:function(t){var e=this.getScreenCoords(t.srcEvent),n=this.getMapCoords(e),r=this.getPicks(e);this.setState({_editableLayerState:a({},this.state._editableLayerState,{pointerDownScreenCoords:e,pointerDownMapCoords:n,pointerDownPicks:r})}),this.onStartDragging({picks:r,screenCoords:e,mapCoords:n,pointerDownScreenCoords:e,pointerDownMapCoords:n,cancelPan:t.stopImmediatePropagation,sourceEvent:t.srcEvent})}},{key:"_onpanmove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,a=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,u=this.getPicks(n);this.onDragging({screenCoords:n,mapCoords:r,picks:u,pointerDownPicks:o,pointerDownScreenCoords:a,pointerDownMapCoords:s,sourceEvent:e,cancelPan:t.stopImmediatePropagation})}},{key:"_onpanend",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,s=i.pointerDownScreenCoords,u=i.pointerDownMapCoords,c=this.getPicks(n);this.onStopDragging({picks:c,screenCoords:n,mapCoords:r,pointerDownPicks:o,pointerDownScreenCoords:s,pointerDownMapCoords:u,sourceEvent:e}),this.setState({_editableLayerState:a({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null})})}},{key:"_onpointermove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,a=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,u=this.getPicks(n);this.onPointerMove({screenCoords:n,mapCoords:r,picks:u,pointerDownPicks:o,pointerDownScreenCoords:a,pointerDownMapCoords:s,sourceEvent:e})}},{key:"getPicks",value:function(t){return this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}},{key:"getScreenCoords",value:function(t){return[t.clientX-this.context.gl.canvas.getBoundingClientRect().left,t.clientY-this.context.gl.canvas.getBoundingClientRect().top]}},{key:"getMapCoords",value:function(t){return this.context.viewport.unproject([t[0],t[1]])}}])&&l(n.prototype,r),i&&l(n,i),u}(r.CompositeLayer);e.default=m,y(m,"layerName","EditableLayer")},731:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(t))return e;return[255*t[0],255*t[1],255*t[2],255*t[3]]},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(function(t){if(Array.isArray(t))return f(t)}(o=n)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||l(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[i]),r)){r(e,n);break}var o;return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var s={type:"LineString",coordinates:[t,e]},u=(0,a.point)(n),c=(0,o.default)(u,s),l=(0,i.default)(t,e),f=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?l-90:l-270,p=(0,r.default)(e,c,f),h=(0,r.default)(t,c,f);return[p.geometry.coordinates,h.geometry.coordinates]},e.distance2d=p,e.mix=h,e.nearestPointOnProjectedLine=function(t,e,n){var r=new s.default(n),i=t.geometry.coordinates.map((function(t){var e=c(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?0:o;return r.project([n,i,a])})),o=c(r.project(e.geometry.coordinates),2),a=o[0],u=o[1],l=1/0,f={};i.forEach((function(t,e){var n=c(t,2),r=n[0],o=n[1];if(0!==e){var s=c(i[e-1],2),p=s[0],h=s[1],d=h-o,y=r-p,g=p*o-r*h,m=d*d+y*y,v=Math.abs(d*a+y*u+g)/Math.sqrt(m);v<l&&(l=v,f={index:e,x0:(y*(y*a-d*u)-d*g)/m,y0:(d*(-y*a+d*u)-y*g)/m})}}));var d=f,y=d.index,g=d.x0,m=d.y0,v=c(i[y-1],3),_=v[0],b=v[1],E=v[2],A=void 0===E?0:E,C=c(i[y],3),S=C[0],O=C[1],T=C[2],L=void 0===T?0:T,I=p(_,b,S,O),w=p(_,b,g,m),P=h(A,L,w/I);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([g,m,P])},properties:{dist:l,index:y-1}}},e.insertBefore=function(t,e,n){var r=t.indexOf(e);if(r<0)return t;return t.slice(0,r)+n+t.slice(r)};var r=u(n(677)),i=u(n(674)),o=u(n(719)),a=n(42),s=u(n(676));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function h(t,e,n){return e*n+t*(1-n)}},732:function(t,e,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){"use strict";function t(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var n={},r={};function i(t,e){var i,o,s;return e?(s=0<=(t>>>=0)&&t<256)&&(o=r[t])?o:(i=a(t,(0|t)<0?-1:0,!0),s&&(r[t]=i),i):(s=-128<=(t|=0)&&t<128)&&(o=n[t])?o:(i=a(t,t<0?-1:0,!1),s&&(n[t]=i),i)}function o(t,e){if(isNaN(t)||!isFinite(t))return e?g:y;if(e){if(t<0)return g;if(t>=p)return E}else{if(t<=-h)return A;if(t+1>=h)return b}return t<0?o(-t,e).neg():a(t%f|0,t/f|0,e)}function a(e,n,r){return new t(e,n,r)}t.fromInt=i,t.fromNumber=o,t.fromBits=a;var s=Math.pow;function u(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return y;if("number"===typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(t.substring(1),e,n).neg();for(var i=o(s(n,8)),a=y,c=0;c<t.length;c+=8){var l=Math.min(8,t.length-c),f=parseInt(t.substring(c,c+l),n);if(l<8){var p=o(s(n,l));a=a.mul(p).add(o(f))}else a=(a=a.mul(i)).add(o(f))}return a.unsigned=e,a}function c(e){return e instanceof t?e:"number"===typeof e?o(e):"string"===typeof e?u(e):a(e.low,e.high,e.unsigned)}t.fromString=u,t.fromValue=c;var l=65536,f=l*l,p=f*f,h=p/2,d=i(1<<24),y=i(0);t.ZERO=y;var g=i(0,!0);t.UZERO=g;var m=i(1);t.ONE=m;var v=i(1,!0);t.UONE=v;var _=i(-1);t.NEG_ONE=_;var b=a(-1,2147483647,!1);t.MAX_VALUE=b;var E=a(-1,-1,!0);t.MAX_UNSIGNED_VALUE=E;var A=a(0,-2147483648,!1);t.MIN_VALUE=A;var C=t.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var e=o(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=o(s(t,6),this.unsigned),a=this,u="";;){var c=a.div(i),l=(a.sub(c.mul(i)).toInt()>>>0).toString(t);if((a=c).isZero())return l+u;for(;l.length<6;)l="0"+l;u=""+l+u}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},C.isZero=function(){return 0===this.high&&0===this.low},C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(t){return e(t)||(t=c(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&this.high===t.high&&this.low===t.low},C.eq=C.equals,C.notEquals=function(t){return!this.eq(t)},C.neq=C.notEquals,C.lessThan=function(t){return this.comp(t)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(t){return this.comp(t)<=0},C.lte=C.lessThanOrEqual,C.greaterThan=function(t){return this.comp(t)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(t){return this.comp(t)>=0},C.gte=C.greaterThanOrEqual,C.compare=function(t){if(e(t)||(t=c(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(m)},C.neg=C.negate,C.add=function(t){e(t)||(t=c(t));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=t.high>>>16,u=65535&t.high,l=t.low>>>16,f=0,p=0,h=0,d=0;return h+=(d+=o+(65535&t.low))>>>16,p+=(h+=i+l)>>>16,f+=(p+=r+u)>>>16,f+=n+s,a((h&=65535)<<16|(d&=65535),(f&=65535)<<16|(p&=65535),this.unsigned)},C.subtract=function(t){return e(t)||(t=c(t)),this.add(t.neg())},C.sub=C.subtract,C.multiply=function(t){if(this.isZero())return y;if(e(t)||(t=c(t)),t.isZero())return y;if(this.eq(A))return t.isOdd()?A:y;if(t.eq(A))return this.isOdd()?A:y;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(d)&&t.lt(d))return o(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,u=t.high>>>16,l=65535&t.high,f=t.low>>>16,p=65535&t.low,h=0,g=0,m=0,v=0;return m+=(v+=s*p)>>>16,g+=(m+=i*p)>>>16,m&=65535,g+=(m+=s*f)>>>16,h+=(g+=r*p)>>>16,g&=65535,h+=(g+=i*f)>>>16,g&=65535,h+=(g+=s*l)>>>16,h+=n*p+r*f+i*l+s*u,a((m&=65535)<<16|(v&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(t){if(e(t)||(t=c(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:y;var n,r,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return g;if(t.gt(this.shru(1)))return v;i=g}else{if(this.eq(A))return t.eq(m)||t.eq(_)?A:t.eq(A)?m:(n=this.shr(1).div(t).shl(1)).eq(y)?t.isNegative()?m:_:(r=this.sub(t.mul(n)),i=n.add(r.div(t)));if(t.eq(A))return this.unsigned?g:y;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=y}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:s(2,a-48),l=o(n),f=l.mul(t);f.isNegative()||f.gt(r);)f=(l=o(n-=u,this.unsigned)).mul(t);l.isZero()&&(l=m),i=i.add(l),r=r.sub(f)}return i},C.div=C.divide,C.modulo=function(t){return e(t)||(t=c(t)),this.sub(this.div(t).mul(t))},C.mod=C.modulo,C.not=function(){return a(~this.low,~this.high,this.unsigned)},C.and=function(t){return e(t)||(t=c(t)),a(this.low&t.low,this.high&t.high,this.unsigned)},C.or=function(t){return e(t)||(t=c(t)),a(this.low|t.low,this.high|t.high,this.unsigned)},C.xor=function(t){return e(t)||(t=c(t)),a(this.low^t.low,this.high^t.high,this.unsigned)},C.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?a(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):a(0,this.low<<t-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(t){return e(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?a(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):a(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0===(t&=63))return this;var n=this.high;return t<32?a(this.low>>>t|n<<32-t,n>>>t,this.unsigned):a(32===t?n:n>>>t-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},C.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},C.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})?r.apply(e,i):r)||(t.exports=o)},734:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p}));var r=n(10),i=n(93),o=n(31),a=Math.PI/180,s=new Float32Array(16),u=new Float32Array(12);function c(t,e,n){var r=e[0]*a,i=e[1]*a,o=e[2]*a,s=Math.sin(o),u=Math.sin(r),c=Math.sin(i),l=Math.cos(o),f=Math.cos(r),p=Math.cos(i),h=n[0],d=n[1],y=n[2];t[0]=h*p*f,t[1]=h*c*f,t[2]=h*-u,t[3]=d*(-c*l+p*u*s),t[4]=d*(p*l+c*u*s),t[5]=d*f*s,t[6]=y*(c*s+p*u*l),t[7]=y*(-p*s+c*u*l),t[8]=y*f*l}function l(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var f={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(t,e){var n=e.startRow,o=e.endRow,a=this.props,f=a.data,p=a.getOrientation,h=a.getScale,d=a.getTranslation,y=a.getTransformMatrix,g=Array.isArray(y),m=g&&16===y.length,v=Array.isArray(h),_=Array.isArray(p),b=Array.isArray(d),E=m||!g&&Boolean(y(f[0]));t.constant=E?m:_&&v&&b;var A=t.value;if(t.constant){var C;if(E)s.set(y),C=l(s);else c(C=u,p,h),C.set(d,9);t.value=new Float32Array(C)}else{var S,O=n*t.size,T=Object(i.a)(f,n,o),L=T.iterable,I=T.objectInfo,w=Object(r.a)(L);try{for(w.s();!(S=w.n()).done;){var P=S.value;I.index++;var R=void 0;if(E)s.set(m?y:y(P,I)),R=l(s);else c(R=u,_?p:p(P,I),v?h:h(P,I)),R.set(b?d:d(P,I),9);A[O++]=R[0],A[O++]=R[1],A[O++]=R[2],A[O++]=R[3],A[O++]=R[4],A[O++]=R[5],A[O++]=R[6],A[O++]=R[7],A[O++]=R[8],A[O++]=R[9],A[O++]=R[10],A[O++]=R[11]}}catch(M){w.e(M)}finally{w.f()}}}};function p(t,e){return e===o.a.CARTESIAN||e===o.a.METER_OFFSETS||e===o.a.DEFAULT&&!t.isGeospatial}},735:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(161),i=u(n(695)),o=n(46),a=u(n(816)),s=n(704);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},p(t,e,n||t)}function h(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=t.source,n=t.code,r=void 0===n?"":n;return e.replace(/}[^{}]*$/,r.concat("\n}\n"))}var _=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(m,t);var e,n,r,u,c=(e=m,function(){var t,n=y(e);if(d()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function m(){return l(this,m),c.apply(this,arguments)}return n=m,(r=[{key:"getShaders",value:function(){var t=p(y(m.prototype),"getShaders",this).call(this);return Object.assign({},t,{modules:t.modules.concat([a.default]),vs:v({source:t.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:v({source:t.fs,code:"  gl_FragColor = outline_filterColor(gl_FragColor);\n"})})}},{key:"initializeState",value:function(t){p(y(m.prototype),"initializeState",this).call(this,t),this.setState({outlineFramebuffer:new o.Framebuffer(t.gl),dummyTexture:new o.Texture2D(t.gl)}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:i.default.UNSIGNED_BYTE,accessor:"getZLevel"}})}},{key:"draw",value:function(t){t.moduleParameters,t.parameters;var e=t.uniforms,n=(t.context,this.props),r=n.jointRounded,o=n.capRounded,a=n.billboard,u=n.miterLimit,c=n.widthUnits,l=n.widthScale,f=n.widthMinPixels,p=n.widthMaxPixels;e=Object.assign({},e,{jointType:Number(r),capType:Number(o),billboard:a,widthUnits:s.UNIT[c],widthScale:l,miterLimit:u,widthMinPixels:f,widthMaxPixels:p});var h=this.state,d=h.outlineFramebuffer,y=h.dummyTexture;d.resize(),d.clear({color:!0,depth:!0}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:y}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:i.default.MAX},framebuffer:d}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:d}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:Number(r),capType:Number(o),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})}}])&&f(n.prototype,r),u&&f(n,u),m}(r.PathLayer);e.default=_,m(_,"layerName","PathOutlineLayer"),m(_,"defaultProps",{getZLevel:function(){return 0}})},738:function(t,e,n){"use strict";n.r(e);var r=n(688),i=n(783),o=n(89),a=function(){return new s};function s(){this.reset()}s.prototype={constructor:s,reset:function(){this.s=this.t=0},add:function(t){c(u,t,this.t),c(this,u.s,this.s),this.s?this.t+=u.t:this.s=u.t},valueOf:function(){return this.s}};var u=new s;function c(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var l=1e-6,f=Math.PI,p=f/2,h=f/4,d=2*f,y=180/f,g=f/180,m=Math.abs,v=Math.atan,_=Math.atan2,b=Math.cos,E=(Math.ceil,Math.exp),A=(Math.floor,Math.log),C=(Math.pow,Math.sin),S=(Math.sign,Math.sqrt),O=Math.tan;function T(t){return t>1?0:t<-1?f:Math.acos(t)}function L(t){return t>1?p:t<-1?-p:Math.asin(t)}function I(){}function w(t,e){t&&R.hasOwnProperty(t.type)&&R[t.type](t,e)}var P={Feature:function(t,e){w(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)w(n[r].geometry,e)}},R={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){M(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)M(n[r],e,0)},Polygon:function(t,e){x(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)x(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)w(n[r],e)}};function M(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function x(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)M(t[n],e,1);e.polygonEnd()}var N=function(t,e){t&&P.hasOwnProperty(t.type)?P[t.type](t,e):w(t,e)};a(),a();function D(t){return[_(t[1],t[0]),L(t[2])]}function B(t){var e=t[0],n=t[1],r=b(n);return[r*b(e),r*C(e),C(n)]}function F(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function j(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function k(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function G(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function U(t){var e=S(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}a();var Z=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function H(t,e){return[t>f?t-d:t<-f?t+d:t,e]}function z(t,e,n){return(t%=d)?e||n?Z(K(t),X(e,n)):K(t):e||n?X(e,n):H}function V(t){return function(e,n){return[(e+=t)>f?e-d:e<-f?e+d:e,n]}}function K(t){var e=V(t);return e.invert=V(-t),e}function X(t,e){var n=b(t),r=C(t),i=b(e),o=C(e);function a(t,e){var a=b(e),s=b(t)*a,u=C(t)*a,c=C(e),l=c*n+s*r;return[_(u*i-l*o,s*n-c*r),L(l*i+u*o)]}return a.invert=function(t,e){var a=b(e),s=b(t)*a,u=C(t)*a,c=C(e),l=c*i-u*o;return[_(u*i+c*o,s*n+l*r),L(l*n-s*r)]},a}H.invert=H;function q(t,e,n,r,i,o){if(n){var a=b(e),s=C(e),u=r*n;null==i?(i=e+r*d,o=e-u/2):(i=J(a,i),o=J(a,o),(r>0?i<o:i>o)&&(i+=r*d));for(var c,l=i;r>0?l>o:l<o;l-=u)c=D([a,-s*b(l),-s*C(l)]),t.point(c[0],c[1])}}function J(t,e){(e=B(e))[0]-=t,U(e);var n=T(-e[1]);return((-e[2]<0?-n:n)+d-l)%d}var W=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:I,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Y=function(t,e){return m(t[0]-e[0])<l&&m(t[1]-e[1])<l};function Q(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var $=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Y(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Q(r,t,null,!0)),u.push(n.o=new Q(r,null,n,!1)),s.push(n=new Q(a,t,null,!1)),u.push(n.o=new Q(a,null,n,!0))}})),s.length){for(u.sort(e),tt(s),tt(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var p=f,h=!0;p.v;)if((p=p.n)===f)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(h)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,h=!h}while(!p.v);i.lineEnd()}}};function tt(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var et=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var nt=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return et(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(et);nt.right,nt.left;var rt=Array.prototype;rt.slice,rt.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var it=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var ot=1e9,at=-ot;function st(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return m(r[0]-t)<l?i>0?0:3:m(r[0]-n)<l?i>0?2:1:m(r[1]-e)<l?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,f,p,h,d,y,g,m,v,_=a,b=W(),E={point:A,lineStart:function(){E.point=C,c&&c.push(l=[]);m=!0,g=!1,d=y=NaN},lineEnd:function(){u&&(C(f,p),h&&g&&b.rejoin(),u.push(b.result()));E.point=A,g&&_.lineEnd()},polygonStart:function(){_=b,u=[],c=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,f=s[0],p=f[0],h=f[1];u<l;++u)o=p,a=h,p=(f=s[u])[0],h=f[1],a<=r?h>r&&(p-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(p-o)*(r-a)<(h-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=it(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&$(u,s,e,o,a),a.polygonEnd());_=a,u=c=l=null}};function A(t,e){i(t,e)&&_.point(t,e)}function C(o,a){var s=i(o,a);if(c&&l.push([o,a]),m)f=o,p=a,h=s,m=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&g)_.point(o,a);else{var u=[d=Math.max(at,Math.min(ot,d)),y=Math.max(at,Math.min(ot,y))],b=[o=Math.max(at,Math.min(ot,o)),a=Math.max(at,Math.min(ot,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,p=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<l&&(l=a)}else if(p>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>l)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*f,t[1]=u+c*p),l<1&&(e[0]=s+l*f,e[1]=u+l*p),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(o,a),v=!1):(g||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),v=!1)}d=o,y=a,g=s}return E}}var ut=a(),ct=function(t,e){var n=e[0],r=e[1],i=[C(n),-b(n),0],o=0,a=0;ut.reset();for(var s=0,u=t.length;s<u;++s)if(p=(c=t[s]).length)for(var c,p,y=c[p-1],g=y[0],m=y[1]/2+h,v=C(m),E=b(m),A=0;A<p;++A,g=O,v=I,E=w,y=S){var S=c[A],O=S[0],T=S[1]/2+h,I=C(T),w=b(T),P=O-g,R=P>=0?1:-1,M=R*P,x=M>f,N=v*I;if(ut.add(_(N*R*C(M),E*w+N*b(M))),o+=x?P+R*d:P,x^g>=n^O>=n){var D=j(B(y),B(S));U(D);var F=j(i,D);U(F);var k=(x^P>=0?-1:1)*L(F[2]);(r>k||r===k&&(D[0]||D[1]))&&(a+=x^P>=0?1:-1)}}return(o<-l||o<l&&ut<-l)^1&a};a();var lt=function(t){return t};a(),a();var ft=1/0,pt=ft,ht=-ft,dt=ht,yt={point:function(t,e){t<ft&&(ft=t);t>ht&&(ht=t);e<pt&&(pt=e);e>dt&&(dt=e)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I,result:function(){var t=[[ft,pt],[ht,dt]];return ht=dt=-(pt=ft=1/0),t}};var gt=yt;function mt(t){this._context=t}mt.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,d)}},result:I};a();function vt(){this._string=[]}function _t(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}vt.prototype={_radius:4.5,_circle:_t(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=_t(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var bt=function(t,e,n,r){return function(i,o){var a,s,u,c=e(o),l=i.invert(r[0],r[1]),f=W(),p=e(f),h=!1,d={point:y,lineStart:m,lineEnd:v,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=E,s=[],a=[]},polygonEnd:function(){d.point=y,d.lineStart=m,d.lineEnd=v,s=it(s);var t=ct(a,l);s.length?(h||(o.polygonStart(),h=!0),$(s,At,t,n,o)):t&&(h||(o.polygonStart(),h=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function g(t,e){var n=i(t,e);c.point(n[0],n[1])}function m(){d.point=g,c.lineStart()}function v(){d.point=y,c.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);p.point(n[0],n[1])}function b(){p.lineStart(),u=[]}function E(){_(u[0][0],u[0][1]),p.lineEnd();var t,e,n,r,i=p.clean(),c=f.result(),l=c.length;if(u.pop(),a.push(u),u=null,l)if(1&i){if((e=(n=c[0]).length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else l>1&&2&i&&c.push(c.pop().concat(c.shift())),s.push(c.filter(Et))}return d}};function Et(t){return t.length>1}function At(t,e){return((t=t.x)[0]<0?t[1]-p-l:p-t[1])-((e=e.x)[0]<0?e[1]-p-l:p-e[1])}var Ct=bt((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?f:-f,u=m(o-n);m(u-f)<l?(t.point(n,r=(r+a)/2>0?p:-p),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=f&&(m(n-i)<l&&(n-=i*l),m(o-s)<l&&(o-=s*l),r=function(t,e,n,r){var i,o,a=C(t-n);return m(a)>l?v((C(e)*(o=b(r))*C(n)-C(r)*(i=b(e))*C(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*p,r.point(-f,i),r.point(0,i),r.point(f,i),r.point(f,0),r.point(f,-i),r.point(0,-i),r.point(-f,-i),r.point(-f,0),r.point(-f,i);else if(m(t[0]-e[0])>l){var o=t[0]<e[0]?f:-f;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-f,-p]);var St=function(t,e){var n=b(t),r=n>0,i=m(n)>l;function o(t,e){return b(t)*b(e)>n}function a(t,e,r){var i=[1,0,0],o=j(B(t),B(e)),a=F(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=n*a/u,p=-n*s/u,h=j(i,o),d=G(i,c);k(d,G(o,p));var y=h,g=F(d,y),v=F(y,y),_=g*g-v*(F(d,d)-1);if(!(_<0)){var b=S(_),E=G(y,(-g-b)/v);if(k(E,d),E=D(E),!r)return E;var A,C=t[0],O=e[0],T=t[1],L=e[1];O<C&&(A=C,C=O,O=A);var I=O-C,w=m(I-f)<l;if(!w&&L<T&&(A=T,T=L,L=A),w||I<l?w?T+L>0^E[1]<(m(E[0]-C)<l?T:L):T<=E[1]&&E[1]<=L:I>f^(C<=E[0]&&E[0]<=O)){var P=G(y,(-g+b)/v);return k(P,d),[E,D(P)]}}}function s(e,n){var i=r?t:f-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return bt(o,(function(t){var e,n,u,c,p;return{lineStart:function(){c=u=!1,p=1},point:function(h,d){var y,g=[h,d],m=o(h,d),v=r?m?0:s(h,d):m?s(h+(h<0?f:-f),d):0;if(!e&&(c=u=m)&&t.lineStart(),m!==u&&(!(y=a(e,g))||Y(e,y)||Y(g,y))&&(g[0]+=l,g[1]+=l,m=o(g[0],g[1])),m!==u)p=0,m?(t.lineStart(),y=a(g,e),t.point(y[0],y[1])):(y=a(e,g),t.point(y[0],y[1]),t.lineEnd()),e=y;else if(i&&e&&r^m){var _;v&n||!(_=a(g,e,!0))||(p=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||e&&Y(e,g)||t.point(g[0],g[1]),e=g,u=m,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return p|(c&&u)<<1}}}),(function(n,r,i,o){q(o,t,e,i,n,r)}),r?[0,-t]:[-f,t-f])};function Ot(t){return function(e){var n=new Tt;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Tt(){}function Lt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),N(n,t.stream(gt));var a=gt.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function It(t,e,n){return Lt(t,[[0,0],e],n)}Tt.prototype={constructor:Tt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wt=b(30*g),Pt=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,f,p,h,d,y,g,v){var b=c-r,E=f-i,A=b*b+E*E;if(A>4*e&&g--){var C=a+h,O=s+d,T=u+y,I=S(C*C+O*O+T*T),w=L(T/=I),P=m(m(T)-1)<l||m(o-p)<l?(o+p)/2:_(O,C),R=t(P,w),M=R[0],x=R[1],N=M-r,D=x-i,B=E*N-b*D;(B*B/A>e||m((b*N+E*D)/A-.5)>.3||a*h+s*d+u*y<wt)&&(n(r,i,o,a,s,u,M,x,P,C/=I,O/=I,T,g,v),v.point(M,x),n(M,x,P,C,O,T,c,f,p,h,d,y,g,v))}}return function(e){var r,i,o,a,s,u,c,l,f,p,h,d,y={point:g,lineStart:m,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=m}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){l=NaN,y.point=v,e.lineStart()}function v(r,i){var o=B([r,i]),a=t(r,i);n(l,f,c,p,h,d,l=a[0],f=a[1],c=r,p=o[0],h=o[1],d=o[2],16,e),e.point(l,f)}function _(){y.point=g,e.lineEnd()}function b(){m(),y.point=E,y.lineEnd=A}function E(t,e){v(r=t,e),i=l,o=f,a=p,s=h,u=d,y.point=v}function A(){n(l,f,c,p,h,d,i,o,r,a,s,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return Ot({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var Rt=Ot({point:function(t,e){this.stream.point(t*g,e*g)}});function Mt(t){return xt((function(){return t}))()}function xt(t){var e,n,r,i,o,a,s,u,c,l,f=150,p=480,h=250,d=0,m=0,v=0,_=0,b=0,E=null,A=Ct,C=null,O=lt,T=.5,L=Pt(P,T);function I(t){return[(t=o(t[0]*g,t[1]*g))[0]*f+n,r-t[1]*f]}function w(t){return(t=o.invert((t[0]-n)/f,(r-t[1])/f))&&[t[0]*y,t[1]*y]}function P(t,i){return[(t=e(t,i))[0]*f+n,r-t[1]*f]}function R(){o=Z(i=z(v,_,b),e);var t=e(d,m);return n=p-t[0]*f,r=h+t[1]*f,M()}function M(){return c=l=null,I}return I.stream=function(t){return c&&l===t?c:c=Rt(A(i,L(O(l=t))))},I.clipAngle=function(t){return arguments.length?(A=+t?St(E=t*g,6*g):(E=null,Ct),M()):E*y},I.clipExtent=function(t){return arguments.length?(O=null==t?(C=a=s=u=null,lt):st(C=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),M()):null==C?null:[[C,a],[s,u]]},I.scale=function(t){return arguments.length?(f=+t,R()):f},I.translate=function(t){return arguments.length?(p=+t[0],h=+t[1],R()):[p,h]},I.center=function(t){return arguments.length?(d=t[0]%360*g,m=t[1]%360*g,R()):[d*y,m*y]},I.rotate=function(t){return arguments.length?(v=t[0]%360*g,_=t[1]%360*g,b=t.length>2?t[2]%360*g:0,R()):[v*y,_*y,b*y]},I.precision=function(t){return arguments.length?(L=Pt(P,T=t*t),M()):S(T)},I.fitExtent=function(t,e){return Lt(I,t,e)},I.fitSize=function(t,e){return It(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&w,R()}}function Nt(t){return function(e,n){var r=b(e),i=b(n),o=t(r*i);return[o*i*C(e),o*C(n)]}}function Dt(t){return function(e,n){var r=S(e*e+n*n),i=t(r),o=C(i),a=b(i);return[_(e*o,r*a),L(r&&n*o/r)]}}var Bt=Nt((function(t){return S(2/(1+t))}));Bt.invert=Dt((function(t){return 2*L(t/2)}));var Ft=Nt((function(t){return(t=T(t))&&t/C(t)}));Ft.invert=Dt((function(t){return t}));function jt(t,e){return[t,A(O((p+e)/2))]}jt.invert=function(t,e){return[t,2*v(E(e))-p]};function kt(t,e){return[t,e]}kt.invert=kt;function Gt(t,e){var n=b(e),r=b(t)*n;return[n*C(t)/r,C(e)/r]}Gt.invert=Dt(v);function Ut(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Ut.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(m(n)>l&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function Zt(t,e){return[b(e)*C(t),C(e)]}Zt.invert=Dt(L);function Ht(t,e){var n=b(e),r=1+b(t)*n;return[n*C(t)/r,C(e)/r]}Ht.invert=Dt((function(t){return 2*v(t)}));function zt(t,e){return[A(O((p+e)/2)),-t]}zt.invert=function(t,e){return[-e,2*v(E(t))-p]};var Vt=n(42);function Kt(t,e,n,a){var s=t.properties||{},u="Feature"===t.type?t.geometry:t;if("GeometryCollection"===u.type){var c=[];return Object(o.geomEach)(t,(function(t){var r=Kt(t,e,n,a);r&&c.push(r)})),Object(Vt.featureCollection)(c)}var l=function(t){var e=Object(r.default)(t).geometry.coordinates,n=[-e[0],-e[1]];return Mt(Ft).scale(79.4188).clipAngle(179.999).rotate(n).scale(Vt.earthRadius)}(u),f={type:u.type,coordinates:qt(u.coordinates,l)},p=(new i.GeoJSONReader).read(f),h=Object(Vt.radiansToLength)(Object(Vt.lengthToRadians)(e,n),"meters"),d=i.BufferOp.bufferOp(p,h,a);if(!Xt((d=(new i.GeoJSONWriter).write(d)).coordinates)){var y={type:d.type,coordinates:Jt(d.coordinates,l)};return Object(Vt.feature)(y,s)}}function Xt(t){return Array.isArray(t[0])?Xt(t[0]):isNaN(t[0])}function qt(t,e){return"object"!==typeof t[0]?e(t):t.map((function(t){return qt(t,e)}))}function Jt(t,e){return"object"!==typeof t[0]?e.invert(t):t.map((function(t){return Jt(t,e)}))}e.default=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!==typeof n)throw new Error("options must be an object");if("number"!==typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var a=[];switch(t.type){case"GeometryCollection":return Object(o.geomEach)(t,(function(t){var n=Kt(t,e,r,i);n&&a.push(n)})),Object(Vt.featureCollection)(a);case"FeatureCollection":return Object(o.featureEach)(t,(function(t){var n=Kt(t,e,r,i);n&&Object(o.featureEach)(n,(function(t){t&&a.push(t)}))})),Object(Vt.featureCollection)(a)}return Kt(t,e,r,i)}},739:function(t,e,n){"use strict";n.d(e,"a",(function(){return rt}));var r=n(28),i=n(5),o=n(16),a=n.n(o),s={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.1.8",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"===typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}},u=n(10),c=n(19),l=n(12),f=n(7),p=n(6),h=n(3);function d(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=t.POSITION?t.POSITION.value:[],u=s&&s.length,c=0;c<u;c+=3){var l=s[c],f=s[c+1],p=s[c+2];e=l<e?l:e,n=f<n?f:n,r=p<r?p:r,i=l>i?l:i,o=f>o?f:o,a=p>a?p:a}return[[e,n,r],[i,o,a]]}var y=function(){function t(e,n){Object(f.a)(this,t),Object(h.a)(this,"fields",void 0),Object(h.a)(this,"metadata",void 0),function(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function(t){var e,n={},r=Object(u.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.name]&&console.warn("Schema: duplicated field name",i.name,i),n[i.name]=!0}}catch(o){r.e(o)}finally{r.f()}}(e),this.fields=e,this.metadata=n||new Map}return Object(p.a)(t,[{key:"compareTo",value:function(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(var e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}},{key:"select",value:function(){for(var e=Object.create(null),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];e[s]=!0}var u=this.fields.filter((function(t){return e[t.name]}));return new t(u,this.metadata)}},{key:"selectAt",value:function(){for(var e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.map((function(t){return e.fields[t]})).filter(Boolean);return new t(o,this.metadata)}},{key:"assign",value:function(e){var n,r=this.metadata;if(e instanceof t){var i=e;n=i.fields,r=g(g(new Map,this.metadata),i.metadata)}else n=e;var o,a=Object.create(null),s=Object(u.a)(this.fields);try{for(s.s();!(o=s.n()).done;){var c=o.value;a[c.name]=c}}catch(h){s.e(h)}finally{s.f()}var l,f=Object(u.a)(n);try{for(f.s();!(l=f.n()).done;){var p=l.value;a[p.name]=p}}catch(h){f.e(h)}finally{f.f()}return new t(Object.values(a),r)}}]),t}();function g(t,e){return new Map([].concat(Object(c.a)(t||new Map),Object(c.a)(e||new Map)))}var m,v=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;Object(f.a)(this,t),Object(h.a)(this,"name",void 0),Object(h.a)(this,"type",void 0),Object(h.a)(this,"nullable",void 0),Object(h.a)(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=r,this.metadata=i}return Object(p.a)(t,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new t(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),t}(),_=n(37),b=n(14),E=n(15);!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(m||(m={}));var A=function(){function t(){Object(f.a)(this,t)}return Object(p.a)(t,[{key:"typeId",get:function(){return m.NONE}},{key:"compareTo",value:function(t){return this===t}}],[{key:"isNull",value:function(t){return t&&t.typeId===m.Null}},{key:"isInt",value:function(t){return t&&t.typeId===m.Int}},{key:"isFloat",value:function(t){return t&&t.typeId===m.Float}},{key:"isBinary",value:function(t){return t&&t.typeId===m.Binary}},{key:"isUtf8",value:function(t){return t&&t.typeId===m.Utf8}},{key:"isBool",value:function(t){return t&&t.typeId===m.Bool}},{key:"isDecimal",value:function(t){return t&&t.typeId===m.Decimal}},{key:"isDate",value:function(t){return t&&t.typeId===m.Date}},{key:"isTime",value:function(t){return t&&t.typeId===m.Time}},{key:"isTimestamp",value:function(t){return t&&t.typeId===m.Timestamp}},{key:"isInterval",value:function(t){return t&&t.typeId===m.Interval}},{key:"isList",value:function(t){return t&&t.typeId===m.List}},{key:"isStruct",value:function(t){return t&&t.typeId===m.Struct}},{key:"isUnion",value:function(t){return t&&t.typeId===m.Union}},{key:"isFixedSizeBinary",value:function(t){return t&&t.typeId===m.FixedSizeBinary}},{key:"isFixedSizeList",value:function(t){return t&&t.typeId===m.FixedSizeList}},{key:"isMap",value:function(t){return t&&t.typeId===m.Map}},{key:"isDictionary",value:function(t){return t&&t.typeId===m.Dictionary}}]),t}(),C=(Symbol.toStringTag,Symbol.toStringTag,function(t,e){Object(b.a)(r,t);var n=Object(E.a)(r);function r(t,e){var i;return Object(f.a)(this,r),i=n.call(this),Object(h.a)(Object(_.a)(i),"isSigned",void 0),Object(h.a)(Object(_.a)(i),"bitWidth",void 0),i.isSigned=t,i.bitWidth=e,i}return Object(p.a)(r,[{key:"typeId",get:function(){return m.Int}},{key:e,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),r}(A,Symbol.toStringTag)),S=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,!0,8)}return Object(p.a)(n)}(C),O=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,!0,16)}return Object(p.a)(n)}(C),T=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,!0,32)}return Object(p.a)(n)}(C),L=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,!1,8)}return Object(p.a)(n)}(C),I=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,!1,16)}return Object(p.a)(n)}(C),w=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,!1,32)}return Object(p.a)(n)}(C),P=32,R=64,M=function(t,e){Object(b.a)(r,t);var n=Object(E.a)(r);function r(t){var e;return Object(f.a)(this,r),e=n.call(this),Object(h.a)(Object(_.a)(e),"precision",void 0),e.precision=t,e}return Object(p.a)(r,[{key:"typeId",get:function(){return m.Float}},{key:e,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),r}(A,Symbol.toStringTag),x=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,P)}return Object(p.a)(n)}(M),N=function(t){Object(b.a)(n,t);var e=Object(E.a)(n);function n(){return Object(f.a)(this,n),e.call(this,R)}return Object(p.a)(n)}(M),D=(Symbol.toStringTag,Symbol.toStringTag,{DAY:0,MILLISECOND:1}),B=(Symbol.toStringTag,{SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9}),F=(Symbol.toStringTag,Symbol.toStringTag,{DAY_TIME:0,YEAR_MONTH:1}),j=(Symbol.toStringTag,function(t,e){Object(b.a)(r,t);var n=Object(E.a)(r);function r(t,e){var i;return Object(f.a)(this,r),i=n.call(this),Object(h.a)(Object(_.a)(i),"listSize",void 0),Object(h.a)(Object(_.a)(i),"children",void 0),i.listSize=t,i.children=[e],i}return Object(p.a)(r,[{key:"typeId",get:function(){return m.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:e,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),r}(A,Symbol.toStringTag));Symbol.toStringTag;function k(t,e,n){var r=function(t){switch(t.constructor){case Int8Array:return new S;case Uint8Array:return new L;case Int16Array:return new O;case Uint16Array:return new I;case Int32Array:return new T;case Uint32Array:return new w;case Float32Array:return new x;case Float64Array:return new N;default:throw new Error("array type not supported")}}(e.value),i=n||function(t){var e=new Map;"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10));"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10));"normalized"in t&&e.set("normalized",t.normalized.toString());return e}(e);return new v(t,new j(e.size,new v("value",r)),!1,i)}function G(t,e,n){var r=Z(e.metadata),i=[],o=function(t){var e={};for(var n in t){var r=t[n];e[r.name||"undefined"]=r}return e}(e.attributes);for(var a in t){var s=U(a,t[a],o[a]);i.push(s)}if(n){var u=U("indices",n);i.push(u)}return new y(i,r)}function U(t,e,n){return k(t,e,n?Z(n.metadata):void 0)}function Z(t){var e=new Map;for(var n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}var H={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},z={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},V=function(){function t(e){Object(f.a)(this,t),Object(h.a)(this,"draco",void 0),Object(h.a)(this,"decoder",void 0),Object(h.a)(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return Object(p.a)(t,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new this.draco.DecoderBuffer;n.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);var r=this.decoder.GetEncodedGeometryType(n),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var a;switch(r){case this.draco.TRIANGULAR_MESH:a=this.decoder.DecodeBufferToMesh(n,o);break;case this.draco.POINT_CLOUD:a=this.decoder.DecodeBufferToPointCloud(n,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!a.ok()||!o.ptr){var s="DRACO decompression failed: ".concat(a.error_msg());throw new Error(s)}var u=this._getDracoLoaderData(o,r,e),c=this._getMeshData(o,u,e),l=d(c.attributes),f=G(c.attributes,u,c.indices),p=Object(i.a)(Object(i.a)({loader:"draco",loaderData:u,header:{vertexCount:o.num_points(),boundingBox:l}},c),{},{schema:f});return p}finally{this.draco.destroy(n),o&&this.draco.destroy(o)}}},{key:"_getDracoLoaderData",value:function(t,e,n){var r=this._getTopLevelMetadata(t),i=this._getDracoAttributes(t,n);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:r,attributes:i}}},{key:"_getDracoAttributes",value:function(t,e){for(var n={},r=0;r<t.num_attributes();r++){var i=this.decoder.GetAttribute(t,r),o=this._getAttributeMetadata(t,r);n[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:r,metadata:o};var a=this._getQuantizationTransform(i,e);a&&(n[i.unique_id()].quantization_transform=a);var s=this._getOctahedronTransform(i,e);s&&(n[i.unique_id()].octahedron_transform=s)}return n}},{key:"_getMeshData",value:function(t,e,n){var r=this._getMeshAttributes(e,t,n);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return t instanceof this.draco.Mesh?"triangle-strip"===n.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(t),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(t),size:1}}:{topology:"point-list",mode:0,attributes:r}}},{key:"_getMeshAttributes",value:function(t,e,n){for(var r={},i=0,o=Object.values(t.attributes);i<o.length;i++){var a=o[i],s=this._deduceAttributeName(a,n);a.name=s;var u=this._getAttributeValues(e,a),c=u.value,l=u.size;r[s]={value:c,size:l,byteOffset:a.byte_offset,byteStride:a.byte_stride,normalized:a.normalized}}return r}},{key:"_getTriangleListIndices",value:function(t){var e=3*t.num_faces(),n=4*e,r=this.draco._malloc(n);try{return this.decoder.GetTrianglesUInt32Array(t,n,r),new Uint32Array(this.draco.HEAPF32.buffer,r,e).slice()}finally{this.draco._free(r)}}},{key:"_getTriangleStripIndices",value:function(t){var e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){for(var e=t.size(),n=new Int32Array(e),r=0;r<e;r++)n[r]=t.GetValue(r);return n}(e)}finally{this.draco.destroy(e)}}},{key:"_getAttributeValues",value:function(t,e){var n,r=z[e.data_type],i=e.num_components,o=t.num_points()*i,a=o*r.BYTES_PER_ELEMENT,s=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,r),u=this.draco._malloc(a);try{var c=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,c,s,a,u),n=new r(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:n,size:i}}},{key:"_deduceAttributeName",value:function(t,e){for(var n=t.unique_id,r=0,i=Object.entries(e.extraAttributes||{});r<i.length;r++){var o=Object(l.a)(i[r],2),a=o[0];if(o[1]===n)return a}var s=t.attribute_type;for(var u in H){if(this.draco[u]===s)return H[u]}var c=e.attributeNameEntry||"name";return t.metadata[c]?t.metadata[c].string:"CUSTOM_ATTRIBUTE_".concat(n)}},{key:"_getTopLevelMetadata",value:function(t){var e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}},{key:"_getAttributeMetadata",value:function(t,e){var n=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(n)}},{key:"_getDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var e={},n=this.metadataQuerier.NumEntries(t),r=0;r<n;r++){var i=this.metadataQuerier.GetEntryName(t,r);e[i]=this._getDracoMetadataField(t,i)}return e}},{key:"_getDracoMetadataField",value:function(t,e){var n=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,n);var r=function(t){for(var e=t.size(),n=new Int32Array(e),r=0;r<e;r++)n[r]=t.GetValue(r);return n}(n);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:r}}finally{this.draco.destroy(n)}}},{key:"_disableAttributeTransforms",value:function(t){var e,n=t.quantizedAttributes,r=void 0===n?[]:n,i=t.octahedronAttributes,o=void 0===i?[]:i,a=[].concat(Object(c.a)(r),Object(c.a)(o)),s=Object(u.a)(a);try{for(s.s();!(e=s.n()).done;){var l=e.value;this.decoder.SkipAttributeTransform(this.draco[l])}}catch(f){s.e(f)}finally{s.f()}}},{key:"_getQuantizationTransform",value:function(t,e){var n=this,r=e.quantizedAttributes,i=void 0===r?[]:r,o=t.attribute_type();if(i.map((function(t){return n.decoder[t]})).includes(o)){var a=new this.draco.AttributeQuantizationTransform;try{if(a.InitFromAttribute(t))return{quantization_bits:a.quantization_bits(),range:a.range(),min_values:new Float32Array([1,2,3]).map((function(t){return a.min_value(t)}))}}finally{this.draco.destroy(a)}}return null}},{key:"_getOctahedronTransform",value:function(t,e){var n=this,r=e.octahedronAttributes,i=void 0===r?[]:r,o=t.attribute_type();if(i.map((function(t){return n.decoder[t]})).includes(o)){var a=new this.draco.AttributeQuantizationTransform;try{if(a.InitFromAttribute(t))return{quantization_bits:a.quantization_bits()}}finally{this.draco.destroy(a)}}return null}}]),t}();var K,X=n(836),q="1.4.1",J="https://www.gstatic.com/draco/versioned/decoders/".concat(q,"/draco_decoder.js"),W="https://www.gstatic.com/draco/versioned/decoders/".concat(q,"/draco_wasm_wrapper.js"),Y="https://www.gstatic.com/draco/versioned/decoders/".concat(q,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat(q,"/javascript/draco_encoder.js");function Q(t){return $.apply(this,arguments)}function $(){return($=Object(r.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.modules||{},K=n.draco3d?K||n.draco3d.createDecoderModule({}).then((function(t){return{draco:t}})):K||tt(e),t.next=4,K;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){return et.apply(this,arguments)}function et(){return(et=Object(r.a)(a.a.mark((function t(e){var n,r,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.draco&&e.draco.decoderType,t.next="js"===t.t0?3:(t.t0,7);break;case 3:return t.next=5,Object(X.a)(J,"draco",e);case 5:return n=t.sent,t.abrupt("break",21);case 7:return t.t1=Promise,t.next=10,Object(X.a)(W,"draco",e);case 10:return t.t2=t.sent,t.next=13,Object(X.a)(Y,"draco",e);case 13:return t.t3=t.sent,t.t4=[t.t2,t.t3],t.next=17,t.t1.all.call(t.t1,t.t4);case 17:i=t.sent,o=Object(l.a)(i,2),n=o[0],r=o[1];case 21:return n=n||globalThis.DracoDecoderModule,t.next=24,nt(n,r);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t,e){var n={};return e&&(n.wasmBinary=e),new Promise((function(e){t(Object(i.a)(Object(i.a)({},n),{},{onModuleLoaded:function(t){return e({draco:t})}}))}))}var rt=Object(i.a)(Object(i.a)({},s),{},{parse:function(t,e){return it.apply(this,arguments)}});function it(){return(it=Object(r.a)(a.a.mark((function t(e,n){var r,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(n);case 2:return r=t.sent,i=r.draco,o=new V(i),t.prev=5,t.abrupt("return",o.parseSync(e,null===n||void 0===n?void 0:n.draco));case 7:return t.prev=7,o.destroy(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))).apply(this,arguments)}},740:function(t,e,n){"use strict";n.d(e,"a",(function(){return Q}));var r=n(5),i=n(7),o=n(6),a=n(21),s=n(20),u=n(14),c=n(15),l=n(491),f=n(490),p=n(35),h=n(275),d=n(17),y=n(846),g=n(88),m=n(97),v=n(86),_=n(23),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id;this.id=n||Object(v.c)(this.constructor.name),this.display=!0,this.position=new g.a,this.rotation=new g.a,this.scale=new g.a(1,1,1),this.matrix=new m.a,this.userData={},this.props={},this._setScenegraphNodeProps(e)}return Object(o.a)(t,[{key:"delete",value:function(){}},{key:"setProps",value:function(t){return this._setScenegraphNodeProps(t),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(t){return Object(_.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return Object(_.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return Object(_.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrix",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.matrix.copy(t):this.matrix=t}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,r=t.scale,i=t.update,o=void 0===i||i;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,r=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){Object(_.a)(t),e=e||this.matrix;var n=new m.a(t).multiplyRight(e),r=n.invert(),i=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"_setScenegraphNodeProps",value:function(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}]),t}(),E=n(62),A=n(110),C=n(10),S=n(19),O=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,n);var o=r=Array.isArray(r)?{children:r}:r,a=o.children,s=void 0===a?[]:a;return d.k.assert(s.every((function(t){return t instanceof b})),"every child must an instance of ScenegraphNode"),(t=e.call(this,r)).children=s,t}return Object(o.a)(n,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];Array.isArray(o)?this.add.apply(this,Object(S.a)(o)):this.children.push(o)}return this}},{key:"remove",value:function(t){var e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach((function(t){return t.delete()})),this.removeAll(),Object(a.a)(Object(s.a)(n.prototype),"delete",this).call(this)}},{key:"traverse",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.worldMatrix,o=void 0===i?new m.a:i,a=new m.a(o).multiplyRight(this.matrix),s=Object(C.a)(this.children);try{for(s.s();!(e=s.n()).done;){var u=e.value;u instanceof n?u.traverse(t,{worldMatrix:a}):t(u,{worldMatrix:a})}}catch(c){s.e(c)}finally{s.f()}}}]),n}(b),T=n(230),L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},I={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function w(t){if(!t._animation){var e=I[t.componentType],n=L[t.type],r=n*t.count,i=t.bufferView.data,o=new e(i.buffer,i.byteOffset+(t.byteOffset||0),r);if(1===n)t._animation=Array.from(o);else{for(var a=[],s=0;s<o.length;s+=n)a.push(Array.from(o.slice(s,s+n)));t._animation=a}}return t._animation}var P=new m.a;var R=new T.a;function M(t,e,n,r){var i=e.input,o=e.interpolation,a=e.output,s=t%i[i.length-1],u=i.findIndex((function(t){return t>=s})),c=Math.max(0,u-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:d.k.warn("Bad animation path ".concat(r))()}Object(_.a)(n[r].length===a[c].length);var l=i[c],f=i[u];switch(o){case"STEP":!function(t,e,n){for(var r=0;r<n.length;r++)t[e][r]=n[r]}(n,r,a[c]);break;case"LINEAR":if(f>l){var p=(s-l)/(f-l);!function(t,e,n,r,i){if("rotation"===e){R.slerp({start:n,target:r,ratio:i});for(var o=0;o<R.length;o++)t[e][o]=R[o]}else for(var a=0;a<n.length;a++)t[e][a]=i*r[a]+(1-i)*n[a]}(n,r,a[c],a[u],p)}break;case"CUBICSPLINE":if(f>l){var h=(s-l)/(f-l),y=f-l;!function(t,e,n){for(var r=n.p0,i=n.outTangent0,o=n.inTangent1,a=n.p1,s=n.tDiff,u=n.ratio,c=0;c<t[e].length;c++){var l=i[c]*s,f=o[c]*s;t[e][c]=(2*Math.pow(u,3)-3*Math.pow(u,2)+1)*r[c]+(Math.pow(u,3)-2*Math.pow(u,2)+u)*l+(-2*Math.pow(u,3)+3*Math.pow(u,2))*a[c]+(Math.pow(u,3)-Math.pow(u,2))*f}}(n,r,{p0:a[3*c+1],outTangent0:a[3*c+2],inTangent1:a[3*u+0],p1:a[3*u+1],tDiff:y,ratio:h})}break;default:d.k.warn("Interpolation ".concat(o," not supported"))()}}var x=function(){function t(e){Object(i.a)(this,t),this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}return Object(o.a)(t,[{key:"animate",value:function(t){if(this.playing){var e=(t/1e3-this.startTime)*this.speed;this.channels.forEach((function(t){var n=t.sampler,r=t.target,i=t.path;M(e,n,r,i),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){var n=P.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)}))}}}]),t}(),N=function(){function t(e){Object(i.a)(this,t),this.animations=e.animations.map((function(t,n){var r=t.name||"Animation-".concat(n),i=t.samplers.map((function(t){var n=t.input,r=t.interpolation,i=void 0===r?"LINEAR":r,o=t.output;return{input:w(e.accessors[n]),interpolation:i,output:w(e.accessors[o])}})),o=t.channels.map((function(t){var n=t.sampler,r=t.target;return{sampler:i[n],target:e.nodes[r.node],path:r.path}}));return new x({name:r,channels:o})}))}return Object(o.a)(t,[{key:"animate",value:function(t){this.setTime(t)}},{key:"setTime",value:function(t){this.animations.forEach((function(e){return e.animate(t)}))}},{key:"getAnimations",value:function(){return this.animations}}]),t}(),D=n(295),B=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,n),(r=e.call(this,o)).onBeforeRender=null,r.AfterRender=null,t instanceof D.a?(r.model=t,r._setModelNodeProps(o)):r.model=new D.a(t,o),r.managedResources=o.managedResources||[],r}return Object(o.a)(n,[{key:"setProps",value:function(t){return Object(a.a)(Object(s.a)(n.prototype),"setProps",this).call(this,t),this._setModelNodeProps(t),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((function(t){return t.delete()})),this.managedResources=[]}},{key:"draw",value:function(){var t;return(t=this.model).draw.apply(t,arguments)}},{key:"setUniforms",value:function(){var t;return(t=this.model).setUniforms.apply(t,arguments),this}},{key:"setAttributes",value:function(){var t;return(t=this.model).setAttributes.apply(t,arguments),this}},{key:"updateModuleSettings",value:function(){var t;return(t=this.model).updateModuleSettings.apply(t,arguments),this}},{key:"_setModelNodeProps",value:function(t){this.model.setProps(t)}}]),n}(b),F=n(813);function j(t,e){return Object(d.j)(t)?"#version 300 es\n".concat(e):e}var k={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},G={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},U=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.gl=e,this.options=Object.assign({},G,n)}return Object(o.a)(t,[{key:"instantiate",value:function(t){var e=this;return this.gltf=t,(t.scenes||[]).map((function(t){return e.createScene(t)}))}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new N(this.gltf):null}},{key:"createScene",value:function(t){var e=this,n=(t.nodes||[]).map((function(t){return e.createNode(t)}));return new O({id:t.name||t.id,children:n})}},{key:"createNode",value:function(t){var e=this;if(!t._node){var n=(t.children||[]).map((function(t){return e.createNode(t)}));t.mesh&&n.push(this.createMesh(t.mesh));var r=new O({id:t.name||t.id,children:n});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){var i=(new m.a).fromQuaternion(t.rotation);r.matrix.multiplyRight(i)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}},{key:"createMesh",value:function(t){var e=this;if(!t._mesh){var n=(t.primitives||[]).map((function(n,r){return e.createPrimitive(n,r,t)})),r=new O({id:t.name||t.id,children:n});t._mesh=r}return t._mesh}},{key:"getVertexCount",value:function(t){d.k.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(t,e,n){return function(t,e){var n=e.id,r=e.drawMode,i=e.vertexCount,o=e.attributes,a=e.modelOptions,s=new F.a(t,e);d.k.info(4,"createGLTFModel defines: ",s.defines)();var u=[];u.push.apply(u,Object(S.a)(s.generatedTextures)),u.push.apply(u,Object(S.a)(Object.values(o).map((function(t){return t.buffer}))));var c=new B(t,Object.assign({id:n,drawMode:r,vertexCount:i,modules:[y.a],defines:s.defines,parameters:s.parameters,vs:j(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:j(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:u},a));return c.setProps({attributes:o}),c.setUniforms(s.uniforms),c}(this.gl,Object.assign({id:t.name||"".concat(n.name||n.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options))}},{key:"createAttributes",value:function(t,e){var n=this,r={};return Object.keys(t).forEach((function(e){r[e]=n.createAccessor(t[e],n.createBuffer(t[e],n.gl.ARRAY_BUFFER))})),e&&(r.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),d.k.info(4,"glTF Attributes",{attributes:t,indices:e,generated:r})(),r}},{key:"createBuffer",value:function(t,e){t.bufferView||(t.bufferView={});var n=t.bufferView;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[e]||(n.lumaBuffers[e]=new E.a(this.gl,{id:"from-".concat(n.id),data:n.data||t.value,target:e})),n.lumaBuffers[e]}},{key:"createAccessor",value:function(t,e){return new A.a({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:k[t.type]})}},{key:"createSampler",value:function(t){return t}},{key:"needsPOT",value:function(){return!1}}]),t}();var Z=n(840),H=n(28),z=n(16),V=n.n(z);function K(){return(K=Object(H.a)(V.a.mark((function t(e){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.scenes.forEach((function(t){t.traverse((function(t){Object.values(t.model.getUniforms()).forEach((function(t){!1===t.loaded&&n.push(t)}))}))})),t.next=4,X((function(){return n.some((function(t){return!t.loaded}))}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function X(t){return q.apply(this,arguments)}function q(){return(q=Object(H.a)(V.a.mark((function t(e){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e()){t.next=5;break}return t.next=3,new Promise((function(t){return requestAnimationFrame(t)}));case 3:t.next=0;break;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J=n(734),W=[255,255,255,255],Y={scenegraph:{type:"object",value:null,async:!0},getScene:function(t){return t&&t.scenes?"object"===typeof t.scene?t.scene:t.scenes[t.scene||0]:t},getAnimator:function(t){return t&&t.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:W},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Z.a]},Q=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getShaders",value:function(){var t=[l.a,f.a];return"pbr"===this.props._lighting&&t.push(y.a),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:W,transition:!0},instanceModelMatrix:J.a})}},{key:"updateState",value:function(t){Object(a.a)(Object(s.a)(n.prototype),"updateState",this).call(this,t);var e=t.props,r=t.oldProps;e.scenegraph!==r.scenegraph?this._updateScenegraph(e):e._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,e._animations)}},{key:"finalizeState",value:function(){Object(a.a)(Object(s.a)(n.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(t){var e=this,n=this.context.gl,i=null;if(t.scenegraph instanceof b)i={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){var o=t.scenegraph,a=function(t,e,n){var r=new U(t,n);return{scenes:r.instantiate(e),animator:r.createAnimator()}}(n,o,this._getModelOptions());i=Object(r.a)({gltf:o},a),function(t){return K.apply(this,arguments)}(a).then((function(){return e.setNeedsRedraw()}))}else t.scenegraph&&(p.a.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=t.scenegraph);var s={layer:this,gl:n},u=t.getScene(i,s),c=t.getAnimator(i,s);u instanceof b?(this._deleteScenegraph(),this._applyAllAttributes(u),this._applyAnimationsProp(u,c,t._animations),this.setState({scenegraph:u,animator:c})):null!==u&&p.a.warn("invalid scenegraph:",u)()}},{key:"_applyAllAttributes",value:function(t){var e=this;if(this.state.attributesAvailable){var n=this.getAttributeManager().getAttributes();t.traverse((function(t){e._setModelAttributes(t.model,n)}))}}},{key:"_applyAnimationsProp",value:function(t,e,n){if(t&&e&&n){var r=e.getAnimations();Object.keys(n).sort().forEach((function(t){var e=n[t];if("*"===t)r.forEach((function(t){Object.assign(t,e)}));else if(Number.isFinite(Number(t))){var i=Number(t);i>=0&&i<r.length?Object.assign(r[i],e):p.a.warn("animation ".concat(t," not found"))()}else{var o=r.find((function(e){return e.name===t}));o?Object.assign(o,e):p.a.warn("animation ".concat(t," not found"))()}}))}}},{key:"_deleteScenegraph",value:function(){var t=this.state.scenegraph;t instanceof b&&t.delete()}},{key:"_getModelOptions",value:function(){var t=this.props._imageBasedLightingEnvironment,e=null;return t&&(e="function"===typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:e,modelOptions:Object(r.a)({isInstanced:!0,transpileToGLSL100:!Object(d.j)(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(t){var e=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((function(n){e._setModelAttributes(n.model,t)}))}},{key:"draw",value:function(t){var e=t.moduleParameters,n=void 0===e?null:e,r=t.parameters,i=void 0===r?{}:r,o=t.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(o.timeline.getTime()),this.setNeedsRedraw());var a=this.context.viewport,s=this.props,u=s.sizeScale,c=s.sizeMinPixels,l=s.sizeMaxPixels,f=s.opacity,p=s.coordinateSystem,h=this.getNumInstances();this.state.scenegraph.traverse((function(t,e){var r=e.worldMatrix;t.model.setInstanceCount(h),t.updateModuleSettings(n),t.draw({parameters:i,uniforms:{sizeScale:u,opacity:f,sizeMinPixels:c,sizeMaxPixels:l,composeModelMatrix:Object(J.b)(a,p),sceneModelMatrix:r,u_Camera:t.model.getUniforms().project_uCameraPosition}})}))}}}]),n}(h.a);Q.layerName="ScenegraphLayer",Q.defaultProps=Y},741:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(5),i=n(7),o=n(6),a=n(21),s=n(20),u=n(14),c=n(15),l=n(491),f=n(490),p=n(31),h=n(275),d=n(295),y=n(245),g=[0,0,0,255],m={getSourcePosition:{type:"accessor",value:function(t){return t.sourcePosition}},getTargetPosition:{type:"accessor",value:function(t){return t.targetPosition}},getSourceColor:{type:"accessor",value:g},getTargetColor:{type:"accessor",value:g},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},v=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getShaders",value:function(){return Object(a.a)(Object(s.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  if (dh == 0.0) {\n    return sourceZ + deltaZ * ratio;\n  }\n  float unitZ = deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[l.a,f.a]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:g},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:g},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(a.a)(Object(s.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o,u=this.context.gl;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(u),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.widthUnits,i=n.widthScale,o=n.widthMinPixels,a=n.widthMaxPixels,s=n.greatCircle,u=n.wrapLongitude;this.state.model.setUniforms(e).setUniforms({greatCircle:s,widthUnits:p.e[r],widthScale:i,widthMinPixels:o,widthMaxPixels:a,useShortestPath:u}).draw()}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<50;n++)e=e.concat([n,1,0,n,-1,0]);var i=new d.a(t,Object(r.a)(Object(r.a)({},this.getShaders()),{},{id:this.props.id,geometry:new y.a({drawMode:5,attributes:{positions:new Float32Array(e)}}),isInstanced:!0}));return i.setUniforms({numSegments:50}),i}}]),n}(h.a);v.layerName="ArcLayer",v.defaultProps=m},742:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(5),i=n(7),o=n(6),a=n(21),s=n(20),u=n(14),c=n(15),l=n(491),f=n(505),p=n(490),h=n(31),d=n(275),y=n(295),g=n(245),m=[0,0,0,255],v=[0,0,1],_={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(t){return t.position}},getNormal:{type:"accessor",value:v},getColor:{type:"accessor",value:m},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};var b=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getShaders",value:function(){return Object(a.a)(Object(s.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\nuniform int sizeUnits;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[l.a,f.a,p.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:v},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:m}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(a.a)(Object(s.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o,u=this.context.gl;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(u),this.getAttributeManager().invalidateAll()}i.dataChanged&&function(t){var e=t.header,n=t.attributes;e&&n&&(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}(e.data)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.pointSize,i=n.sizeUnits;this.state.model.setUniforms(e).setUniforms({sizeUnits:h.e[i],radiusPixels:r}).draw()}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<3;n++){var i=n/3*Math.PI*2;e.push(2*Math.cos(i),2*Math.sin(i),0)}return new y.a(t,Object(r.a)(Object(r.a)({},this.getShaders()),{},{id:this.props.id,geometry:new g.a({drawMode:4,attributes:{positions:new Float32Array(e)}}),isInstanced:!0}))}}]),n}(d.a);b.layerName="PointCloudLayer",b.defaultProps=_},743:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(5),i=n(7),o=n(6),a=n(21),s=n(20),u=n(14),c=n(15),l=n(35),f=n(491),p=n(505),h=n(490),d=n(275),y=n(245),g=n(17),m=n(202),v=n(295),_=n(588),b=n(357),E=n(734);function A(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),l.a.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function C(t,e){if(t.attributes)return A(t.attributes,e),t instanceof y.a?t:new y.a(t);if(t.positions||t.POSITION)return A(t,e),new y.a({attributes:t});throw Error("Invalid mesh")}var S={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},O=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getShaders",value:function(){var t=!Object(g.j)(this.context.gl),e={};return Object(_.b)(this.context.gl,b.a.GLSL_DERIVATIVES)&&(e.DERIVATIVES_AVAILABLE=1),Object(a.a)(Object(s.a)(n.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[f.a,p.b,h.a],transpileToGLSL100:t,defines:e})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:E.a}),this.setState({emptyTexture:new m.a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(a.a)(Object(s.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),e.mesh!==r.mesh||i.extensionsChanged){if(this.state.model&&this.state.model.delete(),e.mesh){this.state.model=this.getModel(e.mesh);var o=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==r.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){Object(a.a)(Object(s.a)(n.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete()}},{key:"draw",value:function(t){var e=t.uniforms;if(this.state.model){var n=this.context.viewport,r=this.props,i=r.sizeScale,o=r.coordinateSystem,a=r._instanced;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!a||Object(E.b)(n,o),flatShading:!this.state.hasNormals}).draw()}}},{key:"getModel",value:function(t){var e=new v.a(this.context.gl,Object(r.a)(Object(r.a)({},this.getShaders()),{},{id:this.props.id,geometry:C(t,this.props._useMeshColors),isInstanced:!0})),n=this.props.texture,i=this.state.emptyTexture;return e.setUniforms({sampler:n||i,hasTexture:Boolean(n)}),e}},{key:"setTexture",value:function(t){var e=this.state,n=e.emptyTexture,r=e.model;r&&r.setUniforms({sampler:t||n,hasTexture:Boolean(t)})}}]),n}(d.a);O.layerName="SimpleMeshLayer",O.defaultProps=S},753:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Locale=void 0;var r=n(206),i=n(681),o=n(711),a=(0,r.__importDefault)(n(757)),s=["ca","co","hc","kf","kn","nu"],u=/^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;function c(t,e,n,i,o){return void 0===i&&(i=[]),o?{lang:t&&"und"!==t?t:o.lang,script:e||o.script,region:n||o.region,variants:(0,r.__spreadArray)((0,r.__spreadArray)([],i,!0),o.variants,!0)}:{lang:t||"und",script:e,region:n,variants:i}}function l(t){var e=(0,o.parseUnicodeLocaleId)(t),n=e.lang,r=n.lang,i=n.script,a=n.region,s=n.variants;if(i&&a){var u=o.likelySubtags[(0,o.emitUnicodeLanguageId)({lang:r,script:i,region:a,variants:[]})];if(u){var l=(0,o.parseUnicodeLanguageId)(u);return e.lang=c(void 0,void 0,void 0,s,l),(0,o.emitUnicodeLocaleId)(e)}}if(i){var f=o.likelySubtags[(0,o.emitUnicodeLanguageId)({lang:r,script:i,variants:[]})];if(f){var p=(0,o.parseUnicodeLanguageId)(f);return e.lang=c(void 0,void 0,a,s,p),(0,o.emitUnicodeLocaleId)(e)}}if(a){var h=o.likelySubtags[(0,o.emitUnicodeLanguageId)({lang:r,region:a,variants:[]})];if(h){var d=(0,o.parseUnicodeLanguageId)(h);return e.lang=c(void 0,i,void 0,s,d),(0,o.emitUnicodeLocaleId)(e)}}var y=o.likelySubtags[r]||o.likelySubtags[(0,o.emitUnicodeLanguageId)({lang:"und",script:i,variants:[]})];if(!y)throw new Error("No match for addLikelySubtags");var g=(0,o.parseUnicodeLanguageId)(y);return e.lang=c(void 0,i,a,s,g),(0,o.emitUnicodeLocaleId)(e)}var f=function(){function t(e,n){if(!(this&&this instanceof t?this.constructor:void 0))throw new TypeError("Intl.Locale must be called with 'new'");var s,c=t.relevantExtensionKeys,l=["initializedLocale","locale","calendar","collation","hourCycle","numberingSystem"];if(c.indexOf("kf")>-1&&l.push("caseFirst"),c.indexOf("kn")>-1&&l.push("numeric"),void 0===e)throw new TypeError("First argument to Intl.Locale constructor can't be empty or missing");if("string"!==typeof e&&"object"!==typeof e)throw new TypeError("tag must be a string or object");e="object"===typeof e&&(s=(0,a.default)(e))&&s.initializedLocale?s.locale:e.toString(),s=(0,a.default)(this);var f=(0,i.CoerceOptionsToObject)(n);e=function(t,e){(0,i.invariant)("string"===typeof t,"language tag must be a string"),(0,i.invariant)((0,o.isStructurallyValidLanguageTag)(t),"malformed language tag",RangeError);var n=(0,i.GetOption)(e,"language","string",void 0,void 0);void 0!==n&&(0,i.invariant)((0,o.isUnicodeLanguageSubtag)(n),"Malformed unicode_language_subtag",RangeError);var a=(0,i.GetOption)(e,"script","string",void 0,void 0);void 0!==a&&(0,i.invariant)((0,o.isUnicodeScriptSubtag)(a),"Malformed unicode_script_subtag",RangeError);var s=(0,i.GetOption)(e,"region","string",void 0,void 0);void 0!==s&&(0,i.invariant)((0,o.isUnicodeRegionSubtag)(s),"Malformed unicode_region_subtag",RangeError);var u=(0,o.parseUnicodeLanguageId)(t);return void 0!==n&&(u.lang=n),void 0!==a&&(u.script=a),void 0!==s&&(u.region=s),Intl.getCanonicalLocales((0,o.emitUnicodeLocaleId)((0,r.__assign)((0,r.__assign)({},(0,o.parseUnicodeLocaleId)(t)),{lang:u})))[0]}(e,f);var p=Object.create(null),h=(0,i.GetOption)(f,"calendar","string",void 0,void 0);if(void 0!==h&&!u.test(h))throw new RangeError("invalid calendar");p.ca=h;var d=(0,i.GetOption)(f,"collation","string",void 0,void 0);if(void 0!==d&&!u.test(d))throw new RangeError("invalid collation");p.co=d;var y=(0,i.GetOption)(f,"hourCycle","string",["h11","h12","h23","h24"],void 0);p.hc=y;var g=(0,i.GetOption)(f,"caseFirst","string",["upper","lower","false"],void 0);p.kf=g;var m,v=(0,i.GetOption)(f,"numeric","boolean",void 0,void 0);void 0!==v&&(m=String(v)),p.kn=m;var _=(0,i.GetOption)(f,"numberingSystem","string",void 0,void 0);if(void 0!==_&&!u.test(_))throw new RangeError("Invalid numberingSystem");p.nu=_;var b=function(t,e,n){for(var r,a=[],s=(0,o.parseUnicodeLocaleId)(t),u=0,c=s.extensions;u<c.length;u++){var l=c[u];"u"===l.type&&(r=l,Array.isArray(l.keywords)&&(a=l.keywords))}for(var f=Object.create(null),p=0,h=n;p<h.length;p++){for(var d=h[p],y=void 0,g=void 0,m=0,v=a;m<v.length;m++){var _=v[m];_[0]===d&&(y=(g=_)[1])}(0,i.invariant)(d in e,"".concat(d," must be in options"));var b=e[d];void 0!==b&&((0,i.invariant)("string"===typeof b,"Value for ".concat(d," must be a string")),y=b,g?g[1]=y:a.push([d,y])),f[d]=y}return r?r.keywords=a:a.length&&s.extensions.push({type:"u",keywords:a,attributes:[]}),f.locale=Intl.getCanonicalLocales((0,o.emitUnicodeLocaleId)(s))[0],f}(e,p,c);s.locale=b.locale,s.calendar=b.ca,s.collation=b.co,s.hourCycle=b.hc,c.indexOf("kf")>-1&&(s.caseFirst=b.kf),c.indexOf("kn")>-1&&(s.numeric=(0,i.SameValue)(b.kn,"true")),s.numberingSystem=b.nu}return t.prototype.maximize=function(){var e=(0,a.default)(this).locale;try{return new t(l(e))}catch(n){return new t(e)}},t.prototype.minimize=function(){var e=(0,a.default)(this).locale;try{return new t(function(t){var e=l(t);if(!e)return t;e=(0,o.emitUnicodeLanguageId)((0,r.__assign)((0,r.__assign)({},(0,o.parseUnicodeLanguageId)(e)),{variants:[]}));var n=(0,o.parseUnicodeLocaleId)(t),i=n.lang,a=i.lang,s=i.script,u=i.region,f=i.variants;return l((0,o.emitUnicodeLanguageId)({lang:a,variants:[]}))===e?(0,o.emitUnicodeLocaleId)((0,r.__assign)((0,r.__assign)({},n),{lang:c(a,void 0,void 0,f)})):u&&l((0,o.emitUnicodeLanguageId)({lang:a,region:u,variants:[]}))===e?(0,o.emitUnicodeLocaleId)((0,r.__assign)((0,r.__assign)({},n),{lang:c(a,void 0,u,f)})):s&&l((0,o.emitUnicodeLanguageId)({lang:a,script:s,variants:[]}))===e?(0,o.emitUnicodeLocaleId)((0,r.__assign)((0,r.__assign)({},n),{lang:c(a,s,void 0,f)})):t}(e))}catch(n){return new t(e)}},t.prototype.toString=function(){return(0,a.default)(this).locale},Object.defineProperty(t.prototype,"baseName",{get:function(){var t=(0,a.default)(this).locale;return(0,o.emitUnicodeLanguageId)((0,o.parseUnicodeLanguageId)(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calendar",{get:function(){return(0,a.default)(this).calendar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collation",{get:function(){return(0,a.default)(this).collation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hourCycle",{get:function(){return(0,a.default)(this).hourCycle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caseFirst",{get:function(){return(0,a.default)(this).caseFirst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numeric",{get:function(){return(0,a.default)(this).numeric},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberingSystem",{get:function(){return(0,a.default)(this).numberingSystem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var t=(0,a.default)(this).locale;return(0,o.parseUnicodeLanguageId)(t).lang},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"script",{get:function(){var t=(0,a.default)(this).locale;return(0,o.parseUnicodeLanguageId)(t).script},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){var t=(0,a.default)(this).locale;return(0,o.parseUnicodeLanguageId)(t).region},enumerable:!1,configurable:!0}),t.relevantExtensionKeys=s,t}();e.Locale=f;try{"undefined"!==typeof Symbol&&Object.defineProperty(f.prototype,Symbol.toStringTag,{value:"Intl.Locale",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype.constructor,"length",{value:1,writable:!1,enumerable:!1,configurable:!0})}catch(p){}e.default=f},754:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canonicalizeUnicodeLocaleId=e.canonicalizeUnicodeLanguageId=void 0;var r=n(206),i=n(755),o=n(692),a=n(712),s=n(693);function u(t){for(var e={},n=[],r=0,i=t;r<i.length;r++){var o=i[r];o[0]in e||(e[o[0]]=1,o[1]&&"true"!==o[1]?n.push([o[0].toLowerCase(),o[1].toLowerCase()]):n.push([o[0].toLowerCase()]))}return n.sort(c)}function c(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0}function l(t,e){return t.type<e.type?-1:t.type>e.type?1:0}function f(t,e){for(var n=(0,r.__spreadArray)([],t,!0),i=0,o=e;i<o.length;i++){var a=o[i];t.indexOf(a)<0&&n.push(a)}return n}function p(t){var e=t;if(t.variants.length)for(var n="",r=0,u=t.variants;r<u.length;r++){var c=u[r];if(n=i.languageAlias[(0,s.emitUnicodeLanguageId)({lang:t.lang,variants:[c]})]){e={lang:(h=(0,o.parseUnicodeLanguageId)(n.split(o.SEPARATOR))).lang,script:e.script||h.script,region:e.region||h.region,variants:f(e.variants,h.variants)};break}}if(e.script&&e.region){var l=i.languageAlias[(0,s.emitUnicodeLanguageId)({lang:e.lang,script:e.script,region:e.region,variants:[]})];if(l)e={lang:(h=(0,o.parseUnicodeLanguageId)(l.split(o.SEPARATOR))).lang,script:h.script,region:h.region,variants:e.variants}}if(e.region){var p=i.languageAlias[(0,s.emitUnicodeLanguageId)({lang:e.lang,region:e.region,variants:[]})];if(p)e={lang:(h=(0,o.parseUnicodeLanguageId)(p.split(o.SEPARATOR))).lang,script:e.script||h.script,region:h.region,variants:e.variants}}var h,d=i.languageAlias[(0,s.emitUnicodeLanguageId)({lang:e.lang,variants:[]})];d&&(e={lang:(h=(0,o.parseUnicodeLanguageId)(d.split(o.SEPARATOR))).lang,script:e.script||h.script,region:e.region||h.region,variants:e.variants});if(e.region){var y=e.region.toUpperCase(),g=i.territoryAlias[y],m=void 0;if(g){var v=g.split(" ");m=v[0];var _=a.likelySubtags[(0,s.emitUnicodeLanguageId)({lang:e.lang,script:e.script,variants:[]})];if(_){var b=(0,o.parseUnicodeLanguageId)(_.split(o.SEPARATOR)).region;b&&v.indexOf(b)>-1&&(m=b)}}m&&(e.region=m),e.region=e.region.toUpperCase()}if(e.script&&(e.script=e.script[0].toUpperCase()+e.script.slice(1).toLowerCase(),i.scriptAlias[e.script]&&(e.script=i.scriptAlias[e.script])),e.variants.length){for(var E=0;E<e.variants.length;E++){c=e.variants[E].toLowerCase();if(i.variantAlias[c]){var A=i.variantAlias[c];(0,o.isUnicodeVariantSubtag)(A)?e.variants[E]=A:(0,o.isUnicodeLanguageSubtag)(A)&&(e.lang=A)}}e.variants.sort()}return e}e.canonicalizeUnicodeLanguageId=p,e.canonicalizeUnicodeLocaleId=function(t){if(t.lang=p(t.lang),t.extensions){for(var e=0,n=t.extensions;e<n.length;e++){var r=n[e];switch(r.type){case"u":r.keywords=u(r.keywords),r.attributes&&(r.attributes=(i=r.attributes,Object.keys(i.reduce((function(t,e){return t[e.toLowerCase()]=1,t}),{})).sort()));break;case"t":r.lang&&(r.lang=p(r.lang)),r.fields=u(r.fields);break;default:r.value=r.value.toLowerCase()}}t.extensions.sort(l)}var i;return t}},755:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.variantAlias=e.scriptAlias=e.territoryAlias=e.languageAlias=void 0,e.languageAlias={"aa-saaho":"ssy",aam:"aas",aar:"aa",abk:"ab",adp:"dz",afr:"af",agp:"apf",ais:"ami",aju:"jrb",aka:"ak",alb:"sq",als:"sq",amh:"am",ara:"ar",arb:"ar",arg:"an",arm:"hy","art-lojban":"jbo",asd:"snz",asm:"as",aue:"ktz",ava:"av",ave:"ae",aym:"ay",ayr:"ay",ayx:"nun",aze:"az",azj:"az",bak:"ba",bam:"bm",baq:"eu",baz:"nvo",bcc:"bal",bcl:"bik",bel:"be",ben:"bn",bgm:"bcg",bh:"bho",bhk:"fbl",bic:"bir",bih:"bho",bis:"bi",bjd:"drl",bjq:"bzc",bkb:"ebk",blg:"iba",bod:"bo",bos:"bs",bre:"br",btb:"beb",bul:"bg",bur:"my",bxk:"luy",bxr:"bua",cat:"ca",ccq:"rki","cel-gaulish":"xtg",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cjr:"mom",cka:"cmr",cld:"syr",cmk:"xch",cmn:"zh",cnr:"sr-ME",cor:"kw",cos:"co",coy:"pij",cqu:"quh",cre:"cr",cwd:"cr",cym:"cy",cze:"cs",daf:"dnj",dan:"da",dap:"njz",deu:"de",dgo:"doi",dhd:"mwr",dik:"din",diq:"zza",dit:"dif",div:"dv",djl:"dze",dkl:"aqd",drh:"mn",drr:"kzk",drw:"fa-AF",dud:"uth",duj:"dwu",dut:"nl",dwl:"dbt",dzo:"dz",ekk:"et",ell:"el",elp:"amq",emk:"man","en-GB-oed":"en-GB-oxendict",eng:"en",epo:"eo",esk:"ik",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fat:"ak",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",fuc:"ff",ful:"ff",gav:"dev",gaz:"om",gbc:"wny",gbo:"grb",geo:"ka",ger:"de",gfx:"vaj",ggn:"gvr",ggo:"esg",ggr:"gtu",gio:"aou",gla:"gd",gle:"ga",glg:"gl",gli:"kzk",glv:"gv",gno:"gon",gre:"el",grn:"gn",gti:"nyc",gug:"gn",guj:"gu",guv:"duz",gya:"gba",hat:"ht",hau:"ha",hbs:"sr-Latn",hdn:"hai",hea:"hmn",heb:"he",her:"hz",him:"srx",hin:"hi",hmo:"ho",hrr:"jal",hrv:"hr",hun:"hu","hy-arevmda":"hyw",hye:"hy","i-ami":"ami","i-bnn":"bnn","i-default":"en-x-i-default","i-enochian":"und-x-i-enochian","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":"see-x-i-mingo","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu",ibi:"opa",ibo:"ig",ice:"is",ido:"io",iii:"ii",ike:"iu",iku:"iu",ile:"ie",ill:"ilm",ilw:"gal",in:"id",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",iw:"he",izi:"eza",jar:"jgk",jav:"jv",jeg:"oyb",ji:"yi",jpn:"ja",jw:"jv",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",kdv:"zkd",kgc:"tdf",kgd:"ncq",kgh:"kml",khk:"mn",khm:"km",kik:"ki",kin:"rw",kir:"ky",kmr:"ku",knc:"kr",kng:"kg",knn:"kok",koj:"kwv",kom:"kv",kon:"kg",kor:"ko",kpp:"jkm",kpv:"kv",krm:"bmf",ktr:"dtp",kua:"kj",kur:"ku",kvs:"gdj",kwq:"yam",kxe:"tvd",kxl:"kru",kzh:"dgl",kzj:"dtp",kzt:"dtp",lao:"lo",lat:"la",lav:"lv",lbk:"bnc",leg:"enl",lii:"raq",lim:"li",lin:"ln",lit:"lt",llo:"ngt",lmm:"rmx",ltz:"lb",lub:"lu",lug:"lg",lvs:"lv",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",meg:"cir",mgx:"jbk",mhr:"chm",mkd:"mk",mlg:"mg",mlt:"mt",mnk:"man",mnt:"wnn",mo:"ro",mof:"xnt",mol:"ro",mon:"mn",mri:"mi",msa:"ms",mst:"mry",mup:"raj",mwd:"dmw",mwj:"vaj",mya:"my",myd:"aog",myt:"mry",nad:"xny",nau:"na",nav:"nv",nbf:"nru",nbl:"nr",nbx:"ekc",ncp:"kdz",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nln:"azd",nlr:"nrk",nno:"nn",nns:"nbr",nnx:"ngv","no-bok":"nb","no-bokmal":"nb","no-nyn":"nn","no-nynorsk":"nn",nob:"nb",noo:"dtd",nor:"no",npi:"ne",nts:"pij",nxu:"bpp",nya:"ny",oci:"oc",ojg:"oj",oji:"oj",ori:"or",orm:"om",ory:"or",oss:"os",oun:"vaj",pan:"pa",pat:"kxr",pbu:"ps",pcr:"adx",per:"fa",pes:"fa",pli:"pi",plt:"mg",pmc:"huw",pmu:"phr",pnb:"lah",pol:"pl",por:"pt",ppa:"bfy",ppr:"lcq",prs:"fa-AF",pry:"prt",pus:"ps",puz:"pub",que:"qu",quz:"qu",rmr:"emx",rmy:"rom",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sap:"aqt",sca:"hle",scc:"sr",scr:"hr",sgl:"isk","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-BR":"bzs","sgn-CH-DE":"sgg","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsi","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs",sh:"sr-Latn",sin:"si",skk:"oyb",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",spy:"kln",sqi:"sq",src:"sc",srd:"sc",srp:"sr",ssw:"ss",sul:"sgd",sum:"ulw",sun:"su",swa:"sw",swc:"sw-CD",swe:"sv",swh:"sw",tah:"ty",tam:"ta",tat:"tt",tdu:"dtp",tel:"te",tgg:"bjp",tgk:"tg",tgl:"fil",tha:"th",thc:"tpo",thw:"ola",thx:"oyb",tib:"bo",tid:"itd",tie:"ras",tir:"ti",tkk:"twm",tl:"fil",tlw:"weo",tmp:"tyj",tne:"kak",tnf:"fa-AF",ton:"to",tsf:"taj",tsn:"tn",tso:"ts",ttq:"tmh",tuk:"tk",tur:"tr",tw:"ak",twi:"ak",uig:"ug",ukr:"uk",umu:"del","und-aaland":"und-AX","und-arevela":"und","und-arevmda":"und","und-bokmal":"und","und-hakka":"und","und-hepburn-heploc":"und-alalc97","und-lojban":"und","und-nynorsk":"und","und-saaho":"und","und-xiang":"und",unp:"wro",uok:"ema",urd:"ur",uzb:"uz",uzn:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wgw:"wgb",wit:"nol",wiw:"nwo",wln:"wa",wol:"wo",xba:"cax",xho:"xh",xia:"acn",xkh:"waw",xpe:"kpe",xrq:"dmw",xsj:"suj",xsl:"den",ybd:"rki",ydd:"yi",yen:"ynq",yid:"yi",yiy:"yrm",yma:"lrr",ymt:"mtm",yor:"yo",yos:"zom",yuu:"yug",zai:"zap","zh-cmn":"zh","zh-cmn-Hans":"zh-Hans","zh-cmn-Hant":"zh-Hant","zh-gan":"gan","zh-guoyu":"zh","zh-hakka":"hak","zh-min":"nan-x-zh-min","zh-min-nan":"nan","zh-wuu":"wuu","zh-xiang":"hsn","zh-yue":"yue",zha:"za",zho:"zh",zir:"scv",zsm:"ms",zul:"zu",zyb:"za"},e.territoryAlias={100:"BG",104:"MM",108:"BI",112:"BY",116:"KH",120:"CM",124:"CA",132:"CV",136:"KY",140:"CF",144:"LK",148:"TD",152:"CL",156:"CN",158:"TW",162:"CX",166:"CC",170:"CO",172:"RU AM AZ BY GE KG KZ MD TJ TM UA UZ",174:"KM",175:"YT",178:"CG",180:"CD",184:"CK",188:"CR",191:"HR",192:"CU",196:"CY",200:"CZ SK",203:"CZ",204:"BJ",208:"DK",212:"DM",214:"DO",218:"EC",222:"SV",226:"GQ",230:"ET",231:"ET",232:"ER",233:"EE",234:"FO",238:"FK",239:"GS",242:"FJ",246:"FI",248:"AX",249:"FR",250:"FR",254:"GF",258:"PF",260:"TF",262:"DJ",266:"GA",268:"GE",270:"GM",275:"PS",276:"DE",278:"DE",280:"DE",288:"GH",292:"GI",296:"KI",300:"GR",304:"GL",308:"GD",312:"GP",316:"GU",320:"GT",324:"GN",328:"GY",332:"HT",334:"HM",336:"VA",340:"HN",344:"HK",348:"HU",352:"IS",356:"IN",360:"ID",364:"IR",368:"IQ",372:"IE",376:"IL",380:"IT",384:"CI",388:"JM",392:"JP",398:"KZ",400:"JO",404:"KE",408:"KP",410:"KR",414:"KW",417:"KG",418:"LA",422:"LB",426:"LS",428:"LV",430:"LR",434:"LY",438:"LI",440:"LT",442:"LU",446:"MO",450:"MG",454:"MW",458:"MY",462:"MV",466:"ML",470:"MT",474:"MQ",478:"MR",480:"MU",484:"MX",492:"MC",496:"MN",498:"MD",499:"ME",500:"MS",504:"MA",508:"MZ",512:"OM",516:"NA",520:"NR",524:"NP",528:"NL",530:"CW SX BQ",531:"CW",532:"CW SX BQ",533:"AW",534:"SX",535:"BQ",536:"SA IQ",540:"NC",548:"VU",554:"NZ",558:"NI",562:"NE",566:"NG",570:"NU",574:"NF",578:"NO",580:"MP",581:"UM",582:"FM MH MP PW",583:"FM",584:"MH",585:"PW",586:"PK",591:"PA",598:"PG",600:"PY",604:"PE",608:"PH",612:"PN",616:"PL",620:"PT",624:"GW",626:"TL",630:"PR",634:"QA",638:"RE",642:"RO",643:"RU",646:"RW",652:"BL",654:"SH",659:"KN",660:"AI",662:"LC",663:"MF",666:"PM",670:"VC",674:"SM",678:"ST",682:"SA",686:"SN",688:"RS",690:"SC",694:"SL",702:"SG",703:"SK",704:"VN",705:"SI",706:"SO",710:"ZA",716:"ZW",720:"YE",724:"ES",728:"SS",729:"SD",732:"EH",736:"SD",740:"SR",744:"SJ",748:"SZ",752:"SE",756:"CH",760:"SY",762:"TJ",764:"TH",768:"TG",772:"TK",776:"TO",780:"TT",784:"AE",788:"TN",792:"TR",795:"TM",796:"TC",798:"TV",800:"UG",804:"UA",807:"MK",810:"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ",818:"EG",826:"GB",830:"JE GG",831:"GG",832:"JE",833:"IM",834:"TZ",840:"US",850:"VI",854:"BF",858:"UY",860:"UZ",862:"VE",876:"WF",882:"WS",886:"YE",887:"YE",890:"RS ME SI HR MK BA",891:"RS ME",894:"ZM",958:"AA",959:"QM",960:"QN",962:"QP",963:"QQ",964:"QR",965:"QS",966:"QT",967:"EU",968:"QV",969:"QW",970:"QX",971:"QY",972:"QZ",973:"XA",974:"XB",975:"XC",976:"XD",977:"XE",978:"XF",979:"XG",980:"XH",981:"XI",982:"XJ",983:"XK",984:"XL",985:"XM",986:"XN",987:"XO",988:"XP",989:"XQ",990:"XR",991:"XS",992:"XT",993:"XU",994:"XV",995:"XW",996:"XX",997:"XY",998:"XZ",999:"ZZ","004":"AF","008":"AL","010":"AQ","012":"DZ","016":"AS","020":"AD","024":"AO","028":"AG","031":"AZ","032":"AR","036":"AU","040":"AT","044":"BS","048":"BH","050":"BD","051":"AM","052":"BB","056":"BE","060":"BM","062":"034 143","064":"BT","068":"BO","070":"BA","072":"BW","074":"BV","076":"BR","084":"BZ","086":"IO","090":"SB","092":"VG","096":"BN",AAA:"AA",ABW:"AW",AFG:"AF",AGO:"AO",AIA:"AI",ALA:"AX",ALB:"AL",AN:"CW SX BQ",AND:"AD",ANT:"CW SX BQ",ARE:"AE",ARG:"AR",ARM:"AM",ASC:"AC",ASM:"AS",ATA:"AQ",ATF:"TF",ATG:"AG",AUS:"AU",AUT:"AT",AZE:"AZ",BDI:"BI",BEL:"BE",BEN:"BJ",BES:"BQ",BFA:"BF",BGD:"BD",BGR:"BG",BHR:"BH",BHS:"BS",BIH:"BA",BLM:"BL",BLR:"BY",BLZ:"BZ",BMU:"BM",BOL:"BO",BRA:"BR",BRB:"BB",BRN:"BN",BTN:"BT",BU:"MM",BUR:"MM",BVT:"BV",BWA:"BW",CAF:"CF",CAN:"CA",CCK:"CC",CHE:"CH",CHL:"CL",CHN:"CN",CIV:"CI",CMR:"CM",COD:"CD",COG:"CG",COK:"CK",COL:"CO",COM:"KM",CPT:"CP",CPV:"CV",CRI:"CR",CS:"RS ME",CT:"KI",CUB:"CU",CUW:"CW",CXR:"CX",CYM:"KY",CYP:"CY",CZE:"CZ",DD:"DE",DDR:"DE",DEU:"DE",DGA:"DG",DJI:"DJ",DMA:"DM",DNK:"DK",DOM:"DO",DY:"BJ",DZA:"DZ",ECU:"EC",EGY:"EG",ERI:"ER",ESH:"EH",ESP:"ES",EST:"EE",ETH:"ET",FIN:"FI",FJI:"FJ",FLK:"FK",FQ:"AQ TF",FRA:"FR",FRO:"FO",FSM:"FM",FX:"FR",FXX:"FR",GAB:"GA",GBR:"GB",GEO:"GE",GGY:"GG",GHA:"GH",GIB:"GI",GIN:"GN",GLP:"GP",GMB:"GM",GNB:"GW",GNQ:"GQ",GRC:"GR",GRD:"GD",GRL:"GL",GTM:"GT",GUF:"GF",GUM:"GU",GUY:"GY",HKG:"HK",HMD:"HM",HND:"HN",HRV:"HR",HTI:"HT",HUN:"HU",HV:"BF",IDN:"ID",IMN:"IM",IND:"IN",IOT:"IO",IRL:"IE",IRN:"IR",IRQ:"IQ",ISL:"IS",ISR:"IL",ITA:"IT",JAM:"JM",JEY:"JE",JOR:"JO",JPN:"JP",JT:"UM",KAZ:"KZ",KEN:"KE",KGZ:"KG",KHM:"KH",KIR:"KI",KNA:"KN",KOR:"KR",KWT:"KW",LAO:"LA",LBN:"LB",LBR:"LR",LBY:"LY",LCA:"LC",LIE:"LI",LKA:"LK",LSO:"LS",LTU:"LT",LUX:"LU",LVA:"LV",MAC:"MO",MAF:"MF",MAR:"MA",MCO:"MC",MDA:"MD",MDG:"MG",MDV:"MV",MEX:"MX",MHL:"MH",MI:"UM",MKD:"MK",MLI:"ML",MLT:"MT",MMR:"MM",MNE:"ME",MNG:"MN",MNP:"MP",MOZ:"MZ",MRT:"MR",MSR:"MS",MTQ:"MQ",MUS:"MU",MWI:"MW",MYS:"MY",MYT:"YT",NAM:"NA",NCL:"NC",NER:"NE",NFK:"NF",NGA:"NG",NH:"VU",NIC:"NI",NIU:"NU",NLD:"NL",NOR:"NO",NPL:"NP",NQ:"AQ",NRU:"NR",NT:"SA IQ",NTZ:"SA IQ",NZL:"NZ",OMN:"OM",PAK:"PK",PAN:"PA",PC:"FM MH MP PW",PCN:"PN",PER:"PE",PHL:"PH",PLW:"PW",PNG:"PG",POL:"PL",PRI:"PR",PRK:"KP",PRT:"PT",PRY:"PY",PSE:"PS",PU:"UM",PYF:"PF",PZ:"PA",QAT:"QA",QMM:"QM",QNN:"QN",QPP:"QP",QQQ:"QQ",QRR:"QR",QSS:"QS",QTT:"QT",QU:"EU",QUU:"EU",QVV:"QV",QWW:"QW",QXX:"QX",QYY:"QY",QZZ:"QZ",REU:"RE",RH:"ZW",ROU:"RO",RUS:"RU",RWA:"RW",SAU:"SA",SCG:"RS ME",SDN:"SD",SEN:"SN",SGP:"SG",SGS:"GS",SHN:"SH",SJM:"SJ",SLB:"SB",SLE:"SL",SLV:"SV",SMR:"SM",SOM:"SO",SPM:"PM",SRB:"RS",SSD:"SS",STP:"ST",SU:"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ",SUN:"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ",SUR:"SR",SVK:"SK",SVN:"SI",SWE:"SE",SWZ:"SZ",SXM:"SX",SYC:"SC",SYR:"SY",TAA:"TA",TCA:"TC",TCD:"TD",TGO:"TG",THA:"TH",TJK:"TJ",TKL:"TK",TKM:"TM",TLS:"TL",TMP:"TL",TON:"TO",TP:"TL",TTO:"TT",TUN:"TN",TUR:"TR",TUV:"TV",TWN:"TW",TZA:"TZ",UGA:"UG",UK:"GB",UKR:"UA",UMI:"UM",URY:"UY",USA:"US",UZB:"UZ",VAT:"VA",VCT:"VC",VD:"VN",VEN:"VE",VGB:"VG",VIR:"VI",VNM:"VN",VUT:"VU",WK:"UM",WLF:"WF",WSM:"WS",XAA:"XA",XBB:"XB",XCC:"XC",XDD:"XD",XEE:"XE",XFF:"XF",XGG:"XG",XHH:"XH",XII:"XI",XJJ:"XJ",XKK:"XK",XLL:"XL",XMM:"XM",XNN:"XN",XOO:"XO",XPP:"XP",XQQ:"XQ",XRR:"XR",XSS:"XS",XTT:"XT",XUU:"XU",XVV:"XV",XWW:"XW",XXX:"XX",XYY:"XY",XZZ:"XZ",YD:"YE",YEM:"YE",YMD:"YE",YU:"RS ME",YUG:"RS ME",ZAF:"ZA",ZAR:"CD",ZMB:"ZM",ZR:"CD",ZWE:"ZW",ZZZ:"ZZ"},e.scriptAlias={Qaai:"Zinh"},e.variantAlias={heploc:"alalc97",polytoni:"polyton"}},756:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},757:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new WeakMap;e.default=function(t){var e=r.get(t);return e||(e=Object.create(null),r.set(t,e)),e}},758:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldPolyfill=void 0,e.shouldPolyfill=function(){return!("Locale"in Intl)||function(){try{return"x-private"===new Intl.Locale("und-x-private").toString()}catch(t){return!0}}()}},759:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldPolyfill=void 0,e.shouldPolyfill=function(){return"undefined"===typeof Intl||!("getCanonicalLocales"in Intl)||"x-private"===Intl.getCanonicalLocales("und-x-private")[0]}},760:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PluralRules=void 0;var r=n(206),i=n(681),o=n(761),a=n(762),s=(0,r.__importDefault)(n(764));function u(t,e){if(!(t instanceof l))throw new TypeError("Method Intl.PluralRules.prototype.".concat(e," called on incompatible receiver ").concat(String(t)))}function c(t,e,n,r){var i=r.IntegerDigits,o=r.NumberOfFractionDigits,a=r.FractionDigits;return l.localeData[t].fn(o?"".concat(i,".").concat(a):i,"ordinal"===e)}var l=function(){function t(e,n){if(!(this&&this instanceof t?this.constructor:void 0))throw new TypeError("Intl.PluralRules must be called with 'new'");return(0,o.InitializePluralRules)(this,e,n,{availableLocales:t.availableLocales,relevantExtensionKeys:t.relevantExtensionKeys,localeData:t.localeData,getDefaultLocale:t.getDefaultLocale,getInternalSlots:s.default})}return t.prototype.resolvedOptions=function(){u(this,"resolvedOptions");var e=Object.create(null),n=(0,s.default)(this);return e.locale=n.locale,e.type=n.type,["minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"].forEach((function(t){var r=n[t];void 0!==r&&(e[t]=r)})),e.pluralCategories=(0,r.__spreadArray)([],t.localeData[e.locale].categories[e.type],!0),e},t.prototype.select=function(t){u(this,"select");var e=(0,i.ToNumber)(t);return(0,a.ResolvePlural)(this,e,{getInternalSlots:s.default,PluralRuleSelect:c})},t.prototype.toString=function(){return"[object Intl.PluralRules]"},t.supportedLocalesOf=function(e,n){return(0,i.SupportedLocales)(t.availableLocales,(0,i.CanonicalizeLocaleList)(e),n)},t.__addLocaleData=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.data,s=o.locale;t.localeData[s]=a,t.availableLocales.add(s),t.__defaultLocale||(t.__defaultLocale=s)}},t.getDefaultLocale=function(){return t.__defaultLocale},t.localeData={},t.availableLocales=new Set,t.__defaultLocale="",t.relevantExtensionKeys=[],t.polyfilled=!0,t}();e.PluralRules=l;try{"undefined"!==typeof Symbol&&Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Intl.PluralRules",writable:!1,enumerable:!1,configurable:!0});try{Object.defineProperty(l,"length",{value:0,writable:!1,enumerable:!1,configurable:!0})}catch(f){}Object.defineProperty(l.prototype.constructor,"length",{value:0,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(l.supportedLocalesOf,"length",{value:1,writable:!1,enumerable:!1,configurable:!0})}catch(p){}},761:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InitializePluralRules=void 0;var r=n(681),i=n(684);e.InitializePluralRules=function(t,e,n,o){var a=o.availableLocales,s=o.relevantExtensionKeys,u=o.localeData,c=o.getDefaultLocale,l=o.getInternalSlots,f=(0,r.CanonicalizeLocaleList)(e),p=Object.create(null),h=(0,r.CoerceOptionsToObject)(n),d=l(t);d.initializedPluralRules=!0;var y=(0,r.GetOption)(h,"localeMatcher","string",["best fit","lookup"],"best fit");p.localeMatcher=y,d.type=(0,r.GetOption)(h,"type","string",["cardinal","ordinal"],"cardinal"),(0,r.SetNumberFormatDigitOptions)(d,h,0,3,"standard");var g=(0,i.ResolveLocale)(a,f,p,s,u,c);return d.locale=g.locale,t}},762:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResolvePlural=void 0;var r=n(681),i=n(763);e.ResolvePlural=function(t,e,n){var o=n.getInternalSlots,a=n.PluralRuleSelect,s=o(t);if((0,r.invariant)("Object"===(0,r.Type)(s),"pl has to be an object"),(0,r.invariant)("initializedPluralRules"in s,"pluralrules must be initialized"),(0,r.invariant)("Number"===(0,r.Type)(e),"n must be a number"),!isFinite(e))return"other";var u=s.locale,c=s.type,l=(0,r.FormatNumericToString)(s,e).formattedString;return a(u,c,e,(0,i.GetOperands)(l))}},763:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetOperands=void 0;var r=n(681);e.GetOperands=function(t){(0,r.invariant)("string"===typeof t,"GetOperands should have been called with a string");var e=(0,r.ToNumber)(t);(0,r.invariant)(isFinite(e),"n should be finite");var n,i,o,a=t.indexOf("."),s="";-1===a?(n=e,i=0,o=0):(n=t.slice(0,a),s=t.slice(a,t.length),i=(0,r.ToNumber)(s),o=s.length);var u,c,l=Math.abs((0,r.ToNumber)(n));if(0!==i){var f=s.replace(/0+$/,"");u=f.length,c=(0,r.ToNumber)(f)}else u=0,c=0;return{Number:e,IntegerDigits:l,NumberOfFractionDigits:o,NumberOfFractionDigitsWithoutTrailing:u,FractionDigits:i,FractionDigitsWithoutTrailing:c}}},764:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new WeakMap;e.default=function(t){var e=r.get(t);return e||(e=Object.create(null),r.set(t,e)),e}},765:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldPolyfill=void 0;var r=n(684),i=n(766);e.shouldPolyfill=function(t){if(void 0===t&&(t="en"),!("PluralRules"in Intl)||"one"===new Intl.PluralRules("en",{minimumFractionDigits:2}).select(1)||!function(t){if(!t)return!0;var e=Array.isArray(t)?t:[t];return Intl.PluralRules.supportedLocalesOf(e).length===e.length}(t))return t?(0,r.match)([t],i.supportedLocales,"en"):void 0}},766:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.supportedLocales=void 0,e.supportedLocales=["af","ak","am","an","ar","ars","as","asa","ast","az","bal","be","bem","bez","bg","bho","bm","bn","bo","br","brx","bs","ca","ce","ceb","cgg","chr","ckb","cs","cy","da","de","doi","dsb","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gd","gl","gsw","gu","guw","gv","ha","haw","he","hi","hnj","hr","hsb","hu","hy","ia","id","ig","ii","io","is","it","iu","ja","jbo","jgo","jmc","jv","jw","ka","kab","kaj","kcg","kde","kea","kk","kkj","kl","km","kn","ko","ks","ksb","ksh","ku","kw","ky","lag","lb","lg","lij","lkt","ln","lo","lt","lv","mas","mg","mgo","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","nnh","no","nqo","nr","nso","ny","nyn","om","or","os","osa","pa","pap","pcm","pl","prg","ps","pt-PT","pt","rm","ro","rof","ru","rwk","sah","saq","sat","sc","scn","sd","sdh","se","seh","ses","sg","sh","shi","si","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","su","sv","sw","syr","ta","te","teo","th","ti","tig","tk","tl","tn","to","tpi","tr","ts","tzm","ug","uk","und","ur","uz","ve","vi","vo","vun","wa","wae","wo","xh","xog","yi","yo","yue","zh","zu"]},767:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.currencyDigitsData=void 0,e.currencyDigitsData={ADP:0,AFN:0,ALL:0,AMD:2,BHD:3,BIF:0,BYN:2,BYR:0,CAD:2,CHF:2,CLF:4,CLP:0,COP:2,CRC:2,CZK:2,DEFAULT:2,DJF:0,DKK:2,ESP:0,GNF:0,GYD:2,HUF:2,IDR:2,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:2,MRO:0,MUR:2,NOK:2,OMR:3,PKR:2,PYG:0,RSD:0,RWF:0,SEK:2,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TWD:2,TZS:2,UGX:0,UYI:0,UYW:4,UZS:2,VEF:2,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}},768:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.numberingSystemNames=void 0,e.numberingSystemNames=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","diak","ethi","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","segment","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tibt","tirh","tnsa","vaii","wara","wcho"]},769:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new WeakMap;e.default=function(t){var e=r.get(t);return e||(e=Object.create(null),r.set(t,e)),e}},770:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocaleString=void 0;var r=n(717);e.toLocaleString=function(t,e,n){return new r.NumberFormat(e,n).format(t)}},771:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldPolyfill=void 0;var r=n(684),i=n(772);e.shouldPolyfill=function(t){if(void 0===t&&(t="en"),"undefined"===typeof Intl||!("NumberFormat"in Intl)||!function(){try{if("1E4 bits"!==new Intl.NumberFormat("en",{style:"unit",unit:"bit",unitDisplay:"long",notation:"scientific"}).format(1e4))return!1}catch(t){return!1}return!0}()||!Intl.NumberFormat.polyfilled&&!Intl.NumberFormat.supportedLocalesOf(["es"]).length||!function(t){if(!t)return!0;var e=Array.isArray(t)?t:[t];return Intl.NumberFormat.supportedLocalesOf(e).length===e.length}(t))return t?(0,r.match)([t],i.supportedLocales,"en"):void 0}},772:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.supportedLocales=void 0,e.supportedLocales=["af-NA","af","agq","ak","am","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","ar","as","asa","ast","az-Cyrl","az-Latn","az","bas","be-tarask","be","bem","bez","bg","bm","bn-IN","bn","bo-IN","bo","br","brx","bs-Cyrl","bs-Latn","bs","ca-AD","ca-ES-valencia","ca-FR","ca-IT","ca","ccp-IN","ccp","ce","ceb","cgg","chr","ckb-IR","ckb","cs","cy","da-GL","da","dav","de-AT","de-BE","de-CH","de-IT","de-LI","de-LU","de","dje","doi","dsb","dua","dyo","dz","ebu","ee-TG","ee","el-CY","el","en-001","en-150","en-AE","en-AG","en-AI","en-AS","en-AT","en-AU","en-BB","en-BE","en-BI","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CH","en-CK","en-CM","en-CX","en-CY","en-DE","en-DG","en-DK","en-DM","en-ER","en-FI","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IL","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NL","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SE","en-SG","en-SH","en-SI","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","en","eo","es-419","es-AR","es-BO","es-BR","es-BZ","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","es","et","eu","ewo","fa-AF","fa","ff-Adlm-BF","ff-Adlm-CM","ff-Adlm-GH","ff-Adlm-GM","ff-Adlm-GW","ff-Adlm-LR","ff-Adlm-MR","ff-Adlm-NE","ff-Adlm-NG","ff-Adlm-SL","ff-Adlm-SN","ff-Adlm","ff-Latn-BF","ff-Latn-CM","ff-Latn-GH","ff-Latn-GM","ff-Latn-GN","ff-Latn-GW","ff-Latn-LR","ff-Latn-MR","ff-Latn-NE","ff-Latn-NG","ff-Latn-SL","ff-Latn","ff","fi","fil","fo-DK","fo","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fr","fur","fy","ga-GB","ga","gd","gl","gsw-FR","gsw-LI","gsw","gu","guz","gv","ha-GH","ha-NE","ha","haw","he","hi","hr-BA","hr","hsb","hu","hy","ia","id","ig","ii","is","it-CH","it-SM","it-VA","it","ja","jgo","jmc","jv","ka","kab","kam","kde","kea","kgp","khq","ki","kk","kkj","kl","kln","km","kn","ko-KP","ko","kok","ks-Arab","ks","ksb","ksf","ksh","ku","kw","ky","lag","lb","lg","lkt","ln-AO","ln-CF","ln-CG","ln","lo","lrc-IQ","lrc","lt","lu","luo","luy","lv","mai","mas-TZ","mas","mer","mfe","mg","mgh","mgo","mi","mk","ml","mn","mni-Beng","mni","mr","ms-BN","ms-ID","ms-SG","ms","mt","mua","my","mzn","naq","nb-SJ","nb","nd","nds-NL","nds","ne-IN","ne","nl-AW","nl-BE","nl-BQ","nl-CW","nl-SR","nl-SX","nl","nmg","nn","nnh","no","nus","nyn","om-KE","om","or","os-RU","os","pa-Arab","pa-Guru","pa","pcm","pl","ps-PK","ps","pt-AO","pt-CH","pt-CV","pt-GQ","pt-GW","pt-LU","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","pt","qu-BO","qu-EC","qu","rm","rn","ro-MD","ro","rof","ru-BY","ru-KG","ru-KZ","ru-MD","ru-UA","ru","rw","rwk","sa","sah","saq","sat-Olck","sat","sbp","sc","sd-Arab","sd-Deva","sd","se-FI","se-SE","se","seh","ses","sg","shi-Latn","shi-Tfng","shi","si","sk","sl","smn","sn","so-DJ","so-ET","so-KE","so","sq-MK","sq-XK","sq","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-XK","sr-Cyrl","sr-Latn-BA","sr-Latn-ME","sr-Latn-XK","sr-Latn","sr","su-Latn","su","sv-AX","sv-FI","sv","sw-CD","sw-KE","sw-UG","sw","ta-LK","ta-MY","ta-SG","ta","te","teo-KE","teo","tg","th","ti-ER","ti","tk","to","tr-CY","tr","tt","twq","tzm","ug","uk","und","ur-IN","ur","uz-Arab","uz-Cyrl","uz-Latn","uz","vai-Latn","vai-Vaii","vai","vi","vun","wae","wo","xh","xog","yav","yi","yo-BJ","yo","yrl-CO","yrl-VE","yrl","yue-Hans","yue-Hant","yue","zgh","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hans","zh-Hant-HK","zh-Hant-MO","zh-Hant","zh","zu"]},773:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},774:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},775:function(t,e,n){var r=n(532);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},t.exports.__esModule=!0,t.exports.default=t.exports},776:function(t,e,n){"use strict";n.r(e);var r=n(375),i=n.n(r),o=n(60),a=n(42);e.default=function(t,e,n){void 0===n&&(n={});var r=Object(o.getGeom)(t),s=Object(o.getGeom)(e),u=i.a.union(r.coordinates,s.coordinates);return 0===u.length?null:1===u.length?Object(a.polygon)(u[0],n.properties):Object(a.multiPolygon)(u,n.properties)}},777:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizeCircleMode=void 0;var r=f(n(720)),i=n(42),o=f(n(700)),a=f(n(673)),s=f(n(688)),u=n(672),c=n(671),l=n(675);function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function E(t,e){return E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},E(t,e)}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(d,t);var e,n,c,f,p=(e=d,function(){var t,n=b(e);if(_()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m(this,t)});function d(){var t;y(this,d);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return A(v(t=p.call.apply(p,[this].concat(n))),"_selectedEditHandle",void 0),A(v(t),"_isResizing",!1),t}return n=d,(c=[{key:"getGuides",value:function(t){var e=this,n=[],r=t.selectedIndexes,o=t.lastPointerMoveEvent,a=o&&o.picks,s=o&&o.mapCoords;if(a&&a.length&&s&&1===r.length&&!this._isResizing){var c=a.find((function(t){return!t.isGuide}));if(c&&c.object.properties.shape&&c.object.properties.shape.includes("Circle")&&t.selectedIndexes.includes(c.index)){var l=null,f=[],p=(0,i.point)(s);if((0,u.recursivelyTraverseNestedArrays)(c.object.geometry.coordinates,[],(function(n,r){var o=(0,i.lineString)(n),a=e.getNearestPoint(o,p,t.modeConfig&&t.modeConfig.viewport);(!l||a.properties.dist<l.properties.dist)&&(l=a,f=r)})),l){var d=l,y=d.geometry.coordinates,g=d.properties.index;n.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:c.index,positionIndexes:[].concat(h(f),[g+1])},geometry:{type:"Point",coordinates:y}})}}}return{type:"FeatureCollection",features:n}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(n)return(0,u.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,r.default)(t,e)}},{key:"handleDragging",value:function(t,e){var n=(0,u.getPickedEditHandle)(t.pointerDownPicks);if(n){t.cancelPan();var r=n.properties,i=this.getSelectedFeature(e),c=(0,s.default)(i).geometry.coordinates,f=Object.entries(i.geometry.coordinates[0]).length-1,p=Math.max((0,a.default)(c,t.mapCoords),.001),h={}.steps,d={steps:void 0===h?f:h},y=(0,o.default)(c,p,d).geometry,g=new l.ImmutableFeatureCollection(e.data).replaceGeometry(r.featureIndex,y).getObject();e.onEdit({updatedData:g,editType:"unionGeometry",editContext:{featureIndexes:[r.featureIndex]}})}}},{key:"handlePointerMove",value:function(t,e){if(!this._isResizing){var n=(0,u.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"intermediate"===n.properties.editHandleType?n:null}var r=this.getCursor(t);e.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isResizing=!0)}},{key:"handleStopDragging",value:function(t,e){this._isResizing&&(this._selectedEditHandle=null,this._isResizing=!1)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,u.getPickedEditHandles)(e).length?"cell":null}}])&&g(n.prototype,c),f&&g(n,f),d}(c.GeoJsonEditMode);e.ResizeCircleMode=C},778:function(t,e,n){"use strict";n.r(e);var r=n(89),i=n(42),o=n(60),a=n(687),s=n(689);e.default=function(t,e,n,u){if(u=u||{},!Object(i.isObject)(u))throw new Error("options is invalid");var c=u.units,l=u.zTranslation,f=u.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(l&&"number"!==typeof l&&isNaN(l))throw new Error("zTranslation is not a number");if(l=void 0!==l?l:0,0===e&&0===l)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==f&&void 0!==f||(t=Object(a.a)(t)),Object(r.coordEach)(t,(function(t){var r=Object(o.getCoords)(Object(s.a)(t,e,n,{units:c}));t[0]=r[0],t[1]=r[1],l&&3===t.length&&(t[2]+=l)})),t}},779:function(t,e,n){"use strict";n.r(e);var r=n(687),i=n(688),o=n(683),a=n(181),s=n(722),u=n(698),c=n(689),l=n(89),f=n(42),p=n(60);function h(t,e,n){var r="Point"===Object(p.getType)(t);return n=function(t,e){void 0!==e&&null!==e||(e="centroid");if(Array.isArray(e)||"object"===typeof e)return Object(p.getCoord)(e);var n=t.bbox?t.bbox:Object(a.default)(t),r=n[0],s=n[1],u=n[2],c=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return Object(f.point)([r,s]);case"se":case"southeast":case"eastsouth":case"bottomright":return Object(f.point)([u,s]);case"nw":case"northwest":case"westnorth":case"topleft":return Object(f.point)([r,c]);case"ne":case"northeast":case"eastnorth":case"topright":return Object(f.point)([u,c]);case"center":return Object(i.default)(t);case void 0:case null:case"centroid":return Object(o.default)(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||Object(l.coordEach)(t,(function(t){var r=Object(u.a)(n,t),i=Object(s.a)(n,t),o=r*e,a=Object(p.getCoords)(Object(c.a)(n,o,i));t[0]=a[0],t[1]=a[1],3===t.length&&(t[2]*=e)})),t}e.default=function(t,e,n){if(n=n||{},!Object(f.isObject)(n))throw new Error("options is invalid");var i=n.origin,o=n.mutate;if(!t)throw new Error("geojson required");if("number"!==typeof e||0===e)throw new Error("invalid factor");var a=Array.isArray(i)||"object"===typeof i;return!0!==o&&(t=Object(r.a)(t)),"FeatureCollection"!==t.type||a?h(t,e,i):(Object(l.featureEach)(t,(function(n,r){t.features[r]=h(n,e,i)})),t)}},780:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},a(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DuplicateMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,r,f,p=(e=h,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return i(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"handleStartDragging",value:function(t,e){a(c(h.prototype),"handleStartDragging",this).call(this,t,e),this._geometryBeforeTranslate&&e.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,e.data))}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("copy"):t.onUpdateCursor(null)}}])&&o(n.prototype,r),f&&o(n,f),h}(n(701).TranslateMode);e.DuplicateMode=f},781:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendLineStringMode=void 0;var r=n(671),i=n(675);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,r,o,p=(e=h,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return a(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"getSingleSelectedLineString",value:function(t){var e=this.getSelectedGeometry(t);return e&&"LineString"===e.type?e:null}},{key:"handleClick",value:function(t,e){var n=e.selectedIndexes,r=this.getSingleSelectedLineString(e);if(r){var o=[r.coordinates.length],a=e.modeConfig;a&&a.drawAtFront&&(o=[0]);var s=n[0],u=new i.ImmutableFeatureCollection(e.data).addPosition(s,o,t.mapCoords).getObject();e.onEdit({updatedData:u,editType:"addPosition",editContext:{featureIndexes:[s],positionIndexes:o,position:t.mapCoords}})}else console.warn("ExtendLineStringMode only supported for single LineString selection")}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=this.getSingleSelectedLineString(t);if(!n)return e;var r=t.lastPointerMoveEvent&&t.lastPointerMoveEvent.mapCoords,i=null,o=t.modeConfig;return i=o&&o.drawAtFront?n.coordinates[0]:n.coordinates[n.coordinates.length-1],e.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[i,r]}}),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&s(n.prototype,r),o&&s(n,o),h}(r.GeoJsonEditMode);e.ExtendLineStringMode=p},782:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitPolygonMode=void 0;var r=g(n(96)),i=g(n(697)),o=g(n(738)),a=g(n(248)),s=n(42),u=g(n(674)),c=g(n(673)),l=g(n(677)),f=g(n(262)),p=g(n(720)),h=n(672),d=n(671),y=n(675);function g(t){return t&&t.__esModule?t:{default:t}}function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return!e||"object"!==m(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function L(t,e){return L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},L(t,e)}var I=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(b,t);var e,n,d,g,m=(e=b,function(){var t,n=T(e);if(O()){var r=T(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return S(this,t)});function b(){return A(this,b),m.apply(this,arguments)}return n=b,(d=[{key:"calculateMapCoords",value:function(t,e,n){var r=n.modeConfig;if(!r||!r.lock90Degree||!t.length)return e;if(1===t.length){var i=t[0],o=this.getSelectedGeometry(n),a=(0,f.default)(o),d="FeatureCollection"===a.type?a.features:[a],y=Number.MAX_SAFE_INTEGER,g=null;if(d.forEach((function(t){var e=(0,p.default)(t,i),n=(0,c.default)(e,i);y>n&&(y=n,g=e)})),g){var m=(0,u.default)(i,g),v=(0,c.default)(i,e,{units:"meters"});return(0,l.default)(i,v,m,{units:"meters"}).geometry.coordinates}return e}var b=t[t.length-1],E=_((0,h.generatePointsParallelToLinePoints)(t[t.length-2],b,e),1)[0];return(0,p.default)((0,s.lineString)([b,E]),e).geometry.coordinates}},{key:"getGuides",value:function(t){var e=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===e.length||!t.lastPointerMoveEvent)return n;var r=t.lastPointerMoveEvent.mapCoords;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(v(e),[this.calculateMapCoords(e,r,t)])}}),n}},{key:"handleClick",value:function(t,e){var n=this.getTentativeGuide(e),i=this.getSelectedGeometry(e);if(i){var o=this.getClickSequence();n&&"LineString"===n.geometry.type?o.push(n.geometry.coordinates[n.geometry.coordinates.length-1]):this.addClickSequence(t);var s={type:"Point",coordinates:o[o.length-1]},u=(0,r.default)(s,i);if(o.length>1&&n&&!u){if(this.resetClickSequence(),0===(0,a.default)(n,i).features.length)return;var c=this.splitPolygon(n,e);c&&e.onEdit(c)}}else console.warn("A polygon must be selected for splitting")}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(t,e){var n=this.getSelectedGeometry(e),r=e.selectedIndexes[0],a=e.modeConfig||{},s=a.gap,u=void 0===s?.1:s,c=a.units,l=void 0===c?"centimeters":c;0===u&&(u=.1,l="centimeters");var f=(0,o.default)(t,u,{units:l}),p=(0,i.default)(n,f);if(!p)return console.warn("Canceling edit. Split Polygon erased"),null;var h=p.geometry,d=h.type,g=h.coordinates,m=[];return m="Polygon"===d?g.map((function(t){return[t]})):g.reduce((function(t,e){return e.forEach((function(e){t.push([e])})),t}),[]),{updatedData:new y.ImmutableFeatureCollection(e.data).replaceGeometry(r,{type:"MultiPolygon",coordinates:m}).getObject(),editType:"split",editContext:{featureIndexes:[r]}}}}])&&C(n.prototype,d),g&&C(n,g),b}(d.GeoJsonEditMode);e.SplitPolygonMode=I},783:function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Nt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function f(){this.root_=null,this.size_=0}function p(){}function h(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function y(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var E=function(){},A=function(){},C=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},O={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new v("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[E,A,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},O.DimensionalComparator.get=function(){return T},O.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},O.NULL_ORDINATE.get=function(){return _.NaN},O.X.get=function(){return 0},O.Y.get=function(){return 1},O.Z.get=function(){return 2},Object.defineProperties(S,O);var T=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};T.prototype.compare=function(t,e){var n=t,r=e,i=T.compare(n.x,r.x);if(0!==i)return i;var o=T.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(n.z,r.z)},T.prototype.interfaces_=function(){return[C]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var L=function(){};L.prototype.create=function(){},L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L};var I=function(){},w={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I},I.toLocationSymbol=function(t){switch(t){case I.EXTERIOR:return"e";case I.BOUNDARY:return"b";case I.INTERIOR:return"i";case I.NONE:return"-"}throw new v("Unknown location value: "+t)},w.INTERIOR.get=function(){return 0},w.BOUNDARY.get=function(){return 1},w.EXTERIOR.get=function(){return 2},w.NONE.get=function(){return-1},Object.defineProperties(I,w);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},R=function(){},M={LOG_10:{configurable:!0}};R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/R.LOG_10},R.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},R.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},R.wrap=function(t,e){return t<0?e- -t%e:t%e},R.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},R.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(R,M);var x=function(t){this.str=t};x.prototype.append=function(t){this.str+=t},x.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},x.prototype.toString=function(t){return this.str};var N=function(t){this.value=t};N.prototype.intValue=function(){return this.value},N.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},N.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var B=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};B.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},B.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=B.magnitude(n._hi),i=B.TEN.pow(r);(n=n.divide(i)).gt(B.TEN)?(n=n.divide(B.TEN),r+=1):n.lt(B.ONE)&&(n=n.multiply(B.TEN),r-=1);for(var o=r+1,a=new x,s=B.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),n=n.subtract(B.valueOf(c)).multiply(B.TEN),l&&n.selfAdd(B.TEN);var p=!0,h=B.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},B.prototype.sqr=function(){return this.multiply(this)},B.prototype.doubleValue=function(){return this._hi+this._lo},B.prototype.subtract=function(){if(arguments[0]instanceof B){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},B.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},B.prototype.isZero=function(){return 0===this._hi&&0===this._lo},B.prototype.selfSubtract=function(){if(arguments[0]instanceof B){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},B.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},B.prototype.min=function(t){return this.le(t)?this:t},B.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/n,f=(i=(c=B.SPLIT*u)-(i=c-u))*(a=(f=B.SPLIT*n)-(a=f-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(c=(this._hi-l-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+c,this}},B.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},B.prototype.divide=function(){if(arguments[0]instanceof B){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=B.SPLIT*o)-(e=a-o)),u=e*(r=(u=B.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new B(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return _.isNaN(c)?B.createNaN():B.copy(this).selfDivide(c,0)}},B.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},B.prototype.pow=function(t){if(0===t)return B.valueOf(1);var e=new B(this),n=B.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},B.prototype.ceil=function(){if(this.isNaN())return B.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new B(t,e)},B.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},B.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},B.prototype.setValue=function(){if(arguments[0]instanceof B){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},B.prototype.max=function(t){return this.ge(t)?this:t},B.prototype.sqrt=function(){if(this.isZero())return B.valueOf(0);if(this.isNegative())return B.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=B.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},B.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,p=null,h=null,d=null,y=null,g=null;h=this._hi+u,f=this._lo+c,d=h-(y=h-this._hi),p=f-(g=f-this._lo);var m=(l=h+(y=(d=u-y+(this._hi-d))+f))+(y=(p=c-g+(this._lo-p))+(y+(h-l))),v=y+(l-m);return this._hi=m,this._lo=v,this}},B.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=B.SPLIT*this._hi)-this._hi,c=B.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},B.prototype.selfSqr=function(){return this.selfMultiply(this)},B.prototype.floor=function(){if(this.isNaN())return B.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new B(t,e)},B.prototype.negate=function(){return this.isNaN()?this:new B(-this._hi,-this._lo)},B.prototype.clone=function(){},B.prototype.multiply=function(){if(arguments[0]instanceof B){var t=arguments[0];return t.isNaN()?B.createNaN():B.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?B.createNaN():B.copy(this).selfMultiply(e,0)}},B.prototype.isNaN=function(){return _.isNaN(this._hi)},B.prototype.intValue=function(){return Math.trunc(this._hi)},B.prototype.toString=function(){var t=B.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},B.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+B.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+B.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},B.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=B.SPLIT*i)-(t=o-i)),n=(s=B.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new B(u,i-u+o)},B.prototype.toSciNotation=function(){if(this.isZero())return B.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=B.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},B.prototype.abs=function(){return this.isNaN()?B.NaN:this.isNegative()?this.negate():new B(this)},B.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},B.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},B.prototype.add=function(){if(arguments[0]instanceof B){var t=arguments[0];return B.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return B.copy(this).selfAdd(e)}},B.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof B){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},B.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},B.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},B.prototype.trunc=function(){return this.isNaN()?B.NaN:this.isPositive()?this.floor():this.ceil()},B.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},B.prototype.interfaces_=function(){return[e,E,A]},B.prototype.getClass=function(){return B},B.sqr=function(t){return B.valueOf(t).selfMultiply(t)},B.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return B.parse(t)}if("number"==typeof arguments[0])return new B(arguments[0])},B.sqrt=function(t){return B.valueOf(t).sqrt()},B.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new B,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,D.isDigit(c)){var l=c-"0";o.selfMultiply(B.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=N.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var p=o,h=a-s-u;if(0===h)p=o;else if(h>0){var d=B.TEN.pow(h);p=o.divide(d)}else if(h<0){var y=B.TEN.pow(-h);p=o.multiply(y)}return r?p.negate():p},B.createNaN=function(){return new B(_.NaN,_.NaN)},B.copy=function(t){return new B(t)},B.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},B.stringOfChar=function(t,e){for(var n=new x,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new B(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new B(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new B(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new B(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new B(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return B.valueOf(10)},F.ONE.get=function(){return B.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(B,F);var j=function(){},k={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var r=j.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=B.valueOf(e.x).selfAdd(-t.x),o=B.valueOf(e.y).selfAdd(-t.y),a=B.valueOf(n.x).selfAdd(-e.x),s=B.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},j.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,r){var i=B.valueOf(r.y).selfSubtract(n.y).selfMultiply(B.valueOf(e.x).selfSubtract(t.x)),o=B.valueOf(r.x).selfSubtract(n.x).selfMultiply(B.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=B.valueOf(r.x).selfSubtract(n.x).selfMultiply(B.valueOf(t.y).selfSubtract(n.y)),u=B.valueOf(r.y).selfSubtract(n.y).selfMultiply(B.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=B.valueOf(t.x).selfAdd(B.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=B.valueOf(e.x).selfSubtract(t.x).selfMultiply(B.valueOf(t.y).selfSubtract(n.y)),p=B.valueOf(e.y).selfSubtract(t.y).selfMultiply(B.valueOf(t.x).selfSubtract(n.x)),h=f.subtract(p).selfDivide(a).doubleValue(),d=B.valueOf(n.y).selfAdd(B.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new S(l,d)},j.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return j.signum(a);r=i+o}else{if(!(i<0))return j.signum(a);if(o>=0)return j.signum(a);r=-i-o}var s=j.DP_SAFE_EPSILON*r;return a>=s||-a>=s?j.signum(a):2},j.signum=function(t){return t>0?1:t<0?-1:0},k.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,k);var G=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[A]},G.prototype.getClass=function(){return G},Object.defineProperties(G,U);var Z=function(){},H=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Z),z=function(){};z.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},z.getProperty=function(t){return{"line.separator":"\n"}[t]};var V=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3],y=f.y-p.y,g=p.x-f.x,m=f.x*p.y-p.x*f.y,v=h.y-d.y,_=d.x-h.x,b=h.x*d.y-d.x*h.y;this.x=g*b-_*m,this.y=v*m-y*b,this.w=y*_-v*g}};V.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new H;return t},V.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new H;return t},V.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},V.prototype.interfaces_=function(){return[]},V.prototype.getClass=function(){return V},V.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,f=(o*c-u*a)/l,p=(s*a-i*c)/l;if(_.isNaN(f)||_.isInfinite(f)||_.isNaN(p)||_.isInfinite(p))throw new H;return new S(f,p)};var K=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},X={serialVersionUID:{configurable:!0}};K.prototype.getArea=function(){return this.getWidth()*this.getHeight()},K.prototype.equals=function(t){if(!(t instanceof K))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},K.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new K;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new K(e,r,n,i)},K.prototype.isNull=function(){return this._maxx<this._minx},K.prototype.getMaxX=function(){return this._maxx},K.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof K){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},K.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof K){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},K.prototype.getMinY=function(){return this._miny},K.prototype.getMinX=function(){return this._minx},K.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof K){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},K.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},K.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},K.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},K.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},K.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},K.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},K.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},K.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},K.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},K.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof K){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},K.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},K.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof K){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},K.prototype.getMaxY=function(){return this._maxy},K.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},K.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},K.prototype.interfaces_=function(){return[E,e]},K.prototype.getClass=function(){return K},K.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(K,X);var q={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},J=function(t){this.geometryFactory=t||new me};J.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=q.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=q.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Y[n]&&(e=Y[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},J.prototype.write=function(t){return this.extractGeometry(t)},J.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!W[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+W[e].apply(this,[t])+")"};var W={coordinate:function(t){return t.x+" "+t.y},point:function(t){return W.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+W.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(W.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(W.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+W.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+W.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+W.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+W.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Y={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(q.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(Y.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(q.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(q.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(q.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(Y.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(q.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(q.trimParens,"$1"),n=Y.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(q.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(Y.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Q=function(t){this.parser=new J(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new x;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new K(this._inputLines[0][0],this._inputLines[0][1]),n=new K(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,K.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=V.intersection(t,n,r,i)}catch(a){if(!(a instanceof H))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=j.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);z.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&z.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),o=new S(e),a=new S(n),s=new S(r),u=new S;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=K.intersects(e,n,r),a=K.intersects(e,n,i),s=K.intersects(r,i,e),u=K.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,h=((o>c?o:c)+(s<f?s:f))/2,d=((a>l?a:l)+(u<p?u:p))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!K.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(e):0===u&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==I.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?I.BOUNDARY:this._crossingCount%2==1?I.INTERIOR:I.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof S&&P(arguments[1],G)){for(var t=arguments[1],e=new at(arguments[0]),n=new S,r=new S,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],c=o[s-1];if(a.countSegment(u,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],G)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new S,c=new S,l=new S;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var p=0,h=1;h<s-1;h++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(h+1,l),l.x-=f,p+=c.x*(u.y-l.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(K.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?R.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==I.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=st.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new K(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[A,E,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return pt},Object.defineProperties(lt,ft);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var ht=function(){};ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var dt=function(){},yt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},yt.Mod2BoundaryNodeRule.get=function(){return gt},yt.EndPointBoundaryNodeRule.get=function(){return mt},yt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},yt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},yt.MOD2_BOUNDARY_RULE.get=function(){return new gt},yt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},yt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},yt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},yt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,yt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[dt]},gt.prototype.getClass=function(){return gt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var Et=function(){};Et.prototype.hasNext=function(){},Et.prototype.next=function(){},Et.prototype.remove=function(){};var At=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var Ct=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(At),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Et),Ot=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var f=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<h&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],m=arguments[3],v=1;g>m&&(v=-1);for(var _=g;_!==m;_+=v)this.add(d[_],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Ct),Tt=function(){},Lt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Lt.ForwardComparator.get=function(){return It},Lt.BidirectionalComparator.get=function(){return wt},Lt.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Tt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Tt.indexOf(r,e)<0)return r}return null},Tt.scroll=function(t,e){var n=Tt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);z.arraycopy(t,n,r,0,t.length-n),z.arraycopy(t,0,r,t.length-n,n),z.arraycopy(r,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Tt.intersection=function(t,e){for(var n=new Ot,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new Ot(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Tt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new S(r[i+u])},Tt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Tt.envelope=function(t){for(var e=new K,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Tt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Tt.extract=function(t,e,n){e=R.clamp(e,0,t.length);var r=(n=R.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Tt,Lt);var It=function(){};It.prototype.compare=function(t,e){return Tt.compare(t,e)},It.prototype.interfaces_=function(){return[C]},It.prototype.getClass=function(){return It};var wt=function(){};wt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Tt.compare(n,r);return Tt.isEqualReversed(n,r)?0:i},wt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Tt.increasingDirection(n),o=Tt.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},wt.prototype.interfaces_=function(){return[C]},wt.prototype.getClass=function(){return wt};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var Rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new xt(this)},e}(o),xt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(Et),Nt=0;(f.prototype=new Rt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=l(s(s(t)));1===a(e)?(u(s(t),Nt),u(e,Nt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),Nt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(u(s(t),Nt),u(n,Nt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),Nt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Nt},f.prototype.values=function(){var t=new Ct,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},f.prototype.size=function(){return this.size_};var Dt=function(){};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},p.prototype=new o,(h.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},h.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},h.prototype.remove=function(t){throw new i},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return 0===this.array_.length},h.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},h.prototype.iterator=function(){return new Bt(this)};var Bt=function(t){this.treeSet_=t,this.position_=0};Bt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Bt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Bt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new Ct,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var jt=function(){},kt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};kt.P.get=function(){return 0},kt.L.get=function(){return 1},kt.A.get=function(){return 2},kt.FALSE.get=function(){return-1},kt.TRUE.get=function(){return-2},kt.DONTCARE.get=function(){return-3},kt.SYM_FALSE.get=function(){return"F"},kt.SYM_TRUE.get=function(){return"T"},kt.SYM_DONTCARE.get=function(){return"*"},kt.SYM_P.get=function(){return"0"},kt.SYM_L.get=function(){return"1"},kt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new v("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(jt,kt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Zt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new K,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new h(Ft.asList(this._geometries)),n=new h(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),c=i.getGeometryN(s),l=u.compareToSameClass(c,r);if(0!==l)return l;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(P(arguments[0],ht))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(lt),Ht=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new zt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Zt),zt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};zt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},zt.prototype.getBoundary=function(){return this._geom instanceof Jt?this.boundaryLineString(this._geom):this._geom instanceof Ht?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},zt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},zt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},zt.prototype.computeBoundaryCoordinates=function(t){var e=new Ct;this._endpointMap=new f;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},zt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Vt,this._endpointMap.put(t,e)),e.count++},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.getBoundary=function(){return 1===arguments.length?new zt(arguments[0]).getBoundary():2===arguments.length?new zt(arguments[0],arguments[1]).getBoundary():void 0};var Vt=function(){this.count=null};Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Kt=function(){},Xt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt},Kt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Kt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Kt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Kt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Kt.split=function(t,e){for(var n=e.length,r=new Ct,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Kt.toString=function(){if(1===arguments.length){var t=arguments[0];return Kt.SIMPLE_ORDINATE_FORMAT.format(t)}},Kt.spaces=function(t){return Kt.chars(" ",t)},Xt.NEWLINE.get=function(){return z.getProperty("line.separator")},Xt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Kt,Xt);var qt=function(){};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},qt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},qt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!_.isNaN(a)||!_.isNaN(s)))return!1}return!0},qt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(qt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)qt.copy(e,i-1,r,o,1);return r},qt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)qt.swap(t,r,e-r)},qt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},qt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)qt.copyCoord(t,e+o,n,r+o)},qt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new x;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Kt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},qt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?qt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:qt.createClosedRing(t,e,n+1)},qt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();qt.copy(e,0,r,0,i);for(var o=i;o<n;o++)qt.copy(e,0,r,o,1);return r};var Jt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new K:this._points.expandEnvelope(new K)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&qt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return qt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],ht))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Gt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new zt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(lt),Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Yt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new K;var t=new K;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],ht)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Gt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Wt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(lt),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var $t=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o===(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);z.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Tt.minCoordinate(e.getCoordinates());Tt.scroll(r,i),z.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),c=i.getNumInteriorRing(),l=0;l<u&&l<c;){var f=this.getInteriorRingN(l),p=i.getInteriorRingN(l),h=f.compareToSameClass(p,r);if(0!==h)return h;l++}return l<u?1:l<c?-1:0}},e.prototype.apply=function(t){if(P(t,ht)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,Gt))t.filter(this);else if(P(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Wt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Zt),ee=function(t){function e(e,n){e instanceof S&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return qt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Jt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ct,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Zt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Zt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Yt||t instanceof Jt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Ct,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ht?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Ct,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Jt?e.createLineString(n):t instanceof Yt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Yt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(P(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new S}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new x(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},fe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(P(arguments[0],G))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},le.prototype.interfaces_=function(){return[L,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},fe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fe.instanceObject.get=function(){return new le},Object.defineProperties(le,fe);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ct,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Mt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),he=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ye){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};he.prototype.equals=function(t){if(!(t instanceof he))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},he.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new N(n).compareTo(new N(r))},he.prototype.getScale=function(){return this._scale},he.prototype.isFloating=function(){return this._modelType===he.FLOATING||this._modelType===he.FLOATING_SINGLE},he.prototype.getType=function(){return this._modelType},he.prototype.toString=function(){var t="UNKNOWN";return this._modelType===he.FLOATING?t="Floating":this._modelType===he.FLOATING_SINGLE?t="Floating-Single":this._modelType===he.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},he.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===he.FLOATING_SINGLE?t:this._modelType===he.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===he.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},he.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===he.FLOATING?t=16:this._modelType===he.FLOATING_SINGLE?t=6:this._modelType===he.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},he.prototype.setScale=function(t){this._scale=Math.abs(t)},he.prototype.interfaces_=function(){return[e,E]},he.prototype.getClass=function(){return he},he.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(he,de);var ye=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ye.prototype.readResolve=function(){return ye.nameToTypeMap.get(this._name)},ye.prototype.toString=function(){return this._name},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ye,ge),he.Type=ye,he.FIXED=new ye("FIXED"),he.FLOATING=new ye("FLOATING"),he.FLOATING_SINGLE=new ye("FLOATING SINGLE");var me=function t(){this._precisionModel=new he,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],L)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof he&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Jt(this.getCoordinateSequenceFactory().create(t),this):P(t,G)?new Jt(t,this):void 0:new Jt(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new Ht(null,this):1===arguments.length?new Ht(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $t)return this.createMultiPolygon(me.toPolygonArray(t));if(s instanceof Jt)return this.createMultiLineString(me.toLineStringArray(t));if(s instanceof Yt)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],G))return new Yt(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(P(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new Zt(null,this):1===arguments.length?new Zt(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());qt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return le.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new me};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ee[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?Ee[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Ee[n].apply(this,[e.geometries]):Ee[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ae[e])throw new Error("Geometry is not supported");return Ae[e].apply(this,[t])};var Ee={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Ee[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ee.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ee.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ee.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ee.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ee.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=Ee.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Ee.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ae={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ae.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ae.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ae.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ae.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ae.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ae.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ae.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ae[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ce=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ce.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===he.FIXED&&this.reducePrecision(e),e},Ce.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new be(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Oe=function(){},Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe},Oe.opposite=function(t){return t===Oe.LEFT?Oe.RIGHT:t===Oe.RIGHT?Oe.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Oe,Te),(y.prototype=new Error).name="EmptyStackException",(g.prototype=new At).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new y;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new y;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Le=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Le.prototype.getCoordinate=function(){return this._minCoord},Le.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Le.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Le.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Oe.LEFT;return n[e].y<n[e+1].y&&(r=Oe.RIGHT),r},Le.prototype.getEdge=function(){return this._orientedDe},Le.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Le.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Le.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Oe.LEFT&&(this._orientedDe=this._minDe.getSym())},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Ie=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),we=function(){this.array_=[]};we.prototype.addLast=function(t){this.array_.push(t)},we.prototype.removeFirst=function(){return this.array_.shift()},we.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new Ct,this._nodes=new Ct,this._rightMostCoord=null,this._env=null,this._finder=new Le};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ie("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Oe.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Oe.RIGHT)>=1&&e.getDepth(Oe.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new Mt,n=new we,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new K,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Oe.LEFT,t.getDepth(Oe.RIGHT)),e.setDepth(Oe.RIGHT,t.getDepth(Oe.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[E]},Pe.prototype.getClass=function(){return Pe};var Re=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Oe.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Oe.ON]=o,this.location[Oe.LEFT]=a,this.location[Oe.RIGHT]=s}};Re.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Re.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==I.NONE)return!1;return!0},Re.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===I.NONE&&(this.location[e]=t)},Re.prototype.isLine=function(){return 1===this.location.length},Re.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Oe.ON]=this.location[Oe.ON],e[Oe.LEFT]=I.NONE,e[Oe.RIGHT]=I.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===I.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Re.prototype.getLocations=function(){return this.location},Re.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Oe.LEFT];this.location[Oe.LEFT]=this.location[Oe.RIGHT],this.location[Oe.RIGHT]=t},Re.prototype.toString=function(){var t=new x;return this.location.length>1&&t.append(I.toLocationSymbol(this.location[Oe.LEFT])),t.append(I.toLocationSymbol(this.location[Oe.ON])),this.location.length>1&&t.append(I.toLocationSymbol(this.location[Oe.RIGHT])),t.toString()},Re.prototype.setLocations=function(t,e,n){this.location[Oe.ON]=t,this.location[Oe.LEFT]=e,this.location[Oe.RIGHT]=n},Re.prototype.get=function(t){return t<this.location.length?this.location[t]:I.NONE},Re.prototype.isArea=function(){return this.location.length>1},Re.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===I.NONE)return!0;return!1},Re.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Oe.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Re.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(I.NONE)},Re.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Re.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Re(e),this.elt[1]=new Re(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Re(n.elt[0]),this.elt[1]=new Re(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Re(I.NONE),this.elt[1]=new Re(I.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Re(o,a,s),this.elt[1]=new Re(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Re(I.NONE,I.NONE,I.NONE),this.elt[1]=new Re(I.NONE,I.NONE,I.NONE),this.elt[u].setLocations(c,l,f)}};Me.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Oe.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new x;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Oe.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(I.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var xe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ct,this._pts=new Ct,this._label=new Me(I.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ct,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};xe.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},xe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},xe.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ie("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ie("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},xe.prototype.getLinearRing=function(){return this._ring},xe.prototype.getCoordinate=function(t){return this._pts.get(t)},xe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},xe.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},xe.prototype.isHole=function(){return this._isHole},xe.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},xe.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},xe.prototype.addHole=function(t){this._holes.add(t)},xe.prototype.isShell=function(){return null===this._shell},xe.prototype.getLabel=function(){return this._label},xe.prototype.getEdges=function(){return this._edges},xe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},xe.prototype.getShell=function(){return this._shell},xe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Oe.RIGHT);if(n===I.NONE)return null;if(this._label.getLocation(e)===I.NONE)return this._label.setLocation(e,n),null}},xe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},xe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe};var Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xe),De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ct,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ne(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xe),Be=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Be.prototype.setVisited=function(t){this._isVisited=t},Be.prototype.setInResult=function(t){this._isInResult=t},Be.prototype.isCovered=function(){return this._isCovered},Be.prototype.isCoveredSet=function(){return this._isCoveredSet},Be.prototype.setLabel=function(t){this._label=t},Be.prototype.getLabel=function(){return this._label},Be.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Be.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Be.prototype.isInResult=function(){return this._isInResult},Be.prototype.isVisited=function(){return this._isVisited},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Me(0,I.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=I.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==I.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===I.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=I.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case I.BOUNDARY:n=I.INTERIOR;break;case I.INTERIOR:default:n=I.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Be),je=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Ct,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===I.BOUNDARY&&e.add(r)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var ke=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.isNorthern=function(t){return t===ke.NE||t===ke.NW},ke.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},ke.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ke.isInHalfPlane=function(t,e){return e===ke.SE?t===ke.SE||t===ke.SW:t===e||t===e+1},ke.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ke.NE:ke.SE:e>=0?ke.NW:ke.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ke.NE:ke.SE:r.y>=n.y?ke.NW:ke.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(ke,Ge);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ke.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[E]},Ue.prototype.getClass=function(){return Ue};var Ze=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ie("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Oe.LEFT)===I.INTERIOR&&this._label.getLocation(e,Oe.RIGHT)===I.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Oe.LEFT]+"/"+this._depth[Oe.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,I.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,I.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Oe.LEFT&&(r=-1);var i=Oe.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===I.EXTERIOR&&e===I.INTERIOR?1:t===I.INTERIOR&&e===I.EXTERIOR?-1:0},e}(Ue),He=function(){};He.prototype.createNode=function(t){return new Fe(t,null)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var ze=function(){if(this._edges=new Ct,this._nodes=null,this._edgeEndList=new Ct,0===arguments.length)this._nodes=new je(new He);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};ze.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},ze.prototype.find=function(t){return this._nodes.find(t)},ze.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},ze.prototype.getNodeIterator=function(){return this._nodes.iterator()},ze.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},ze.prototype.debugPrintln=function(t){z.out.println(t)},ze.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===I.BOUNDARY},ze.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},ze.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&ke.quadrant(t,e)===ke.quadrant(n,r)},ze.prototype.getEdgeEnds=function(){return this._edgeEndList},ze.prototype.debugPrint=function(t){z.out.print(t)},ze.prototype.getEdgeIterator=function(){return this._edges.iterator()},ze.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},ze.prototype.insertEdge=function(t){this._edges.add(t)},ze.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},ze.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ze(n,!0),i=new Ze(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},ze.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},ze.prototype.getNodes=function(){return this._nodes.values()},ze.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ve=function(){this._geometryFactory=null,this._shellList=new Ct;var t=arguments[0];this._geometryFactory=t};Ve.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ve.prototype.computePolygons=function(t){for(var e=new Ct,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ve.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ie("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ve.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Ct,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ve.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ve.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ct,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new De(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ve.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ve.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ve.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(r)&&st.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},Ve.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ve.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ze.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Ct,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var Ke=function(){};Ke.prototype.getBounds=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Xe=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xe.prototype.getItem=function(){return this._item},Xe.prototype.getBounds=function(){return this._bounds},Xe.prototype.interfaces_=function(){return[Ke,e]},Xe.prototype.getClass=function(){return Xe};var qe=function(){this._size=null,this._items=null,this._size=0,this._items=new Ct,this._items.add(null)};qe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},qe.prototype.size=function(){return this._size},qe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},qe.prototype.clear=function(){this._size=0,this._items.clear()},qe.prototype.isEmpty=function(){return 0===this._size},qe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Je=function(){};Je.prototype.visitItem=function(t){},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var We=function(){};We.prototype.insert=function(t,e){},We.prototype.remove=function(t,e){},We.prototype.query=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ye=function(){if(this._childBoundables=new Ct,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Ye.prototype.getLevel=function(){return this._level},Ye.prototype.size=function(){return this._childBoundables.size()},Ye.prototype.getChildBoundables=function(){return this._childBoundables},Ye.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ye.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ye.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ye.prototype.interfaces_=function(){return[Ke,e]},Ye.prototype.getClass=function(){return Ye},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ye,Qe);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$e.singletonList=function(t){var e=new Ct;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[E]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ye};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ct,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ye?t+=this.size(n):n instanceof Xe&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xe&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ct:t}if(1===arguments.length){for(var e=arguments[0],n=new Ct,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ye){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xe?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xe(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ct;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ye?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Xe),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Ct;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(P(arguments[2],Je)&&arguments[0]instanceof Object&&arguments[1]instanceof Ye)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Ye?this.query(i,u,o):u instanceof Xe?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],At)&&arguments[0]instanceof Object&&arguments[1]instanceof Ye)for(var c=arguments[0],l=arguments[2],f=arguments[1].getChildBoundables(),p=0;p<f.size();p++){var h=f.get(p);this.getIntersectsOp().intersects(h.getBounds(),c)&&(h instanceof Ye?this.query(c,h,l):h instanceof Xe?l.add(h.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ye&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ye){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Ct;n.add(this.createNode(e));var r=new Ct(t);$e.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Ct,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Ct;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(P(arguments[2],Je)&&arguments[0]instanceof Object&&arguments[1]instanceof Ye){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(P(arguments[2],At)&&arguments[0]instanceof Object&&arguments[1]instanceof Ye){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Ct(t);$e.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new qe;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),p=f.getDistance();if(p>=u)break;f.isLeaves()?(u=p,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[2],d=new Xe(arguments[0],arguments[1]),y=new tn(this.getRoot(),d,h);return this.nearestNeighbour(y)[0]}},n.prototype.interfaces_=function(){return[We,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[C]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[C]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new K(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ye),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[E]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new Ot;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new Ct;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new N(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new N(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new S(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var fn=function(){};fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return fn.octant(a,s)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var hn=function(){};hn.prototype.addIntersection=function(t,e){},hn.prototype.interfaces_=function(){return[pn]},hn.prototype.getClass=function(){return hn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:fn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new S(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[hn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ct;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var yn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(e,n),this.p1=new S(r,i)}},gn={serialVersionUID:{configurable:!0}};yn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},yn.prototype.orientationIndex=function(){if(arguments[0]instanceof yn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},yn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},yn.prototype.isVertical=function(){return this.p0.x===this.p1.x},yn.prototype.equals=function(t){if(!(t instanceof yn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},yn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},yn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof yn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new yn(a,s)}},yn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},yn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},yn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},yn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},yn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},yn.prototype.midPoint=function(){return yn.midPoint(this.p0,this.p1)},yn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},yn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},yn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},yn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},yn.prototype.getLength=function(){return this.p0.distance(this.p1)},yn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},yn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},yn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},yn.prototype.lineIntersection=function(t){try{return V.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof H))throw t}return null},yn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},yn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new S(n-u,r+s)},yn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},yn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},yn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},yn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},yn.prototype.distance=function(){if(arguments[0]instanceof yn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},yn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},yn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},yn.prototype.interfaces_=function(){return[E,e]},yn.prototype.getClass=function(){return yn},yn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(yn,gn);var mn=function(){this.tempEnv1=new K,this.tempEnv2=new K,this._overlapSeg1=new yn,this._overlapSeg2=new yn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new K(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<l&&(r<f&&this.computeOverlapsInternal(t,l,n,r,f,o),f<i&&this.computeOverlapsInternal(t,l,n,f,i,o)),l<e&&(r<f&&this.computeOverlapsInternal(l,e,n,r,f,o),f<i&&this.computeOverlapsInternal(l,e,n,f,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new Ct;n.add(new N(e));do{var r=_n.findChainEnd(t,e);n.add(new N(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ke.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ke.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Ct,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new vn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var En=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};En.prototype.setSegmentIntersector=function(t){this._segInt=t},En.prototype.interfaces_=function(){return[bn]},En.prototype.getClass=function(){return En};var An=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ct,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Cn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Cn},Object.defineProperties(e,n),e}(En),Cn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},On={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},On.CAP_ROUND.get=function(){return 1},On.CAP_FLAT.get=function(){return 2},On.CAP_SQUARE.get=function(){return 3},On.JOIN_ROUND.get=function(){return 1},On.JOIN_MITRE.get=function(){return 2},On.JOIN_BEVEL.get=function(){return 3},On.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},On.DEFAULT_MITRE_LIMIT.get=function(){return 5},On.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,On);var Tn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Ln={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Tn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Tn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Tn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Tn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Tn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Tn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Tn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Tn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Tn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Tn.DELETE;)e++;return e},Tn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Tn.prototype.collapseLine=function(){for(var t=new Ot,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Tn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.simplify=function(t,e){return new Tn(t).simplify(e)},Ln.INIT.get=function(){return 0},Ln.DELETE.get=function(){return 1},Ln.KEEP.get=function(){return 1},Ln.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Tn,Ln);var In=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ct},wn={COORDINATE_ARRAY_TYPE:{configurable:!0}};In.prototype.getCoordinates=function(){return this._ptList.toArray(In.COORDINATE_ARRAY_TYPE)},In.prototype.setPrecisionModel=function(t){this._precisionModel=t},In.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},In.prototype.revere=function(){},In.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},In.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},In.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},In.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},In.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},wn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(In,wn);var Pn=function(){},Rn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Pn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Math.abs(i-r)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Pn.diff(r,i)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n)-r;return i<=-Math.PI?i+Pn.PI_TIMES_2:i>Math.PI?i-Pn.PI_TIMES_2:i},Rn.PI_TIMES_2.get=function(){return 2*Math.PI},Rn.PI_OVER_2.get=function(){return Math.PI/2},Rn.PI_OVER_4.get=function(){return Math.PI/4},Rn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Rn.CLOCKWISE.get=function(){return st.CLOCKWISE},Rn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Pn,Rn);var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new yn,this._seg1=new yn,this._offset0=new yn,this._offset1=new yn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},xn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Oe.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Oe.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new yn(t,e),r=new yn;this.computeOffsetSegment(n,Oe.LEFT,this._distance,r);var i=new yn;this.computeOffsetSegment(n,Oe.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var u=new S;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new S(r.p1.x+u.x,r.p1.y+u.y),l=new S(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=V.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof H))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===st.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Pn.angle(i,this._seg0.p0),a=Pn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Pn.normalize(o+a),u=Pn.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),h=new S(f,p),d=new yn(i,h),y=d.pointAlongOffset(1,l),g=d.pointAlongOffset(1,-l);this._side===Oe.LEFT?(this._segList.addPt(y),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(y))},Mn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Oe.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Mn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new S;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new In,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},xn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},xn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},xn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},xn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,xn);var Nn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Nn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Tt.reverse(o),o},Nn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Oe.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Tn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Oe.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},Nn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Oe.RIGHT&&(r=-r);var i=Tn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Nn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Tn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Oe.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Tn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Oe.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Nn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},Nn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Nn.prototype.getBufferParameters=function(){return this._bufParams},Nn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Nn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Nn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Nn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Oe.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Tn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Oe.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},Nn.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var Dn=function(){this._subgraphs=null,this._seg=new yn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Bn={DepthSegment:{configurable:!0}};Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Ct,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],At)&&arguments[0]instanceof S&&arguments[1]instanceof Ze){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var l=a.getDepth(Oe.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Oe.RIGHT));var f=new Fn(this._seg,l);s.add(f)}}else if(P(arguments[2],At)&&arguments[0]instanceof S&&P(arguments[1],At))for(var p=arguments[0],h=arguments[2],d=arguments[1].iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(p,y,h)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Bn.DepthSegment.get=function(){return Fn},Object.defineProperties(Dn,Bn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new yn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[E]},Fn.prototype.getClass=function(){return Fn};var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,r){return t*r-e*n},jn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,f=t.x-i,p=t.y-o,h=(c*f-s*p)/l,d=(-u*f+a*p)/l;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},jn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},jn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*jn.det(o,a,s,u),l=jn.det(a,o*o+a*a,u,s*s+u*u),f=jn.det(o,o*o+a*a,s,s*s+u*u);return new S(r-l/c,i+f/c)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new V(t.x+n/2,t.y+r/2,1),o=new V(t.x-r+n/2,t.y+n+r/2,1);return new V(i,o)},jn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new S(t.x+i*o,t.y+i*a)},jn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,p=c*c+l*l+f*f;return Math.sqrt(p)/2},jn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new S(r,i)},jn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new S(s,u)};var kn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ct;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};kn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,I.EXTERIOR,I.INTERIOR)},kn.prototype.addPolygon=function(t){var e=this._distance,n=Oe.LEFT;this._distance<0&&(e=-this._distance,n=Oe.RIGHT);var r=t.getExteriorRing(),i=Tt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,I.EXTERIOR,I.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Oe.opposite(n),I.INTERIOR,I.EXTERIOR)}},kn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},kn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,I.EXTERIOR,I.INTERIOR)},kn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Me(0,I.BOUNDARY,e,n));this._curveList.add(r)},kn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},kn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Oe.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},kn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Jt?this.addLineString(t):t instanceof Yt?this.addPoint(t):(t instanceof te||t instanceof Ht||t instanceof ne||t instanceof Zt)&&this.addCollection(t)},kn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},kn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Zt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[Et]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof Zt)};var Zn=function(){this._geom=null;var t=arguments[0];this._geom=t};Zn.prototype.locate=function(t){return Zn.locate(t,this._geom)},Zn.prototype.interfaces_=function(){return[Gn]},Zn.prototype.getClass=function(){return Zn},Zn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Zn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Zn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Zn.isPointInRing(t,i))return!1}return!0},Zn.containsPoint=function(t,e){if(e instanceof $t)return Zn.containsPointInPolygon(t,e);if(e instanceof Zt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&Zn.containsPoint(t,r))return!0}return!1},Zn.locate=function(t,e){return e.isEmpty()?I.EXTERIOR:Zn.containsPoint(t,e)?I.INTERIOR:I.EXTERIOR};var Hn=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[I.NONE,I.NONE]};Hn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Hn.prototype.propagateSideLabels=function(t){for(var e=I.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Oe.LEFT)!==I.NONE&&(e=r.getLocation(t,Oe.LEFT))}if(e===I.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Oe.ON)===I.NONE&&s.setLocation(t,Oe.ON,i),s.isArea(t)){var u=s.getLocation(t,Oe.LEFT),c=s.getLocation(t,Oe.RIGHT);if(c!==I.NONE){if(c!==i)throw new Ie("side location conflict",a.getCoordinate());u===I.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Oe.LEFT)===I.NONE,"found single null side"),s.setLocation(t,Oe.RIGHT,i),s.setLocation(t,Oe.LEFT,i)}}},Hn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Hn.prototype.print=function(t){z.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Hn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Oe.LEFT);et.isTrue(r!==I.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Oe.LEFT),u=a.getLocation(t,Oe.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Hn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Hn.prototype.iterator=function(){return this.getEdges().iterator()},Hn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ct(this._edgeMap.values())),this._edgeList},Hn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===I.NONE&&(this._ptInAreaLocation[t]=Zn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Hn.prototype.toString=function(){var t=new x;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Hn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Hn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===I.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=I.NONE;if(e[u])c=I.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},Hn.prototype.getDegree=function(){return this._edgeMap.size()},Hn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var zn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ie("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ke.isNorthern(i)&&ke.isNorthern(o)?n:ke.isNorthern(i)||ke.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){z.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ct;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Oe.LEFT),r=t.getDepth(Oe.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ie("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Oe.RIGHT,a),a=u.getDepth(Oe.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=I.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=I.INTERIOR;break}if(r.isInResult()){t=I.EXTERIOR;break}}}if(t===I.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===I.INTERIOR):(a.isInResult()&&(i=I.EXTERIOR),s.isInResult()&&(i=I.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(I.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==I.INTERIOR&&o!==I.BOUNDARY||this._label.setLocation(i,I.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hn),Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new zn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(He),Kn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Kn.prototype.compareTo=function(t){var e=t;return Kn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Kn.prototype.interfaces_=function(){return[E]},Kn.prototype.getClass=function(){return Kn},Kn.orientation=function(t){return 1===Tt.increasingDirection(t)},Kn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var f=(u+=i)===a,p=(c+=o)===s;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Xn=function(){this._edges=new Ct,this._ocaMap=new f};Xn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xn.prototype.iterator=function(){return this._edges.iterator()},Xn.prototype.getEdges=function(){return this._edges},Xn.prototype.get=function(t){return this._edges.get(t)},Xn.prototype.findEqualEdge=function(t){var e=new Kn(t.getCoordinates());return this._ocaMap.get(e)},Xn.prototype.add=function(t){this._edges.add(t);var e=new Kn(t.getCoordinates());this._ocaMap.put(e,t)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var qn=function(){};qn.prototype.processIntersections=function(t,e,n,r){},qn.prototype.isDone=function(){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Jn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Jn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Jn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Jn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Jn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Jn.prototype.getLineIntersector=function(){return this._li},Jn.prototype.hasProperIntersection=function(){return this._hasProper},Jn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Jn.prototype.hasIntersection=function(){return this._hasIntersection},Jn.prototype.isDone=function(){return!1},Jn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Jn.prototype.interfaces_=function(){return[qn]},Jn.prototype.getClass=function(){return Jn},Jn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Wn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};Wn.prototype.getSegmentIndex=function(){return this.segmentIndex},Wn.prototype.getCoordinate=function(){return this.coord},Wn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Wn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Wn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Wn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Wn.prototype.getDistance=function(){return this.dist},Wn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Wn.prototype.interfaces_=function(){return[E]},Wn.prototype.getClass=function(){return Wn};var Yn=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};Yn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Yn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Yn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Yn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Yn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Me(this.edge._label))},Yn.prototype.add=function(t,e,n){var r=new Wn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Yn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Qn=function(){};Qn.prototype.getChainStartIndices=function(t){var e=0,n=new Ct;n.add(new N(e));do{var r=this.findChainEnd(t,e);n.add(new N(r)),e=r}while(e<t.length-1);return Qn.toIntArray(n)},Qn.prototype.findChainEnd=function(t,e){for(var n=ke.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ke.quadrant(t[r-1],t[r])===n;)r++;return r-1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new K,this.env2=new K;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],p=a.pts[s],h=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((s+u)/2);i<d&&(s<y&&this.computeIntersectsForChain(i,d,a,s,y,c),y<u&&this.computeIntersectsForChain(i,d,a,y,u,c)),d<o&&(s<y&&this.computeIntersectsForChain(d,o,a,s,y,c),y<u&&this.computeIntersectsForChain(d,o,a,y,u,c))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Oe.RIGHT]-this._depth[t][Oe.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?I.EXTERIOR:I.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==I.EXTERIOR&&r!==I.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===I.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===I.EXTERIOR?0:t===I.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Yn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new K;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new x;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Oe.ON),e.getLocation(1,Oe.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Oe.LEFT),e.getLocation(1,Oe.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Oe.RIGHT),e.getLocation(1,Oe.RIGHT),2))},e}(Be),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Ct,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Dn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Ct,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Pe;i.create(r),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new An,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Jn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Nn(n,this._bufParams),i=new kn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new ze(new Vn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ve(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Me(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Oe.LEFT),n=t.getLocation(0,Oe.RIGHT);return e===I.INTERIOR&&n===I.EXTERIOR?1:e===I.EXTERIOR&&n===I.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new me,n=new Ct;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&z.out.println(n)}},ir.prototype.scale=function(){if(P(arguments[0],bt)){for(var t=arguments[0],e=new Ct,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],p=arguments[2],h=arguments[3];if(l===p&&f===h)return null;var d=l.getCoordinates()[f],y=l.getCoordinates()[f+1],g=p.getCoordinates()[h],m=p.getCoordinates()[h+1];if(this._li.computeIntersection(d,y,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,g,m)))throw new $("found non-noded intersection at "+d+"-"+y+" and "+g+"-"+m)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new me},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new K(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var cr=function(){this.tempEnv1=new K,this.selectedSegment=new yn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},fr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Je]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},fr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(lr,fr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),hr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ct};hr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hr.prototype.isDone=function(){return!1},hr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hr.prototype.interfaces_=function(){return[qn]},hr.prototype.getClass=function(){return hr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof Z))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new hr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new An,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var yr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};yr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new he(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},yr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=yr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ie))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=yr.precisionScaleFactor(this._argGeom,this._distance,n),i=new he(r);this.bufferFixedPrecision(i)}},yr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===he.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},yr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},yr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},yr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},yr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new yr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new yr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var i=arguments[1];return new yr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new yr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},yr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=R.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},gr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},gr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},gr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},gr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},gr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(yr,gr);var mr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof Jt&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new yn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof mr&&arguments[0]instanceof $t&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1],u=arguments[2];vr.computeDistance(a.getExteriorRing(),s,u);for(var c=0;c<a.getNumInteriorRing();c++)vr.computeDistance(a.getInteriorRingN(c),s,u)}else if(arguments[2]instanceof mr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var l=arguments[0],f=arguments[1],p=arguments[2];if(l instanceof Jt)vr.computeDistance(l,f,p);else if(l instanceof $t)vr.computeDistance(l,f,p);else if(l instanceof Zt)for(var h=l,d=0;d<h.getNumGeometries();d++){var y=h.getGeometryN(d);vr.computeDistance(y,f,p)}else p.setMinimum(l.getCoordinate(),f)}else if(arguments[2]instanceof mr&&arguments[0]instanceof yn&&arguments[1]instanceof S){var g=arguments[1],m=arguments[2],v=arguments[0].closestPoint(g);m.setMinimum(v,g)}};var _r=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new Ar(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new Er(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return Er},br.MaxMidpointDistanceFilter.get=function(){return Ar},Object.defineProperties(_r,br);var Er=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};Er.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Er.prototype.getMaxPointDistance=function(){return this._maxPtDist},Er.prototype.interfaces_=function(){return[ht]},Er.prototype.getClass=function(){return Er};var Ar=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};Ar.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ar.prototype.isDone=function(){return!1},Ar.prototype.isGeometryChanged=function(){return!1},Ar.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ar.prototype.interfaces_=function(){return[Ut]},Ar.prototype.getClass=function(){return Ar};var Cr=function(t){this._comps=t||null};Cr.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Cr.prototype.interfaces_=function(){return[Gt]},Cr.prototype.getClass=function(){return Cr},Cr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Cr.getPolygons(t,new Ct)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof Zt&&e.apply(new Cr(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jt&&this._lines.add(t)},Sr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sr.prototype.interfaces_=function(){return[ct]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sr.getLines(e,n))}},Sr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sr.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],bt)&&P(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Sr.getLines(r,e)}return e}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new Ct;return i.apply(new Sr(a,o)),a}if(arguments[0]instanceof lt&&P(arguments[1],bt)){var s=arguments[0],u=arguments[1];return s instanceof Jt?u.add(s):s.apply(new Sr(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],bt)&&P(arguments[1],bt)){for(var c=arguments[1],l=arguments[2],f=arguments[0].iterator();f.hasNext();){var p=f.next();Sr.getLines(p,c,l)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&P(arguments[1],bt)){var h=arguments[1],d=arguments[2];return arguments[0].apply(new Sr(h,d)),h}}};var Or=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Or.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return I.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===I.EXTERIOR)return I.EXTERIOR;if(r===I.BOUNDARY)return I.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===I.INTERIOR)return I.EXTERIOR;if(a===I.BOUNDARY)return I.BOUNDARY}return I.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Jt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return I.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?I.INTERIOR:I.EXTERIOR:I.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Yt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?I.INTERIOR:I.EXTERIOR}},Or.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):I.EXTERIOR},Or.prototype.intersects=function(t,e){return this.locate(t,e)!==I.EXTERIOR},Or.prototype.updateLocationInfo=function(t){t===I.INTERIOR&&(this._isIn=!0),t===I.BOUNDARY&&this._numBoundaries++},Or.prototype.computeLocation=function(t,e){if(e instanceof Yt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ht)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Zt)for(var u=new Un(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Or.prototype.locate=function(t,e){return e.isEmpty()?I.EXTERIOR:e instanceof Jt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?I.BOUNDARY:this._numBoundaries>0||this._isIn?I.INTERIOR:I.EXTERIOR)},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Tr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Lr={INSIDE_AREA:{configurable:!0}};Tr.prototype.isInsideArea=function(){return this._segIndex===Tr.INSIDE_AREA},Tr.prototype.getCoordinate=function(){return this._pt},Tr.prototype.getGeometryComponent=function(){return this._component},Tr.prototype.getSegmentIndex=function(){return this._segIndex},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Lr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tr,Lr);var Ir=function(t){this._pts=t||null};Ir.prototype.filter=function(t){t instanceof Yt&&this._pts.add(t)},Ir.prototype.interfaces_=function(){return[Gt]},Ir.prototype.getClass=function(){return Ir},Ir.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Yt?$e.singletonList(t):Ir.getPoints(t,new Ct)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Yt?n.add(e):e instanceof Zt&&e.apply(new Ir(n)),n}};var wr=function(){this._locations=null;var t=arguments[0];this._locations=t};wr.prototype.filter=function(t){(t instanceof Yt||t instanceof Jt||t instanceof $t)&&this._locations.add(new Tr(t,0,t.getCoordinate()))},wr.prototype.interfaces_=function(){return[Gt]},wr.prototype.getClass=function(){return wr},wr.getLocations=function(t){var e=new Ct;return t.apply(new wr(e)),e};var Pr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Or,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Pr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Cr.getPolygons(this._geom[e]);if(i.size()>0){var o=wr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],At)&&P(arguments[1],At)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tr&&arguments[1]instanceof $t){var p=arguments[0],h=arguments[1],d=arguments[2],y=p.getCoordinate();if(I.EXTERIOR!==this._ptLocator.locate(y,h))return this._minDistance=0,d[0]=p,d[1]=new Tr(h,y),null}},Pr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=Ir.getPoints(this._geom[0]),i=Ir.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Pr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jt&&arguments[1]instanceof Yt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new yn(r[o],r[o+1]).closestPoint(i);n[0]=new Tr(t,o,s),n[1]=new Tr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jt&&arguments[1]instanceof Jt){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),p=c.getCoordinates(),h=0;h<f.length-1;h++)for(var d=0;d<p.length-1;d++){var y=st.distanceLineLine(f[h],f[h+1],p[d],p[d+1]);if(y<this._minDistance){this._minDistance=y;var g=new yn(f[h],f[h+1]),m=new yn(p[d],p[d+1]),v=g.closestPoints(m);l[0]=new Tr(u,h,v[0]),l[1]=new Tr(c,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Tr(i,0,i.getCoordinate()),n[1]=new Tr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(t,e){return new Pr(t,e).distance()},Pr.isWithinDistance=function(t,e,n){return new Pr(t,e,n).distance()<=n},Pr.nearestPoints=function(t,e){return new Pr(t,e).nearestPoints()};var Rr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Rr.prototype.getCoordinates=function(){return this._pt},Rr.prototype.getCoordinate=function(t){return this._pt[t]},Rr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Rr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Rr.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Rr.prototype.getDistance=function(){return this._distance},Rr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr};var Mr=function(){};Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.computeDistance=function(){if(arguments[2]instanceof Rr&&arguments[0]instanceof Jt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new yn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Rr&&arguments[0]instanceof $t&&arguments[1]instanceof S){var s=arguments[0],u=arguments[1],c=arguments[2];Mr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Mr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Rr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Jt)Mr.computeDistance(f,p,h);else if(f instanceof $t)Mr.computeDistance(f,p,h);else if(f instanceof Zt)for(var d=f,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Mr.computeDistance(g,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Rr&&arguments[0]instanceof yn&&arguments[1]instanceof S){var m=arguments[1],v=arguments[2],_=arguments[0].closestPoint(m);v.setMinimum(_,m)}};var xr=function(){this._g0=null,this._g1=null,this._ptDist=new Rr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Nr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};xr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},xr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},xr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},xr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},xr.prototype.computeOrientedDistance=function(t,e,n){var r=new Dr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Br(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},xr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr},xr.distance=function(){if(2===arguments.length)return new xr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new xr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Nr.MaxPointDistanceFilter.get=function(){return Dr},Nr.MaxDensifiedByFractionDistanceFilter.get=function(){return Br},Object.defineProperties(xr,Nr);var Dr=function(){this._maxPtDist=new Rr,this._minPtDist=new Rr,this._euclideanDist=new Mr,this._geom=null;var t=arguments[0];this._geom=t};Dr.prototype.filter=function(t){this._minPtDist.initialize(),Mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[ht]},Dr.prototype.getClass=function(){return Dr};var Br=function(){this._maxPtDist=new Rr,this._minPtDist=new Rr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Br.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new S(s,u);this._minPtDist.initialize(),Mr.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Br.prototype.isDone=function(){return!1},Br.prototype.isGeometryChanged=function(){return!1},Br.prototype.getMaxPointDistance=function(){return this._maxPtDist},Br.prototype.interfaces_=function(){return[Ut]},Br.prototype.getClass=function(){return Br};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new xr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&z.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof Zt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Pr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new Ct,n=new Sr(e),r=Cr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},jr.VERBOSE.get=function(){return!1},jr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,jr);var kr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};kr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},kr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*kr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new K(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new K(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},kr.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},kr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},kr.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},kr.prototype.getErrorIndicator=function(){return this._errorIndicator},kr.prototype.getErrorLocation=function(){return this._errorLocation},kr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},kr.prototype.report=function(t){if(!kr.VERBOSE)return null;z.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},kr.prototype.getErrorMessage=function(){return this._errorMsg},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.isValidMsg=function(t,e,n){var r=new kr(t,e,n);return r.isValid()?null:r.getErrorMessage()},kr.isValid=function(t,e,n){return!!new kr(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kr,Gr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:fn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},Ur.prototype.interfaces_=function(){return[pn]},Ur.prototype.getClass=function(){return Ur};var Zr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ct,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Zr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Zr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Zr.prototype.getIntersectionSegments=function(){return this._intSegments},Zr.prototype.count=function(){return this._intersectionCount},Zr.prototype.getIntersections=function(){return this._intersections},Zr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Zr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Zr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Zr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Zr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Zr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Zr.prototype.interfaces_=function(){return[qn]},Zr.prototype.getClass=function(){return Zr},Zr.createAllIntersectionsFinder=function(t){var e=new Zr(t);return e.setFindAllIntersections(!0),e},Zr.createAnyIntersectionFinder=function(t){return new Zr(t)},Zr.createIntersectionCounter=function(t){var e=new Zr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Hr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Hr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Hr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hr.prototype.isValid=function(){return this.execute(),this._isValid},Hr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Zr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new An;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ie(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.computeIntersections=function(t){var e=new Hr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var zr=function t(){this._nv=null;var e=arguments[0];this._nv=new Hr(t.toSegmentStrings(e))};zr.prototype.checkValid=function(){this._nv.checkValid()},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.toSegmentStrings=function(t){for(var e=new Ct,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},zr.checkValid=function(t){new zr(t).checkValid()};var Vr=function(t){this._mapOp=t};Vr.prototype.map=function(t){for(var e=new Ct,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.map=function(t,e){return new Vr(e).map(t)};var Kr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ct,this._resultLineList=new Ct;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Kr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Kr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Kr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Kr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ti.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Kr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Kr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Kr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Kr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ti.isResultOfOp(r,e)&&e===Ti.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr};var Xr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ct;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Ti.INTERSECTION)){var r=n.getLabel();Ti.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var qr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};qr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},qr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Ct,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Ct;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},qr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},qr.prototype.getInputGeometry=function(){return this._inputGeom},qr.prototype.transformMultiLineString=function(t,e){for(var n=new Ct,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.transformCoordinates=function(t,e){return this.copy(t)},qr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},qr.prototype.transformMultiPoint=function(t,e){for(var n=new Ct,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.transformMultiPolygon=function(t,e){for(var n=new Ct,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.copy=function(t){return t.copy()},qr.prototype.transformGeometryCollection=function(t,e){for(var n=new Ct,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},qr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Yt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Jt)return this.transformLineString(t,null);if(t instanceof Ht)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Zt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},qr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr};var Jr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new yn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Jr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Jr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Jr.prototype.snapTo=function(t){var e=new Ot(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Jr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},Jr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Jr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Wr=function(t){this._srcGeom=t||null},Yr={SNAP_PRECISION_FACTOR:{configurable:!0}};Wr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qr(e,n).transform(this._srcGeom)},Wr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Qr(t,n,!0).transform(this._srcGeom),i=r;return e&&P(i,Qt)&&(i=r.buffer(0)),i},Wr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Wr.prototype.extractTargetCoordinates=function(t){for(var e=new h,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Wr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Wr(t);r[0]=i.snapTo(e,n);var o=new Wr(e);return r[1]=o.snapTo(r[0],n),r},Wr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Wr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===he.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Wr.computeOverlaySnapTolerance(i),Wr.computeOverlaySnapTolerance(o))}},Wr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Wr.SNAP_PRECISION_FACTOR},Wr.snapToSelf=function(t,e,n){return new Wr(t).snapToSelf(e,n)},Yr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Wr,Yr);var Qr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Jr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qr),$r=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$r.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},$r.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$r.signExpBits(this._commonBits),this._isFirst=!1,null):$r.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$r.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$r.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$r.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$r.signExpBits=function(t){return t>>52},$r.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$r.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($r.getBit(t,r)!==$r.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new $r,this._commonBitsY=new $r};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ht]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Wr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ti.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||z.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Wr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Wr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ti.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ti.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ti.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ti.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ti.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ti.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ti.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ti.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[E]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fi=function(t){function e(){t.call(this),this.events=new Ct,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&P(arguments[0],At)&&P(arguments[1],At)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],At)&&arguments[1]instanceof li){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},hi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return Q.toLineString(new S(this._min,0),new S(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},hi.NodeComparator.get=function(){return di},Object.defineProperties(pi,hi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[C]},di.prototype.getClass=function(){return di};var yi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),gi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(){this._leaves=new Ct,this._root=null,this._level=0};mi.prototype.buildTree=function(){$e.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new Ct;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new yi(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){z.out.println(Q.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new gi(t.get(n),t.get(n+1));e.add(i)}}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var vi=function(){this._items=new Ct};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[Je]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var t=arguments[0];if(!P(t,Qt))throw new v("Argument must be Polygonal");this._index=new Ai(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new Ei(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Gn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return Ei},bi.IntervalIndexedGeometry.get=function(){return Ai},Object.defineProperties(_i,bi);var Ei=function(){this._counter=null;var t=arguments[0];this._counter=t};Ei.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Ei.prototype.interfaces_=function(){return[Je]},Ei.prototype.getClass=function(){return Ei};var Ai=function(){this._index=new mi;var t=arguments[0];this.init(t)};Ai.prototype.init=function(t){for(var e=Sr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ai.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new yn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Ai.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Ci=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Or,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;I.NONE,r.getLocation(t,Oe.ON)===I.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new li(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Yt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,I.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,I.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),I.EXTERIOR,I.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,I.INTERIOR,I.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],I.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],I.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Me(this._argIndex,I.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===I.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Tt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Me(this._argIndex,I.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],I.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Me(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Jt)this.addLineString(e);else if(e instanceof Yt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ht)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Zt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?I.BOUNDARY:I.INTERIOR},e}(ze),Si=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ci(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ci(0,e,r),this._arg[1]=new Ci(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ci(0,i,a),this._arg[1]=new Ci(1,o,a)}};Si.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Si.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Oi=function(){};Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.map=function(){if(arguments[0]instanceof lt&&P(arguments[1],Oi.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ct,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],bt)&&P(arguments[1],Oi.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Ct,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Oi.MapOp=function(){};var Ti=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Or,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xn,this._resultPolyList=new Ct,this._resultLineList=new Ct,this._resultPointList=new Ct,this._graph=new ze(new Vn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Ct;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==I.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ct,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ct;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),zr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ve(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Kr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Oe.RIGHT),i.getLocation(1,Oe.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Oe.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Oe.LEFT,r.getLocation(i,Oe.LEFT)),et.isTrue(!r.isNull(i,Oe.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Oe.RIGHT,r.getLocation(i,Oe.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Si);Ti.overlayOp=function(t,e,n){return new Ti(t,e).getResultGeometry(n)},Ti.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Vr.map(t,{interfaces_:function(){return[Oi.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.INTERSECTION)},Ti.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},Ti.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ti.INTERSECTION:o=Math.min(r,i);break;case Ti.UNION:o=Math.max(r,i);break;case Ti.DIFFERENCE:o=r;break;case Ti.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ti.createEmptyResult=function(t,e,n,r){var i=null;switch(Ti.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ti.difference=function(t,e){return t.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.DIFFERENCE))},Ti.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ti.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===I.BOUNDARY&&(i=I.INTERIOR),o===I.BOUNDARY&&(o=I.INTERIOR),a){case Ti.INTERSECTION:return i===I.INTERIOR&&o===I.INTERIOR;case Ti.UNION:return i===I.INTERIOR||o===I.INTERIOR;case Ti.DIFFERENCE:return i===I.INTERIOR&&o!==I.INTERIOR;case Ti.SYMDIFFERENCE:return i===I.INTERIOR&&o!==I.INTERIOR||i!==I.INTERIOR&&o===I.INTERIOR}return!1}},Ti.INTERSECTION=1,Ti.UNION=2,Ti.DIFFERENCE=3,Ti.SYMDIFFERENCE=4;var Li=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Or,this._seg=new yn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Li.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Li.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?I.BOUNDARY:this._ptLocator.locate(t,this._g)},Li.prototype.extractLinework=function(t){var e=new Ii;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var Ii=function(){this._linework=null,this._linework=new Ct};Ii.prototype.getLinework=function(){return this._linework},Ii.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ii.prototype.interfaces_=function(){return[Gt]},Ii.prototype.getClass=function(){return Ii};var wi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};wi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},wi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},wi.prototype.getPoints=function(t){for(var e=new Ct,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},wi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new S(c-u,l+s);r.add(f)}if(this._doRight){var p=new S(c+u,l-s);r.add(p)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Pi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ct;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Li(this._geom[0],this._boundaryDistanceTolerance),new Li(this._geom[1],this._boundaryDistanceTolerance),new Li(this._geom[2],this._boundaryDistanceTolerance)]},Ri={TOLERANCE:{configurable:!0}};Pi.prototype.reportResult=function(t,e,n){z.out.println("Overlay result invalid - A:"+I.toLocationSymbol(e[0])+" B:"+I.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+I.toLocationSymbol(e[2]))},Pi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pi.hasLocation(this._location,I.BOUNDARY)||this.isValidResult(r,this._location)}},Pi.prototype.addTestPts=function(t){var e=new wi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pi.prototype.isValidResult=function(t,e){var n=Ti.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===I.INTERIOR);return r||this.reportResult(t,e,n),r},Pi.prototype.getInvalidLocation=function(){return this._invalidLocation},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Wr.computeSizeBasedSnapTolerance(t),Wr.computeSizeBasedSnapTolerance(e))},Pi.isValid=function(t,e,n,r){return new Pi(t,e,r).isValid(n)},Ri.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pi,Ri);var Mi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Mi.prototype.combine=function(){for(var t=new Ct,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.combine=function(){if(1===arguments.length)return new Mi(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Mi(Mi.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Mi(Mi.createList(n,r,i)).combine()}},Mi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ct;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Ct;return a.add(r),a.add(i),a.add(o),a}};var xi=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ct)},Ni={STRTREE_NODE_CAPACITY:{configurable:!0}};xi.prototype.reduceToGeometries=function(t){for(var e=new Ct,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,At)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},xi.prototype.extractByEnvelope=function(t,e,n){for(var r=new Ct,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},xi.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},xi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(xi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},xi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=xi.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(xi.getGeometry(e,n),xi.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},xi.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},xi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},xi.prototype.unionActual=function(t,e){return xi.restrictToPolygons(t.union(e))},xi.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},xi.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Ct,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Mi.combine(r)},xi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},xi.restrictToPolygons=function(t){if(P(t,Qt))return t;var e=Cr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},xi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},xi.union=function(t){return new xi(t).union()},Ni.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(xi,Ni);var Di=function(){};Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.UNION)},t.GeoJSONReader=Ce,t.GeoJSONWriter=Se,t.OverlayOp=Ti,t.UnionOp=Di,t.BufferOp=yr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},784:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtrudeMode=void 0;var r,i=(r=n(674))&&r.__esModule?r:{default:r},o=n(672),a=n(699),s=n(675);function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(f,t);var e,n,r,a,u=(e=f,function(){var t,n=v(e);if(m()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function f(){var t;h(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(g(t=u.call.apply(u,[this].concat(n))),"isPointAdded",!1),t}return n=f,(r=[{key:"handleDragging",value:function(t,e){var n=(0,o.getPickedEditHandle)(t.pointerDownPicks);if(n){var r=n.properties.featureIndex,i=n.properties.positionIndexes,a=this.coordinatesSize(i,r,e.data);i=this.isPointAdded?this.nextPositionIndexes(i,a):i;var u=this.getPointForPositionIndexes(this.prevPositionIndexes(i,a),r,e.data),c=this.getPointForPositionIndexes(i,r,e.data);if(u&&c){var f=l((0,o.generatePointsParallelToLinePoints)(u,c,t.mapCoords),2),p=f[0],h=f[1],d=new s.ImmutableFeatureCollection(e.data).replacePosition(r,this.prevPositionIndexes(i,a),h).replacePosition(r,i,p).getObject();e.onEdit({updatedData:d,editType:"extruding",editContext:{featureIndexes:[r],positionIndexes:this.nextPositionIndexes(i,a),position:p}}),t.cancelPan()}}}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var i=r.properties,a=i.positionIndexes,u=i.featureIndex,c=this.coordinatesSize(a,u,e.data),l=this.getPointForPositionIndexes(this.prevPositionIndexes(a,c),u,e.data),f=this.getPointForPositionIndexes(a,u,e.data);if(l&&f){var p=new s.ImmutableFeatureCollection(e.data);this.isOrthogonal(a,u,c,e.data)||(p=p.addPosition(u,a,f)),this.isOrthogonal(this.prevPositionIndexes(a,c),u,c,e.data)||(p=p.addPosition(u,a,l),this.isPointAdded=!0),e.onEdit({updatedData:p.getObject(),editType:"startExtruding",editContext:{featureIndexes:[u],positionIndexes:a,position:l}})}}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedEditHandle)(t.pointerDownPicks);if(n.length&&r){var i=r.properties.featureIndex,a=r.properties.positionIndexes,u=this.coordinatesSize(a,i,e.data);a=this.isPointAdded?this.nextPositionIndexes(a,u):a;var c=this.getPointForPositionIndexes(this.prevPositionIndexes(a,u),i,e.data),f=this.getPointForPositionIndexes(a,i,e.data);if(c&&f){var p=l((0,o.generatePointsParallelToLinePoints)(c,f,t.mapCoords),2),h=p[0],d=p[1],y=new s.ImmutableFeatureCollection(e.data).replacePosition(i,this.prevPositionIndexes(a,u),d).replacePosition(i,a,h).getObject();e.onEdit({updatedData:y,editType:"extruded",editContext:{featureIndexes:[i],positionIndexes:a,position:h}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(t,e,n){var r=n.features,i=0;if(Array.isArray(t)){var o=r[e].geometry.coordinates;if(3===t.length){var a=l(t,2),s=a[0],u=a[1];o.length&&o[s].length&&(i=o[s][u].length)}else{var c=l(t,1)[0];o.length&&o[c].length&&(i=o[c].length)}}return i}},{key:"getBearing",value:function(t,e){var n=(0,i.default)(t,e);return n<0?Math.floor(360+n):Math.floor(n)}},{key:"isOrthogonal",value:function(t,e,n,r){if(!Array.isArray(t))return!1;t[t.length-1]===n-1&&(t[t.length-1]=0);var i=this.getPointForPositionIndexes(this.prevPositionIndexes(t,n),e,r),o=this.getPointForPositionIndexes(this.nextPositionIndexes(t,n),e,r),a=this.getPointForPositionIndexes(t,e,r),s=this.getBearing(a,i),u=this.getBearing(a,o);return[89,90,91,269,270,271].includes(Math.abs(s-u))}},{key:"nextPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=c(t);return n.length&&(n[n.length-1]=n[n.length-1]===e-1?0:n[n.length-1]+1),n}},{key:"prevPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=c(t);return n.length&&(n[n.length-1]=0===n[n.length-1]?e-2:n[n.length-1]-1),n}},{key:"getPointForPositionIndexes",value:function(t,e,n){var r,i=n.features;if(Array.isArray(t)){var o=i[e].geometry.coordinates;if(3===t.length){var a=l(t,3),s=a[0],u=a[1],c=a[2];o.length&&o[s].length&&(r=o[s][u][c])}else{var f=l(t,2),p=f[0],h=f[1];o.length&&o[p].length&&(r=o[p][h])}}return r}}])&&d(n.prototype,r),a&&d(n,a),f}(a.ModifyMode);e.ExtrudeMode=E},785:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElevationMode=void 0;var r=n(672);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},s(t,e,n||t)}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function p(t){var e=t.pointerDownScreenCoords,n=t.screenCoords;return 10*(e[1]-n[1])}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(y,t);var e,n,i,h,d=(e=y,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function y(){return o(this,y),d.apply(this,arguments)}return n=y,h=[{key:"calculateElevationChangeWithViewport",value:function(t,e){var n=e.pointerDownScreenCoords,r=e.screenCoords;return 156543.03392*Math.cos(t.latitude*Math.PI/180)/Math.pow(2,t.zoom)*(n[1]-r[1])/2}}],(i=[{key:"makeElevatedEvent",value:function(t,e,n){var r=n.modeConfig||{},i=r.minElevation,o=void 0===i?0:i,a=r.maxElevation,s=void 0===a?2e4:a,u=r.calculateElevationChange,c=void 0===u?p:u;if(!t.pointerDownScreenCoords)return t;var l=3===e.length?e[2]:0;return l+=c({pointerDownScreenCoords:t.pointerDownScreenCoords,screenCoords:t.screenCoords}),l=Math.min(l,s),l=Math.max(l,o),Object.assign({},t,{mapCoords:[e[0],e[1],l]})}},{key:"handlePointerMove",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.pointerDownPicks),i=n?n.geometry.coordinates:t.mapCoords;s(l(y.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"handleStopDragging",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.picks),i=n?n.geometry.coordinates:t.mapCoords;s(l(y.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"getCursor",value:function(t){var e=s(l(y.prototype),"getCursor",this).call(this,t);return"cell"===e&&(e="ns-resize"),e}}])&&a(n.prototype,i),h&&a(n,h),y}(n(699).ModifyMode);e.ElevationMode=h},786:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformMode=void 0;var r=n(42),i=n(701),o=n(721),a=n(723);function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},f(t,e,n||t)}function p(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(v,t);var e,n,s,g,m=(e=v,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function v(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),m.call(this,[new i.TranslateMode,new o.ScaleMode,new a.RotateMode])}return n=v,s=[{key:"handlePointerMove",value:function(t,e){var n=null;f(d(v.prototype),"handlePointerMove",this).call(this,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{onUpdateCursor:function(t){n=t||n}})),e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=null,r=null,a=[];this._modes.forEach((function(t){t instanceof i.TranslateMode?r=t:(t instanceof o.ScaleMode&&(n=t),a.push(t))})),n instanceof o.ScaleMode&&!n.isEditHandleSelected()&&a.push(r),a.filter(Boolean).forEach((function(n){return n.handleStartDragging(t,e)}))}},{key:"getGuides",value:function(t){var e=f(d(v.prototype),"getGuides",this).call(this,t),n=(this._modes||[]).find((function(t){return t instanceof a.RotateMode}));if(n instanceof a.RotateMode){var i=e.features.filter((function(t){var e=t.properties||{},r=e.editHandleType,i=[e.mode];return n.getIsRotating()&&i.push(r),!i.includes("scale")}));e=(0,r.featureCollection)(i)}return e}}],s&&l(n.prototype,s),g&&l(n,g),v}(n(725).CompositeMode);e.TransformMode=g},787:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},a(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPointMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,r,f,p=(e=h,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(){return i(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"createTentativeFeature",value:function(t){var e=t.lastPointerMoveEvent;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(e?[e.mapCoords]:[])[0]}}}},{key:"handleClick",value:function(t,e){var n={type:"Point",coordinates:t.mapCoords};e.onEdit(this.getAddFeatureAction(n,e.data))}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),a(c(h.prototype),"handlePointerMove",this).call(this,t,e)}}])&&o(n.prototype,r),f&&o(n,f),h}(n(671).GeoJsonEditMode);e.DrawPointMode=f},788:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawLineStringMode=void 0;var r=n(672);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,i,a,h=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function d(){return s(this,d),h.apply(this,arguments)}return n=d,(i=[{key:"handleClick",value:function(t,e){var n=t.picks,i=(0,r.getPickedEditHandle)(n),a=!1;i||(this.addClickSequence(t),a=!0);var s=this.getClickSequence();if(s.length>1&&i&&Array.isArray(i.properties.positionIndexes)&&i.properties.positionIndexes[0]===s.length-1){var u={type:"LineString",coordinates:o(s)};this.resetClickSequence();var c=this.getAddFeatureAction(u,e.data);c&&e.onEdit(c)}else a&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>1){var r={type:"LineString",coordinates:o(n)};this.resetClickSequence();var i=this.getAddFeatureAction(r,e.data);i&&e.onEdit(i)}}}},{key:"getGuides",value:function(t){var e,n,r=t.lastPointerMoveEvent,i=this.getClickSequence(),a=r?[r.mapCoords]:[],s={type:"FeatureCollection",features:[]};i.length>0&&(n={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(o(i),a)}}),n&&s.features.push(n);var u=i.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=s.features).push.apply(e,o(u)),s}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&u(n.prototype,i),a&&u(n,a),d}(n(671).GeoJsonEditMode);e.DrawLineStringMode=h},789:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleMode=void 0;var r,i=(r=n(526))&&r.__esModule?r:{default:r};function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,r,o,p=(e=h,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return a(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"getTwoClickPolygon",value:function(t,e,n){var r=(0,i.default)([t[0],t[1],e[0],e[1]]);return r.properties=r.properties||{},r.properties.shape="Rectangle",r}}])&&s(n.prototype,r),o&&s(n,o),h}(n(680).TwoClickPolygonMode);e.DrawRectangleMode=p},790:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawSquareMode=void 0;var r=s(n(526)),i=s(n(673)),o=s(n(726)),a=n(42);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,s,u,y=(e=g,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function g(){return c(this,g),y.apply(this,arguments)}return n=g,(s=[{key:"getTwoClickPolygon",value:function(t,e,n){var s=[e[0],t[1]],u=[t[0],e[1]],c=(0,i.default)((0,a.point)(s),(0,a.point)(t)),l=(0,i.default)((0,a.point)(u),(0,a.point)(t)),f=c<=l?c:l,p=c<=l?s:u,h=(0,a.lineString)([p,e]),d=(0,o.default)(h,f).geometry.coordinates,y=(0,r.default)([t[0],t[1],d[0],d[1]]);return y.properties=y.properties||{},y.properties.shape="Square",y}}])&&l(n.prototype,s),u&&l(n,u),g}(n(680).TwoClickPolygonMode);e.DrawSquareMode=y},791:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleFromCenterMode=void 0;var r,i=(r=n(526))&&r.__esModule?r:{default:r};function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,r,o,p=(e=h,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return a(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"getTwoClickPolygon",value:function(t,e,n){var r=t[0]>e[0]?t[0]+Math.abs(t[0]-e[0]):t[0]-Math.abs(t[0]-e[0]),o=t[1]>e[1]?t[1]+Math.abs(t[1]-e[1]):t[1]-Math.abs(t[1]-e[1]),a=(0,i.default)([r,o,e[0],e[1]]);return a.properties=a.properties||{},a.properties.shape="Rectangle",a}}])&&s(n.prototype,r),o&&s(n,o),h}(n(680).TwoClickPolygonMode);e.DrawRectangleFromCenterMode=p},792:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawSquareFromCenterMode=void 0;var r=s(n(526)),i=s(n(673)),o=s(n(726)),a=n(42);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,s,u,y=(e=g,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function g(){return c(this,g),y.apply(this,arguments)}return n=g,(s=[{key:"getTwoClickPolygon",value:function(t,e,n){var s=[e[0],t[1]],u=[t[0],e[1]],c=(0,i.default)((0,a.point)(s),(0,a.point)(t)),l=(0,i.default)((0,a.point)(u),(0,a.point)(t)),f=c<=l?c:l,p=c<=l?s:u,h=(0,a.lineString)([p,e]),d=(0,o.default)(h,f).geometry.coordinates,y=t[0]>d[0]?t[0]+Math.abs(t[0]-d[0]):t[0]-Math.abs(t[0]-d[0]),g=t[1]>d[1]?t[1]+Math.abs(t[1]-d[1]):t[1]-Math.abs(t[1]-d[1]),m=(0,r.default)([y,g,d[0],d[1]]);return m.properties=m.properties||{},m.properties.shape="Square",m}}])&&l(n.prototype,s),u&&l(n,u),g}(n(680).TwoClickPolygonMode);e.DrawSquareFromCenterMode=y},793:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleByDiameterMode=void 0;var r=a(n(700)),i=a(n(673)),o=n(671);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(y,t);var e,n,a,s,d=(e=y,function(){var t,n=p(e);if(f()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function y(){return u(this,y),d.apply(this,arguments)}return n=y,(a=[{key:"getTwoClickPolygon",value:function(t,e,n){var a=(n||{}).steps,s=void 0===a?64:a,u={steps:s};s<4&&(console.warn("Minimum steps to draw a circle is 4 "),u.steps=4);var c=(0,o.getIntermediatePosition)(t,e),l=Math.max((0,i.default)(t,c),.001),f=(0,r.default)(c,l,u);return f.properties=f.properties||{},f.properties.shape="Circle",f}}])&&c(n.prototype,a),s&&c(n,s),y}(n(680).TwoClickPolygonMode);e.DrawCircleByDiameterMode=d},794:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleFromCenterMode=void 0;var r=o(n(700)),i=o(n(673));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,o,a,h=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function d(){return s(this,d),h.apply(this,arguments)}return n=d,(o=[{key:"getTwoClickPolygon",value:function(t,e,n){var o=(n||{}).steps,a=void 0===o?64:o,s={steps:a};a<4&&(console.warn("Minimum steps to draw a circle is 4 "),s.steps=4);var u=Math.max((0,i.default)(t,e),.001),c=(0,r.default)(t,u,s);return c.properties=c.properties||{},c.properties.shape="Circle",c}}])&&u(n.prototype,o),a&&u(n,a),d}(n(680).TwoClickPolygonMode);e.DrawCircleFromCenterMode=h},795:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseByBoundingBoxMode=void 0;var r=u(n(526)),i=u(n(673)),o=u(n(727)),a=n(42),s=n(671);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(m,t);var e,n,u,c,g=(e=m,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function m(){return l(this,m),g.apply(this,arguments)}return n=m,(u=[{key:"getTwoClickPolygon",value:function(t,e,n){var u=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),f=Math.max(t[1],e[1]),p=(0,r.default)([u,c,l,f]).geometry.coordinates[0],h=(0,s.getIntermediatePosition)(t,e),d=Math.max((0,i.default)((0,a.point)(p[0]),(0,a.point)(p[1])),.001),y=Math.max((0,i.default)((0,a.point)(p[0]),(0,a.point)(p[3])),.001);return(0,o.default)(h,d,y)}}])&&f(n.prototype,u),c&&f(n,c),m}(n(680).TwoClickPolygonMode);e.DrawEllipseByBoundingBoxMode=g},796:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseUsingThreePointsMode=void 0;var r=u(n(673)),i=u(n(727)),o=u(n(674)),a=n(42),s=n(671);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(m,t);var e,n,u,c,g=(e=m,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function m(){return l(this,m),g.apply(this,arguments)}return n=m,(u=[{key:"getThreeClickPolygon",value:function(t,e,n,u){var c=(0,s.getIntermediatePosition)(t,e),l=Math.max((0,r.default)(c,(0,a.point)(n)),.001),f=Math.max((0,r.default)(t,e),.001)/2,p={angle:(0,o.default)(t,e)};return(0,i.default)(c,l,f,p)}}])&&f(n.prototype,u),c&&f(n,c),m}(n(728).ThreeClickPolygonMode);e.DrawEllipseUsingThreePointsMode=g},797:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleUsingThreePointsMode=void 0;var r=n(672);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,i,a,h=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function d(){return s(this,d),h.apply(this,arguments)}return n=d,(i=[{key:"getThreeClickPolygon",value:function(t,e,n,i){var a=o((0,r.generatePointsParallelToLinePoints)(t,e,n),2);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[t,e,a[0],a[1],t]]}}}}])&&u(n.prototype,i),a&&u(n,a),d}(n(728).ThreeClickPolygonMode);e.DrawRectangleUsingThreePointsMode=h},798:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draw90DegreePolygonMode=void 0;var r=c(n(677)),i=c(n(674)),o=c(n(248)),a=c(n(673)),s=n(42),u=n(672);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},m(t,e,n||t)}function v(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function E(t,e){return E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},E(t,e)}var A=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(d,t);var e,n,c,l,h=(e=d,function(){var t,n=b(e);if(_()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return v(this,t)});function d(){return y(this,d),h.apply(this,arguments)}return n=d,(c=[{key:"createTentativeFeature",value:function(t){var e,n=this.getClickSequence(),r=t.lastPointerMoveEvent.mapCoords;if(1===n.length)e=r;else{var i=n[n.length-2],o=n[n.length-1];e=p((0,u.generatePointsParallelToLinePoints)(i,o,r),1)[0]}return n.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(f(n),[e])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(f(n),[e,n[0]])]}}}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!t.lastPointerMoveEvent)return e;var n=this.createTentativeFeature(t);return e.features.push(n),e.features=e.features.concat((0,u.getEditHandlesForGeometry)(n.geometry,-1)),e.features=e.features.slice(0,-1),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),m(b(d.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"handleClick",value:function(t,e){var n=t.picks,r=this.getTentativeGuide(e);this.addClickSequence(t);var i=this.getClickSequence();if(r){if(3===i.length&&"LineString"===r.geometry.type){var o=r.geometry;i[i.length-1]=o.coordinates[o.coordinates.length-1]}else if(i.length>3&&"Polygon"===r.geometry.type){var a=r.geometry;i[i.length-1]=a.coordinates[0][a.coordinates[0].length-2];var s=(0,u.getPickedEditHandle)(n);if(s&&Array.isArray(s.properties.positionIndexes)&&(0===s.properties.positionIndexes[1]||s.properties.positionIndexes[1]===a.coordinates[0].length-3)){var c={type:"Polygon",coordinates:this.finalizedCoordinates(f(a.coordinates[0]))};this.resetClickSequence();var l=this.getAddFeatureOrBooleanPolygonAction(c,e);l&&e.onEdit(l)}}var p={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(p,e)}}},{key:"finalizedCoordinates",value:function(t){var e=[[].concat(f(t.slice(0,-2)),[t[0]])],n=this.getIntermediatePoint(f(t));if(n)e=[[].concat(f(t.slice(0,-2)),[n,t[0]])];else{var r=f(t);r.splice(-3,1),(n=this.getIntermediatePoint(f(r)))&&(e=[[].concat(f(t.slice(0,-3)),[n,t[0]])])}return e}},{key:"getIntermediatePoint",value:function(t){var e;if(t.length>4){var n=f(t),u=n[0],c=n[1],l=(0,i.default)(u,c),p=t[t.length-3],h=t[t.length-4],d=(0,i.default)(p,h),y={first:[],second:[]};[1,2,3].forEach((function(t){var e=l+90*t;y.first.push(e>180?e-360:e);var n=d+90*t;y.second.push(n>180?n-360:n)}));var g=(0,a.default)((0,s.point)(u),(0,s.point)(p));[0,1,2].forEach((function(t){var n=(0,s.lineString)([u,(0,r.default)(u,g,y.first[t]).geometry.coordinates]);[0,1,2].forEach((function(t){var i=(0,s.lineString)([p,(0,r.default)(p,g,y.second[t]).geometry.coordinates]),a=(0,o.default)(n,i);a&&a.features.length&&(e=a.features[0].geometry.coordinates)}))}))}return e}}])&&g(n.prototype,c),l&&g(n,l),d}(n(671).GeoJsonEditMode);e.Draw90DegreePolygonMode=A},799:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonByDraggingMode=void 0;var r,i=(r=n(800))&&r.__esModule?r:{default:r},o=n(672);function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(m,t);var e,n,r,a,u=(e=m,function(){var t,n=d(e);if(h()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function m(){var t;c(this,m);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(p(t=u.call.apply(u,[this].concat(n))),"handleDraggingThrottled",null),t}return n=m,(r=[{key:"handleClick",value:function(t,e){}},{key:"handleStartDragging",value:function(t,e){t.cancelPan(),e.modeConfig&&e.modeConfig.throttleMs?this.handleDraggingThrottled=(0,i.default)(this.handleDraggingAux,e.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),n.length>2){var r={type:"Polygon",coordinates:[[].concat(s(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}},{key:"handleDraggingAux",value:function(t,e){var n=t.picks;(0,o.getPickedEditHandle)(n)||this.addClickSequence(t)}},{key:"handleDragging",value:function(t,e){this.handleDraggingThrottled&&this.handleDraggingThrottled(t,e)}}])&&l(n.prototype,r),a&&l(n,a),m}(n(702).DrawPolygonMode);e.DrawPolygonByDraggingMode=m},800:function(t,e,n){(function(e){var n="Expected a function",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),f=Object.prototype.toString,p=Math.max,h=Math.min,d=function(){return l.Date.now()};function y(t,e,r){var i,o,a,s,u,c,l=0,f=!1,y=!1,v=!0;if("function"!=typeof t)throw new TypeError(n);function _(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n)}function b(t){return l=t,u=setTimeout(A,e),f?_(t):s}function E(t){var n=t-c;return void 0===c||n>=e||n<0||y&&t-l>=a}function A(){var t=d();if(E(t))return C(t);u=setTimeout(A,function(t){var n=e-(t-c);return y?h(n,a-(t-l)):n}(t))}function C(t){return u=void 0,v&&i?_(t):(i=o=void 0,s)}function S(){var t=d(),n=E(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return b(c);if(y)return u=setTimeout(A,e),_(c)}return void 0===u&&(u=setTimeout(A,e)),s}return e=m(e)||0,g(r)&&(f=!!r.leading,a=(y="maxWait"in r)?p(m(r.maxWait)||0,e):a,v="trailing"in r?!!r.trailing:v),S.cancel=function(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0},S.flush=function(){return void 0===u?s:C(d())},S}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=o.test(t);return n||a.test(t)?s(t.slice(2),n?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return g(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),y(t,e,{leading:i,maxWait:e,trailing:o})}}).call(this,n(103))},801:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ViewMode=void 0;var c=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(a()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function r(){return i(this,r),n.apply(this,arguments)}return r}(n(671).GeoJsonEditMode);e.ViewMode=c},802:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureDistanceMode=void 0;var r=a(n(673)),i=a(n(803)),o=n(672);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,n,a,s,c=(e=v,function(){var t,n=y(e);if(d()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function v(){var t;l(this,v);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return m(h(t=c.call.apply(c,[this].concat(n))),"_isMeasuringSessionFinished",!1),m(h(t),"_currentTooltips",[]),m(h(t),"_currentDistance",0),m(h(t),"_calculateDistanceForTooltip",(function(t){var e=t.positionA,n=t.positionB,i=t.modeConfig||{},o=i.turfOptions,a=i.measurementCallback,s=(0,r.default)(e,n,o);return a&&a(s),s})),t}return n=v,(a=[{key:"_formatTooltip",value:function(t,e){var n=e||{},r=n.formatTooltip,i=n.turfOptions,o=i&&i.units||"kilometers";return r?r(t):"".concat(parseFloat(t).toFixed(2)," ").concat(o)}},{key:"handleClick",value:function(t,e){var n=e.modeConfig,r=e.data,a=e.onEdit,s=(n||{}).centerTooltipsOnLine,u=void 0!==s&&s;this._isMeasuringSessionFinished&&(this._isMeasuringSessionFinished=!1,this.resetClickSequence(),this._currentTooltips=[],this._currentDistance=0);var c=t.picks,l=(0,o.getPickedEditHandle)(c),f=!1;l||(this.addClickSequence(t),f=!0);var p=this.getClickSequence();if(p.length>1&&l&&Array.isArray(l.properties.positionIndexes)&&l.properties.positionIndexes[0]===p.length-1)this._isMeasuringSessionFinished=!0;else if(f){if(p.length>1){this._currentDistance+=this._calculateDistanceForTooltip({positionA:p[p.length-2],positionB:p[p.length-1],modeConfig:n});var h=u?(0,i.default)(p[p.length-2],p[p.length-1]).geometry.coordinates:t.mapCoords;this._currentTooltips.push({position:h,text:this._formatTooltip(this._currentDistance,n)})}a({updatedData:r,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}}},{key:"handleKeyUp",value:function(t,e){if(!this._isMeasuringSessionFinished){t.stopPropagation();var n=t.key,r=this.getClickSequence().length;switch(n){case"Escape":this._isMeasuringSessionFinished=!0,1===r&&(this.resetClickSequence(),this._currentTooltips=[]),e.onUpdateCursor("cell");break;case"Enter":this.handleClick(e.lastPointerMoveEvent,e),this._isMeasuringSessionFinished=!0}}}},{key:"getGuides",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n&&!this._isMeasuringSessionFinished?[n.mapCoords]:[],o={type:"FeatureCollection",features:[]};r.length>0&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(u(r),i)}});var a=r.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=o.features).push.apply(e,u(a)),o}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getTooltips",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=(n||{}).centerTooltipsOnLine,o=void 0!==r&&r,a=this.getClickSequence();if(a.length>0&&e&&!this._isMeasuringSessionFinished){var s=this._calculateDistanceForTooltip({positionA:a[a.length-1],positionB:e.mapCoords,modeConfig:t.modeConfig}),c=o?(0,i.default)(a[a.length-1],e.mapCoords).geometry.coordinates:e.mapCoords;return[].concat(u(this._currentTooltips),[{position:c,text:this._formatTooltip(this._currentDistance+s,n)}])}return this._currentTooltips}}])&&f(n.prototype,a),s&&f(n,s),v}(n(671).GeoJsonEditMode);e.MeasureDistanceMode=v},803:function(t,e,n){"use strict";n.r(e);var r=n(674),i=n(677),o=n(673);e.default=function(t,e){var n=Object(o.default)(t,e),a=Object(r.default)(t,e);return Object(i.default)(t,n/2,a)}},804:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAreaMode=void 0;var r=a(n(805)),i=a(n(683)),o=n(702);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},p(t,e,n||t)}function h(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}var m=[],v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,n,o,a,s=(e=v,function(){var t,n=y(e);if(d()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function v(){return l(this,v),s.apply(this,arguments)}return n=v,o=[{key:"handleClick",value:function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{onEdit:function(){}});p(y(v.prototype),"handleClick",this).call(this,t,n)}},{key:"getTooltips",value:function(t){var e=this.getTentativeGuide(t);if(e&&"Polygon"===e.geometry.type){var n,o=t.modeConfig||{},a=o.formatTooltip,s=o.measurementCallback,u=(0,i.default)(e),c=(0,r.default)(e);return n=a?a(c):"".concat(parseFloat(c).toFixed(2)," ").concat("sq. m"),s&&s(c),[{position:u.geometry.coordinates,text:n}]}return m}}],o&&f(n.prototype,o),a&&f(n,a),v}(o.DrawPolygonMode);e.MeasureAreaMode=v},805:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n(89),i=6378137;function o(t){return Object(r.geomReduce)(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return a(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=a(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function a(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,r,o,a,s,c=0,l=t.length;if(l>2){for(s=0;s<l;s++)s===l-2?(r=l-2,o=l-1,a=0):s===l-1?(r=l-1,o=0,a=1):(r=s,o=s+1,a=s+2),e=t[r],n=t[o],c+=(u(t[a][0])-u(e[0]))*Math.sin(u(n[1]));c=c*i*i/2}return c}function u(t){return t*Math.PI/180}},806:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAngleMode=void 0;var r=s(n(674)),i=s(n(688)),o=s(n(729)),a=n(671);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=[],b=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(l,t);var e,n,a,s,u=(e=l,function(){var t,n=g(e);if(y()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function l(){var t;f(this,l);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return v(d(t=u.call.apply(u,[this].concat(n))),"_getTooltips",(0,o.default)((function(t){var e=t.modeConfig,n=t.vertex,o=t.point1,a=t.point2,s=_;if(n&&o&&a){var u,c=e||{},l=c.formatTooltip,f=c.measurementCallback,p=(0,r.default)(n,o),h=(0,r.default)(n,a),d=Math.abs(p-h);d>180&&(d=360-d),u=l?l(d):"".concat(parseFloat(d).toFixed(2)," ").concat("deg"),f&&f(d),s=[{position:(0,i.default)({type:"FeatureCollection",features:[o,a].map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t}}}))}).geometry.coordinates,text:u}]}return s}))),t}return n=l,(a=[{key:"handleClick",value:function(t,e){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(t)}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getPoints",value:function(t){var e=this.getClickSequence(),n=c(e);return e.length<3&&t.lastPointerMoveEvent&&n.push(t.lastPointerMoveEvent.mapCoords),n}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=e.features,r=this.getPoints(t);return r.length>2?n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0],r[2]]}}):r.length>1&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0]]}}),e}},{key:"getTooltips",value:function(t){var e=this.getPoints(t);return this._getTooltips({modeConfig:t.modeConfig,vertex:e[0],point1:e[1],point2:e[2]})}}])&&p(n.prototype,a),s&&p(n,s),l}(a.GeoJsonEditMode);e.MeasureAngleMode=b},807:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnappableMode=void 0;var r=n(672);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(m,t);var e,n,i,s,g=(e=m,function(){var t,n=h(e);if(p()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function m(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),y(f(e=g.call(this)),"_handler",void 0),e._handler=t,e}return n=m,i=[{key:"_getSnappedMouseEvent",value:function(t,e,n){return Object.assign(t,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:e&&e.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(t){return(0,r.getPickedEditHandles)(t).find((function(t){return"snap-target"===t.properties.editHandleType}))}},{key:"_getPickedSnapSource",value:function(t){return(0,r.getPickedSnapSourceEditHandle)(t)}},{key:"_getUpdatedSnapSourceHandle",value:function(t,e){var n=t.properties,r=n.featureIndex,i=n.positionIndexes;if(!Array.isArray(i))return t;var o=e.features[r];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{geometry:{type:"Point",coordinates:i.reduce((function(t,e){return t[e]}),o.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(t){var e=(t.modeConfig||{}).additionalSnapTargets;return e=e||[],[].concat(o(t.data.features),o(e))}},{key:"_getSnapTargetHandles",value:function(t){for(var e=[],n=this._getSnapTargets(t),i=0;i<n.length;i++)if(!t.selectedIndexes.includes(i)){var a=n[i].geometry;e.push.apply(e,o((0,r.getEditHandlesForGeometry)(a,i,"snap-target")))}return e}},{key:"getGuides",value:function(t){var e=t.modeConfig,n=t.lastPointerMoveEvent,i=(e||{}).enableSnapping,s={type:"FeatureCollection",features:o(this._handler.getGuides(t).features)};if(!i)return s;var u,c=n&&this._getPickedSnapSource(n.pointerDownPicks);if(c)return(u=s.features).push.apply(u,o(this._getSnapTargetHandles(t)).concat([this._getUpdatedSnapSourceHandle(c,t.data)])),s;var l,f=t.data.features,p=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(t.selectedIndexes);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(h<f.length){var d,y=f[h].geometry;(d=s.features).push.apply(d,o((0,r.getEditHandlesForGeometry)(y,h,"snap-source")))}}}catch(g){p.e(g)}finally{p.f()}return s}},{key:"_getSnapAwareEvent",value:function(t,e){var n=this._getPickedSnapSource(e.lastPointerMoveEvent.pointerDownPicks),r=this._getPickedSnapTarget(t.picks);return n&&r?this._getSnappedMouseEvent(t,n,r):t}},{key:"handleStartDragging",value:function(t,e){this._handler.handleStartDragging(t,e)}},{key:"handleStopDragging",value:function(t,e){this._handler.handleStopDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handleDragging",value:function(t,e){this._handler.handleDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handlePointerMove",value:function(t,e){this._handler.handlePointerMove(this._getSnapAwareEvent(t,e),e)}}],i&&c(n.prototype,i),s&&c(n,s),m}(n(671).GeoJsonEditMode);e.SnappableMode=g},808:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ArrowStyles",{enumerable:!0,get:function(){return r.ArrowStyles}}),Object.defineProperty(e,"DEFAULT_ARROWS",{enumerable:!0,get:function(){return r.DEFAULT_ARROWS}}),Object.defineProperty(e,"MAX_ARROWS",{enumerable:!0,get:function(){return r.MAX_ARROWS}}),Object.defineProperty(e,"EditableGeoJsonLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"EditableH3ClusterLayer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SelectionLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"ElevatedEditHandleLayer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PathOutlineLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"PathMarkerLayer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"JunctionScatterplotLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"toDeckColor",{enumerable:!0,get:function(){return f.toDeckColor}});var r=n(809),i=p(n(703)),o=p(n(811)),a=p(n(814)),s=p(n(815)),u=p(n(735)),c=p(n(817)),l=p(n(821)),f=n(731);function p(t){return t&&t.__esModule?t:{default:t}}},809:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_ARROWS=e.DEFAULT_ARROWS=e.ArrowStyles=void 0;e.ArrowStyles={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3};e.DEFAULT_ARROWS=1;e.MAX_ARROWS=3},810:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(161),i=n(731);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},u(t,e,n||t)}function c(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=d({},r.PathLayer.defaultProps,{pickingLineWidthExtraPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER}}),m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(y,t);var e,n,r,o,h=(e=y,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function y(){return a(this,y),h.apply(this,arguments)}return n=y,(r=[{key:"getShaders",value:function(){var t,e=u(f(y.prototype),"getShaders",this).call(this);return e.vs=(0,i.insertBefore)(e.vs,"vec3 width;","\n       if(picking_uActive){\n        widthPixels.xy += pickingLineWidthExtraPixels;\n       }\n      "),d({},e,{inject:d({},e.inject||{},{"vs:#decl":((null===(t=e.inject)||void 0===t?void 0:t["vs:#decl"])||"").concat("uniform float pickingLineWidthExtraPixels;")})})}},{key:"draw",value:function(t){u(f(y.prototype),"draw",this).call(this,d({},t,{uniforms:d({},t.uniforms,{pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels})}))}}])&&s(n.prototype,r),o&&s(n,o),y}(r.PathLayer);e.default=m,m.defaultProps=g,m.layerName="EditablePathLayer"},811:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(372),i=n(686),o=n(117),a=n(704),s=c(n(703)),u=c(n(730));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},y(t,e,n||t)}function g(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=i.ViewMode,S={type:"FeatureCollection",features:[]},O=E({mode:C},s.default.defaultProps,{data:[],selectedIndexes:[],filled:!1,stroked:!0,lineWidthScale:a.PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",getHexagons:function(t){return t.hexIds},getEditedCluster:function(t,e){return e?E({},e,{hexIds:t}):{hexIds:t}},resolution:9}),T=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(c,t);var e,n,i,a,u=(e=c,function(){var t,n=v(e);if(m()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function c(){return h(this,c),u.apply(this,arguments)}return n=c,(i=[{key:"initializeState",value:function(){y(v(c.prototype),"initializeState",this).call(this),this.setState({tentativeHexagonIDs:[]})}},{key:"getDerivedHexagonIDs",value:function(t){return(0,o.polyfill)(t,this.props.resolution,!0)}},{key:"getDerivedHexagonID",value:function(t){return(0,o.geoToH3)(t[1],t[0],this.props.resolution)}},{key:"renderLayers",value:function(){var t=this;return[new s.default(this.getSubLayerProps({id:"editable-geojson",mode:this.props.mode,data:S,selectedFeatureIndexes:[],onEdit:function(e){var n=e.editType,r=e.editContext;switch(n){case"updateTentativeFeature":if("Polygon"===r.feature.geometry.type){var i=r.feature.geometry.coordinates,o=t.getDerivedHexagonIDs(i);t.setState({tentativeHexagonIDs:o})}else if("Point"===r.feature.geometry.type){var a=r.feature.geometry.coordinates,s=t.getDerivedHexagonID(a);t.setState({tentativeHexagonIDs:[s]})}break;case"addFeature":var u=f(t.props.data),c=t.props.modeConfig;if(c&&c.booleanOperation)if(1!==t.props.selectedIndexes.length)console.warn("booleanOperation only supported for single cluster selection");else{var l,p=new Set(t.getSelectedHexIDs()),h=new Set(t.state.tentativeHexagonIDs);switch(c.booleanOperation){case"union":default:l=f(new Set([].concat(f(p),f(h))));break;case"intersection":l=f(p).filter((function(t){return h.has(t)}));break;case"difference":l=f(p).filter((function(t){return!h.has(t)}))}var d=t.props.selectedIndexes[0],y=t.props.data[d];u[d]=t.props.getEditedCluster(l,y)}else u.push(t.props.getEditedCluster(t.state.tentativeHexagonIDs,null));t.setState({tentativeHexagonIDs:[]}),t.props.onEdit({updatedData:u})}}})),new r.H3ClusterLayer(this.getSubLayerProps({id:"hexagons",data:this.props.data,getHexagons:this.props.getHexagons})),new r.H3ClusterLayer(this.getSubLayerProps({id:"tentative-hexagons",data:[{hexIds:this.state.tentativeHexagonIDs}],getHexagons:function(t){return t.hexIds}}))]}},{key:"getSelectedHexIDs",value:function(){var t=this,e=[];return this.props.selectedIndexes.forEach((function(n){var r=t.props.data[n],i=t.props.getHexagons(r);e=e.concat(i)})),e}},{key:"getCursor",value:function(t){var e=t.isDragging,n=(this.state||{}).cursor;return n||(n=e?"grabbing":"grab"),n}}])&&d(n.prototype,i),a&&d(n,a),c}(u.default);e.default=T,A(T,"layerName","EditableH3ClusterLayer"),A(T,"defaultProps",O)},812:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return m}));n(10);var r,i,o,a,s,u,c,l,f=n(6),p=n(7),h=(new Uint8Array([0]),[171,75,84,88,32,50,48,187,13,10,26,10]);!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(r||(r={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(i||(i={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(o||(o={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(a||(a={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(s||(s={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(u||(u={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(c||(c={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(l||(l={}));var d=Object(f.a)((function t(){Object(p.a)(this,t),this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=r.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:i.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:o.UNSPECIFIED,colorPrimaries:a.SRGB,transferFunction:a.SRGB,flags:u.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null})),y=function(){function t(e,n,r,i){Object(p.a)(this,t),this._dataView=new DataView(e.buffer,e.byteOffset+n,r),this._littleEndian=i,this._offset=0}return Object(f.a)(t,[{key:"_nextUint8",value:function(){var t=this._dataView.getUint8(this._offset);return this._offset+=1,t}},{key:"_nextUint16",value:function(){var t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}},{key:"_nextUint32",value:function(){var t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}},{key:"_nextUint64",value:function(){var t=this._dataView.getUint32(this._offset,this._littleEndian)+Math.pow(2,32)*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}},{key:"_skip",value:function(t){return this._offset+=t,this}},{key:"_scan",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._offset,r=0;this._dataView.getUint8(this._offset)!==e&&r<t;)r++,this._offset++;return r<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}]),t}();function g(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):t.from(e).toString("utf8")}function m(t){var e=new Uint8Array(t.buffer,t.byteOffset,h.length);if(e[0]!==h[0]||e[1]!==h[1]||e[2]!==h[2]||e[3]!==h[3]||e[4]!==h[4]||e[5]!==h[5]||e[6]!==h[6]||e[7]!==h[7]||e[8]!==h[8]||e[9]!==h[9]||e[10]!==h[10]||e[11]!==h[11])throw new Error("Missing KTX 2.0 identifier.");var n=new d,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new y(t,h.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();var o=i._nextUint32();n.supercompressionScheme=i._nextUint32();for(var a=i._nextUint32(),s=i._nextUint32(),u=i._nextUint32(),c=i._nextUint32(),l=i._nextUint64(),f=i._nextUint64(),p=new y(t,h.length+r,3*o*8,!0),m=0;m<o;m++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+p._nextUint64(),p._nextUint64()),uncompressedByteLength:p._nextUint64()});for(var v=new y(t,a,s,!0),_={vendorId:v._skip(4)._nextUint16(),descriptorType:v._nextUint16(),versionNumber:v._nextUint16(),descriptorBlockSize:v._nextUint16(),colorModel:v._nextUint8(),colorPrimaries:v._nextUint8(),transferFunction:v._nextUint8(),flags:v._nextUint8(),texelBlockDimension:{x:v._nextUint8()+1,y:v._nextUint8()+1,z:v._nextUint8()+1,w:v._nextUint8()+1},bytesPlane:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],samples:[]},b=(_.descriptorBlockSize/4-6)/4,E=0;E<b;E++)_.samples[E]={bitOffset:v._nextUint16(),bitLength:v._nextUint8(),channelID:v._nextUint8(),samplePosition:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],sampleLower:v._nextUint32(),sampleUpper:v._nextUint32()};n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(_);for(var A=new y(t,u,c,!0);A._offset<c;){var C=A._nextUint32(),S=A._scan(C),O=g(S),T=A._scan(C-S.byteLength);n.keyValue[O]=O.match(/^ktx/i)?g(T):T,C%4&&A._skip(4-C%4)}if(f<=0)return n;for(var L=new y(t,l,f,!0),I=L._nextUint16(),w=L._nextUint16(),P=L._nextUint32(),R=L._nextUint32(),M=L._nextUint32(),x=L._nextUint32(),N=[],D=0;D<o;D++)N.push({imageFlags:L._nextUint32(),rgbSliceByteOffset:L._nextUint32(),rgbSliceByteLength:L._nextUint32(),alphaSliceByteOffset:L._nextUint32(),alphaSliceByteLength:L._nextUint32()});var B=l+L._offset,F=B+P,j=F+R,k=j+M,G=new Uint8Array(t.buffer,t.byteOffset+B,P),U=new Uint8Array(t.buffer,t.byteOffset+F,R),Z=new Uint8Array(t.buffer,t.byteOffset+j,M),H=new Uint8Array(t.buffer,t.byteOffset+k,x);return n.globalData={endpointCount:I,selectorCount:w,imageDescs:N,endpointsData:G,selectorsData:U,tablesData:Z,extendedData:H},n}}).call(this,n(374).Buffer)},813:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(5),i=n(3),o=n(7),a=n(6),s=n(588),u=n(357),c=n(202),l=n(17),f=function(){function t(e,n){var r=n.attributes,i=n.material,a=n.pbrDebug,c=n.imageBasedLightingEnvironment,l=n.lights,f=n.useTangents;Object(o.a)(this,t),this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Object(s.b)(e,u.a.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],c&&(this.uniforms.u_DiffuseEnvSampler=c.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=c.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=c.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),a&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&f,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(c,"USE_IBL"),this.defineIfPresent(l,"USE_LIGHTS"),this.defineIfPresent(a,"PBR_DEBUG"),i&&this.parseMaterial(i)}return Object(a.a)(t,[{key:"defineIfPresent",value:function(t,e){t&&(this.defines[e]=1)}},{key:"parseTexture",value:function(t,e){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},s=t.texture.source.image,u={};s.compressed?(n=s,u=Object(i.a)({},this.gl.TEXTURE_MIN_FILTER,s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR)):n={data:s};var l=new c.a(this.gl,Object(r.a)({id:t.name||t.id,parameters:Object(r.a)(Object(r.a)({},a),u),pixelStore:Object(i.a)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1)},n));this.uniforms[e]=l,this.defineIfPresent(o,o),this.generatedTextures.push(l)}},{key:"parsePbrMetallicRoughness",value:function(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var e=t.metallicFactor,n=void 0===e?1:e,r=t.roughnessFactor,i=void 0===r?1:r;this.uniforms.u_MetallicRoughnessValues=[n,i]}},{key:"parseMaterial",value:function(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var e=t.normalTexture.scale,n=void 0===e?1:e;this.uniforms.u_NormalScale=n}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var r=t.occlusionTexture.strength,i=void 0===r?1:r;this.uniforms.u_OcclusionStrength=i}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){var o=t.alphaCutoff,a=void 0===o?.5:o;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=a}else"BLEND"===t.alphaMode&&(l.k.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}]),t}()},814:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SELECTION_TYPE=void 0;var r,i=n(41),o=n(161),a=n(42),s=f(n(738)),u=f(n(697)),c=n(686),l=f(n(703));function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};e.SELECTION_TYPE=T;var L=(O(r={},T.RECTANGLE,c.DrawRectangleMode),O(r,T.POLYGON,c.DrawPolygonMode),r),I=O({},T.RECTANGLE,{dragToDraw:!0}),w={selectionType:T.RECTANGLE,layerIds:[],onSelect:function(){}},P={type:"FeatureCollection",features:[]},R="selection-blocker",M=["lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","lineWidthUnits","lineJointRounded","lineCapRounded","lineMiterLimit","pointRadiusScale","pointRadiusMinPixels","pointRadiusMaxPixels","lineDashJustified","getLineColor","getFillColor","getRadius","getLineWidth","getLineDashArray","getTentativeLineDashArray","getTentativeLineColor","getTentativeFillColor","getTentativeLineWidth"],x=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(p,t);var e,n,r,i,f=(e=p,function(){var t,n=C(e);if(A()){var r=C(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)});function p(){return _(this,p),f.apply(this,arguments)}return n=p,(r=[{key:"_selectRectangleObjects",value:function(t){var e=this.props,n=e.layerIds,r=e.onSelect,i=g(this.context.viewport.project(t[0][0]),2),o=i[0],a=i[1],s=g(this.context.viewport.project(t[0][2]),2),u=s[0],c=s[1];r({pickingInfos:this.context.deck.pickObjects({x:Math.min(o,u),y:Math.min(a,c),width:Math.abs(u-o),height:Math.abs(c-a),layerIds:n})})}},{key:"_selectPolygonObjects",value:function(t){var e,n=this,r=this.props,i=r.layerIds,o=r.onSelect,c=t[0].map((function(t){return n.context.viewport.project(t)})),l=c.map((function(t){return t[0]})),f=c.map((function(t){return t[1]})),p=Math.min.apply(Math,y(l)),h=Math.min.apply(Math,y(f)),d=Math.max.apply(Math,y(l)),g=Math.max.apply(Math,y(f)),m=(0,a.polygon)(t),v=(0,s.default)(m,50);try{e=(0,u.default)(v,m)}catch(b){return void console.log("turfDifference() error",b)}this.setState({pendingPolygonSelection:{bigPolygon:e}});var _="".concat(this.props.id,"-").concat(R);setTimeout((function(){var t=n.context.deck.pickObjects({x:p,y:h,width:d-p,height:g-h,layerIds:[_].concat(y(i))});o({pickingInfos:t.filter((function(t){return t.layer.id!==n.props.id}))})}),250)}},{key:"renderLayers",value:function(){var t=this,e=this.state.pendingPolygonSelection,n=L[this.props.selectionType]||c.ViewMode,r=I[this.props.selectionType],i={};M.forEach((function(e){void 0!==t.props[e]&&(i[e]=t.props[e])}));var a=[new l.default(this.getSubLayerProps(d({id:"selection-geojson",pickable:!0,mode:n,modeConfig:r,selectedFeatureIndexes:[],data:P,onEdit:function(e){var n=e.updatedData;if("addFeature"===e.editType){var r=n.features[0].geometry.coordinates;t.props.selectionType===T.RECTANGLE?t._selectRectangleObjects(r):t.props.selectionType===T.POLYGON&&t._selectPolygonObjects(r)}}},i)))];if(e){var s=e.bigPolygon;a.push(new o.PolygonLayer(this.getSubLayerProps({id:R,pickable:!0,stroked:!1,opacity:1,data:[s],getLineColor:function(t){return[0,0,0,1]},getFillColor:function(t){return[0,0,0,1]},getPolygon:function(t){return t.geometry.coordinates}})))}return a}},{key:"shouldUpdateState",value:function(t){var e=t.changeFlags,n=e.stateChanged,r=e.propsOrDataChanged;return n||r}}])&&b(n.prototype,r),i&&b(n,i),p}(i.CompositeLayer);e.default=x,O(x,"layerName","SelectionLayer"),O(x,"defaultProps",w)},815:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(41),i=n(161);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,r,o,p=(e=h,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return a(this,h),p.apply(this,arguments)}return n=h,(r=[{key:"renderLayers",value:function(){return[new i.ScatterplotLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-ScatterplotLayer"),data:this.props.data})),new i.LineLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-LineLayer"),data:this.props.data,pickable:!1,getSourcePosition:function(t){var e=t.position;return[e[0],e[1],0]},getTargetPosition:function(t){var e=t.position;return[e[0],e[1],e[2]||0]},getColor:[150,150,150,200],getStrokeWidth:3}))]}}])&&s(n.prototype,r),o&&s(n,o),h}(r.CompositeLayer);e.default=h,p(h,"layerName","ElevatedEditHandleLayer"),p(h,"defaultProps",{})},816:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null};var i={name:"outline",vs:"attribute float instanceZLevel;\nvarying float outline_vzLevel;\nvarying vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nvarying float outline_vzLevel;\n// varying vec2 outline_vUV;\nvarying vec4 outline_vPosition;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e=t.outlineEnabled,n=t.outlineRenderShadowmap,i=t.outlineShadowmap,o={};return void 0!==e&&(o.outline_uEnabled=e),void 0!==n&&(o.outline_uRenderOutlines=n),void 0!==i&&(o.outline_uShadowmap=i),o}};e.default=i},817:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(41),i=n(161),o=n(690),a=l(n(735)),s=l(n(818)),u=l(n(819)),c=n(820);function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=o.SimpleMeshLayer,A={mesh:new s.default({headSize:.2,tailWidth:.05})},C=Object.assign({},a.default.defaultProps,{MarkerLayer:E,markerLayerProps:A,sizeScale:100,fp64:!1,highlightIndex:-1,highlightPoint:null,getPath:function(t){return t.path},getColor:function(t){return t.color},getMarkerColor:function(t){return[0,0,0,255]},getDirection:function(t){return t.direction},getMarkerPercentages:function(t,e){return e.lineLength>.1?[.25,.5,.75]:[.5]}}),S=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(h,t);var e,n,o,l,f=(e=h,function(){var t,n=v(e);if(m()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function h(){return d(this,h),f.apply(this,arguments)}return n=h,(o=[{key:"initializeState",value:function(){this.state={markers:[],mesh:new s.default({headSize:.2,tailWidth:.05}),closestPoint:null}}},{key:"projectFlat",value:function(t,e,n,i){if(n===r.COORDINATE_SYSTEM.METER_OFFSETS){var o=p(e.metersToLngLatDelta(t),2),a=o[0],s=o[1],u=p(i,2),c=u[0],l=u[1];return e.projectFlat([c+a,s+l])}if(n===r.COORDINATE_SYSTEM.LNGLAT_OFFSETS){var f=p(t,2),h=f[0],d=f[1],y=p(i,2),g=y[0],m=y[1];return e.projectFlat([g+h,d+m])}return e.projectFlat(t)}},{key:"updateState",value:function(t){var e=this,n=t.props,r=t.oldProps,i=t.changeFlags;if(i.dataChanged||i.updateTriggersChanged){var o=this.props,a=o.data,s=o.getPath,c=o.getDirection,l=o.getMarkerColor,f=o.getMarkerPercentages,p=o.coordinateSystem,h=o.coordinateOrigin,d=this.context.viewport;this.state.markers=(0,u.default)({data:a,getPath:s,getDirection:c,getColor:l,getMarkerPercentages:f,projectFlat:function(t){return e.projectFlat(t,d,p,h)}}),this._recalculateClosestPoint()}i.propsChanged&&n.point!==r.point&&this._recalculateClosestPoint()}},{key:"_recalculateClosestPoint",value:function(){var t=this.props,e=t.highlightPoint,n=t.highlightIndex;if(e&&n>=0){var r=this.props.data[n],i=this.props.getPath(r),o=(0,c.getClosestPointOnPolyline)({points:i,p:e}).point;this.state.closestPoints=[{position:o}]}else this.state.closestPoints=[]}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.object&&e.object.path||e.object})}},{key:"renderLayers",value:function(){return[new a.default(this.props,this.getSubLayerProps({id:"paths",data:this.props.data})),new this.props.MarkerLayer(this.getSubLayerProps(Object.assign({},this.props.markerLayerProps,{id:"markers",data:this.state.markers,getOrientation:function(t){return[0,-t.angle,0]},getColor:function(t){return t.color},sizeScale:this.props.sizeScale,fp64:this.props.fp64,pickable:!1,parameters:{blend:!1,depthTest:!1}}))),this.state.closestPoints&&new i.ScatterplotLayer({id:"".concat(this.props.id,"-highlight"),data:this.state.closestPoints,fp64:this.props.fp64})]}}])&&y(n.prototype,o),l&&y(n,l),h}(r.CompositeLayer);e.default=S,b(S,"layerName","PathMarkerLayer"),b(S,"defaultProps",C)},818:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(a()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),n.call(this,Object.assign({},t,{attributes:l(t)}))}return r}(n(46).Geometry);function l(t){for(var e=t.length,n=void 0===e?1:e,r=t.headSize,i=void 0===r?.2:r,o=t.tailWidth,a=void 0===o?.05:o,s=t.tailStart,u=void 0===s?.05:s,c=[.5,1,0,.5-i/2,1-i,0,.5+i/2,1-i,0,.5-a/2,u,0,.5+a/2,1-i,0,.5+a/2,u,0,.5-a/2,u,0,.5-a/2,1-i,0,.5+a/2,1-i,0],l=new Array(c.length),f=0;f<c.length/3;f++){var p=3*f;l[p+0]=(c[p+0]-.5)*n,l[p+1]=(c[p+1]-.5)*n,l[p+2]=0}return{positions:new Float32Array(l),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),texCoords:new Float32Array(c)}}e.default=c},819:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=t.data,o=t.getPath,l=void 0===o?function(t){return t.path}:o,f=t.getDirection,p=void 0===f?function(t){return t.direction}:f,h=t.getColor,d=void 0===h?function(t){return s}:h,y=t.getMarkerPercentages,g=void 0===y?function(t,e){return[.5]}:y,m=t.projectFlat,v=[],_=i(n);try{for(_.s();!(e=_.n()).done;){var b,E=e.value,A=l(E),C=p(E)||u,S=d(E),O=A.map((function(t){return new r.Vector2(t)})),T=O.slice(0).reverse(),L=a(O),I=i(g(E,{lineLength:L}));try{for(I.s();!(b=I.n()).done;){var w=b.value;if(C.forward){var P=c({path:O,percentage:w,lineLength:L,color:S,object:E,projectFlat:m});v.push(P)}if(C.backward){var R=c({path:T,percentage:w,lineLength:L,color:S,object:E,projectFlat:m});v.push(R)}}}catch(M){I.e(M)}finally{I.f()}}}catch(M){_.e(M)}finally{_.f()}return v};var r=n(344);function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].distance(t[n+1]);return e}var s=[0,0,0,255],u={forward:!0,backward:!1};function c(t){var e=t.path,n=t.percentage,i=t.lineLength,o=t.color,a=t.object,s=t.projectFlat,u=i*n,c=0,l=0,f=0;for(f=0;f<e.length-1&&!((c+=e[f].distance(e[f+1]))>u);f++)l=c;f===e.length-1&&(f-=1);var p=u-l,h=e[f+1].clone().subtract(e[f]).normalize().clone().multiply(new r.Vector2(p,p)).add(e[f]),d=180*new r.Vector2(s(e[f+1])).subtract(s(e[f])).verticalAngle()/Math.PI;return{position:[h.x,h.y,0],angle:d,color:o,object:a}}},820:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClosestPointOnLine=i,e.getClosestPointOnPolyline=function(t){var e=t.p,n=t.points;e=new r.Vector3(e);for(var o=null,a=1/0,s=-1,u=0;u<n.length-1;++u){var c=n[u],l=n[u+1],f=i({p:e,p1:c,p2:l}),p=e.distanceSquared(f);p<a&&(a=p,o=f,s=u)}return{point:o,index:s,p1:n[s],p2:n[s+1],distanceSquared:a,distance:Math.sqrt(a)}};var r=n(344);function i(t){var e=t.p,n=t.p1,i=t.p2,o=t.clampToLine,a=void 0===o||o,s=new r.Vector3(i).subtract(n),u=new r.Vector3(e).subtract(n),c=s.dot(u);return a&&(c=(0,r.clamp)(c,0,1)),s.lerp(c)}},821:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(41),i=n(161);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,t);var e,n,r,o,a=(e=d,function(){var t,n=p(e);if(f()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(){return u(this,d),a.apply(this,arguments)}return n=d,(r=[{key:"renderLayers",value:function(){var t=this.props,e=t.id,n=t.getFillColor,r=t.getStrokeColor,o=t.getInnerRadius,a=t.updateTriggers;return[new i.ScatterplotLayer(s({},this.props,{id:"".concat(e,"-full"),data:this.props.data,getLineColor:r,updateTriggers:s({},a,{getStrokeColor:a.getStrokeColor})})),new i.ScatterplotLayer(s({},this.props,{id:"".concat(e,"-inner"),data:this.props.data,getFillColor:n,getRadius:o,pickable:!1,updateTriggers:s({},a,{getFillColor:a.getFillColor,getRadius:a.getInnerRadius})}))]}}])&&c(n.prototype,r),o&&c(n,o),d}(r.CompositeLayer);e.default=y,d(y,"layerName","JunctionScatterplotLayer"),d(y,"defaultProps",s({},i.ScatterplotLayer.defaultProps,{getFillColor:function(t){return[0,0,0,255]},getStrokeColor:function(t){return[255,255,255,255]},getInnerRadius:function(t){return 1}}))},831:function(t,e,n){"use strict";n.r(e);var r=n(687),i=n(60);function o(t){for(var e,n,r=Object(i.getCoords)(t),o=0,a=1;a<r.length;)e=n||r[0],o+=((n=r[a])[0]-e[0])*(n[1]+e[1]),a++;return o>0}var a=n(89),s=n(42);function u(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Object(a.geomEach)(t,(function(t){u(t,e)})),t;case"LineString":return c(Object(i.getCoords)(t),e),t;case"Polygon":return l(Object(i.getCoords)(t),e),t;case"MultiLineString":return Object(i.getCoords)(t).forEach((function(t){c(t,e)})),t;case"MultiPolygon":return Object(i.getCoords)(t).forEach((function(t){l(t,e)})),t;case"Point":case"MultiPoint":return t}}function c(t,e){o(t)===e&&t.reverse()}function l(t,e){o(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)o(t[n])===e&&t[n].reverse()}e.default=function(t,e){if(e=e||{},!Object(s.isObject)(e))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!==typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!==typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Object(r.a)(t));var o=[];switch(t.type){case"GeometryCollection":return Object(a.geomEach)(t,(function(t){u(t,n)})),t;case"FeatureCollection":return Object(a.featureEach)(t,(function(t){Object(a.featureEach)(u(t,n),(function(t){o.push(t)}))})),Object(s.featureCollection)(o)}return u(t,n)}},836:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(28),i=n(16),o=n.n(i),a=n(489),s=n(733),u=n(108),c={};function l(t){return f.apply(this,arguments)}function f(){return f=Object(r.a)(o.a.mark((function t(e){var n,r,i=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]?i[2]:{},n&&(e=p(e,n,r)),c[e]=c[e]||h(e),t.next=6,c[e];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function p(t,e,n){if(t.startsWith("http"))return t;var r=n.modules||{};return r[t]?r[t]:a.b?n.CDN?(Object(u.a)(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat("3.1.8","/dist/libs/").concat(t)):a.d?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function h(t){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(o.a.mark((function t(e){var n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith("wasm")){t.next=7;break}return t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.arrayBuffer();case 6:return t.abrupt("return",t.sent);case 7:if(a.b){t.next=20;break}if(t.prev=8,t.t0=s&&s.requireFromFile,!t.t0){t.next=14;break}return t.next=13,s.requireFromFile(e);case 13:t.t0=t.sent;case 14:return t.abrupt("return",t.t0);case 17:return t.prev=17,t.t1=t.catch(8),t.abrupt("return",null);case 20:if(!a.d){t.next=22;break}return t.abrupt("return",importScripts(e));case 22:return t.next=24,fetch(e);case 24:return r=t.sent,t.next=27,r.text();case 27:return i=t.sent,t.abrupt("return",y(i,e));case 29:case"end":return t.stop()}}),t,null,[[8,17]])})))).apply(this,arguments)}function y(t,e){if(!a.b)return s.requireFromString&&s.requireFromString(t,e);if(a.d)return eval.call(a.a,t),null;var n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(r){n.text=t}return document.body.appendChild(n),null}},840:function(t,e,n){"use strict";n.d(e,"a",(function(){return An}));var r={};n.r(r),n.d(r,"name",(function(){return Nt})),n.d(r,"preprocess",(function(){return Dt})),n.d(r,"decode",(function(){return Bt}));var i={};n.r(i),n.d(i,"name",(function(){return Vt})),n.d(i,"preprocess",(function(){return Kt}));var o={};n.r(o),n.d(o,"name",(function(){return qt})),n.d(o,"preprocess",(function(){return Jt}));var a={};n.r(a),n.d(a,"name",(function(){return ee})),n.d(a,"preprocess",(function(){return ne})),n.d(a,"decode",(function(){return re})),n.d(a,"encode",(function(){return oe}));var s={};n.r(s),n.d(s,"name",(function(){return pe})),n.d(s,"decode",(function(){return he})),n.d(s,"encode",(function(){return ye}));var u={};n.r(u),n.d(u,"name",(function(){return ve})),n.d(u,"decode",(function(){return _e})),n.d(u,"encode",(function(){return Ee}));var c={};n.r(c),n.d(c,"name",(function(){return Ce})),n.d(c,"decode",(function(){return Se})),n.d(c,"encode",(function(){return Te}));var l,f,p=n(5),h=n(28),d=n(16),y=n.n(d),g=n(10),m=n(12),v=n(836),_="3.1.8",b="https://unpkg.com/@loaders.gl/textures@".concat(_,"/dist/libs/basis_encoder.wasm"),E="https://unpkg.com/@loaders.gl/textures@".concat(_,"/dist/libs/basis_encoder.js");function A(t){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(y.a.mark((function t(e){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.modules||{}).basis){t.next=3;break}return t.abrupt("return",n.basis);case 3:return l=l||S(e),t.next=6,l;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(y.a.mark((function t(e){var n,r,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,r=null,t.t0=Promise,t.next=5,Object(v.a)("basis_transcoder.js","textures",e);case 5:return t.t1=t.sent,t.next=8,Object(v.a)("basis_transcoder.wasm","textures",e);case 8:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=12,t.t0.all.call(t.t0,t.t3);case 12:return i=t.sent,o=Object(m.a)(i,2),n=o[0],r=o[1],n=n||globalThis.BASIS,t.next=19,T(n,r);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e){var n={};return e&&(n.wasmBinary=e),new Promise((function(e){t(n).then((function(t){var n=t.BasisFile;(0,t.initializeBasis)(),e({BasisFile:n})}))}))}function L(t){return I.apply(this,arguments)}function I(){return(I=Object(h.a)(y.a.mark((function t(e){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.modules||{}).basisEncoder){t.next=3;break}return t.abrupt("return",n.basisEncoder);case 3:return f=f||w(e),t.next=6,f;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(y.a.mark((function t(e){var n,r,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,r=null,t.t0=Promise,t.next=5,Object(v.a)(E,"textures",e);case 5:return t.t1=t.sent,t.next=8,Object(v.a)(b,"textures",e);case 8:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=12,t.t0.all.call(t.t0,t.t3);case 12:return i=t.sent,o=Object(m.a)(i,2),n=o[0],r=o[1],n=n||globalThis.BASIS,t.next=19,R(n,r);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t,e){var n={};return e&&(n.wasmBinary=e),new Promise((function(e){t(n).then((function(t){var n=t.BasisFile,r=t.KTX2File,i=t.initializeBasis,o=t.BasisEncoder;i(),e({BasisFile:n,KTX2File:r,BasisEncoder:o})}))}))}var M={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},x=["","WEBKIT_","MOZ_"],N={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},D=null;function B(t){if(!D){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,D=new Set;var e,n=Object(g.a)(x);try{for(n.s();!(e=n.n()).done;){var r=e.value;for(var i in N)if(t&&t.getExtension("".concat(r).concat(i))){var o=N[i];D.add(o)}}}catch(a){n.e(a)}finally{n.f()}}return D}n(812);var F=[171,75,84,88,32,50,48,187,13,10,26,10];function j(t){var e=new Uint8Array(t);return!(e.byteLength<F.length||e[0]!==F[0]||e[1]!==F[1]||e[2]!==F[2]||e[3]!==F[3]||e[4]!==F[4]||e[5]!==F[5]||e[6]!==F[6]||e[7]!==F[7]||e[8]!==F[8]||e[9]!==F[9]||e[10]!==F[10]||e[11]!==F[11])}var k={etc1:{basisFormat:0,compressed:!0,format:M.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:M.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:M.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:M.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:M.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:M.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function G(){return(G=Object(h.a)(y.a.mark((function t(e,n){var r,i,o,a,s,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("auto"!==n.basis.containerFormat){t.next=11;break}if(!j(e)){t.next=6;break}return t.next=4,L(n);case 4:return r=t.sent,t.abrupt("return",H(r.KTX2File,e,n));case 6:return t.next=8,A(n);case 8:return i=t.sent,o=i.BasisFile,t.abrupt("return",U(o,e,n));case 11:t.t0=n.basis.module,t.next="encoder"===t.t0?14:(t.t0,22);break;case 14:return t.next=16,L(n);case 16:a=t.sent,t.t1=n.basis.containerFormat,t.next="ktx2"===t.t1?20:(t.t1,21);break;case 20:return t.abrupt("return",H(a.KTX2File,e,n));case 21:return t.abrupt("return",U(a.BasisFile,e,n));case 22:return t.next=24,A(n);case 24:return s=t.sent,u=s.BasisFile,t.abrupt("return",U(u,e,n));case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(t,e,n){var r=new t(new Uint8Array(e));try{if(!r.startTranscoding())return null;for(var i=r.getNumImages(),o=[],a=0;a<i;a++){for(var s=r.getNumLevels(a),u=[],c=0;c<s;c++)u.push(Z(r,a,c,n));o.push(u)}return o}finally{r.close(),r.delete()}}function Z(t,e,n,r){var i=t.getImageWidth(e,n),o=t.getImageHeight(e,n),a=t.getHasAlpha(),s=V(r,a),u=s.compressed,c=s.format,l=s.basisFormat,f=t.getImageTranscodedSizeInBytes(e,n,l),p=new Uint8Array(f);return t.transcodeImage(p,e,n,l,0,0)?{width:i,height:o,data:p,compressed:u,hasAlpha:a,format:c}:null}function H(t,e,n){var r=new t(new Uint8Array(e));try{if(!r.startTranscoding())return null;for(var i=r.getLevels(),o=[],a=0;a<i;a++){o.push(z(r,a,n));break}return o}finally{r.close(),r.delete()}}function z(t,e,n){var r=t.getImageLevelInfo(e,0,0),i=r.alphaFlag,o=r.height,a=r.width,s=V(n,i),u=s.compressed,c=s.format,l=s.basisFormat,f=t.getImageTranscodedSizeInBytes(e,0,0,l),p=new Uint8Array(f);return t.transcodeImage(p,e,0,0,l,0,-1,-1)?{width:a,height:o,data:p,compressed:u,alphaFlag:i,format:c}:null}function V(t,e){var n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=K()),"object"===typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),k[n]}function K(){var t=B();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}var X={name:"Basis",id:"basis",module:"textures",version:"3.1.8",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},q=Object(p.a)(Object(p.a)({},X),{},{parse:function(t,e){return G.apply(this,arguments)}}),J=n(658),W=n(534),Y=n(149);function Q(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function $(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;var n=e.baseUri||e.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return n.substr(0,n.lastIndexOf("/")+1)+t}function tt(t,e,n){var r=t.bufferViews[n];Q(r);var i=e[r.buffer];Q(i);var o=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,r.byteLength)}var et=n(7),nt=n(6),rt=n(3),it=n(288),ot=n(307),at=["SCALAR","VEC2","VEC3","VEC4"],st=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],ut=new Map(st),ct={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lt={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ft={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function pt(t){return at[t-1]||at[0]}function ht(t){var e=ut.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function dt(t,e){var n=ft[t.componentType],r=ct[t.type],i=lt[t.componentType],o=t.count*r,a=t.count*r*i;return Q(a>=0&&a<=e.byteLength),{ArrayType:n,length:o,byteLength:a}}var yt,gt={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},mt=function(){function t(e){Object(et.a)(this,t),Object(rt.a)(this,"gltf",void 0),Object(rt.a)(this,"sourceBuffers",void 0),Object(rt.a)(this,"byteLength",void 0),this.gltf=e||{json:Object(p.a)({},gt),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}return Object(nt.a)(t,[{key:"json",get:function(){return this.gltf.json}},{key:"getApplicationData",value:function(t){return this.json[t]}},{key:"getExtraData",value:function(t){return(this.json.extras||{})[t]}},{key:"getExtension",value:function(t){var e=this.getUsedExtensions().find((function(e){return e===t})),n=this.json.extensions||{};return e?n[t]||!0:null}},{key:"getRequiredExtension",value:function(t){return this.getRequiredExtensions().find((function(e){return e===t}))?this.getExtension(t):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(t,e){return(t.extensions||{})[e]}},{key:"getScene",value:function(t){return this.getObject("scenes",t)}},{key:"getNode",value:function(t){return this.getObject("nodes",t)}},{key:"getSkin",value:function(t){return this.getObject("skins",t)}},{key:"getMesh",value:function(t){return this.getObject("meshes",t)}},{key:"getMaterial",value:function(t){return this.getObject("materials",t)}},{key:"getAccessor",value:function(t){return this.getObject("accessors",t)}},{key:"getTexture",value:function(t){return this.getObject("textures",t)}},{key:"getSampler",value:function(t){return this.getObject("samplers",t)}},{key:"getImage",value:function(t){return this.getObject("images",t)}},{key:"getBufferView",value:function(t){return this.getObject("bufferViews",t)}},{key:"getBuffer",value:function(t){return this.getObject("buffers",t)}},{key:"getObject",value:function(t,e){if("object"===typeof e)return e;var n=this.json[t]&&this.json[t][e];if(!n)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(e,"]"));return n}},{key:"getTypedArrayForBufferView",value:function(t){var e=(t=this.getBufferView(t)).buffer,n=this.gltf.buffers[e];Q(n);var r=(t.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,t.byteLength)}},{key:"getTypedArrayForAccessor",value:function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=dt(t,e),i=r.ArrayType,o=r.length;return new i(n,e.byteOffset+t.byteOffset,o)}},{key:"getTypedArrayForImageData",value:function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=e.byteOffset||0;return new Uint8Array(n,r,e.byteLength)}},{key:"addApplicationData",value:function(t,e){return this.json[t]=e,this}},{key:"addExtraData",value:function(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}},{key:"addObjectExtension",value:function(t,e,n){return t.extensions=t.extensions||{},t.extensions[e]=n,this.registerUsedExtension(e),this}},{key:"setObjectExtension",value:function(t,e,n){(t.extensions||{})[e]=n}},{key:"removeObjectExtension",value:function(t,e){var n=t.extensions||{},r=n[e];return delete n[e],r}},{key:"addExtension",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}},{key:"addRequiredExtension",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}},{key:"registerUsedExtension",value:function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((function(e){return e===t}))||this.json.extensionsUsed.push(t)}},{key:"registerRequiredExtension",value:function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((function(e){return e===t}))||this.json.extensionsRequired.push(t)}},{key:"removeExtension",value:function(t){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t]}},{key:"setDefaultScene",value:function(t){this.json.scene=t}},{key:"addScene",value:function(t){var e=t.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}},{key:"addNode",value:function(t){var e=t.meshIndex,n=t.matrix;this.json.nodes=this.json.nodes||[];var r={mesh:e};return n&&(r.matrix=n),this.json.nodes.push(r),this.json.nodes.length-1}},{key:"addMesh",value:function(t){var e=t.attributes,n=t.indices,r=t.material,i=t.mode,o=void 0===i?4:i,a={primitives:[{attributes:this._addAttributes(e),mode:o}]};if(n){var s=this._addIndices(n);a.primitives[0].indices=s}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}},{key:"addPointCloud",value:function(t){var e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}},{key:"addImage",value:function(t,e){var n=Object(it.a)(t),r=e||(null===n||void 0===n?void 0:n.mimeType),i={bufferView:this.addBufferView(t),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}},{key:"addBufferView",value:function(t){var e=t.byteLength;Q(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var n={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=Object(ot.b)(e,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(t,e){var n={bufferView:t,type:pt(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},n=this.addBufferView(t),r={min:e.min,max:e.max};r.min&&r.max||(r=this._getAccessorMinMax(t,e.size));var i={size:e.size,componentType:ht(t),count:Math.round(t.length/e.size),min:r.min,max:r.max};return this.addAccessor(n,Object.assign(i,e))}},{key:"addTexture",value:function(t){var e={source:t.imageIndex};return this.json.textures=this.json.textures||[],this.json.textures.push(e),this.json.textures.length-1}},{key:"addMaterial",value:function(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}},{key:"createBinaryChunk",value:function(){var t,e;this.gltf.buffers=[];var n,r=this.byteLength,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0,s=Object(g.a)(this.sourceBuffers||[]);try{for(s.s();!(n=s.n()).done;){var u=n.value;a=Object(ot.a)(u,o,a)}}catch(c){s.e(c)}finally{s.f()}null!==(t=this.json)&&void 0!==t&&null!==(e=t.buffers)&&void 0!==e&&e[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]}},{key:"_removeStringFromArray",value:function(t,e){for(var n=!0;n;){var r=t.indexOf(e);r>-1?t.splice(r,1):n=!1}}},{key:"_addAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};for(var n in t){var r=t[n],i=this._getGltfAttributeName(n),o=this.addBinaryBuffer(r.value,r);e[i]=o}return e}},{key:"_addIndices",value:function(t){return this.addBinaryBuffer(t,{size:1})}},{key:"_getGltfAttributeName",value:function(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}},{key:"_getAccessorMinMax",value:function(t,e){var n={min:null,max:null};if(t.length<e)return n;n.min=[],n.max=[];var r,i=t.subarray(0,e),o=Object(g.a)(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.min.push(a),n.max.push(a)}}catch(c){o.e(c)}finally{o.f()}for(var s=e;s<t.length;s+=e)for(var u=0;u<e;u++)n.min[0+u]=Math.min(n.min[0+u],t[s+u]),n.max[0+u]=Math.max(n.max[0+u],t[s+u]);return n}}]),t}(),vt="object"!==typeof WebAssembly,_t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",bt="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Et=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),At=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Ct={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},St={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function Ot(t,e,n,r,i){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(h.a)(y.a.mark((function t(e,n,r,i,o){var a,s,u=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>5&&void 0!==u[5]?u[5]:"NONE",t.next=3,Lt();case 3:Mt(s=t.sent,s.exports[St[o]],e,n,r,i,s.exports[Ct[a||"NONE"]]);case 5:case"end":return t.stop()}}),t)}))),Tt.apply(this,arguments)}function Lt(){return It.apply(this,arguments)}function It(){return(It=Object(h.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return yt||(yt=wt()),t.abrupt("return",yt);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wt(){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(h.a)(y.a.mark((function t(){var e,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=_t,WebAssembly.validate(Et)&&(e=bt,console.log("Warning: meshopt_decoder is using experimental SIMD support")),t.next=4,WebAssembly.instantiate(Rt(e),{});case 4:return n=t.sent,t.next=7,n.instance.exports.__wasm_call_ctors();case 7:return t.abrupt("return",n.instance);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;++n){var r=t.charCodeAt(n);e[n]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}for(var i=0,o=0;o<t.length;++o)e[i++]=e[o]<60?At[e[o]]:64*(e[o]-60)+e[++o];return e.buffer.slice(0,i)}function Mt(t,e,n,r,i,o,a){var s=t.exports.sbrk,u=r+3&-4,c=s(u*i),l=s(o.length),f=new Uint8Array(t.exports.memory.buffer);f.set(o,l);var p=e(c,r,i,l,o.length);if(0===p&&a&&a(c,u,i),n.set(f.subarray(c,c+r*i)),s(c-s(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}var xt="EXT_meshopt_compression",Nt=xt;function Dt(t){if(new mt(t).getRequiredExtensions().includes(xt)&&!vt)throw new Error("gltf: Required extension ".concat(xt," not supported by browser"))}function Bt(t,e){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(h.a)(y.a.mark((function t(e,n){var r,i,o,a,s,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=new mt(e),null!==n&&void 0!==n&&null!==(r=n.gltf)&&void 0!==r&&r.decompressMeshes){t.next=3;break}return t.abrupt("return");case 3:o=[],a=Object(g.a)(e.json.bufferViews||[]);try{for(a.s();!(s=a.n()).done;)u=s.value,o.push(jt(i,u))}catch(c){a.e(c)}finally{a.f()}return t.next=8,Promise.all(o);case 8:i.removeExtension(xt);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jt(t,e){return kt.apply(this,arguments)}function kt(){return(kt=Object(h.a)(y.a.mark((function t(e,n){var r,i,o,a,s,u,c,l,f,p,h,d,g;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.getObjectExtension(n,xt))){t.next=9;break}return i=n.buffer,o=r.byteOffset,a=void 0===o?0:o,s=r.byteLength,u=void 0===s?0:s,c=r.byteStride,l=r.count,f=r.mode,p=r.filter,h=void 0===p?"NONE":p,d=new Uint8Array(i,a,u),g=new ArrayBuffer(l*c),t.next=8,Ot(new Uint8Array(g),l,c,d,f,h);case 8:return t.abrupt("return",g);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Gt=n(148),Ut=["image/png","image/jpeg","image/gif"],Zt={};function Ht(t){return void 0===Zt[t]&&(Zt[t]=function(t){switch(t){case"image/webp":return function(){if(!Gt.a)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(t){return!1}}();case"image/svg":return Gt.a;default:if(!Gt.a){var e=globalThis._parseImageNode;return Boolean(e)&&Ut.includes(t)}return!0}}(t)),Zt[t]}var zt="EXT_texture_webp",Vt=zt;function Kt(t,e){var n=new mt(t);if(Ht("image/webp")){var r,i=n.json,o=Object(g.a)(i.textures||[]);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=n.getObjectExtension(a,zt);s&&(a.source=s.source),n.removeObjectExtension(a,zt)}}catch(u){o.e(u)}finally{o.f()}n.removeExtension(zt)}else if(n.getRequiredExtensions().includes(zt))throw new Error("gltf: Required extension ".concat(zt," not supported by browser"))}var Xt="KHR_texture_basisu",qt=Xt;function Jt(t,e){var n,r=new mt(t),i=r.json,o=Object(g.a)(i.textures||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=r.getObjectExtension(a,Xt);s&&(a.source=s.source),r.removeObjectExtension(a,Xt)}}catch(u){o.e(u)}finally{o.f()}r.removeExtension(Xt)}var Wt=n(739);function Yt(t){var e={};for(var n in t){var r=t[n];if("indices"!==n){var i=Qt(r);e[n]=i}}return e}function Qt(t){var e=function(t){var e=t,n=1,r=0;t&&t.value&&(e=t.value,n=t.size||1);e&&(ArrayBuffer.isView(e)||(e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return null;if(Array.isArray(t))return new e(t);if(n&&!(t instanceof e))return new e(t);return t}(e,Float32Array)),r=e.length/n);return{buffer:e,size:n,count:r}}(t),n=e.buffer,r=e.size;return{value:n,size:r,byteOffset:0,count:e.count,type:pt(r),componentType:ht(n)}}var $t=y.a.mark(le),te="KHR_draco_mesh_compression",ee=te;function ne(t,e,n){var r,i=new mt(t),o=Object(g.a)(le(i));try{for(o.s();!(r=o.n()).done;){var a=r.value;i.getObjectExtension(a,te)}}catch(s){o.e(s)}finally{o.f()}}function re(t,e,n){return ie.apply(this,arguments)}function ie(){return(ie=Object(h.a)(y.a.mark((function t(e,n,r){var i,o,a,s,u,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n&&void 0!==n&&null!==(i=n.gltf)&&void 0!==i&&i.decompressMeshes){t.next=2;break}return t.abrupt("return");case 2:o=new mt(e),a=[],s=Object(g.a)(le(o));try{for(s.s();!(u=s.n()).done;)c=u.value,o.getObjectExtension(c,te)&&a.push(ae(o,c,n,r))}catch(l){s.e(l)}finally{s.f()}return t.next=8,Promise.all(a);case 8:o.removeExtension(te);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oe(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new mt(t),i=Object(g.a)(r.json.meshes||[]);try{for(i.s();!(e=i.n()).done;){var o=e.value;ue(o,n),r.addRequiredExtension(te)}}catch(a){i.e(a)}finally{i.f()}}function ae(t,e,n,r){return se.apply(this,arguments)}function se(){return(se=Object(h.a)(y.a.mark((function t(e,n,r,i){var o,a,s,u,c,l,f,h,d,g,v,_,b,E;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.getObjectExtension(n,te)){t.next=3;break}return t.abrupt("return");case 3:return a=e.getTypedArrayForBufferView(o.bufferView),s=Object(Y.c)(a.buffer,a.byteOffset),u=i.parse,delete(c=Object(p.a)({},r))["3d-tiles"],t.next=10,u(s,Wt.a,c,i);case 10:for(l=t.sent,f=Yt(l.attributes),h=0,d=Object.entries(f);h<d.length;h++)g=Object(m.a)(d[h],2),v=g[0],_=g[1],v in n.attributes&&(b=n.attributes[v],null!==(E=e.getAccessor(b))&&void 0!==E&&E.min&&null!==E&&void 0!==E&&E.max&&(_.min=E.min,_.max=E.max));n.attributes=f,l.indices&&(n.indices=Qt(l.indices)),ce(n);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ue(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var a=i.DracoWriter.encodeSync({attributes:t}),s=null===o||void 0===o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:t}),u=i._addFauxAttributes(s.attributes),c=i.addBufferView(a),l={primitives:[{attributes:u,mode:r,extensions:Object(rt.a)({},te,{bufferView:c,attributes:u})}]};return l}function ce(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function le(t){var e,n,r,i,o,a;return y.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=Object(g.a)(t.json.meshes||[]),s.prev=1,e.s();case 3:if((n=e.n()).done){s.next=24;break}r=n.value,i=Object(g.a)(r.primitives),s.prev=6,i.s();case 8:if((o=i.n()).done){s.next=14;break}return a=o.value,s.next=12,a;case 12:s.next=8;break;case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(6),i.e(s.t0);case 19:return s.prev=19,i.f(),s.finish(19);case 22:s.next=3;break;case 24:s.next=29;break;case 26:s.prev=26,s.t1=s.catch(1),e.e(s.t1);case 29:return s.prev=29,e.f(),s.finish(29);case 32:case"end":return s.stop()}}),$t,null,[[1,26,29,32],[6,16,19,22]])}var fe="KHR_lights_punctual",pe=fe;function he(t){return de.apply(this,arguments)}function de(){return(de=Object(h.a)(y.a.mark((function t(e){var n,r,i,o,a,s,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new mt(e),r=n.json,(i=n.getExtension(fe))&&(n.json.lights=i.lights,n.removeExtension(fe)),o=Object(g.a)(r.nodes||[]);try{for(o.s();!(a=o.n()).done;)s=a.value,(u=n.getObjectExtension(s,fe))&&(s.light=u.light),n.removeObjectExtension(s,fe)}catch(c){o.e(c)}finally{o.f()}case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ye(t){return ge.apply(this,arguments)}function ge(){return(ge=Object(h.a)(y.a.mark((function t(e){var n,r,i,o,a,s,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new mt(e),(r=n.json).lights&&(Q(!(i=n.addExtension(fe)).lights),i.lights=r.lights,delete r.lights),n.json.lights){o=Object(g.a)(n.json.lights);try{for(o.s();!(a=o.n()).done;)s=a.value,u=s.node,n.addObjectExtension(u,fe,s)}catch(c){o.e(c)}finally{o.f()}delete n.json.lights}case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var me="KHR_materials_unlit",ve=me;function _e(t){return be.apply(this,arguments)}function be(){return(be=Object(h.a)(y.a.mark((function t(e){var n,r,i,o,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new mt(e),r=n.json,n.removeExtension(me),i=Object(g.a)(r.materials||[]);try{for(i.s();!(o=i.n()).done;)a=o.value,a.extensions&&a.extensions.KHR_materials_unlit&&(a.unlit=!0),n.removeObjectExtension(a,me)}catch(s){i.e(s)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ee(t){var e=new mt(t),n=e.json;if(e.materials){var r,i=Object(g.a)(n.materials||[]);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.unlit&&(delete o.unlit,e.addObjectExtension(o,me,{}),e.addExtension(me))}}catch(a){i.e(a)}finally{i.f()}}}var Ae="KHR_techniques_webgl",Ce=Ae;function Se(t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(h.a)(y.a.mark((function t(e){var n,r,i,o,a,s,u,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new mt(e),r=n.json,i=n.getExtension(Ae)){o=Ie(i,n),a=Object(g.a)(r.materials||[]);try{for(a.s();!(s=a.n()).done;)u=s.value,(c=n.getObjectExtension(u,Ae))&&(u.technique=Object.assign({},c,o[c.technique]),u.technique.values=we(u.technique,n)),n.removeObjectExtension(u,Ae)}catch(l){a.e(l)}finally{a.f()}n.removeExtension(Ae)}case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Te(t,e){return Le.apply(this,arguments)}function Le(){return(Le=Object(h.a)(y.a.mark((function t(e,n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ie(t,e){var n=t.programs,r=void 0===n?[]:n,i=t.shaders,o=void 0===i?[]:i,a=t.techniques,s=void 0===a?[]:a,u=new TextDecoder;return o.forEach((function(t){if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=u.decode(e.getTypedArrayForBufferView(t.bufferView))})),r.forEach((function(t){t.fragmentShader=o[t.fragmentShader],t.vertexShader=o[t.vertexShader]})),s.forEach((function(t){t.program=r[t.program]})),s}function we(t,e){var n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((function(e){t.uniforms[e].value&&!(e in n)&&(n[e]=t.uniforms[e].value)})),Object.keys(n).forEach((function(t){"object"===typeof n[t]&&void 0!==n[t].index&&(n[t].texture=e.getTexture(n[t].index))})),n}var Pe=[r,i,o,a,s,u,c];function Re(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=Pe.filter((function(t){return Ne(t.name,n)})),o=Object(g.a)(i);try{for(o.s();!(e=o.n()).done;){var a,s=e.value;null===(a=s.preprocess)||void 0===a||a.call(s,t,n,r)}}catch(u){o.e(u)}finally{o.f()}}function Me(t){return xe.apply(this,arguments)}function xe(){return xe=Object(h.a)(y.a.mark((function t(e){var n,r,i,o,a,s,u,c=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2?c[2]:void 0,i=Pe.filter((function(t){return Ne(t.name,n)})),o=Object(g.a)(i),t.prev=4,o.s();case 6:if((a=o.n()).done){t.next=12;break}return s=a.value,t.next=10,null===(u=s.decode)||void 0===u?void 0:u.call(s,e,n,r);case 10:t.next=6;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),o.e(t.t0);case 17:return t.prev=17,o.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[4,14,17,20]])}))),xe.apply(this,arguments)}function Ne(t,e){var n,r=(null===e||void 0===e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in r&&!r[t])}var De="KHR_binary_glTF";var Be,Fe={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},je={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},ke=function(){function t(){Object(et.a)(this,t),Object(rt.a)(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),Object(rt.a)(this,"json",void 0)}return Object(nt.a)(t,[{key:"normalize",value:function(t,e){this.json=t.json;var n=t.json;switch(n.asset&&n.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(n.asset.version))}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),function(t){var e,n=new mt(t),r=n.json,i=Object(g.a)(r.images||[]);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=n.getObjectExtension(o,De);a&&Object.assign(o,a),n.removeObjectExtension(o,De)}}catch(s){i.e(s)}finally{i.f()}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,n.removeExtension(De)}(t),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n),this._updateMaterial(n)}},{key:"_addAsset",value:function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(t){for(var e in Fe)this._convertTopLevelObjectToArray(t,e)}},{key:"_convertTopLevelObjectToArray",value:function(t,e){var n=t[e];if(n&&!Array.isArray(n))for(var r in t[e]=[],n){var i=n[r];i.id=i.id||r;var o=t[e].length;t[e].push(i),this.idToIndexMap[e][r]=o}}},{key:"_convertObjectIdsToArrayIndices",value:function(t){for(var e in Fe)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));var n,r=Object(g.a)(t.textures);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._convertTextureIds(i)}}catch(d){r.e(d)}finally{r.f()}var o,a=Object(g.a)(t.meshes);try{for(a.s();!(o=a.n()).done;){var s=o.value;this._convertMeshIds(s)}}catch(d){a.e(d)}finally{a.f()}var u,c=Object(g.a)(t.nodes);try{for(c.s();!(u=c.n()).done;){var l=u.value;this._convertNodeIds(l)}}catch(d){c.e(d)}finally{c.f()}var f,p=Object(g.a)(t.scenes);try{for(p.s();!(f=p.n()).done;){var h=f.value;this._convertSceneIds(h)}}catch(d){p.e(d)}finally{p.f()}}},{key:"_convertTextureIds",value:function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}},{key:"_convertMeshIds",value:function(t){var e,n=Object(g.a)(t.primitives);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.attributes,o=r.indices,a=r.material;for(var s in i)i[s]=this._convertIdToIndex(i[s],"accessor");o&&(r.indices=this._convertIdToIndex(o,"accessor")),a&&(r.material=this._convertIdToIndex(a,"material"))}}catch(u){n.e(u)}finally{n.f()}}},{key:"_convertNodeIds",value:function(t){var e=this;t.children&&(t.children=t.children.map((function(t){return e._convertIdToIndex(t,"node")}))),t.meshes&&(t.meshes=t.meshes.map((function(t){return e._convertIdToIndex(t,"mesh")})))}},{key:"_convertSceneIds",value:function(t){var e=this;t.nodes&&(t.nodes=t.nodes.map((function(t){return e._convertIdToIndex(t,"node")})))}},{key:"_convertIdsToIndices",value:function(t,e){t[e]||(console.warn("gltf v1: json doesn't contain attribute ".concat(e)),t[e]=[]);var n,r=Object(g.a)(t[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;for(var o in i){var a=i[o],s=this._convertIdToIndex(a,o);i[o]=s}}}catch(u){r.e(u)}finally{r.f()}}},{key:"_convertIdToIndex",value:function(t,e){var n=je[e];if(n in this.idToIndexMap){var r=this.idToIndexMap[n][t];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(e," with id ").concat(t));return r}return t}},{key:"_updateObjects",value:function(t){var e,n=Object(g.a)(this.json.buffers);try{for(n.s();!(e=n.n()).done;){delete e.value.type}}catch(r){n.e(r)}finally{n.f()}}},{key:"_updateMaterial",value:function(t){var e,n=Object(g.a)(t.materials);try{var r=function(){var n=e.value;n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var r=n.values&&n.values.tex,i=t.textures.findIndex((function(t){return t.id===r}));-1!==i&&(n.pbrMetallicRoughness.baseColorTexture={index:i})};for(n.s();!(e=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}}]),t}();function Ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new ke).normalize(t,e)}var Ue={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ze={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},He=10240,ze=10241,Ve=10242,Ke=10243,Xe=10497,qe=9729,Je=9986,We={magFilter:He,minFilter:ze,wrapS:Ve,wrapT:Ke},Ye=(Be={},Object(rt.a)(Be,He,qe),Object(rt.a)(Be,ze,Je),Object(rt.a)(Be,Ve,Xe),Object(rt.a)(Be,Ke,Xe),Be);var Qe=function(){function t(){Object(et.a)(this,t),Object(rt.a)(this,"baseUri",""),Object(rt.a)(this,"json",{}),Object(rt.a)(this,"buffers",[]),Object(rt.a)(this,"images",[])}return Object(nt.a)(t,[{key:"postProcess",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.json,r=t.buffers,i=void 0===r?[]:r,o=t.images,a=void 0===o?[]:o,s=t.baseUri,u=void 0===s?"":s;return Q(n),this.baseUri=u,this.json=n,this.buffers=i,this.images=a,this._resolveTree(this.json,e),this.json}},{key:"_resolveTree",value:function(t){var e=this;t.bufferViews&&(t.bufferViews=t.bufferViews.map((function(t,n){return e._resolveBufferView(t,n)}))),t.images&&(t.images=t.images.map((function(t,n){return e._resolveImage(t,n)}))),t.samplers&&(t.samplers=t.samplers.map((function(t,n){return e._resolveSampler(t,n)}))),t.textures&&(t.textures=t.textures.map((function(t,n){return e._resolveTexture(t,n)}))),t.accessors&&(t.accessors=t.accessors.map((function(t,n){return e._resolveAccessor(t,n)}))),t.materials&&(t.materials=t.materials.map((function(t,n){return e._resolveMaterial(t,n)}))),t.meshes&&(t.meshes=t.meshes.map((function(t,n){return e._resolveMesh(t,n)}))),t.nodes&&(t.nodes=t.nodes.map((function(t,n){return e._resolveNode(t,n)}))),t.skins&&(t.skins=t.skins.map((function(t,n){return e._resolveSkin(t,n)}))),t.scenes&&(t.scenes=t.scenes.map((function(t,n){return e._resolveScene(t,n)}))),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])}},{key:"getScene",value:function(t){return this._get("scenes",t)}},{key:"getNode",value:function(t){return this._get("nodes",t)}},{key:"getSkin",value:function(t){return this._get("skins",t)}},{key:"getMesh",value:function(t){return this._get("meshes",t)}},{key:"getMaterial",value:function(t){return this._get("materials",t)}},{key:"getAccessor",value:function(t){return this._get("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this._get("textures",t)}},{key:"getSampler",value:function(t){return this._get("samplers",t)}},{key:"getImage",value:function(t){return this._get("images",t)}},{key:"getBufferView",value:function(t){return this._get("bufferViews",t)}},{key:"getBuffer",value:function(t){return this._get("buffers",t)}},{key:"_get",value:function(t,e){if("object"===typeof e)return e;var n=this.json[t]&&this.json[t][e];return n||console.warn("glTF file error: Could not find ".concat(t,"[").concat(e,"]")),n}},{key:"_resolveScene",value:function(t,e){var n=this;return t.id=t.id||"scene-".concat(e),t.nodes=(t.nodes||[]).map((function(t){return n.getNode(t)})),t}},{key:"_resolveNode",value:function(t,e){var n=this;return t.id=t.id||"node-".concat(e),t.children&&(t.children=t.children.map((function(t){return n.getNode(t)}))),void 0!==t.mesh?t.mesh=this.getMesh(t.mesh):void 0!==t.meshes&&t.meshes.length&&(t.mesh=t.meshes.reduce((function(t,e){var r=n.getMesh(e);return t.id=r.id,t.primitives=t.primitives.concat(r.primitives),t}),{primitives:[]})),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t}},{key:"_resolveSkin",value:function(t,e){return t.id=t.id||"skin-".concat(e),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}},{key:"_resolveMesh",value:function(t,e){var n=this;return t.id=t.id||"mesh-".concat(e),t.primitives&&(t.primitives=t.primitives.map((function(t){var e=(t=Object(p.a)({},t)).attributes;for(var r in t.attributes={},e)t.attributes[r]=n.getAccessor(e[r]);return void 0!==t.indices&&(t.indices=n.getAccessor(t.indices)),void 0!==t.material&&(t.material=n.getMaterial(t.material)),t}))),t}},{key:"_resolveMaterial",value:function(t,e){if(t.id=t.id||"material-".concat(e),t.normalTexture&&(t.normalTexture=Object(p.a)({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=Object(p.a)({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=Object(p.a)({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness=Object(p.a)({},t.pbrMetallicRoughness);var n=t.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture=Object(p.a)({},n.baseColorTexture),n.baseColorTexture.texture=this.getTexture(n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture=Object(p.a)({},n.metallicRoughnessTexture),n.metallicRoughnessTexture.texture=this.getTexture(n.metallicRoughnessTexture.index))}return t}},{key:"_resolveAccessor",value:function(t,e){var n,r;if(t.id=t.id||"accessor-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=(n=t.componentType,Ze[n]),t.components=(r=t.type,Ue[r]),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var i=t.bufferView.buffer,o=dt(t,t.bufferView),a=o.ArrayType,s=o.byteLength,u=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+i.byteOffset,c=i.arrayBuffer.slice(u,u+s);t.bufferView.byteStride&&(c=this._getValueFromInterleavedBuffer(i,u,t.bufferView.byteStride,t.bytesPerElement,t.count)),t.value=new a(c)}return t}},{key:"_getValueFromInterleavedBuffer",value:function(t,e,n,r,i){for(var o=new Uint8Array(i*r),a=0;a<i;a++){var s=e+a*n;o.set(new Uint8Array(t.arrayBuffer.slice(s,s+r)),a*r)}return o.buffer}},{key:"_resolveTexture",value:function(t,e){return t.id=t.id||"texture-".concat(e),t.sampler="sampler"in t?this.getSampler(t.sampler):Ye,t.source=this.getImage(t.source),t}},{key:"_resolveSampler",value:function(t,e){for(var n in t.id=t.id||"sampler-".concat(e),t.parameters={},t){var r=this._enumSamplerParameter(n);void 0!==r&&(t.parameters[r]=t[n])}return t}},{key:"_enumSamplerParameter",value:function(t){return We[t]}},{key:"_resolveImage",value:function(t,e){t.id=t.id||"image-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));var n=this.images[e];return n&&(t.image=n),t}},{key:"_resolveBufferView",value:function(t,e){var n=t.buffer,r=Object(p.a)(Object(p.a)({id:"bufferView-".concat(e)},t),{},{buffer:this.buffers[n]}),i=this.buffers[n].arrayBuffer,o=this.buffers[n].byteOffset||0;return"byteOffset"in t&&(o+=t.byteOffset),r.data=new Uint8Array(i,o,t.byteLength),r}},{key:"_resolveCamera",value:function(t,e){return t.id=t.id||"camera-".concat(e),t.perspective,t.orthographic,t}}]),t}();function $e(t,e){return(new Qe).postProcess(t,e)}var tn=n(269),en=1735152710,nn=1313821514,rn=5130562,on=!0;function an(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new DataView(t),i=n.magic,o=void 0===i?en:i,a=r.getUint32(e,!1);return a===o||a===en}function un(t,e,n){Object(tn.a)(t.header.byteLength>20);var r=e.getUint32(n+0,on),i=e.getUint32(n+4,on);return n+=8,Object(tn.a)(0===i),ln(t,e,n,r),n+=r,n+=fn(t,e,n,t.header.byteLength)}function cn(t,e,n,r){return Object(tn.a)(t.header.byteLength>20),function(t,e,n,r){for(;n+8<=t.header.byteLength;){var i=e.getUint32(n+0,on),o=e.getUint32(n+4,on);switch(n+=8,o){case nn:ln(t,e,n,i);break;case rn:fn(t,e,n,i);break;case 0:r.strict||ln(t,e,n,i);break;case 1:r.strict||fn(t,e,n,i)}n+=Object(ot.b)(i,4)}}(t,e,n,r),n+t.header.byteLength}function ln(t,e,n,r){var i=new Uint8Array(e.buffer,n,r),o=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(o),Object(ot.b)(r,4)}function fn(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Object(ot.b)(r,4)}function pn(t,e){return hn.apply(this,arguments)}function hn(){return hn=Object(h.a)(y.a.mark((function t(e,n){var r,i,o,a,s,u,c,l,f,p,h=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>2&&void 0!==h[2]?h[2]:0,i=h.length>3?h[3]:void 0,o=h.length>4?h[4]:void 0,dn(e,n,r,i),Ge(e,{normalize:null===i||void 0===i||null===(a=i.gltf)||void 0===a?void 0:a.normalize}),Re(e,i,o),l=[],null===i||void 0===i||null===(s=i.gltf)||void 0===s||!s.loadBuffers||!e.json.buffers){t.next=10;break}return t.next=10,yn(e,i,o);case 10:return null!==i&&void 0!==i&&null!==(u=i.gltf)&&void 0!==u&&u.loadImages&&(f=mn(e,i,o),l.push(f)),p=Me(e,i,o),l.push(p),t.next=15,Promise.all(l);case 15:return t.abrupt("return",null!==i&&void 0!==i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?$e(e,i):e);case 16:case"end":return t.stop()}}),t)}))),hn.apply(this,arguments)}function dn(t,e,n,r){(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!sn(e,n,r))&&(e=(new TextDecoder).decode(e));if("string"===typeof e)t.json=Object(W.a)(e);else if(e instanceof ArrayBuffer){var i={};n=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new DataView(e),i=an(r,n+0),o=r.getUint32(n+4,on),a=r.getUint32(n+8,on);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),n+=12,t.version){case 1:return un(t,r,n);case 2:return cn(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(i,e,n,r.glb),Q("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),t._glb=i,t.json=i.json}else Q(!1,"GLTF: must be ArrayBuffer or string");var o=t.json.buffers||[];if(t.buffers=new Array(o.length).fill(null),t._glb&&t._glb.header.hasBinChunk){var a=t._glb.binChunks;t.buffers[0]={arrayBuffer:a[0].arrayBuffer,byteOffset:a[0].byteOffset,byteLength:a[0].byteLength}}var s=t.json.images||[];t.images=new Array(s.length).fill({})}function yn(t,e,n){return gn.apply(this,arguments)}function gn(){return(gn=Object(h.a)(y.a.mark((function t(e,n,r){var i,o,a,s,u,c,l,f;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.json.buffers||[],o=0;case 2:if(!(o<i.length)){t.next=19;break}if(!(a=i[o]).uri){t.next=16;break}return Q(r.fetch),c=$(a.uri,n),t.next=10,null===r||void 0===r||null===(s=r.fetch)||void 0===s?void 0:s.call(r,c);case 10:return l=t.sent,t.next=13,null===l||void 0===l||null===(u=l.arrayBuffer)||void 0===u?void 0:u.call(l);case 13:f=t.sent,e.buffers[o]={arrayBuffer:f,byteOffset:0,byteLength:f.byteLength},delete a.uri;case 16:++o,t.next=2;break;case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mn(t,e,n){return vn.apply(this,arguments)}function vn(){return(vn=Object(h.a)(y.a.mark((function t(e,n,r){var i,o,a,s,u,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=_n(e),o=e.json.images||[],a=[],s=Object(g.a)(i);try{for(s.s();!(u=s.n()).done;)c=u.value,a.push(bn(e,o[c],c,n,r))}catch(l){s.e(l)}finally{s.f()}return t.next=7,Promise.all(a);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _n(t){var e,n=new Set,r=t.json.textures||[],i=Object(g.a)(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;void 0!==o.source&&n.add(o.source)}}catch(a){i.e(a)}finally{i.f()}return Array.from(n).sort()}function bn(t,e,n,r,i){return En.apply(this,arguments)}function En(){return(En=Object(h.a)(y.a.mark((function t(e,n,r,i,o){var a,s,u,c,l,f,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.fetch,s=o.parse,!n.uri){t.next=9;break}return c=$(n.uri,i),t.next=5,a(c);case 5:return l=t.sent,t.next=8,l.arrayBuffer();case 8:u=t.sent;case 9:return Number.isFinite(n.bufferView)&&(f=tt(e.json,e.buffers,n.bufferView),u=Object(Y.c)(f.buffer,f.byteOffset,f.byteLength)),Q(u,"glTF image has no data"),t.next=13,s(u,[J.a,q],{mimeType:n.mimeType,basis:i.basis||{format:K()}},o);case 13:(p=t.sent)&&p[0]&&(p={compressed:!0,mipmaps:!1,width:p[0].width,height:p[0].height,data:p}),e.images=e.images||[],e.images[r]=p;case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var An={name:"glTF",id:"gltf",module:"gltf",version:"3.1.8",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(t){return Cn.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Cn(){return Cn=Object(h.a)(y.a.mark((function t(e){var n,r,i,o,a,s=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,(n=Object(p.a)(Object(p.a)({},An.options),n)).gltf=Object(p.a)(Object(p.a)({},An.options.gltf),n.gltf),i=n.byteOffset,o=void 0===i?0:i,a={},t.next=8,pn(a,e,o,n,r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)}))),Cn.apply(this,arguments)}},844:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function i(t){return t-Math.fround(t)}function o(t){for(var e=new Float32Array(32),n=0;n<4;++n)for(var i=0;i<4;++i){var o=4*n+i;r(t[4*i+n],e,2*o)}return e}n.d(e,"a",(function(){return s}));var a={ONE:1};var s={name:"fp64",vs:"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n",fs:null,dependencies:[{name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return a},fp64ify:r,fp64LowPart:i,fp64ifyMatrix4:o}],fp64ify:r,fp64LowPart:i,fp64ifyMatrix4:o}},846:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[n(356).a]}}}]);
//# sourceMappingURL=0.ae3bd92f.chunk.js.map