{"ast":null,"code":"import _classCallCheck from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\nvar I3STileManager = /*#__PURE__*/function () {\n  function I3STileManager() {\n    _classCallCheck(this, I3STileManager);\n\n    _defineProperty(this, \"_statusMap\", void 0);\n\n    this._statusMap = {};\n  }\n\n  _createClass(I3STileManager, [{\n    key: \"add\",\n    value: function add(request, key, callback, frameState) {\n      var _this = this;\n\n      if (!this._statusMap[key]) {\n        this._statusMap[key] = {\n          request: request,\n          callback: callback,\n          key: key,\n          frameState: frameState,\n          status: STATUS.REQUESTED\n        };\n        request().then(function (data) {\n          _this._statusMap[key].status = STATUS.COMPLETED;\n\n          _this._statusMap[key].callback(data, frameState);\n        }).catch(function (error) {\n          _this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(key, frameState) {\n      if (this._statusMap[key]) {\n        this._statusMap[key].frameState = frameState;\n      }\n    }\n  }, {\n    key: \"find\",\n    value: function find(key) {\n      return this._statusMap[key];\n    }\n  }]);\n\n  return I3STileManager;\n}();\n\nexport { I3STileManager as default };","map":{"version":3,"mappings":";;;AAAA,IAAMA,MAAM,GAAG;EACbC,SAAS,EAAE,WADE;EAEbC,SAAS,EAAE,WAFE;EAGbC,KAAK,EAAE;AAHM,CAAf;;IAOqBC,c;EAGnBC,0BAAc;IAAA;;IAAAC;;IACZ,KAAKC,UAAL,GAAkB,EAAlB;EACD;;;;WAEDC,aAAIC,OAAJD,EAAaE,GAAbF,EAAkBG,QAAlBH,EAA4BI,UAA5BJ,EAAwC;MAAA;;MACtC,IAAI,CAAC,KAAKD,UAAL,CAAgBG,GAAhB,CAAL,EAA2B;QACzB,KAAKH,UAAL,CAAgBG,GAAhB,IAAuB;UAACD,OAAD,EAACA,OAAD;UAAUE,QAAV,EAAUA,QAAV;UAAoBD,GAApB,EAAoBA,GAApB;UAAyBE,UAAzB,EAAyBA,UAAzB;UAAqCC,MAAM,EAAEb,MAAM,CAACC;QAApD,CAAvB;QACAQ,OAAO,GACJK,IADHL,CACSM,cAAD,EAAU;UACd,MAAKR,UAAL,CAAgBG,GAAhB,EAAqBG,MAArB,GAA8Bb,MAAM,CAACE,SAArC;;UACA,MAAKK,UAAL,CAAgBG,GAAhB,EAAqBC,QAArB,CAA8BI,IAA9B,EAAoCH,UAApC;QAHJ,GAKGI,KALHP,CAKUQ,eAAD,EAAW;UAChB,MAAKV,UAAL,CAAgBG,GAAhB,EAAqBG,MAArB,GAA8Bb,MAAM,CAACG,KAArC;UACAQ,QAAQ,CAACM,KAAD,CAARN;QAPJ;MASD;IACF;;;WAEDO,gBAAOR,GAAPQ,EAAYN,UAAZM,EAAwB;MACtB,IAAI,KAAKX,UAAL,CAAgBG,GAAhB,CAAJ,EAA0B;QACxB,KAAKH,UAAL,CAAgBG,GAAhB,EAAqBE,UAArB,GAAkCA,UAAlC;MACD;IACF;;;WAEDO,cAAKT,GAALS,EAAU;MACR,OAAO,KAAKZ,UAAL,CAAgBG,GAAhB,CAAP;IACD;;;;;;SA9BkBN,c","names":["STATUS","REQUESTED","COMPLETED","ERROR","I3STileManager","constructor","_defineProperty","_statusMap","add","request","key","callback","frameState","status","then","data","catch","error","update","find"],"sources":["../../../../src/tileset/traversers/i3s-tile-manager.ts"],"sourcesContent":["const STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\n// A helper class to manage tile metadata fetching\nexport default class I3STileManager {\n  private _statusMap: object;\n\n  constructor() {\n    this._statusMap = {};\n  }\n\n  add(request, key, callback, frameState) {\n    if (!this._statusMap[key]) {\n      this._statusMap[key] = {request, callback, key, frameState, status: STATUS.REQUESTED};\n      request()\n        .then((data) => {\n          this._statusMap[key].status = STATUS.COMPLETED;\n          this._statusMap[key].callback(data, frameState);\n        })\n        .catch((error) => {\n          this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n    }\n  }\n\n  update(key, frameState) {\n    if (this._statusMap[key]) {\n      this._statusMap[key].frameState = frameState;\n    }\n  }\n\n  find(key) {\n    return this._statusMap[key];\n  }\n}\n"]},"metadata":{},"sourceType":"module"}