{"ast":null,"code":"import _classCallCheck from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Model } from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nvar ModelNode = /*#__PURE__*/function (_ScenegraphNode) {\n  _inherits(ModelNode, _ScenegraphNode);\n\n  var _super = _createSuper(ModelNode);\n\n  function ModelNode(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ModelNode);\n\n    _this = _super.call(this, props);\n    _this.onBeforeRender = null;\n    _this.AfterRender = null;\n\n    if (gl instanceof Model) {\n      _this.model = gl;\n\n      _this._setModelNodeProps(props);\n    } else {\n      _this.model = new Model(gl, props);\n    }\n\n    _this.managedResources = props.managedResources || [];\n    return _this;\n  }\n\n  _createClass(ModelNode, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      _get(_getPrototypeOf(ModelNode.prototype), \"setProps\", this).call(this, props);\n\n      this._setModelNodeProps(props);\n\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.model) {\n        this.model.delete();\n        this.model = null;\n      }\n\n      this.managedResources.forEach(function (resource) {\n        return resource.delete();\n      });\n      this.managedResources = [];\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var _this$model;\n\n      return (_this$model = this.model).draw.apply(_this$model, arguments);\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var _this$model2;\n\n      (_this$model2 = this.model).setUniforms.apply(_this$model2, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var _this$model3;\n\n      (_this$model3 = this.model).setAttributes.apply(_this$model3, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings() {\n      var _this$model4;\n\n      (_this$model4 = this.model).updateModuleSettings.apply(_this$model4, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"_setModelNodeProps\",\n    value: function _setModelNodeProps(props) {\n      this.model.setProps(props);\n    }\n  }]);\n\n  return ModelNode;\n}(ScenegraphNode);\n\nexport { ModelNode as default };","map":{"version":3,"mappings":";;;;;;AAAA,SAAQA,KAAR,QAAoB,iBAApB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;;IAEqBC,S;;;;;EACnBC,mBAAYC,EAAZD,EAA4B;IAAA;;IAAA,IAAZE,KAAY,uEAAJ,EAAI;;IAAA;;IAC1B,0BAAMA,KAAN;IAGA,MAAKC,cAAL,GAAsB,IAAtB;IACA,MAAKC,WAAL,GAAmB,IAAnB;;IAGA,IAAIH,EAAE,YAAYJ,KAAlB,EAAyB;MACvB,MAAKQ,KAAL,GAAaJ,EAAb;;MACA,MAAKK,kBAAL,CAAwBJ,KAAxB;IAFF,OAGO;MACL,MAAKG,KAAL,GAAa,IAAIR,KAAJ,CAAUI,EAAV,EAAcC,KAAd,CAAb;IACD;;IAED,MAAKK,gBAAL,GAAwBL,KAAK,CAACK,gBAANL,IAA0B,EAAlD;IAf0B;EAgB3B;;;;WAEDM,kBAASN,KAATM,EAAgB;MACd,wEAAeN,KAAf;;MACA,KAAKI,kBAAL,CAAwBJ,KAAxB;;MACA,OAAO,IAAP;IACD;;;WAEDO,mBAAS;MACP,IAAI,KAAKJ,KAAT,EAAgB;QACd,KAAKA,KAAL,CAAWI,MAAX;QACA,KAAKJ,KAAL,GAAa,IAAb;MACD;;MAED,KAAKE,gBAAL,CAAsBG,OAAtB,CAA8BC,kBAAQ;QAAA,OAAIA,QAAQ,CAACF,MAATE,EAAJ;MAAA,CAAtC;MACA,KAAKJ,gBAAL,GAAwB,EAAxB;IACD;;;WAGDK,gBAAc;MAAA;;MAEZ,OAAO,oBAAKP,KAAL,EAAWO,IAAX,8BAAP;IACD;;;WAEDC,uBAAqB;MAAA;;MACnB,qBAAKR,KAAL,EAAWQ,WAAX;;MACA,OAAO,IAAP;IACD;;;WAEDC,yBAAuB;MAAA;;MACrB,qBAAKT,KAAL,EAAWS,aAAX;;MACA,OAAO,IAAP;IACD;;;WAEDC,gCAA8B;MAAA;;MAC5B,qBAAKV,KAAL,EAAWU,oBAAX;;MACA,OAAO,IAAP;IACD;;;WAIDT,4BAAmBJ,KAAnBI,EAA0B;MACxB,KAAKD,KAAL,CAAWG,QAAX,CAAoBN,KAApB;IACD;;;;EA5DoCJ,c;;SAAlBC,S","names":["Model","ScenegraphNode","ModelNode","constructor","gl","props","onBeforeRender","AfterRender","model","_setModelNodeProps","managedResources","setProps","delete","forEach","resource","draw","setUniforms","setAttributes","updateModuleSettings"],"sources":["../../../src/scenegraph/model-node.js"],"sourcesContent":["import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}