{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canonicalizeUnicodeLocaleId = exports.canonicalizeUnicodeLanguageId = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar aliases_generated_1 = require(\"./aliases.generated\");\n\nvar parser_1 = require(\"./parser\");\n\nvar likelySubtags_generated_1 = require(\"./likelySubtags.generated\");\n\nvar emitter_1 = require(\"./emitter\");\n\nfunction canonicalizeAttrs(strs) {\n  return Object.keys(strs.reduce(function (all, str) {\n    all[str.toLowerCase()] = 1;\n    return all;\n  }, {})).sort();\n}\n\nfunction canonicalizeKVs(arr) {\n  var all = {};\n  var result = [];\n\n  for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n    var kv = arr_1[_i];\n\n    if (kv[0] in all) {\n      continue;\n    }\n\n    all[kv[0]] = 1;\n\n    if (!kv[1] || kv[1] === 'true') {\n      result.push([kv[0].toLowerCase()]);\n    } else {\n      result.push([kv[0].toLowerCase(), kv[1].toLowerCase()]);\n    }\n  }\n\n  return result.sort(compareKV);\n}\n\nfunction compareKV(t1, t2) {\n  return t1[0] < t2[0] ? -1 : t1[0] > t2[0] ? 1 : 0;\n}\n\nfunction compareExtension(e1, e2) {\n  return e1.type < e2.type ? -1 : e1.type > e2.type ? 1 : 0;\n}\n\nfunction mergeVariants(v1, v2) {\n  var result = (0, tslib_1.__spreadArray)([], v1, true);\n\n  for (var _i = 0, v2_1 = v2; _i < v2_1.length; _i++) {\n    var v = v2_1[_i];\n\n    if (v1.indexOf(v) < 0) {\n      result.push(v);\n    }\n  }\n\n  return result;\n}\n/**\n * CAVEAT: We don't do this section in the spec bc they have no JSON data\n * Use the bcp47 data to replace keys, types, tfields, and tvalues by their canonical forms. See Section 3.6.4 U Extension Data Files) and Section 3.7.1 T Extension Data Files. The aliases are in the alias attribute value, while the canonical is in the name attribute value. For example,\nBecause of the following bcp47 data:\n<key name=\"ms\"…>…<type name=\"uksystem\" … alias=\"imperial\" … />…</key>\nWe get the following transformation:\nen-u-ms-imperial ⇒ en-u-ms-uksystem\n * @param lang\n */\n\n\nfunction canonicalizeUnicodeLanguageId(unicodeLanguageId) {\n  /**\n   * If the language subtag matches the type attribute of a languageAlias element in Supplemental Data, replace the language subtag with the replacement value.\n   *  1. If there are additional subtags in the replacement value, add them to the result, but only if there is no corresponding subtag already in the tag.\n   *  2. Five special deprecated grandfathered codes (such as i-default) are in type attributes, and are also replaced.\n   */\n  // From https://github.com/unicode-org/icu/blob/master/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L1246\n  // Try language _ variant\n  var finalLangAst = unicodeLanguageId;\n\n  if (unicodeLanguageId.variants.length) {\n    var replacedLang_1 = '';\n\n    for (var _i = 0, _a = unicodeLanguageId.variants; _i < _a.length; _i++) {\n      var variant = _a[_i];\n\n      if (replacedLang_1 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n        lang: unicodeLanguageId.lang,\n        variants: [variant]\n      })]) {\n        var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_1.split(parser_1.SEPARATOR));\n        finalLangAst = {\n          lang: replacedLangAst.lang,\n          script: finalLangAst.script || replacedLangAst.script,\n          region: finalLangAst.region || replacedLangAst.region,\n          variants: mergeVariants(finalLangAst.variants, replacedLangAst.variants)\n        };\n        break;\n      }\n    }\n  } // language _ script _ country\n  // ug-Arab-CN -> ug-CN\n\n\n  if (finalLangAst.script && finalLangAst.region) {\n    var replacedLang_2 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n      lang: finalLangAst.lang,\n      script: finalLangAst.script,\n      region: finalLangAst.region,\n      variants: []\n    })];\n\n    if (replacedLang_2) {\n      var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_2.split(parser_1.SEPARATOR));\n      finalLangAst = {\n        lang: replacedLangAst.lang,\n        script: replacedLangAst.script,\n        region: replacedLangAst.region,\n        variants: finalLangAst.variants\n      };\n    }\n  } // language _ country\n  // eg. az_AZ -> az_Latn_A\n\n\n  if (finalLangAst.region) {\n    var replacedLang_3 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n      lang: finalLangAst.lang,\n      region: finalLangAst.region,\n      variants: []\n    })];\n\n    if (replacedLang_3) {\n      var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_3.split(parser_1.SEPARATOR));\n      finalLangAst = {\n        lang: replacedLangAst.lang,\n        script: finalLangAst.script || replacedLangAst.script,\n        region: replacedLangAst.region,\n        variants: finalLangAst.variants\n      };\n    }\n  } // only language\n  // e.g. twi -> ak\n\n\n  var replacedLang = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n    lang: finalLangAst.lang,\n    variants: []\n  })];\n\n  if (replacedLang) {\n    var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang.split(parser_1.SEPARATOR));\n    finalLangAst = {\n      lang: replacedLangAst.lang,\n      script: finalLangAst.script || replacedLangAst.script,\n      region: finalLangAst.region || replacedLangAst.region,\n      variants: finalLangAst.variants\n    };\n  }\n\n  if (finalLangAst.region) {\n    var region = finalLangAst.region.toUpperCase();\n    var regionAlias = aliases_generated_1.territoryAlias[region];\n    var replacedRegion = void 0;\n\n    if (regionAlias) {\n      var regions = regionAlias.split(' ');\n      replacedRegion = regions[0];\n      var likelySubtag = likelySubtags_generated_1.likelySubtags[(0, emitter_1.emitUnicodeLanguageId)({\n        lang: finalLangAst.lang,\n        script: finalLangAst.script,\n        variants: []\n      })];\n\n      if (likelySubtag) {\n        var likelyRegion = (0, parser_1.parseUnicodeLanguageId)(likelySubtag.split(parser_1.SEPARATOR)).region;\n\n        if (likelyRegion && regions.indexOf(likelyRegion) > -1) {\n          replacedRegion = likelyRegion;\n        }\n      }\n    }\n\n    if (replacedRegion) {\n      finalLangAst.region = replacedRegion;\n    }\n\n    finalLangAst.region = finalLangAst.region.toUpperCase();\n  }\n\n  if (finalLangAst.script) {\n    finalLangAst.script = finalLangAst.script[0].toUpperCase() + finalLangAst.script.slice(1).toLowerCase();\n\n    if (aliases_generated_1.scriptAlias[finalLangAst.script]) {\n      finalLangAst.script = aliases_generated_1.scriptAlias[finalLangAst.script];\n    }\n  }\n\n  if (finalLangAst.variants.length) {\n    for (var i = 0; i < finalLangAst.variants.length; i++) {\n      var variant = finalLangAst.variants[i].toLowerCase();\n\n      if (aliases_generated_1.variantAlias[variant]) {\n        var alias = aliases_generated_1.variantAlias[variant];\n\n        if ((0, parser_1.isUnicodeVariantSubtag)(alias)) {\n          finalLangAst.variants[i] = alias;\n        } else if ((0, parser_1.isUnicodeLanguageSubtag)(alias)) {\n          // Yes this can happen per the spec\n          finalLangAst.lang = alias;\n        }\n      }\n    }\n\n    finalLangAst.variants.sort();\n  }\n\n  return finalLangAst;\n}\n\nexports.canonicalizeUnicodeLanguageId = canonicalizeUnicodeLanguageId;\n/**\n * Canonicalize based on\n * https://www.unicode.org/reports/tr35/tr35.html#Canonical_Unicode_Locale_Identifiers\n * https://tc39.es/ecma402/#sec-canonicalizeunicodelocaleid\n * IMPORTANT: This modifies the object inline\n * @param locale\n */\n\nfunction canonicalizeUnicodeLocaleId(locale) {\n  locale.lang = canonicalizeUnicodeLanguageId(locale.lang);\n\n  if (locale.extensions) {\n    for (var _i = 0, _a = locale.extensions; _i < _a.length; _i++) {\n      var extension = _a[_i];\n\n      switch (extension.type) {\n        case 'u':\n          extension.keywords = canonicalizeKVs(extension.keywords);\n\n          if (extension.attributes) {\n            extension.attributes = canonicalizeAttrs(extension.attributes);\n          }\n\n          break;\n\n        case 't':\n          if (extension.lang) {\n            extension.lang = canonicalizeUnicodeLanguageId(extension.lang);\n          }\n\n          extension.fields = canonicalizeKVs(extension.fields);\n          break;\n\n        default:\n          extension.value = extension.value.toLowerCase();\n          break;\n      }\n    }\n\n    locale.extensions.sort(compareExtension);\n  }\n\n  return locale;\n}\n\nexports.canonicalizeUnicodeLocaleId = canonicalizeUnicodeLocaleId;","map":{"version":3,"names":["Object","defineProperty","exports","value","canonicalizeUnicodeLocaleId","canonicalizeUnicodeLanguageId","tslib_1","require","aliases_generated_1","parser_1","likelySubtags_generated_1","emitter_1","canonicalizeAttrs","strs","keys","reduce","all","str","toLowerCase","sort","canonicalizeKVs","arr","result","_i","arr_1","length","kv","push","compareKV","t1","t2","compareExtension","e1","e2","type","mergeVariants","v1","v2","__spreadArray","v2_1","v","indexOf","unicodeLanguageId","finalLangAst","variants","replacedLang_1","_a","variant","languageAlias","emitUnicodeLanguageId","lang","replacedLangAst","parseUnicodeLanguageId","split","SEPARATOR","script","region","replacedLang_2","replacedLang_3","replacedLang","toUpperCase","regionAlias","territoryAlias","replacedRegion","regions","likelySubtag","likelySubtags","likelyRegion","slice","scriptAlias","i","variantAlias","alias","isUnicodeVariantSubtag","isUnicodeLanguageSubtag","locale","extensions","extension","keywords","attributes","fields"],"sources":["/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@formatjs/intl-getcanonicallocales/src/canonicalizer.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalizeUnicodeLocaleId = exports.canonicalizeUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nvar aliases_generated_1 = require(\"./aliases.generated\");\nvar parser_1 = require(\"./parser\");\nvar likelySubtags_generated_1 = require(\"./likelySubtags.generated\");\nvar emitter_1 = require(\"./emitter\");\nfunction canonicalizeAttrs(strs) {\n    return Object.keys(strs.reduce(function (all, str) {\n        all[str.toLowerCase()] = 1;\n        return all;\n    }, {})).sort();\n}\nfunction canonicalizeKVs(arr) {\n    var all = {};\n    var result = [];\n    for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n        var kv = arr_1[_i];\n        if (kv[0] in all) {\n            continue;\n        }\n        all[kv[0]] = 1;\n        if (!kv[1] || kv[1] === 'true') {\n            result.push([kv[0].toLowerCase()]);\n        }\n        else {\n            result.push([kv[0].toLowerCase(), kv[1].toLowerCase()]);\n        }\n    }\n    return result.sort(compareKV);\n}\nfunction compareKV(t1, t2) {\n    return t1[0] < t2[0] ? -1 : t1[0] > t2[0] ? 1 : 0;\n}\nfunction compareExtension(e1, e2) {\n    return e1.type < e2.type ? -1 : e1.type > e2.type ? 1 : 0;\n}\nfunction mergeVariants(v1, v2) {\n    var result = (0, tslib_1.__spreadArray)([], v1, true);\n    for (var _i = 0, v2_1 = v2; _i < v2_1.length; _i++) {\n        var v = v2_1[_i];\n        if (v1.indexOf(v) < 0) {\n            result.push(v);\n        }\n    }\n    return result;\n}\n/**\n * CAVEAT: We don't do this section in the spec bc they have no JSON data\n * Use the bcp47 data to replace keys, types, tfields, and tvalues by their canonical forms. See Section 3.6.4 U Extension Data Files) and Section 3.7.1 T Extension Data Files. The aliases are in the alias attribute value, while the canonical is in the name attribute value. For example,\nBecause of the following bcp47 data:\n<key name=\"ms\"…>…<type name=\"uksystem\" … alias=\"imperial\" … />…</key>\nWe get the following transformation:\nen-u-ms-imperial ⇒ en-u-ms-uksystem\n * @param lang\n */\nfunction canonicalizeUnicodeLanguageId(unicodeLanguageId) {\n    /**\n     * If the language subtag matches the type attribute of a languageAlias element in Supplemental Data, replace the language subtag with the replacement value.\n     *  1. If there are additional subtags in the replacement value, add them to the result, but only if there is no corresponding subtag already in the tag.\n     *  2. Five special deprecated grandfathered codes (such as i-default) are in type attributes, and are also replaced.\n     */\n    // From https://github.com/unicode-org/icu/blob/master/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L1246\n    // Try language _ variant\n    var finalLangAst = unicodeLanguageId;\n    if (unicodeLanguageId.variants.length) {\n        var replacedLang_1 = '';\n        for (var _i = 0, _a = unicodeLanguageId.variants; _i < _a.length; _i++) {\n            var variant = _a[_i];\n            if ((replacedLang_1 =\n                aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n                    lang: unicodeLanguageId.lang,\n                    variants: [variant],\n                })])) {\n                var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_1.split(parser_1.SEPARATOR));\n                finalLangAst = {\n                    lang: replacedLangAst.lang,\n                    script: finalLangAst.script || replacedLangAst.script,\n                    region: finalLangAst.region || replacedLangAst.region,\n                    variants: mergeVariants(finalLangAst.variants, replacedLangAst.variants),\n                };\n                break;\n            }\n        }\n    }\n    // language _ script _ country\n    // ug-Arab-CN -> ug-CN\n    if (finalLangAst.script && finalLangAst.region) {\n        var replacedLang_2 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            script: finalLangAst.script,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_2) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_2.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // language _ country\n    // eg. az_AZ -> az_Latn_A\n    if (finalLangAst.region) {\n        var replacedLang_3 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_3) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_3.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: finalLangAst.script || replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // only language\n    // e.g. twi -> ak\n    var replacedLang = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n        lang: finalLangAst.lang,\n        variants: [],\n    })];\n    if (replacedLang) {\n        var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang.split(parser_1.SEPARATOR));\n        finalLangAst = {\n            lang: replacedLangAst.lang,\n            script: finalLangAst.script || replacedLangAst.script,\n            region: finalLangAst.region || replacedLangAst.region,\n            variants: finalLangAst.variants,\n        };\n    }\n    if (finalLangAst.region) {\n        var region = finalLangAst.region.toUpperCase();\n        var regionAlias = aliases_generated_1.territoryAlias[region];\n        var replacedRegion = void 0;\n        if (regionAlias) {\n            var regions = regionAlias.split(' ');\n            replacedRegion = regions[0];\n            var likelySubtag = likelySubtags_generated_1.likelySubtags[(0, emitter_1.emitUnicodeLanguageId)({\n                lang: finalLangAst.lang,\n                script: finalLangAst.script,\n                variants: [],\n            })];\n            if (likelySubtag) {\n                var likelyRegion = (0, parser_1.parseUnicodeLanguageId)(likelySubtag.split(parser_1.SEPARATOR)).region;\n                if (likelyRegion && regions.indexOf(likelyRegion) > -1) {\n                    replacedRegion = likelyRegion;\n                }\n            }\n        }\n        if (replacedRegion) {\n            finalLangAst.region = replacedRegion;\n        }\n        finalLangAst.region = finalLangAst.region.toUpperCase();\n    }\n    if (finalLangAst.script) {\n        finalLangAst.script =\n            finalLangAst.script[0].toUpperCase() +\n                finalLangAst.script.slice(1).toLowerCase();\n        if (aliases_generated_1.scriptAlias[finalLangAst.script]) {\n            finalLangAst.script = aliases_generated_1.scriptAlias[finalLangAst.script];\n        }\n    }\n    if (finalLangAst.variants.length) {\n        for (var i = 0; i < finalLangAst.variants.length; i++) {\n            var variant = finalLangAst.variants[i].toLowerCase();\n            if (aliases_generated_1.variantAlias[variant]) {\n                var alias = aliases_generated_1.variantAlias[variant];\n                if ((0, parser_1.isUnicodeVariantSubtag)(alias)) {\n                    finalLangAst.variants[i] = alias;\n                }\n                else if ((0, parser_1.isUnicodeLanguageSubtag)(alias)) {\n                    // Yes this can happen per the spec\n                    finalLangAst.lang = alias;\n                }\n            }\n        }\n        finalLangAst.variants.sort();\n    }\n    return finalLangAst;\n}\nexports.canonicalizeUnicodeLanguageId = canonicalizeUnicodeLanguageId;\n/**\n * Canonicalize based on\n * https://www.unicode.org/reports/tr35/tr35.html#Canonical_Unicode_Locale_Identifiers\n * https://tc39.es/ecma402/#sec-canonicalizeunicodelocaleid\n * IMPORTANT: This modifies the object inline\n * @param locale\n */\nfunction canonicalizeUnicodeLocaleId(locale) {\n    locale.lang = canonicalizeUnicodeLanguageId(locale.lang);\n    if (locale.extensions) {\n        for (var _i = 0, _a = locale.extensions; _i < _a.length; _i++) {\n            var extension = _a[_i];\n            switch (extension.type) {\n                case 'u':\n                    extension.keywords = canonicalizeKVs(extension.keywords);\n                    if (extension.attributes) {\n                        extension.attributes = canonicalizeAttrs(extension.attributes);\n                    }\n                    break;\n                case 't':\n                    if (extension.lang) {\n                        extension.lang = canonicalizeUnicodeLanguageId(extension.lang);\n                    }\n                    extension.fields = canonicalizeKVs(extension.fields);\n                    break;\n                default:\n                    extension.value = extension.value.toLowerCase();\n                    break;\n            }\n        }\n        locale.extensions.sort(compareExtension);\n    }\n    return locale;\n}\nexports.canonicalizeUnicodeLocaleId = canonicalizeUnicodeLocaleId;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}