{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t(require(\"@carto/react-core\"), require(\"@deck.gl/carto\"), require(\"react\"), require(\"react-redux\"), require(\"@carto/react-redux\"), require(\"@carto/react-workers\"), require(\"@deck.gl/core\"), require(\"@deck.gl/extensions\"), require(\"@carto/react-core/\")) : \"function\" == typeof define && define.amd ? define([\"@carto/react-core\", \"@deck.gl/carto\", \"react\", \"react-redux\", \"@carto/react-redux\", \"@carto/react-workers\", \"@deck.gl/core\", \"@deck.gl/extensions\", \"@carto/react-core/\"], t) : \"object\" == typeof exports ? exports.cartoReactApi = t(require(\"@carto/react-core\"), require(\"@deck.gl/carto\"), require(\"react\"), require(\"react-redux\"), require(\"@carto/react-redux\"), require(\"@carto/react-workers\"), require(\"@deck.gl/core\"), require(\"@deck.gl/extensions\"), require(\"@carto/react-core/\")) : e.cartoReactApi = t(e[\"@carto/react-core\"], e[\"@deck.gl/carto\"], e.react, e[\"react-redux\"], e[\"@carto/react-redux\"], e[\"@carto/react-workers\"], e[\"@deck.gl/core\"], e[\"@deck.gl/extensions\"], e[\"@carto/react-core/\"]);\n}(self, function (e, t, r, n, o, i, a, c, u) {\n  return function () {\n    var l = {\n      162: function _(e, t, r) {\n        e.exports = r(47);\n      },\n      47: function _(e) {\n        var t = function (e) {\n          \"use strict\";\n\n          var t,\n              r = Object.prototype,\n              n = r.hasOwnProperty,\n              o = \"function\" == typeof Symbol ? Symbol : {},\n              i = o.iterator || \"@@iterator\",\n              a = o.asyncIterator || \"@@asyncIterator\",\n              c = o.toStringTag || \"@@toStringTag\";\n\n          function u(e, t, r) {\n            return Object.defineProperty(e, t, {\n              value: r,\n              enumerable: !0,\n              configurable: !0,\n              writable: !0\n            }), e[t];\n          }\n\n          try {\n            u({}, \"\");\n          } catch (e) {\n            u = function u(e, t, r) {\n              return e[t] = r;\n            };\n          }\n\n          function l(e, t, r, n) {\n            var o = t && t.prototype instanceof v ? t : v,\n                i = Object.create(o.prototype),\n                a = new I(n || []);\n            return i._invoke = function (e, t, r) {\n              var n = f;\n              return function (o, i) {\n                if (n === d) throw new Error(\"Generator is already running\");\n\n                if (n === h) {\n                  if (\"throw\" === o) throw i;\n                  return T();\n                }\n\n                for (r.method = o, r.arg = i;;) {\n                  var a = r.delegate;\n\n                  if (a) {\n                    var c = P(a, r);\n\n                    if (c) {\n                      if (c === y) continue;\n                      return c;\n                    }\n                  }\n\n                  if (\"next\" === r.method) r.sent = r._sent = r.arg;else if (\"throw\" === r.method) {\n                    if (n === f) throw n = h, r.arg;\n                    r.dispatchException(r.arg);\n                  } else \"return\" === r.method && r.abrupt(\"return\", r.arg);\n                  n = d;\n                  var u = s(e, t, r);\n\n                  if (\"normal\" === u.type) {\n                    if (n = r.done ? h : p, u.arg === y) continue;\n                    return {\n                      value: u.arg,\n                      done: r.done\n                    };\n                  }\n\n                  \"throw\" === u.type && (n = h, r.method = \"throw\", r.arg = u.arg);\n                }\n              };\n            }(e, r, a), i;\n          }\n\n          function s(e, t, r) {\n            try {\n              return {\n                type: \"normal\",\n                arg: e.call(t, r)\n              };\n            } catch (e) {\n              return {\n                type: \"throw\",\n                arg: e\n              };\n            }\n          }\n\n          e.wrap = l;\n          var f = \"suspendedStart\",\n              p = \"suspendedYield\",\n              d = \"executing\",\n              h = \"completed\",\n              y = {};\n\n          function v() {}\n\n          function b() {}\n\n          function g() {}\n\n          var m = {};\n          u(m, i, function () {\n            return this;\n          });\n          var w = Object.getPrototypeOf,\n              O = w && w(w(_([])));\n          O && O !== r && n.call(O, i) && (m = O);\n          var x = g.prototype = v.prototype = Object.create(m);\n\n          function E(e) {\n            [\"next\", \"throw\", \"return\"].forEach(function (t) {\n              u(e, t, function (e) {\n                return this._invoke(t, e);\n              });\n            });\n          }\n\n          function j(e, t) {\n            function r(o, i, a, c) {\n              var u = s(e[o], e, i);\n\n              if (\"throw\" !== u.type) {\n                var l = u.arg,\n                    f = l.value;\n                return f && \"object\" == typeof f && n.call(f, \"__await\") ? t.resolve(f.__await).then(function (e) {\n                  r(\"next\", e, a, c);\n                }, function (e) {\n                  r(\"throw\", e, a, c);\n                }) : t.resolve(f).then(function (e) {\n                  l.value = e, a(l);\n                }, function (e) {\n                  return r(\"throw\", e, a, c);\n                });\n              }\n\n              c(u.arg);\n            }\n\n            var o;\n\n            this._invoke = function (e, n) {\n              function i() {\n                return new t(function (t, o) {\n                  r(e, n, t, o);\n                });\n              }\n\n              return o = o ? o.then(i, i) : i();\n            };\n          }\n\n          function P(e, r) {\n            var n = e.iterator[r.method];\n\n            if (n === t) {\n              if (r.delegate = null, \"throw\" === r.method) {\n                if (e.iterator.return && (r.method = \"return\", r.arg = t, P(e, r), \"throw\" === r.method)) return y;\n                r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n              }\n\n              return y;\n            }\n\n            var o = s(n, e.iterator, r.arg);\n            if (\"throw\" === o.type) return r.method = \"throw\", r.arg = o.arg, r.delegate = null, y;\n            var i = o.arg;\n            return i ? i.done ? (r[e.resultName] = i.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : i : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n          }\n\n          function S(e) {\n            var t = {\n              tryLoc: e[0]\n            };\n            1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);\n          }\n\n          function k(e) {\n            var t = e.completion || {};\n            t.type = \"normal\", delete t.arg, e.completion = t;\n          }\n\n          function I(e) {\n            this.tryEntries = [{\n              tryLoc: \"root\"\n            }], e.forEach(S, this), this.reset(!0);\n          }\n\n          function _(e) {\n            if (e) {\n              var r = e[i];\n              if (r) return r.call(e);\n              if (\"function\" == typeof e.next) return e;\n\n              if (!isNaN(e.length)) {\n                var o = -1,\n                    a = function r() {\n                  for (; ++o < e.length;) {\n                    if (n.call(e, o)) return r.value = e[o], r.done = !1, r;\n                  }\n\n                  return r.value = t, r.done = !0, r;\n                };\n\n                return a.next = a;\n              }\n            }\n\n            return {\n              next: T\n            };\n          }\n\n          function T() {\n            return {\n              value: t,\n              done: !0\n            };\n          }\n\n          return b.prototype = g, u(x, \"constructor\", g), u(g, \"constructor\", b), b.displayName = u(g, c, \"GeneratorFunction\"), e.isGeneratorFunction = function (e) {\n            var t = \"function\" == typeof e && e.constructor;\n            return !!t && (t === b || \"GeneratorFunction\" === (t.displayName || t.name));\n          }, e.mark = function (e) {\n            return Object.setPrototypeOf ? Object.setPrototypeOf(e, g) : (e.__proto__ = g, u(e, c, \"GeneratorFunction\")), e.prototype = Object.create(x), e;\n          }, e.awrap = function (e) {\n            return {\n              __await: e\n            };\n          }, E(j.prototype), u(j.prototype, a, function () {\n            return this;\n          }), e.AsyncIterator = j, e.async = function (t, r, n, o, i) {\n            void 0 === i && (i = Promise);\n            var a = new j(l(t, r, n, o), i);\n            return e.isGeneratorFunction(r) ? a : a.next().then(function (e) {\n              return e.done ? e.value : a.next();\n            });\n          }, E(x), u(x, c, \"Generator\"), u(x, i, function () {\n            return this;\n          }), u(x, \"toString\", function () {\n            return \"[object Generator]\";\n          }), e.keys = function (e) {\n            var t = [];\n\n            for (var r in e) {\n              t.push(r);\n            }\n\n            return t.reverse(), function r() {\n              for (; t.length;) {\n                var n = t.pop();\n                if (n in e) return r.value = n, r.done = !1, r;\n              }\n\n              return r.done = !0, r;\n            };\n          }, e.values = _, I.prototype = {\n            constructor: I,\n            reset: function reset(e) {\n              if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(k), !e) for (var r in this) {\n                \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n              }\n            },\n            stop: function stop() {\n              this.done = !0;\n              var e = this.tryEntries[0].completion;\n              if (\"throw\" === e.type) throw e.arg;\n              return this.rval;\n            },\n            dispatchException: function dispatchException(e) {\n              if (this.done) throw e;\n              var r = this;\n\n              function o(n, o) {\n                return c.type = \"throw\", c.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n              }\n\n              for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n                var a = this.tryEntries[i],\n                    c = a.completion;\n                if (\"root\" === a.tryLoc) return o(\"end\");\n\n                if (a.tryLoc <= this.prev) {\n                  var u = n.call(a, \"catchLoc\"),\n                      l = n.call(a, \"finallyLoc\");\n\n                  if (u && l) {\n                    if (this.prev < a.catchLoc) return o(a.catchLoc, !0);\n                    if (this.prev < a.finallyLoc) return o(a.finallyLoc);\n                  } else if (u) {\n                    if (this.prev < a.catchLoc) return o(a.catchLoc, !0);\n                  } else {\n                    if (!l) throw new Error(\"try statement without catch or finally\");\n                    if (this.prev < a.finallyLoc) return o(a.finallyLoc);\n                  }\n                }\n              }\n            },\n            abrupt: function abrupt(e, t) {\n              for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n                var o = this.tryEntries[r];\n\n                if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n                  var i = o;\n                  break;\n                }\n              }\n\n              i && (\"break\" === e || \"continue\" === e) && i.tryLoc <= t && t <= i.finallyLoc && (i = null);\n              var a = i ? i.completion : {};\n              return a.type = e, a.arg = t, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n            },\n            complete: function complete(e, t) {\n              if (\"throw\" === e.type) throw e.arg;\n              return \"break\" === e.type || \"continue\" === e.type ? this.next = e.arg : \"return\" === e.type ? (this.rval = this.arg = e.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === e.type && t && (this.next = t), y;\n            },\n            finish: function finish(e) {\n              for (var t = this.tryEntries.length - 1; t >= 0; --t) {\n                var r = this.tryEntries[t];\n                if (r.finallyLoc === e) return this.complete(r.completion, r.afterLoc), k(r), y;\n              }\n            },\n            catch: function _catch(e) {\n              for (var t = this.tryEntries.length - 1; t >= 0; --t) {\n                var r = this.tryEntries[t];\n\n                if (r.tryLoc === e) {\n                  var n = r.completion;\n\n                  if (\"throw\" === n.type) {\n                    var o = n.arg;\n                    k(r);\n                  }\n\n                  return o;\n                }\n              }\n\n              throw new Error(\"illegal catch attempt\");\n            },\n            delegateYield: function delegateYield(e, r, n) {\n              return this.delegate = {\n                iterator: _(e),\n                resultName: r,\n                nextLoc: n\n              }, \"next\" === this.method && (this.arg = t), y;\n            }\n          }, e;\n        }(e.exports);\n\n        try {\n          regeneratorRuntime = t;\n        } catch (e) {\n          \"object\" == typeof globalThis ? globalThis.regeneratorRuntime = t : Function(\"r\", \"regeneratorRuntime = r\")(t);\n        }\n      },\n      485: function _(t) {\n        \"use strict\";\n\n        t.exports = e;\n      },\n      38: function _(e) {\n        \"use strict\";\n\n        e.exports = u;\n      },\n      347: function _(e) {\n        \"use strict\";\n\n        e.exports = o;\n      },\n      116: function _(e) {\n        \"use strict\";\n\n        e.exports = i;\n      },\n      332: function _(e) {\n        \"use strict\";\n\n        e.exports = t;\n      },\n      946: function _(e) {\n        \"use strict\";\n\n        e.exports = a;\n      },\n      487: function _(e) {\n        \"use strict\";\n\n        e.exports = c;\n      },\n      156: function _(e) {\n        \"use strict\";\n\n        e.exports = r;\n      },\n      756: function _(e) {\n        \"use strict\";\n\n        e.exports = n;\n      }\n    },\n        s = {};\n\n    function f(e) {\n      var t = s[e];\n      if (void 0 !== t) return t.exports;\n      var r = s[e] = {\n        exports: {}\n      };\n      return l[e](r, r.exports, f), r.exports;\n    }\n\n    f.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return f.d(t, {\n        a: t\n      }), t;\n    }, f.d = function (e, t) {\n      for (var r in t) {\n        f.o(t, r) && !f.o(e, r) && Object.defineProperty(e, r, {\n          enumerable: !0,\n          get: t[r]\n        });\n      }\n    }, f.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, f.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    };\n    var p = {};\n    return function () {\n      \"use strict\";\n\n      function e(e, t) {\n        (null == t || t > e.length) && (t = e.length);\n\n        for (var r = 0, n = new Array(t); r < t; r++) {\n          n[r] = e[r];\n        }\n\n        return n;\n      }\n\n      function t(t, r) {\n        if (t) {\n          if (\"string\" == typeof t) return e(t, r);\n          var n = Object.prototype.toString.call(t).slice(8, -1);\n          return \"Object\" === n && t.constructor && (n = t.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(t) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? e(t, r) : void 0;\n        }\n      }\n\n      function r(e, r) {\n        return function (e) {\n          if (Array.isArray(e)) return e;\n        }(e) || function (e, t) {\n          var r = null == e ? null : \"undefined\" != typeof Symbol && e[Symbol.iterator] || e[\"@@iterator\"];\n\n          if (null != r) {\n            var n,\n                o,\n                i = [],\n                a = !0,\n                c = !1;\n\n            try {\n              for (r = r.call(e); !(a = (n = r.next()).done) && (i.push(n.value), !t || i.length !== t); a = !0) {\n                ;\n              }\n            } catch (e) {\n              c = !0, o = e;\n            } finally {\n              try {\n                a || null == r.return || r.return();\n              } finally {\n                if (c) throw o;\n              }\n            }\n\n            return i;\n          }\n        }(e, r) || t(e, r) || function () {\n          throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n        }();\n      }\n\n      function n(e, t, r) {\n        return t in e ? Object.defineProperty(e, t, {\n          value: r,\n          enumerable: !0,\n          configurable: !0,\n          writable: !0\n        }) : e[t] = r, e;\n      }\n\n      function o(e, t, r, n, o, i, a) {\n        try {\n          var c = e[i](a),\n              u = c.value;\n        } catch (e) {\n          return void r(e);\n        }\n\n        c.done ? t(u) : Promise.resolve(u).then(n, o);\n      }\n\n      f.r(p), f.d(p, {\n        executeSQL: function executeSQL() {\n          return b;\n        },\n        getDataFilterExtensionProps: function getDataFilterExtensionProps() {\n          return R;\n        },\n        useCartoLayerProps: function useCartoLayerProps() {\n          return M;\n        }\n      });\n      var i = f(162),\n          a = f.n(i),\n          c = f(485),\n          u = f(332);\n\n      function l(e) {\n        e.credentials;\n        var t,\n            r = e.response,\n            n = e.data;\n\n        switch (r.status) {\n          case 401:\n            throw new Error(\"Unauthorized access. Invalid credentials\");\n\n          case 403:\n            throw new Error(\"Forbidden access to the requested data\");\n\n          default:\n            throw new Error(\"\".concat(JSON.stringify(n.hint || (null === (t = n.error) || void 0 === t ? void 0 : t[0]))));\n        }\n      }\n\n      function s(e) {\n        var t,\n            r = e.credentials,\n            n = e.connection,\n            o = e.parameters,\n            i = r.apiVersion,\n            a = void 0 === i ? u.API_VERSIONS.V2 : i,\n            c = r.apiBaseUrl;\n\n        switch (a) {\n          case u.API_VERSIONS.V1:\n          case u.API_VERSIONS.V2:\n            t = \"\".concat(function (e) {\n              var t = e.serverUrlTemplate.replace(\"{user}\", e.username);\n              return t.endsWith(\"/\") || (t += \"/\"), t;\n            }(r), \"api/v2/sql\");\n            break;\n\n          case u.API_VERSIONS.V3:\n            t = \"\".concat(c, \"/v3/sql/\").concat(n, \"/query\");\n            break;\n\n          default:\n            throw new Error(\"Unknown apiVersion \".concat(a));\n        }\n\n        return o ? \"\".concat(t, \"?\").concat(o.join(\"&\")) : t;\n      }\n\n      var d = [\"abortController\"];\n\n      function h(e, t) {\n        var r = Object.keys(e);\n\n        if (Object.getOwnPropertySymbols) {\n          var n = Object.getOwnPropertySymbols(e);\n          t && (n = n.filter(function (t) {\n            return Object.getOwnPropertyDescriptor(e, t).enumerable;\n          })), r.push.apply(r, n);\n        }\n\n        return r;\n      }\n\n      function y(e) {\n        for (var t = 1; t < arguments.length; t++) {\n          var r = null != arguments[t] ? arguments[t] : {};\n          t % 2 ? h(Object(r), !0).forEach(function (t) {\n            n(e, t, r[t]);\n          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : h(Object(r)).forEach(function (t) {\n            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n          });\n        }\n\n        return e;\n      }\n\n      var v = \"carto-react\",\n          b = function () {\n        var e,\n            t = (e = a().mark(function e(t) {\n          var r, n, o, i, c, s, f, p;\n          return a().wrap(function (e) {\n            for (;;) {\n              switch (e.prev = e.next) {\n                case 0:\n                  if (r = t.credentials, n = t.query, o = t.connection, i = t.opts, r) {\n                    e.next = 3;\n                    break;\n                  }\n\n                  throw new Error(\"No credentials provided\");\n\n                case 3:\n                  return e.prev = 3, s = g({\n                    credentials: r,\n                    connection: o,\n                    query: n,\n                    opts: i\n                  }), e.next = 7, fetch(s);\n\n                case 7:\n                  c = e.sent, e.next = 15;\n                  break;\n\n                case 10:\n                  if (e.prev = 10, e.t0 = e.catch(3), \"AbortError\" !== e.t0.name) {\n                    e.next = 14;\n                    break;\n                  }\n\n                  throw e.t0;\n\n                case 14:\n                  throw new Error(\"Failed to connect to SQL API: \".concat(e.t0));\n\n                case 15:\n                  return e.next = 17, c.json();\n\n                case 17:\n                  if (f = e.sent, c.ok || l({\n                    credentials: r,\n                    response: c,\n                    data: f\n                  }), (void 0 === (p = r.apiVersion) ? u.API_VERSIONS.V2 : p) !== u.API_VERSIONS.V3) {\n                    e.next = 22;\n                    break;\n                  }\n\n                  return e.abrupt(\"return\", f.rows);\n\n                case 22:\n                  return e.abrupt(\"return\", i && \"geojson\" === i.format ? f : f.rows);\n\n                case 23:\n                case \"end\":\n                  return e.stop();\n              }\n            }\n          }, e, null, [[3, 10]]);\n        }), function () {\n          var t = this,\n              r = arguments;\n          return new Promise(function (n, i) {\n            var a = e.apply(t, r);\n\n            function c(e) {\n              o(a, n, i, c, u, \"next\", e);\n            }\n\n            function u(e) {\n              o(a, n, i, c, u, \"throw\", e);\n            }\n\n            c(void 0);\n          });\n        });\n        return function (e) {\n          return t.apply(this, arguments);\n        };\n      }();\n\n      function g(e) {\n        var t = e.credentials,\n            n = e.connection,\n            o = e.query,\n            i = e.opts,\n            a = void 0 === i ? {} : i,\n            l = a.abortController,\n            f = function (e, t) {\n          if (null == e) return {};\n\n          var r,\n              n,\n              o = function (e, t) {\n            if (null == e) return {};\n            var r,\n                n,\n                o = {},\n                i = Object.keys(e);\n\n            for (n = 0; n < i.length; n++) {\n              r = i[n], t.indexOf(r) >= 0 || (o[r] = e[r]);\n            }\n\n            return o;\n          }(e, t);\n\n          if (Object.getOwnPropertySymbols) {\n            var i = Object.getOwnPropertySymbols(e);\n\n            for (n = 0; n < i.length; n++) {\n              r = i[n], t.indexOf(r) >= 0 || Object.prototype.propertyIsEnumerable.call(e, r) && (o[r] = e[r]);\n            }\n          }\n\n          return o;\n        }(a, d),\n            p = t.apiVersion,\n            h = void 0 === p ? u.API_VERSIONS.V2 : p,\n            b = y({\n          client: v,\n          q: null == o ? void 0 : o.trim()\n        }, f);\n\n        h === u.API_VERSIONS.V3 ? b.access_token = t.accessToken : h !== u.API_VERSIONS.V1 && h !== u.API_VERSIONS.V2 || (b.api_key = t.apiKey);\n        var g = y({}, f);\n        l && (g.signal = l.signal);\n        var m = s({\n          credentials: t,\n          connection: n,\n          parameters: Object.entries(b).map(function (e) {\n            var t = r(e, 2),\n                n = t[0],\n                o = t[1];\n            return (0, c.encodeParameter)(n, o);\n          })\n        });\n        if (m.length < c.REQUEST_GET_MAX_URL_LENGTH) return (0, c.getRequest)(m, g);\n        var w = s({\n          credentials: t,\n          connection: n,\n          parameters: h === u.API_VERSIONS.V3 ? [\"access_token=\".concat(t.accessToken), \"client=\".concat(v)] : null\n        });\n        return (0, c.postRequest)(w, b, g);\n      }\n\n      function m(r) {\n        return function (t) {\n          if (Array.isArray(t)) return e(t);\n        }(r) || function (e) {\n          if (\"undefined\" != typeof Symbol && null != e[Symbol.iterator] || null != e[\"@@iterator\"]) return Array.from(e);\n        }(r) || t(r) || function () {\n          throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n        }();\n      }\n\n      var w = f(156),\n          O = f(756),\n          x = f(347),\n          E = f(116);\n\n      function j(e) {\n        if (\"DataCloneError\" === e.name) throw new Error('DataCloneError: Unable to retrieve GeoJSON features. Please check that your query is returning a column called \"geom\" or that you are using the geoColumn property to indicate the geometry column in the table.');\n        if (\"AbortError\" !== e.name) throw e;\n      }\n\n      function P(e) {\n        var t = e.source,\n            n = (0, O.useDispatch)(),\n            o = r((0, w.useState)(!1), 2),\n            i = o[0],\n            a = o[1],\n            c = (0, w.useRef)(null);\n        (0, w.useEffect)(function () {\n          t || a(!1);\n        }, [t]);\n        var u = (0, w.useCallback)(function () {\n          c.current && clearTimeout(c.current), c.current = null;\n        }, []),\n            l = (0, w.useCallback)(function () {\n          u(), a(!1);\n        }, [u, a]),\n            s = null == t ? void 0 : t.id,\n            f = (0, w.useCallback)(function (e) {\n          s && n((0, x.setFeaturesReady)({\n            sourceId: s,\n            ready: e\n          }));\n        }, [n, s]);\n        return [c, i, a, u, l, f];\n      }\n\n      var S = f(946),\n          k = f(487),\n          I = f(38);\n\n      function _(e, t) {\n        var r = Object.keys(e);\n\n        if (Object.getOwnPropertySymbols) {\n          var n = Object.getOwnPropertySymbols(e);\n          t && (n = n.filter(function (t) {\n            return Object.getOwnPropertyDescriptor(e, t).enumerable;\n          })), r.push.apply(r, n);\n        }\n\n        return r;\n      }\n\n      function T(e) {\n        for (var t = 1; t < arguments.length; t++) {\n          var r = null != arguments[t] ? arguments[t] : {};\n          t % 2 ? _(Object(r), !0).forEach(function (t) {\n            n(e, t, r[t]);\n          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : _(Object(r)).forEach(function (t) {\n            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n          });\n        }\n\n        return e;\n      }\n\n      var L = new k.DataFilterExtension({\n        filterSize: 4\n      });\n\n      function q(e) {\n        var t = {},\n            o = null;\n        return Object.entries(e).forEach(function (e) {\n          var i = r(e, 2),\n              a = i[0],\n              c = i[1];\n          Object.entries(c).forEach(function (e) {\n            var i = r(e, 2),\n                c = i[0],\n                u = i[1];\n            c !== I._FilterTypes.TIME ? t[a] = n({}, c, u) : o = {\n              column: a,\n              values: u.values,\n              type: c\n            };\n          });\n        }), {\n          filtersWithoutTimeType: t,\n          timeFilter: o\n        };\n      }\n\n      function A(e) {\n        var t = Array(4).fill([0, 0]);\n        return t[0] = [1, 1], e && (t[1] = e.values[0]), t;\n      }\n\n      function F(e, t) {\n        var r = T({}, e);\n        return t && (r[t.column] = T(T({}, r[t.column]), {}, n({}, t.type, {}))), {\n          getFilterValue: JSON.stringify(r)\n        };\n      }\n\n      function V(e, t) {\n        var r = Array(4).fill(0),\n            n = (0, I._buildFeatureFilter)({\n          filters: e,\n          type: \"number\"\n        });\n        return function (e) {\n          if (r[0] = n(e), t) {\n            var o = e.properties || e;\n            r[1] = o[t.column];\n          }\n\n          return r;\n        };\n      }\n\n      function R() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            t = q(e),\n            r = t.filtersWithoutTimeType,\n            n = t.timeFilter;\n        return {\n          filterRange: A(n),\n          updateTriggers: F(r, n),\n          getFilterValue: V(r, n),\n          extensions: [L]\n        };\n      }\n\n      var N = new k.MaskExtension();\n\n      function C(e, t) {\n        var r = Object.keys(e);\n\n        if (Object.getOwnPropertySymbols) {\n          var n = Object.getOwnPropertySymbols(e);\n          t && (n = n.filter(function (t) {\n            return Object.getOwnPropertyDescriptor(e, t).enumerable;\n          })), r.push.apply(r, n);\n        }\n\n        return r;\n      }\n\n      function D(e) {\n        for (var t = 1; t < arguments.length; t++) {\n          var r = null != arguments[t] ? arguments[t] : {};\n          t % 2 ? C(Object(r), !0).forEach(function (t) {\n            n(e, t, r[t]);\n          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : C(Object(r)).forEach(function (t) {\n            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n          });\n        }\n\n        return e;\n      }\n\n      function M(e) {\n        var t,\n            n,\n            o,\n            i = e.source,\n            a = e.layerConfig,\n            l = e.uniqueIdProperty,\n            s = e.viewportFeatures,\n            f = void 0 === s || s,\n            p = e.viewporFeaturesDebounceTimeout,\n            d = void 0 === p ? 250 : p,\n            h = (0, O.useSelector)(function (e) {\n          return e.carto.viewport;\n        }),\n            y = (0, O.useSelector)(function (e) {\n          return (0, x.selectSpatialFilter)(e, null == i ? void 0 : i.id);\n        }),\n            v = function (e) {\n          var t = e.source,\n              n = e.viewport,\n              o = e.spatialFilter,\n              i = e.uniqueIdProperty,\n              a = e.debounceTimeout,\n              u = void 0 === a ? 250 : a,\n              l = r(P({\n            source: t\n          }), 6),\n              s = l[0],\n              f = l[1],\n              p = l[2],\n              d = l[3],\n              h = l[4],\n              y = l[5],\n              v = null == t ? void 0 : t.id,\n              b = (0, w.useCallback)(function (e) {\n            var t = e.viewport,\n                r = e.spatialFilter,\n                n = e.uniqueIdProperty;\n            (0, E.executeTask)(v, E.Methods.GEOJSON_FEATURES, {\n              viewport: t,\n              geometry: r,\n              uniqueIdProperty: n\n            }).then(function () {\n              y(!0);\n            }).catch(j);\n          }, [y, v]),\n              g = (0, w.useCallback)((0, c.debounce)(b, u), [b]);\n          return (0, w.useEffect)(function () {\n            v && f && (d(), y(!1), s.current = g({\n              viewport: n,\n              spatialFilter: o,\n              uniqueIdProperty: i\n            }));\n          }, [n, o, i, v, f, g, y, d, s]), [(0, w.useCallback)(function (e) {\n            h(), y(!1), (0, E.executeTask)(v, E.Methods.LOAD_GEOJSON_FEATURES, {\n              geojson: e\n            }).then(function () {\n              return p(!0);\n            }).catch(j);\n          }, [v, y, h, p])];\n        }({\n          source: i,\n          viewport: h,\n          spatialFilter: y,\n          uniqueIdProperty: l,\n          debounceTimeout: d\n        }),\n            b = r(v, 1)[0],\n            g = function (e) {\n          var t = e.source,\n              n = e.viewport,\n              o = e.spatialFilter,\n              i = e.uniqueIdProperty,\n              a = e.debounceTimeout,\n              l = void 0 === a ? 250 : a,\n              s = r(P({\n            source: t\n          }), 6),\n              f = s[0],\n              p = s[1],\n              d = s[2],\n              h = s[3],\n              y = s[4],\n              v = s[5],\n              b = r((0, w.useState)(\"\"), 2),\n              g = b[0],\n              m = b[1],\n              O = null == t ? void 0 : t.id,\n              x = (0, w.useCallback)(function (e) {\n            var t = e.viewport,\n                r = e.spatialFilter,\n                n = e.uniqueIdProperty;\n            if (!g) return null;\n            v(!1), (0, E.executeTask)(O, E.Methods.TILE_FEATURES, {\n              viewport: t,\n              geometry: r,\n              uniqueIdProperty: n,\n              tileFormat: g\n            }).then(function () {\n              v(!0);\n            }).catch(j).finally(h);\n          }, [v, O, g, h]),\n              k = (0, w.useCallback)(function (e) {\n            var t = e.reduce(function (e, t) {\n              var r = t.data,\n                  n = t.isVisible,\n                  o = t.bbox;\n              return n && r && e.push({\n                data: r,\n                bbox: o\n              }), e;\n            }, []);\n            (0, E.executeTask)(O, E.Methods.LOAD_TILES, {\n              tiles: t\n            }).then(function () {\n              return d(!0);\n            }).catch(j);\n          }, [O, d]),\n              I = (0, w.useCallback)((0, c.debounce)(x, l), [x]),\n              _ = (0, w.useCallback)((0, c.debounce)(k, l), [k]);\n\n          (0, w.useEffect)(function () {\n            O && p && (h(), v(!1), f.current = I({\n              viewport: n,\n              spatialFilter: o,\n              uniqueIdProperty: i\n            }));\n          }, [n, o, i, I, O, p, v, h, f]);\n          var T = (0, w.useCallback)(function (e) {\n            y(), v(!1), f.current = _(e);\n          }, [y, v, _, f]),\n              L = (0, w.useCallback)(function () {\n            var e;\n            return y(), (e = S.Layer.defaultProps.fetch).value.apply(e, arguments);\n          }, [y]);\n          return [(0, w.useCallback)(function (e) {\n            var t = r(e.tiles, 1)[0],\n                n = new URL(t).searchParams.get(\"formatTiles\");\n            m(n || u.TILE_FORMATS.MVT);\n          }, []), T, L];\n        }({\n          source: i,\n          viewport: h,\n          spatialFilter: y,\n          uniqueIdProperty: l,\n          debounceTimeout: d\n        }),\n            k = r(g, 3),\n            _ = k[0],\n            T = k[1],\n            L = k[2],\n            q = (0, w.useCallback)(function (e) {\n          return null != e && e.tilejson ? _(e) : b(e);\n        }, [b, _]),\n            A = D({\n          binary: !0\n        }, f && {\n          onViewportLoad: T,\n          fetch: L,\n          onDataLoad: q\n        }),\n            F = R(null == i ? void 0 : i.filters),\n            V = (o = null == y || null === (t = y.geometry) || void 0 === t ? void 0 : t.coordinates, {\n          maskId: Boolean(o && o.length) && I.MASK_ID,\n          extensions: [N]\n        }),\n            C = [].concat(m(F.extensions), m(V.extensions));\n\n        return D(D(D(D({}, A), {}, {\n          id: null == a ? void 0 : a.id,\n          visible: void 0 === (null == a ? void 0 : a.visible) || a.visible,\n          opacity: null !== (n = null == a ? void 0 : a.opacity) && void 0 !== n ? n : 1,\n          uniqueIdProperty: l,\n          data: null == i ? void 0 : i.data,\n          type: null == i ? void 0 : i.type,\n          connection: null == i ? void 0 : i.connection,\n          credentials: null == i ? void 0 : i.credentials,\n          clientId: \"carto-for-react\"\n        }, F), V), {}, {\n          extensions: C\n        });\n      }\n    }(), p;\n  }();\n});","map":{"version":3,"mappings":"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","names":["root","factory","exports","module","require","define","amd","cartoReactApi","react","self","__WEBPACK_EXTERNAL_MODULE__485__","__WEBPACK_EXTERNAL_MODULE__332__","__WEBPACK_EXTERNAL_MODULE__156__","__WEBPACK_EXTERNAL_MODULE__756__","__WEBPACK_EXTERNAL_MODULE__347__","__WEBPACK_EXTERNAL_MODULE__116__","__WEBPACK_EXTERNAL_MODULE__946__","__WEBPACK_EXTERNAL_MODULE__487__","__WEBPACK_EXTERNAL_MODULE__38__","r","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","default","e","d","a","definition","o","get","prop","_arrayLikeToArray","arr","len","arr2","Array","_unsupportedIterableToArray","minLen","toString","from","test","_slicedToArray","isArray","_i","_s","_e","_arr","_n","_d","t","_defineProperty","asyncGeneratorStep","gen","_next","_throw","dealWithApiError","credentials","response","data","status","JSON","stringify","hint","generateApiUrl","url","connection","parameters","apiVersion","API_VERSIONS","apiBaseUrl","concat","serverUrlTemplate","replace","username","endsWith","sqlApiUrl","join","CLIENT","executeSQL","query","opts","request","createRequest","fetch","json","ok","p","rows","format","args","arguments","apply","abortController","otherOptions","source","excluded","target","sourceKeys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","rawParams","y","client","q","trim","access_token","accessToken","api_key","apiKey","requestOpts","signal","getUrl","entries","map","encodeParameter","REQUEST_GET_MAX_URL_LENGTH","getRequest","postUrl","postRequest","_toConsumableArray","throwError","useFeaturesCommons","dispatch","useDispatch","useState","isDataLoaded","setDataLoaded","debounceIdRef","useRef","useEffect","clearDebounce","useCallback","current","clearTimeout","stopAnyCompute","sourceId","id","setSourceFeaturesReady","ready","setFeaturesReady","dataFilterExtension","DataFilterExtension","filterSize","getFiltersByType","filters","filtersWithoutTimeType","timeFilter","column","columnData","typeData","_FilterTypes","getFilterRange","fill","getUpdateTriggers","T","getFilterValue","featureFilter","_buildFeatureFilter","feature","f","properties","getDataFilterExtensionProps","filterRange","updateTriggers","extensions","maskExtension","MaskExtension","useCartoLayerProps","maskPolygon","layerConfig","uniqueIdProperty","viewportFeatures","s","viewporFeaturesDebounceTimeout","viewport","useSelector","carto","spatialFilter","selectSpatialFilter","v","debounceTimeout","l","isGeoJsonLoaded","setGeoJsonLoaded","computeFeatures","executeTask","Methods","geometry","debouncedComputeFeatures","debounce","geojson","useGeojsonFeatures","onDataLoadForGeojson","g","isTilesetLoaded","setTilesetLoaded","b","tileFormat","setTileFormat","finally","loadTiles","tiles","cleanedTiles","reduce","acc","isVisible","bbox","debouncedLoadTiles","onViewportLoad","tile","tilesFormat","URL","searchParams","TILE_FORMATS","useTileFeatures","k","onDataLoadForTile","onDataLoad","tilejson","props","D","binary","dataFilterExtensionProps","maskExtensionProps","coordinates","maskId","Boolean","MASK_ID","m","visible","opacity","clientId"],"sourceRoot":"","sources":["webpack://cartoReactApi/webpack/universalModuleDefinition","webpack://cartoReactApi/../../node_modules/@babel/runtime/regenerator/index.js","webpack://cartoReactApi/../../node_modules/regenerator-runtime/runtime.js","webpack://cartoReactApi/external umd \"@carto/react-core\"","webpack://cartoReactApi/external umd \"@carto/react-core/\"","webpack://cartoReactApi/external umd \"@carto/react-redux\"","webpack://cartoReactApi/external umd \"@carto/react-workers\"","webpack://cartoReactApi/external umd \"@deck.gl/carto\"","webpack://cartoReactApi/external umd \"@deck.gl/core\"","webpack://cartoReactApi/external umd \"@deck.gl/extensions\"","webpack://cartoReactApi/external umd \"react\"","webpack://cartoReactApi/external umd \"react-redux\"","webpack://cartoReactApi/webpack/bootstrap","webpack://cartoReactApi/webpack/runtime/compat get default export","webpack://cartoReactApi/webpack/runtime/define property getters","webpack://cartoReactApi/webpack/runtime/hasOwnProperty shorthand","webpack://cartoReactApi/webpack/runtime/make namespace object","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://cartoReactApi/./src/api/common.js","webpack://cartoReactApi/./src/api/SQL.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://cartoReactApi/../../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://cartoReactApi/./src/hooks/utils.js","webpack://cartoReactApi/./src/hooks/useFeaturesCommons.js","webpack://cartoReactApi/./src/hooks/dataFilterExtensionUtil.js","webpack://cartoReactApi/./src/hooks/maskExtensionUtil.js","webpack://cartoReactApi/./src/hooks/useCartoLayerProps.js","webpack://cartoReactApi/./src/hooks/useGeojsonFeatures.js","webpack://cartoReactApi/./src/hooks/useTileFeatures.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@carto/react-core\"), require(\"@deck.gl/carto\"), require(\"react\"), require(\"react-redux\"), require(\"@carto/react-redux\"), require(\"@carto/react-workers\"), require(\"@deck.gl/core\"), require(\"@deck.gl/extensions\"), require(\"@carto/react-core/\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@carto/react-core\", \"@deck.gl/carto\", \"react\", \"react-redux\", \"@carto/react-redux\", \"@carto/react-workers\", \"@deck.gl/core\", \"@deck.gl/extensions\", \"@carto/react-core/\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cartoReactApi\"] = factory(require(\"@carto/react-core\"), require(\"@deck.gl/carto\"), require(\"react\"), require(\"react-redux\"), require(\"@carto/react-redux\"), require(\"@carto/react-workers\"), require(\"@deck.gl/core\"), require(\"@deck.gl/extensions\"), require(\"@carto/react-core/\"));\n\telse\n\t\troot[\"cartoReactApi\"] = factory(root[\"@carto/react-core\"], root[\"@deck.gl/carto\"], root[\"react\"], root[\"react-redux\"], root[\"@carto/react-redux\"], root[\"@carto/react-workers\"], root[\"@deck.gl/core\"], root[\"@deck.gl/extensions\"], root[\"@carto/react-core/\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__485__, __WEBPACK_EXTERNAL_MODULE__332__, __WEBPACK_EXTERNAL_MODULE__156__, __WEBPACK_EXTERNAL_MODULE__756__, __WEBPACK_EXTERNAL_MODULE__347__, __WEBPACK_EXTERNAL_MODULE__116__, __WEBPACK_EXTERNAL_MODULE__946__, __WEBPACK_EXTERNAL_MODULE__487__, __WEBPACK_EXTERNAL_MODULE__38__) {\nreturn ","module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__485__;","module.exports = __WEBPACK_EXTERNAL_MODULE__38__;","module.exports = __WEBPACK_EXTERNAL_MODULE__347__;","module.exports = __WEBPACK_EXTERNAL_MODULE__116__;","module.exports = __WEBPACK_EXTERNAL_MODULE__332__;","module.exports = __WEBPACK_EXTERNAL_MODULE__946__;","module.exports = __WEBPACK_EXTERNAL_MODULE__487__;","module.exports = __WEBPACK_EXTERNAL_MODULE__156__;","module.exports = __WEBPACK_EXTERNAL_MODULE__756__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { API_VERSIONS } from '@deck.gl/carto';\n\nconst DEFAULT_USER_COMPONENT_IN_URL = '{user}';\n\n/**\n * Return more descriptive error from API\n */\nexport function dealWithApiError({ credentials, response, data }) {\n  switch (response.status) {\n    case 401:\n      throw new Error('Unauthorized access. Invalid credentials');\n    case 403:\n      throw new Error('Forbidden access to the requested data');\n    default:\n      throw new Error(`${JSON.stringify(data.hint || data.error?.[0])}`);\n  }\n}\n\n/**\n * Generate a valid API url for a request\n */\nexport function generateApiUrl({ credentials, connection, parameters }) {\n  const { apiVersion = API_VERSIONS.V2, apiBaseUrl } = credentials;\n\n  let url;\n  switch (apiVersion) {\n    case API_VERSIONS.V1:\n    case API_VERSIONS.V2:\n      url = `${sqlApiUrl(credentials)}api/v2/sql`;\n      break;\n\n    case API_VERSIONS.V3:\n      url = `${apiBaseUrl}/v3/sql/${connection}/query`;\n      break;\n\n    default:\n      throw new Error(`Unknown apiVersion ${apiVersion}`);\n  }\n\n  if (!parameters) {\n    return url;\n  }\n\n  return `${url}?${parameters.join('&')}`;\n}\n\n/**\n * Prepare a url valid for the specified user, from the serverUrlTemplate\n */\nfunction sqlApiUrl(credentials) {\n  let url = credentials.serverUrlTemplate.replace(\n    DEFAULT_USER_COMPONENT_IN_URL,\n    credentials.username\n  );\n\n  if (!url.endsWith('/')) {\n    url += '/';\n  }\n\n  return url;\n}\n","import { encodeParameter, getRequest, postRequest } from '@carto/react-core';\nimport { REQUEST_GET_MAX_URL_LENGTH } from '@carto/react-core';\nimport { API_VERSIONS } from '@deck.gl/carto';\n\nimport { dealWithApiError, generateApiUrl } from './common';\n\nconst CLIENT = 'carto-react';\n\n/**\n * Executes a SQL query\n *\n * @param { object } props\n * @param { Object } props.credentials - CARTO user credentials\n * @param { string } props.credentials.username - CARTO username\n * @param { string } props.credentials.apiKey - CARTO API Key\n * @param { string } props.credentials.serverUrlTemplate - CARTO server URL template\n * @param { string } props.query - SQL query to be executed\n * @param { string } props.connection - connection name required for CARTO cloud native\n * @param { Object } props.opts - Additional options for the HTTP request\n */\nexport const executeSQL = async ({ credentials, query, connection, opts }) => {\n  let response;\n\n  if (!credentials) {\n    throw new Error('No credentials provided');\n  }\n\n  try {\n    const request = createRequest({ credentials, connection, query, opts });\n    response = await fetch(request);\n  } catch (error) {\n    if (error.name === 'AbortError') throw error;\n\n    throw new Error(`Failed to connect to SQL API: ${error}`);\n  }\n\n  const data = await response.json();\n\n  if (!response.ok) {\n    dealWithApiError({ credentials, response, data });\n  }\n\n  const { apiVersion = API_VERSIONS.V2 } = credentials;\n\n  if (apiVersion === API_VERSIONS.V3) {\n    return data.rows;\n  }\n\n  return opts && opts.format === 'geojson' ? data : data.rows; // just rows portion of result object\n};\n\n/**\n * Create an 'SQL query' request\n * (using GET or POST request, depending on url size)\n */\nfunction createRequest({ credentials, connection, query, opts = {} }) {\n  const { abortController, ...otherOptions } = opts;\n\n  const { apiVersion = API_VERSIONS.V2 } = credentials;\n\n  const rawParams = {\n    client: CLIENT,\n    q: query?.trim(),\n    ...otherOptions\n  };\n\n  if (apiVersion === API_VERSIONS.V3) {\n    rawParams.access_token = credentials.accessToken;\n  } else if (apiVersion === API_VERSIONS.V1 || apiVersion === API_VERSIONS.V2) {\n    rawParams.api_key = credentials.apiKey;\n  }\n\n  const requestOpts = { ...otherOptions };\n  if (abortController) {\n    requestOpts['signal'] = abortController.signal;\n  }\n\n  // Get request\n  const urlParamsForGet = Object.entries(rawParams).map(([key, value]) =>\n    encodeParameter(key, value)\n  );\n  const getUrl = generateApiUrl({\n    credentials,\n    connection,\n    parameters: urlParamsForGet\n  });\n  if (getUrl.length < REQUEST_GET_MAX_URL_LENGTH) {\n    return getRequest(getUrl, requestOpts);\n  }\n\n  // Post request\n  const urlParamsForPost =\n    apiVersion === API_VERSIONS.V3\n      ? [`access_token=${credentials.accessToken}`, `client=${CLIENT}`]\n      : null;\n  const postUrl = generateApiUrl({\n    credentials,\n    connection,\n    parameters: urlParamsForPost\n  });\n  return postRequest(postUrl, rawParams, requestOpts);\n}\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export function throwError(error) {\n  if (error.name === 'DataCloneError')\n    throw new Error(\n      `DataCloneError: Unable to retrieve GeoJSON features. Please check that your query is returning a column called \"geom\" or that you are using the geoColumn property to indicate the geometry column in the table.`\n    );\n  if (error.name === 'AbortError') return;\n  throw error;\n}\n","import { useDispatch } from 'react-redux';\nimport { setFeaturesReady } from '@carto/react-redux';\nimport { useState, useRef, useEffect, useCallback } from 'react';\n\nexport default function useFeaturesCommons({ source }) {\n  const dispatch = useDispatch();\n\n  const [isDataLoaded, setDataLoaded] = useState(false);\n  const debounceIdRef = useRef(null);\n\n  useEffect(() => {\n    if (!source) {\n      setDataLoaded(false);\n    }\n  }, [source]);\n\n  const clearDebounce = useCallback(() => {\n    if (debounceIdRef.current) {\n      clearTimeout(debounceIdRef.current);\n    }\n    debounceIdRef.current = null;\n  }, []);\n\n  const stopAnyCompute = useCallback(() => {\n    clearDebounce();\n    setDataLoaded(false);\n  }, [clearDebounce, setDataLoaded]);\n\n  const sourceId = source?.id;\n\n  const setSourceFeaturesReady = useCallback(\n    (ready) => {\n      if (sourceId) {\n        dispatch(setFeaturesReady({ sourceId, ready }));\n      }\n    },\n    [dispatch, sourceId]\n  );\n\n  return [\n    debounceIdRef,\n    isDataLoaded,\n    setDataLoaded,\n    clearDebounce,\n    stopAnyCompute,\n    setSourceFeaturesReady\n  ];\n}\n","import { DataFilterExtension } from '@deck.gl/extensions';\nimport { _buildFeatureFilter, _FilterTypes } from '@carto/react-core/';\n\n// Don't change this value to maintain compatibility with builder\nexport const MAX_GPU_FILTERS = 4;\nconst dataFilterExtension = new DataFilterExtension({ filterSize: MAX_GPU_FILTERS });\n\nfunction getFiltersByType(filters) {\n  const filtersWithoutTimeType = {};\n  let timeFilter = null;\n\n  Object.entries(filters).forEach(([column, columnData]) => {\n    Object.entries(columnData).forEach(([type, typeData]) => {\n      if (type !== _FilterTypes.TIME) {\n        filtersWithoutTimeType[column] = { [type]: typeData };\n      } else {\n        timeFilter = {\n          column,\n          values: typeData.values,\n          type\n        };\n      }\n    });\n  });\n  return {\n    filtersWithoutTimeType,\n    timeFilter\n  };\n}\n\nfunction getFilterRange(timeFilter) {\n  const result = Array(MAX_GPU_FILTERS).fill([0, 0]);\n  // According to getFilterValue all filters are resolved as 0 or 1 in the first position of the array\n  // except the time filter value that is resolved with the real value of the feature in the second position of the array\n  result[0] = [1, 1];\n  if (timeFilter) {\n    result[1] = timeFilter.values[0];\n  }\n  return result;\n}\n\nfunction getUpdateTriggers(filtersWithoutTimeType, timeFilter) {\n  const result = { ...filtersWithoutTimeType };\n\n  // We don't want to change the layer UpdateTriggers every time that the time filter changes\n  // because this filter is changed by the time series widget during its animation\n  // so we remove the time filter value from the `updateTriggers`\n  if (timeFilter) {\n    result[timeFilter.column] = {\n      ...result[timeFilter.column],\n      [timeFilter.type]: {} // this allows working with other filters, without an impact on performance\n    };\n  }\n  return {\n    getFilterValue: JSON.stringify(result)\n  };\n}\n\nfunction getFilterValue(filtersWithoutTimeType, timeFilter) {\n  const result = Array(MAX_GPU_FILTERS).fill(0);\n  const featureFilter = _buildFeatureFilter({\n    filters: filtersWithoutTimeType,\n    type: 'number'\n  });\n  // We evaluate all filters except the time filter using _buildFeatureFilter function.\n  // For the time filter, we return the value of the feature and we will change the getFilterRange result\n  // every time this filter changes\n  return (feature) => {\n    result[0] = featureFilter(feature);\n\n    if (timeFilter) {\n      const f = feature.properties || feature;\n      result[1] = f[timeFilter.column];\n    }\n    return result;\n  };\n}\n\n// The deck.gl DataFilterExtension accepts up to 4 values to filter.\n// We're going to use the first value for all filter except the time filter\n// that will be managed by the second value of the DataFilterExtension\nexport function getDataFilterExtensionProps(filters = {}) {\n  const { filtersWithoutTimeType, timeFilter } = getFiltersByType(filters);\n  return {\n    filterRange: getFilterRange(timeFilter),\n    updateTriggers: getUpdateTriggers(filtersWithoutTimeType, timeFilter),\n    getFilterValue: getFilterValue(filtersWithoutTimeType, timeFilter),\n    extensions: [dataFilterExtension]\n  };\n}\n","import { MASK_ID } from '@carto/react-core/';\nimport { MaskExtension } from '@deck.gl/extensions';\n\nconst maskExtension = new MaskExtension();\n\nexport function getMaskExtensionProps(maskPolygon) {\n  return {\n    maskId: Boolean(maskPolygon && maskPolygon.length) && MASK_ID,\n    extensions: [maskExtension]\n  };\n}\n","import { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectSpatialFilter } from '@carto/react-redux';\nimport useGeojsonFeatures from './useGeojsonFeatures';\nimport useTileFeatures from './useTileFeatures';\nimport { getDataFilterExtensionProps } from './dataFilterExtensionUtil';\nimport { getMaskExtensionProps } from './maskExtensionUtil';\n\nexport default function useCartoLayerProps({\n  source,\n  layerConfig,\n  uniqueIdProperty,\n  viewportFeatures = true,\n  viewporFeaturesDebounceTimeout = 250\n}) {\n  const viewport = useSelector((state) => state.carto.viewport);\n  const spatialFilter = useSelector((state) => selectSpatialFilter(state, source?.id));\n\n  const [onDataLoadForGeojson] = useGeojsonFeatures({\n    source,\n    viewport,\n    spatialFilter,\n    uniqueIdProperty,\n    debounceTimeout: viewporFeaturesDebounceTimeout\n  });\n\n  const [onDataLoadForTile, onViewportLoad, fetch] = useTileFeatures({\n    source,\n    viewport,\n    spatialFilter,\n    uniqueIdProperty,\n    debounceTimeout: viewporFeaturesDebounceTimeout\n  });\n\n  const onDataLoad = useCallback(\n    (data) => {\n      if (data?.tilejson) {\n        return onDataLoadForTile(data);\n      }\n\n      return onDataLoadForGeojson(data);\n    },\n    [onDataLoadForGeojson, onDataLoadForTile]\n  );\n\n  // Due to dynamic tiling integration, we cannot know if we're going to load a geojson or a tileset\n  // until onDataLoad be executed so we return binary, onViewportLoad and fetch that will be ignored\n  // for NOT Tileset layer\n  const props = {\n    binary: true,\n    ...(viewportFeatures && {\n      onViewportLoad,\n      fetch,\n      onDataLoad\n    })\n  };\n\n  const dataFilterExtensionProps = getDataFilterExtensionProps(source?.filters);\n  const maskExtensionProps = getMaskExtensionProps(spatialFilter?.geometry?.coordinates);\n  const extensions = [\n    ...dataFilterExtensionProps.extensions,\n    ...maskExtensionProps.extensions\n  ];\n\n  return {\n    ...props,\n    id: layerConfig?.id,\n    visible: layerConfig?.visible !== undefined ? layerConfig.visible : true,\n    opacity: layerConfig?.opacity ?? 1,\n    uniqueIdProperty,\n    data: source?.data,\n    type: source?.type,\n    connection: source?.connection,\n    credentials: source?.credentials,\n    clientId: 'carto-for-react',\n    ...dataFilterExtensionProps,\n    ...maskExtensionProps,\n    extensions\n  };\n}\n","import { useEffect, useCallback } from 'react';\nimport { debounce } from '@carto/react-core';\nimport { Methods, executeTask } from '@carto/react-workers';\nimport { throwError } from './utils';\nimport useFeaturesCommons from './useFeaturesCommons';\n\nexport default function useGeojsonFeatures({\n  source,\n  viewport,\n  spatialFilter,\n  uniqueIdProperty,\n  debounceTimeout = 250\n}) {\n  const [\n    debounceIdRef,\n    isGeoJsonLoaded,\n    setGeoJsonLoaded,\n    clearDebounce,\n    stopAnyCompute,\n    setSourceFeaturesReady\n  ] = useFeaturesCommons({ source });\n\n  const sourceId = source?.id;\n\n  const computeFeatures = useCallback(\n    ({ viewport, spatialFilter, uniqueIdProperty }) => {\n      executeTask(sourceId, Methods.GEOJSON_FEATURES, {\n        viewport,\n        geometry: spatialFilter,\n        uniqueIdProperty\n      })\n        .then(() => {\n          setSourceFeaturesReady(true);\n        })\n        .catch(throwError);\n    },\n    [setSourceFeaturesReady, sourceId]\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedComputeFeatures = useCallback(\n    debounce(computeFeatures, debounceTimeout),\n    [computeFeatures]\n  );\n\n  useEffect(() => {\n    if (sourceId && isGeoJsonLoaded) {\n      clearDebounce();\n      setSourceFeaturesReady(false);\n      debounceIdRef.current = debouncedComputeFeatures({\n        viewport,\n        spatialFilter,\n        uniqueIdProperty\n      });\n    }\n  }, [\n    viewport,\n    spatialFilter,\n    uniqueIdProperty,\n    sourceId,\n    isGeoJsonLoaded,\n    debouncedComputeFeatures,\n    setSourceFeaturesReady,\n    clearDebounce,\n    debounceIdRef\n  ]);\n\n  const onDataLoad = useCallback(\n    (geojson) => {\n      stopAnyCompute();\n      setSourceFeaturesReady(false);\n      executeTask(sourceId, Methods.LOAD_GEOJSON_FEATURES, { geojson })\n        .then(() => setGeoJsonLoaded(true))\n        .catch(throwError);\n    },\n    [sourceId, setSourceFeaturesReady, stopAnyCompute, setGeoJsonLoaded]\n  );\n\n  return [onDataLoad];\n}\n","import { useEffect, useCallback, useState } from 'react';\nimport { debounce } from '@carto/react-core';\nimport { Methods, executeTask } from '@carto/react-workers';\nimport { Layer } from '@deck.gl/core';\nimport { TILE_FORMATS } from '@deck.gl/carto';\nimport { throwError } from './utils';\nimport useFeaturesCommons from './useFeaturesCommons';\n\nexport default function useTileFeatures({\n  source,\n  viewport,\n  spatialFilter,\n  uniqueIdProperty,\n  debounceTimeout = 250\n}) {\n  const [\n    debounceIdRef,\n    isTilesetLoaded,\n    setTilesetLoaded,\n    clearDebounce,\n    stopAnyCompute,\n    setSourceFeaturesReady\n  ] = useFeaturesCommons({ source });\n\n  const [tileFormat, setTileFormat] = useState('');\n\n  const sourceId = source?.id;\n\n  const computeFeatures = useCallback(\n    ({ viewport, spatialFilter, uniqueIdProperty }) => {\n      if (!tileFormat) {\n        return null;\n      }\n\n      setSourceFeaturesReady(false);\n\n      executeTask(sourceId, Methods.TILE_FEATURES, {\n        viewport,\n        geometry: spatialFilter,\n        uniqueIdProperty,\n        tileFormat\n      })\n        .then(() => {\n          setSourceFeaturesReady(true);\n        })\n        .catch(throwError)\n        .finally(clearDebounce);\n    },\n    [setSourceFeaturesReady, sourceId, tileFormat, clearDebounce]\n  );\n\n  const loadTiles = useCallback(\n    (tiles) => {\n      const cleanedTiles = tiles.reduce((acc, { data, isVisible, bbox }) => {\n        if (isVisible && data) {\n          acc.push({\n            data,\n            bbox\n          });\n        }\n        return acc;\n      }, []);\n\n      executeTask(sourceId, Methods.LOAD_TILES, { tiles: cleanedTiles })\n        .then(() => setTilesetLoaded(true))\n        .catch(throwError);\n    },\n    [sourceId, setTilesetLoaded]\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedComputeFeatures = useCallback(\n    debounce(computeFeatures, debounceTimeout),\n    [computeFeatures]\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedLoadTiles = useCallback(debounce(loadTiles, debounceTimeout), [\n    loadTiles\n  ]);\n\n  useEffect(() => {\n    if (sourceId && isTilesetLoaded) {\n      clearDebounce();\n      setSourceFeaturesReady(false);\n      debounceIdRef.current = debouncedComputeFeatures({\n        viewport,\n        spatialFilter,\n        uniqueIdProperty\n      });\n    }\n  }, [\n    viewport,\n    spatialFilter,\n    uniqueIdProperty,\n    debouncedComputeFeatures,\n    sourceId,\n    isTilesetLoaded,\n    setSourceFeaturesReady,\n    clearDebounce,\n    debounceIdRef\n  ]);\n\n  const onViewportLoad = useCallback(\n    (tiles) => {\n      stopAnyCompute();\n      setSourceFeaturesReady(false);\n\n      debounceIdRef.current = debouncedLoadTiles(tiles);\n    },\n    [stopAnyCompute, setSourceFeaturesReady, debouncedLoadTiles, debounceIdRef]\n  );\n\n  const fetch = useCallback(\n    (...args) => {\n      stopAnyCompute();\n      return Layer.defaultProps.fetch.value(...args);\n    },\n    [stopAnyCompute]\n  );\n\n  const onDataLoad = useCallback(({ tiles: [tile] }) => {\n    const tilesFormat = new URL(tile).searchParams.get('formatTiles');\n    setTileFormat(tilesFormat || TILE_FORMATS.MVT);\n  }, []);\n\n  return [onDataLoad, onViewportLoad, fetch];\n}\n"]},"metadata":{},"sourceType":"script"}