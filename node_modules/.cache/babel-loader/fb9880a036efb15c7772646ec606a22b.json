{"ast":null,"code":"import { VERSION } from './lib/utils/version';\nimport { encodeGLTFSync } from './lib/encoders/encode-gltf';\nexport var GLTFWriter = {\n  name: 'glTF',\n  id: 'gltf',\n  module: 'gltf',\n  version: VERSION,\n  extensions: ['glb'],\n  mimeTypes: ['model/gltf-binary'],\n  binary: true,\n  encodeSync: encodeSync,\n  options: {\n    gltf: {}\n  }\n};\n\nfunction encodeSync(gltf) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$byteOffset = options.byteOffset,\n      byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n  var byteLength = encodeGLTFSync(gltf, null, byteOffset, options);\n  var arrayBuffer = new ArrayBuffer(byteLength);\n  var dataView = new DataView(arrayBuffer);\n  encodeGLTFSync(gltf, dataView, byteOffset, options);\n  return arrayBuffer;\n}\n\nexport var _TypecheckGLBLoader = GLTFWriter;","map":{"version":3,"mappings":"AACA,SAAQA,OAAR,QAAsB,qBAAtB;AACA,SAAQC,cAAR,QAA6B,4BAA7B;AAUA,OAAO,IAAMC,UAAU,GAAG;EACxBC,IAAI,EAAE,MADkB;EAExBC,EAAE,EAAE,MAFoB;EAGxBC,MAAM,EAAE,MAHgB;EAIxBC,OAAO,EAAEN,OAJe;EAMxBO,UAAU,EAAE,CAAC,KAAD,CANY;EAOxBC,SAAS,EAAE,CAAC,mBAAD,CAPa;EAQxBC,MAAM,EAAE,IARgB;EAUxBC,UAVwB,EAUxBA,UAVwB;EAYxBC,OAAO,EAAE;IACPC,IAAI,EAAE;EADC;AAZe,CAAnB;;AAiBP,SAASF,UAAT,CAAoBE,IAApB,EAA2D;EAAA,IAAjCD,OAAiC,uEAAJ,EAAI;EACzD,0BAAyBA,OAAzB,CAAOE,UAAP;EAAA,IAAOA,UAAP,oCAAoB,CAApB;EAGA,IAAMC,UAAU,GAAGb,cAAc,CAACW,IAAD,EAAO,IAAP,EAAaC,UAAb,EAAyBF,OAAzB,CAAjC;EACA,IAAMI,WAAW,GAAG,IAAIC,WAAJ,CAAgBF,UAAhB,CAApB;EACA,IAAMG,QAAQ,GAAG,IAAIC,QAAJ,CAAaH,WAAb,CAAjB;EACAd,cAAc,CAACW,IAAD,EAAOK,QAAP,EAAiBJ,UAAjB,EAA6BF,OAA7B,CAAdV;EAEA,OAAOc,WAAP;AACD;;AAGD,OAAO,IAAMI,mBAA2B,GAAGjB,UAApC","names":["VERSION","encodeGLTFSync","GLTFWriter","name","id","module","version","extensions","mimeTypes","binary","encodeSync","options","gltf","byteOffset","byteLength","arrayBuffer","ArrayBuffer","dataView","DataView","_TypecheckGLBLoader"],"sources":["../../src/gltf-writer.ts"],"sourcesContent":["import type {Writer} from '@loaders.gl/loader-utils';\nimport {VERSION} from './lib/utils/version';\nimport {encodeGLTFSync} from './lib/encoders/encode-gltf';\n\nexport type GLTFWriterOptions = {\n  gltf?: {};\n  byteOffset?: number;\n};\n\n/**\n * GLTF exporter\n */\nexport const GLTFWriter = {\n  name: 'glTF',\n  id: 'gltf',\n  module: 'gltf',\n  version: VERSION,\n\n  extensions: ['glb'], // We only support encoding to binary GLB, not to JSON GLTF\n  mimeTypes: ['model/gltf-binary'], // 'model/gltf+json',\n  binary: true,\n\n  encodeSync,\n\n  options: {\n    gltf: {}\n  }\n};\n\nfunction encodeSync(gltf, options: GLTFWriterOptions = {}) {\n  const {byteOffset = 0} = options;\n\n  // Calculate length, then create arraybuffer and encode\n  const byteLength = encodeGLTFSync(gltf, null, byteOffset, options);\n  const arrayBuffer = new ArrayBuffer(byteLength);\n  const dataView = new DataView(arrayBuffer);\n  encodeGLTFSync(gltf, dataView, byteOffset, options);\n\n  return arrayBuffer;\n}\n\n// TYPE TESTS - TODO find a better way than exporting junk\nexport const _TypecheckGLBLoader: Writer = GLTFWriter;\n"]},"metadata":{},"sourceType":"module"}