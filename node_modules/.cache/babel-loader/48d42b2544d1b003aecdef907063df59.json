{"ast":null,"code":"function formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}","map":{"version":3,"mappings":"AAEA,SAASA,gBAAT,CAA0BC,CAA1B,EAA6BC,IAA7B,EAAmC;EACjC,oBAAiCA,IAAjC,CAAOC,OAAP;EAAA,IAAOA,OAAP,8BAAiB,EAAjB;EAAA,iBAAiCD,IAAjC,CAAqBE,IAArB;EAAA,IAAqBA,IAArB,2BAA4B,CAA5B;EACA,IAAIC,MAAM,GAAG,GAAb;;EACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,CAAC,CAACM,MAAND,IAAgBA,CAAC,GAAGH,OAApC,EAA6C,EAAEG,CAA/C,EAAkD;IAChD,IAAIA,CAAC,GAAG,CAAR,EAAW;MACTD,MAAM,eAAQC,CAAC,GAAGF,IAAJE,KAAa,CAAbA,GAAiB,GAAjBA,GAAuB,EAA/B,CAAND;IACD;;IACDA,MAAM,IAAIG,WAAW,CAACP,CAAC,CAACK,CAAD,CAAF,EAAOJ,IAAP,CAArBG;EACD;;EACD,IAAMI,UAAU,GAAGR,CAAC,CAACM,MAAFN,GAAWE,OAAXF,GAAqB,KAArBA,GAA6B,GAAhD;EACA,iBAAUI,MAAV,SAAmBI,UAAnB;AACD;;AAED,OAAO,SAASD,WAAT,CAAqBP,CAArB,EAAmC;EAAA,IAAXC,IAAW,uEAAJ,EAAI;EACxC,IAAMQ,OAAO,GAAG,KAAhB;EACA,sBAA4BR,IAA5B,CAAOS,SAAP;EAAA,IAAOA,SAAP,gCAAmB,KAAnB;;EACA,IAAIC,KAAK,CAACC,OAAND,CAAcX,CAAdW,KAAoBE,WAAW,CAACC,MAAZD,CAAmBb,CAAnBa,CAAxB,EAA+C;IAC7C,OAAOd,gBAAgB,CAACC,CAAD,EAAIC,IAAJ,CAAvB;EACD;;EACD,IAAI,CAACc,MAAM,CAACC,QAAPD,CAAgBf,CAAhBe,CAAL,EAAyB;IACvB,OAAOE,MAAM,CAACjB,CAAD,CAAb;EACD;;EACD,IAAIkB,IAAI,CAACC,GAALD,CAASlB,CAATkB,IAAcT,OAAlB,EAA2B;IACzB,OAAOC,SAAS,GAAG,GAAH,GAAS,IAAzB;EACD;;EACD,IAAIA,SAAJ,EAAe;IACb,OAAOV,CAAC,CAACoB,OAAFpB,CAAU,CAAVA,CAAP;EACD;;EACD,IAAIkB,IAAI,CAACC,GAALD,CAASlB,CAATkB,IAAc,GAAdA,IAAqBA,IAAI,CAACC,GAALD,CAASlB,CAATkB,IAAc,KAAvC,EAA8C;IAC5C,OAAOlB,CAAC,CAACoB,OAAFpB,CAAU,CAAVA,CAAP;EACD;;EACD,IAAMI,MAAM,GAAGJ,CAAC,CAACqB,WAAFrB,CAAc,CAAdA,CAAf;EACA,IAAMsB,OAAO,GAAGlB,MAAM,CAACmB,OAAPnB,CAAe,IAAfA,CAAhB;EACA,OAAOkB,OAAO,KAAKlB,MAAM,CAACE,MAAPF,GAAgB,CAA5BkB,GAAgClB,MAAM,CAACoB,KAAPpB,CAAa,CAAbA,EAAgB,CAAC,CAAjBA,CAAhCkB,GAAsDlB,MAA7D;AACD","names":["formatArrayValue","v","opts","maxElts","size","string","i","length","formatValue","terminator","EPSILON","isInteger","Array","isArray","ArrayBuffer","isView","Number","isFinite","String","Math","abs","toFixed","toPrecision","decimal","indexOf","slice"],"sources":["../../../src/utils/format-value.js"],"sourcesContent":["// TODO / DEPRECATED - delete when confident that probe.gl logging implements all opts\n/* eslint-disable no-console */\nfunction formatArrayValue(v, opts) {\n  const {maxElts = 16, size = 1} = opts;\n  let string = '[';\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${i % size === 0 ? ' ' : ''}`;\n    }\n    string += formatValue(v[i], opts);\n  }\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {isInteger = false} = opts;\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n"]},"metadata":{},"sourceType":"module"}