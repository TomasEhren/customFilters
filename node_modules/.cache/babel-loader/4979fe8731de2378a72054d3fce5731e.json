{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _defineProperty from\"/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";var _formatterFunctions;import{currencyFormatter,numberFormatter}from'utils/formatter';var FORMATTER_TYPES=Object.freeze({CURRENCY:'currency',NUMBER:'number'});var formatterFunctions=(_formatterFunctions={},_defineProperty(_formatterFunctions,FORMATTER_TYPES.CURRENCY,function(value){var formatted=currencyFormatter(value);return\"\".concat(formatted.prefix).concat(formatted.value);}),_defineProperty(_formatterFunctions,FORMATTER_TYPES.NUMBER,function(value){return numberFormatter(value);}),_formatterFunctions);var DEFAULT_FORMATTER={type:'',columns:[]};export default function htmlForFeature(_ref){var title=_ref.title,feature=_ref.feature,_ref$formatter=_ref.formatter,formatter=_ref$formatter===void 0?DEFAULT_FORMATTER:_ref$formatter,_ref$includeColumns=_ref.includeColumns,includeColumns=_ref$includeColumns===void 0?'*':_ref$includeColumns,_ref$showColumnName=_ref.showColumnName,showColumnName=_ref$showColumnName===void 0?true:_ref$showColumnName;if(!feature){throw new Error(\"htmlForFeature needs \\\"info.object\\\" information\");}var propertyNames=Object.keys(feature.properties);if(formatter!==null&&formatter!==void 0&&formatter.type&&formatter!==null&&formatter!==void 0&&formatter.columns&&!isFormatterValid(propertyNames,formatter)){return;}if(!includedColumnsAreValid(propertyNames,includeColumns)){return;}var html='';if(title){html=\"<h3 style=\\\"margin: 0\\\"><strong>\".concat(title,\"</strong></h3>\");}for(var _i=0,_propertyNames=propertyNames;_i<_propertyNames.length;_i++){var name=_propertyNames[_i];if(name!=='layerName'&&(includeColumns.includes(name)||includeColumns==='*')){if(formatter!==null&&formatter!==void 0&&formatter.columns.includes(name)){var formatterFunction=formatterFunctions[formatter.type];html=generateHtml(feature,name,showColumnName,html,formatterFunction);}else{html=generateHtml(feature,name,showColumnName,html);}}}return html;}function generateHtml(feature,propertyName,showColumnName,html){var formatterFunction=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(v){return v;};return html.concat(\"\".concat(showColumnName?\"<strong>\".concat(propertyName,\"</strong>: \"):'').concat(formatterFunction(feature.properties[propertyName]),\"<br/>\"));}function isFormatterValid(properties,formatter){var supportedTypes=Object.values(FORMATTER_TYPES);if(!supportedTypes.includes(formatter.type)){throw new Error(\"\\\"\".concat(formatter.type,\"\\\" is not supported as formatter, use one of \\\"\").concat(supportedTypes,\"\\\"\"));}if(!formatter.columns||formatter.columns.length===0)return true;if(!isArrayOfStrings(formatter.columns)){throw new Error(\"\\\"formatter.columns\\\" property needs to be an array of strings\");}var _iterator=_createForOfIteratorHelper(formatter.columns),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var column=_step.value;if(!properties.includes(column)){var available=properties.join(', ');throw new Error(\"\\\"formatted.columns\\\" includes '\".concat(column,\"' but it was not found!. Available cols are [\").concat(available,\"]\"));}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return true;}function includedColumnsAreValid(properties,includeColumns){if(includeColumns==='*'){return true;}if(!isArrayOfStrings(includeColumns)){throw new Error(\"\\\"includeColumns\\\" property needs to be an array of existing feature columns or \\\"*\\\"\");}if(isArrayOfStrings(includeColumns)){var _iterator2=_createForOfIteratorHelper(includeColumns),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var column=_step2.value;if(!properties.includes(column)){throw new Error('colums set in \"includeColumns\" should exist in picked feature');}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return true;}function isArrayOfStrings(value){return Array.isArray(value)&&value.length&&value.every(String);}","map":{"version":3,"names":["currencyFormatter","numberFormatter","FORMATTER_TYPES","Object","freeze","CURRENCY","NUMBER","formatterFunctions","value","formatted","prefix","DEFAULT_FORMATTER","type","columns","htmlForFeature","title","feature","formatter","includeColumns","showColumnName","Error","propertyNames","keys","properties","isFormatterValid","includedColumnsAreValid","html","name","includes","formatterFunction","generateHtml","propertyName","v","concat","supportedTypes","values","length","isArrayOfStrings","column","available","join","Array","isArray","every","String"],"sources":["/Users/tomasehrenfeld/projs/se-team/tomas/react-apps/custom_filter/src/utils/htmlForFeature.js"],"sourcesContent":["import { currencyFormatter, numberFormatter } from 'utils/formatter';\n\nconst FORMATTER_TYPES = Object.freeze({\n  CURRENCY: 'currency',\n  NUMBER: 'number',\n});\n\nconst formatterFunctions = {\n  [FORMATTER_TYPES.CURRENCY](value) {\n    const formatted = currencyFormatter(value);\n    return `${formatted.prefix}${formatted.value}`;\n  },\n  [FORMATTER_TYPES.NUMBER](value) {\n    return numberFormatter(value);\n  },\n};\n\nconst DEFAULT_FORMATTER = {\n  type: '',\n  columns: [],\n};\n\nexport default function htmlForFeature({\n  title,\n  feature,\n  formatter = DEFAULT_FORMATTER,\n  includeColumns = '*',\n  showColumnName = true,\n}) {\n  if (!feature) {\n    throw new Error(`htmlForFeature needs \"info.object\" information`);\n  }\n\n  const propertyNames = Object.keys(feature.properties);\n\n  if (\n    formatter?.type &&\n    formatter?.columns &&\n    !isFormatterValid(propertyNames, formatter)\n  ) {\n    return;\n  }\n\n  if (!includedColumnsAreValid(propertyNames, includeColumns)) {\n    return;\n  }\n\n  let html = '';\n\n  if (title) {\n    html = `<h3 style=\"margin: 0\"><strong>${title}</strong></h3>`;\n  }\n\n  for (const name of propertyNames) {\n    if (\n      name !== 'layerName' &&\n      (includeColumns.includes(name) || includeColumns === '*')\n    ) {\n      if (formatter?.columns.includes(name)) {\n        const formatterFunction = formatterFunctions[formatter.type];\n        html = generateHtml(feature, name, showColumnName, html, formatterFunction);\n      } else {\n        html = generateHtml(feature, name, showColumnName, html);\n      }\n    }\n  }\n\n  return html;\n}\n\nfunction generateHtml(\n  feature,\n  propertyName,\n  showColumnName,\n  html,\n  formatterFunction = (v) => v\n) {\n  return html.concat(\n    `${showColumnName ? `<strong>${propertyName}</strong>: ` : ''}${formatterFunction(\n      feature.properties[propertyName]\n    )}<br/>`\n  );\n}\n\nfunction isFormatterValid(properties, formatter) {\n  const supportedTypes = Object.values(FORMATTER_TYPES);\n\n  if (!supportedTypes.includes(formatter.type)) {\n    throw new Error(\n      `\"${formatter.type}\" is not supported as formatter, use one of \"${supportedTypes}\"`\n    );\n  }\n\n  if (!formatter.columns || formatter.columns.length === 0) return true;\n\n  if (!isArrayOfStrings(formatter.columns)) {\n    throw new Error(`\"formatter.columns\" property needs to be an array of strings`);\n  }\n\n  for (const column of formatter.columns) {\n    if (!properties.includes(column)) {\n      const available = properties.join(', ');\n      throw new Error(\n        `\"formatted.columns\" includes '${column}' but it was not found!. Available cols are [${available}]`\n      );\n    }\n  }\n\n  return true;\n}\n\nfunction includedColumnsAreValid(properties, includeColumns) {\n  if (includeColumns === '*') {\n    return true;\n  }\n\n  if (!isArrayOfStrings(includeColumns)) {\n    throw new Error(\n      `\"includeColumns\" property needs to be an array of existing feature columns or \"*\"`\n    );\n  }\n\n  if (isArrayOfStrings(includeColumns)) {\n    for (const column of includeColumns) {\n      if (!properties.includes(column)) {\n        throw new Error('colums set in \"includeColumns\" should exist in picked feature');\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction isArrayOfStrings(value) {\n  return Array.isArray(value) && value.length && value.every(String);\n}\n"],"mappings":"kWAAA,OAASA,iBAAT,CAA4BC,eAA5B,KAAmD,iBAAnD,CAEA,GAAMC,CAAAA,eAAe,CAAGC,MAAM,CAACC,MAAP,CAAc,CACpCC,QAAQ,CAAE,UAD0B,CAEpCC,MAAM,CAAE,QAF4B,CAAd,CAAxB,CAKA,GAAMC,CAAAA,kBAAkB,6DACrBL,eAAe,CAACG,QADK,UACKG,KADL,CACY,CAChC,GAAMC,CAAAA,SAAS,CAAGT,iBAAiB,CAACQ,KAAD,CAAnC,CACA,gBAAUC,SAAS,CAACC,MAApB,SAA6BD,SAAS,CAACD,KAAvC,EACD,CAJqB,sCAKrBN,eAAe,CAACI,MALK,UAKGE,KALH,CAKU,CAC9B,MAAOP,CAAAA,eAAe,CAACO,KAAD,CAAtB,CACD,CAPqB,sBAAxB,CAUA,GAAMG,CAAAA,iBAAiB,CAAG,CACxBC,IAAI,CAAE,EADkB,CAExBC,OAAO,CAAE,EAFe,CAA1B,CAKA,cAAe,SAASC,CAAAA,cAAT,MAMZ,IALDC,CAAAA,KAKC,MALDA,KAKC,CAJDC,OAIC,MAJDA,OAIC,qBAHDC,SAGC,CAHDA,SAGC,yBAHWN,iBAGX,yCAFDO,cAEC,CAFDA,cAEC,8BAFgB,GAEhB,8CADDC,cACC,CADDA,cACC,8BADgB,IAChB,qBACD,GAAI,CAACH,OAAL,CAAc,CACZ,KAAM,IAAII,CAAAA,KAAJ,oDAAN,CACD,CAED,GAAMC,CAAAA,aAAa,CAAGlB,MAAM,CAACmB,IAAP,CAAYN,OAAO,CAACO,UAApB,CAAtB,CAEA,GACEN,SAAS,OAAT,EAAAA,SAAS,SAAT,EAAAA,SAAS,CAAEL,IAAX,EACAK,SADA,SACAA,SADA,WACAA,SAAS,CAAEJ,OADX,EAEA,CAACW,gBAAgB,CAACH,aAAD,CAAgBJ,SAAhB,CAHnB,CAIE,CACA,OACD,CAED,GAAI,CAACQ,uBAAuB,CAACJ,aAAD,CAAgBH,cAAhB,CAA5B,CAA6D,CAC3D,OACD,CAED,GAAIQ,CAAAA,IAAI,CAAG,EAAX,CAEA,GAAIX,KAAJ,CAAW,CACTW,IAAI,2CAAoCX,KAApC,kBAAJ,CACD,CAED,4BAAmBM,aAAnB,+BAAkC,CAA7B,GAAMM,CAAAA,IAAI,mBAAV,CACH,GACEA,IAAI,GAAK,WAAT,GACCT,cAAc,CAACU,QAAf,CAAwBD,IAAxB,GAAiCT,cAAc,GAAK,GADrD,CADF,CAGE,CACA,GAAID,SAAJ,SAAIA,SAAJ,WAAIA,SAAS,CAAEJ,OAAX,CAAmBe,QAAnB,CAA4BD,IAA5B,CAAJ,CAAuC,CACrC,GAAME,CAAAA,iBAAiB,CAAGtB,kBAAkB,CAACU,SAAS,CAACL,IAAX,CAA5C,CACAc,IAAI,CAAGI,YAAY,CAACd,OAAD,CAAUW,IAAV,CAAgBR,cAAhB,CAAgCO,IAAhC,CAAsCG,iBAAtC,CAAnB,CACD,CAHD,IAGO,CACLH,IAAI,CAAGI,YAAY,CAACd,OAAD,CAAUW,IAAV,CAAgBR,cAAhB,CAAgCO,IAAhC,CAAnB,CACD,CACF,CACF,CAED,MAAOA,CAAAA,IAAP,CACD,CAED,QAASI,CAAAA,YAAT,CACEd,OADF,CAEEe,YAFF,CAGEZ,cAHF,CAIEO,IAJF,CAME,IADAG,CAAAA,iBACA,2DADoB,SAACG,CAAD,QAAOA,CAAAA,CAAP,EACpB,CACA,MAAON,CAAAA,IAAI,CAACO,MAAL,WACFd,cAAc,mBAAcY,YAAd,gBAA0C,EADtD,SAC2DF,iBAAiB,CAC/Eb,OAAO,CAACO,UAAR,CAAmBQ,YAAnB,CAD+E,CAD5E,UAAP,CAKD,CAED,QAASP,CAAAA,gBAAT,CAA0BD,UAA1B,CAAsCN,SAAtC,CAAiD,CAC/C,GAAMiB,CAAAA,cAAc,CAAG/B,MAAM,CAACgC,MAAP,CAAcjC,eAAd,CAAvB,CAEA,GAAI,CAACgC,cAAc,CAACN,QAAf,CAAwBX,SAAS,CAACL,IAAlC,CAAL,CAA8C,CAC5C,KAAM,IAAIQ,CAAAA,KAAJ,aACAH,SAAS,CAACL,IADV,2DAC8DsB,cAD9D,OAAN,CAGD,CAED,GAAI,CAACjB,SAAS,CAACJ,OAAX,EAAsBI,SAAS,CAACJ,OAAV,CAAkBuB,MAAlB,GAA6B,CAAvD,CAA0D,MAAO,KAAP,CAE1D,GAAI,CAACC,gBAAgB,CAACpB,SAAS,CAACJ,OAAX,CAArB,CAA0C,CACxC,KAAM,IAAIO,CAAAA,KAAJ,kEAAN,CACD,CAb8C,yCAe1BH,SAAS,CAACJ,OAfgB,YAe/C,+CAAwC,IAA7ByB,CAAAA,MAA6B,aACtC,GAAI,CAACf,UAAU,CAACK,QAAX,CAAoBU,MAApB,CAAL,CAAkC,CAChC,GAAMC,CAAAA,SAAS,CAAGhB,UAAU,CAACiB,IAAX,CAAgB,IAAhB,CAAlB,CACA,KAAM,IAAIpB,CAAAA,KAAJ,2CAC6BkB,MAD7B,yDACmFC,SADnF,MAAN,CAGD,CACF,CAtB8C,qDAwB/C,MAAO,KAAP,CACD,CAED,QAASd,CAAAA,uBAAT,CAAiCF,UAAjC,CAA6CL,cAA7C,CAA6D,CAC3D,GAAIA,cAAc,GAAK,GAAvB,CAA4B,CAC1B,MAAO,KAAP,CACD,CAED,GAAI,CAACmB,gBAAgB,CAACnB,cAAD,CAArB,CAAuC,CACrC,KAAM,IAAIE,CAAAA,KAAJ,yFAAN,CAGD,CAED,GAAIiB,gBAAgB,CAACnB,cAAD,CAApB,CAAsC,2CACfA,cADe,aACpC,kDAAqC,IAA1BoB,CAAAA,MAA0B,cACnC,GAAI,CAACf,UAAU,CAACK,QAAX,CAAoBU,MAApB,CAAL,CAAkC,CAChC,KAAM,IAAIlB,CAAAA,KAAJ,CAAU,+DAAV,CAAN,CACD,CACF,CALmC,uDAMrC,CAED,MAAO,KAAP,CACD,CAED,QAASiB,CAAAA,gBAAT,CAA0B7B,KAA1B,CAAiC,CAC/B,MAAOiC,CAAAA,KAAK,CAACC,OAAN,CAAclC,KAAd,GAAwBA,KAAK,CAAC4B,MAA9B,EAAwC5B,KAAK,CAACmC,KAAN,CAAYC,MAAZ,CAA/C,CACD"},"metadata":{},"sourceType":"module"}