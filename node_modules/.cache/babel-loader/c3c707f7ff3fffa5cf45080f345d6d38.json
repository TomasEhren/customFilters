{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t(require(\"react\"), require(\"@deck.gl/google-maps\"), require(\"@carto/react-core\")) : \"function\" == typeof define && define.amd ? define([\"react\", \"@deck.gl/google-maps\", \"@carto/react-core\"], t) : \"object\" == typeof exports ? exports.cartoReactBasemaps = t(require(\"react\"), require(\"@deck.gl/google-maps\"), require(\"@carto/react-core\")) : e.cartoReactBasemaps = t(e.react, e[\"@deck.gl/google-maps\"], e[\"@carto/react-core\"]);\n}(self, function (e, t, o) {\n  return function () {\n    \"use strict\";\n\n    var r = {\n      485: function _(e) {\n        e.exports = o;\n      },\n      158: function _(e) {\n        e.exports = t;\n      },\n      156: function _(t) {\n        t.exports = e;\n      }\n    },\n        n = {};\n\n    function a(e) {\n      var t = n[e];\n      if (void 0 !== t) return t.exports;\n      var o = n[e] = {\n        exports: {}\n      };\n      return r[e](o, o.exports, a), o.exports;\n    }\n\n    a.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return a.d(t, {\n        a: t\n      }), t;\n    }, a.d = function (e, t) {\n      for (var o in t) {\n        a.o(t, o) && !a.o(e, o) && Object.defineProperty(e, o, {\n          enumerable: !0,\n          get: t[o]\n        });\n      }\n    }, a.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, a.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    };\n    var i = {};\n    return function () {\n      function e(e, t, o) {\n        return t in e ? Object.defineProperty(e, t, {\n          value: o,\n          enumerable: !0,\n          configurable: !0,\n          writable: !0\n        }) : e[t] = o, e;\n      }\n\n      var t;\n      a.r(i), a.d(i, {\n        BASEMAPS: function BASEMAPS() {\n          return d;\n        },\n        DARK_MATTER: function DARK_MATTER() {\n          return n;\n        },\n        GOOGLE_CUSTOM: function GOOGLE_CUSTOM() {\n          return l;\n        },\n        GOOGLE_HYBRID: function GOOGLE_HYBRID() {\n          return s;\n        },\n        GOOGLE_ROADMAP: function GOOGLE_ROADMAP() {\n          return c;\n        },\n        GOOGLE_SATELLITE: function GOOGLE_SATELLITE() {\n          return p;\n        },\n        GoogleMap: function GoogleMap() {\n          return O;\n        },\n        POSITRON: function POSITRON() {\n          return o;\n        },\n        VOYAGER: function VOYAGER() {\n          return r;\n        }\n      });\n      var o = \"positron\",\n          r = \"voyager\",\n          n = \"dark-matter\",\n          c = \"roadmap\",\n          p = \"satellite\",\n          s = \"hybrid\",\n          l = \"custom\",\n          d = (e(t = {}, o, {\n        type: \"mapbox\",\n        options: {\n          mapStyle: \"https://basemaps.cartocdn.com/gl/\".concat(o, \"-gl-style/style.json\")\n        }\n      }), e(t, r, {\n        type: \"mapbox\",\n        options: {\n          mapStyle: \"https://basemaps.cartocdn.com/gl/\".concat(r, \"-gl-style/style.json\")\n        }\n      }), e(t, n, {\n        type: \"mapbox\",\n        options: {\n          mapStyle: \"https://basemaps.cartocdn.com/gl/\".concat(n, \"-gl-style/style.json\")\n        }\n      }), e(t, c, {\n        type: \"gmaps\",\n        options: {\n          mapTypeId: \"roadmap\"\n        }\n      }), e(t, p, {\n        type: \"gmaps\",\n        options: {\n          mapTypeId: p\n        }\n      }), e(t, s, {\n        type: \"gmaps\",\n        options: {\n          mapTypeId: \"hybrid\"\n        }\n      }), e(t, l, {\n        type: \"gmaps\",\n        options: {}\n      }), t);\n      var g = a(156),\n          m = a.n(g),\n          u = a(158),\n          y = a(485),\n          f = [\"center\", \"heading\", \"tilt\", \"zoom\"];\n\n      function w(e, t) {\n        var o = Object.keys(e);\n\n        if (Object.getOwnPropertySymbols) {\n          var r = Object.getOwnPropertySymbols(e);\n          t && (r = r.filter(function (t) {\n            return Object.getOwnPropertyDescriptor(e, t).enumerable;\n          })), o.push.apply(o, r);\n        }\n\n        return o;\n      }\n\n      function b(t) {\n        for (var o = 1; o < arguments.length; o++) {\n          var r = null != arguments[o] ? arguments[o] : {};\n          o % 2 ? w(Object(r), !0).forEach(function (o) {\n            e(t, o, r[o]);\n          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : w(Object(r)).forEach(function (e) {\n            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));\n          });\n        }\n\n        return t;\n      }\n\n      function O(e) {\n        var t = e.basemap,\n            o = e.viewState,\n            r = e.layers,\n            n = e.getTooltip,\n            a = e.onResize,\n            i = e.onViewStateChange,\n            c = e.apiKey,\n            p = e.mapId,\n            s = (0, g.useRef)(),\n            l = function l(e) {\n          window.google.maps.event.trigger(e, \"resize\");\n        },\n            d = e.style || {},\n            w = b({\n          position: \"absolute\",\n          zIndex: 0,\n          left: 0,\n          top: 0,\n          width: e.width || \"100%\",\n          height: e.height || \"100%\"\n        }, d),\n            O = function O() {\n          var r = b({\n            center: {\n              lat: o.latitude,\n              lng: o.longitude\n            },\n            mapTypeControl: !1,\n            heading: o.bearing,\n            tilt: o.pitch,\n            zoom: o.zoom + 1,\n            fullscreenControl: !1,\n            zoomControl: !1,\n            streetViewControl: !1,\n            mapId: p\n          }, t.options),\n              c = 0 === s.current.children.length;\n\n          if (!window.cartoGmap || c) {\n            var d = new window.google.maps.Map(s.current, r),\n                g = new u.GoogleMapsOverlay({\n              getTooltip: n\n            }),\n                m = (0, y.debounce)(function () {\n              var t = d.getCenter(),\n                  o = {\n                longitude: t.lng(),\n                latitude: t.lat(),\n                zoom: Math.max(d.getZoom() - 1, 1),\n                pitch: d.getTilt(),\n                bearing: d.getHeading()\n              };\n              JSON.stringify(window.cartoViewState) !== JSON.stringify(o) && (window.cartoViewState = o, i && e.onViewStateChange({\n                viewState: o\n              }));\n            }, 200);\n            d.addListener(\"bounds_changed\", m), d.addListener(\"resize\", function () {\n              a && a({\n                height: d.getDiv().offsetHeight,\n                width: d.getDiv().offsetWidth\n              });\n            }), window.onresize = function () {\n              l(d);\n            }, l(d), window.cartoGmap = d, window.cartoDeck = g, window.cartoDeck.setMap(window.cartoGmap);\n          } else {\n            var w = r.center,\n                O = r.heading,\n                v = r.tilt,\n                h = r.zoom,\n                S = function (e, t) {\n              if (null == e) return {};\n\n              var o,\n                  r,\n                  n = function (e, t) {\n                if (null == e) return {};\n                var o,\n                    r,\n                    n = {},\n                    a = Object.keys(e);\n\n                for (r = 0; r < a.length; r++) {\n                  o = a[r], t.indexOf(o) >= 0 || (n[o] = e[o]);\n                }\n\n                return n;\n              }(e, t);\n\n              if (Object.getOwnPropertySymbols) {\n                var a = Object.getOwnPropertySymbols(e);\n\n                for (r = 0; r < a.length; r++) {\n                  o = a[r], t.indexOf(o) >= 0 || Object.prototype.propertyIsEnumerable.call(e, o) && (n[o] = e[o]);\n                }\n              }\n\n              return n;\n            }(r, f),\n                j = {\n              longitude: w.lng,\n              latitude: w.lat,\n              zoom: h - 1,\n              pitch: v,\n              bearing: O\n            };\n\n            JSON.stringify(window.cartoViewState) !== JSON.stringify(j) && (window.cartoGmap.setCenter(w), window.cartoGmap.setHeading(O), window.cartoGmap.setTilt(v), window.cartoGmap.setZoom(h)), window.cartoGmap.setOptions(S), window.cartoDeck.setProps({\n              getTooltip: n\n            });\n          }\n        };\n\n        return window.cartoDeck && window.cartoDeck.setProps({\n          layers: r\n        }), (0, g.useEffect)(function () {\n          if (document.querySelector(\"#gmaps\")) document.querySelector(\"#gmaps\") && window.google && O();else {\n            var e = document.createElement(\"script\");\n            e.id = \"gmaps\", e.async = !0, e.type = \"text/javascript\", e.src = \"https://maps.google.com/maps/api/js?v=beta&key=\" + c;\n            var t = document.getElementsByTagName(\"script\")[0];\n            t.parentNode.insertBefore(e, t), e.addEventListener(\"load\", O);\n          }\n        }), m().createElement(\"div\", {\n          ref: s,\n          style: w\n        });\n      }\n    }(), i;\n  }();\n});","map":{"version":3,"mappings":"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","names":["root","factory","exports","module","require","define","amd","cartoReactBasemaps","react","self","__WEBPACK_EXTERNAL_MODULE__156__","__WEBPACK_EXTERNAL_MODULE__158__","__WEBPACK_EXTERNAL_MODULE__485__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","default","e","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_defineProperty","configurable","writable","POSITRON","VOYAGER","DARK_MATTER","GOOGLE_ROADMAP","GOOGLE_SATELLITE","GOOGLE_HYBRID","GOOGLE_CUSTOM","BASEMAPS","type","options","mapStyle","concat","mapTypeId","GoogleMap","props","basemap","viewState","layers","getTooltip","onResize","onViewStateChange","apiKey","mapId","containerRef","useRef","triggerResize","map","window","google","maps","event","trigger","customStyle","style","containerStyle","b","position","zIndex","left","top","width","height","onLoad","center","lat","latitude","lng","longitude","mapTypeControl","heading","bearing","tilt","pitch","zoom","fullscreenControl","zoomControl","streetViewControl","mapNotConnected","current","children","length","cartoGmap","Map","deckOverlay","GoogleMapsOverlay","handleViewportChangeDebounced","debounce","getCenter","newViewState","Math","max","getZoom","getTilt","getHeading","JSON","stringify","cartoViewState","addListener","getDiv","offsetHeight","offsetWidth","onresize","cartoDeck","setMap","rest","source","excluded","i","target","sourceKeys","keys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","f","setCenter","setHeading","setTilt","setZoom","setOptions","setProps","useEffect","document","querySelector","script","createElement","id","async","src","headScript","getElementsByTagName","parentNode","insertBefore","addEventListener","m","ref"],"sourceRoot":"","sources":["webpack://cartoReactBasemaps/webpack/universalModuleDefinition","webpack://cartoReactBasemaps/external umd \"@carto/react-core\"","webpack://cartoReactBasemaps/external umd \"@deck.gl/google-maps\"","webpack://cartoReactBasemaps/external umd \"react\"","webpack://cartoReactBasemaps/webpack/bootstrap","webpack://cartoReactBasemaps/webpack/runtime/compat get default export","webpack://cartoReactBasemaps/webpack/runtime/define property getters","webpack://cartoReactBasemaps/webpack/runtime/hasOwnProperty shorthand","webpack://cartoReactBasemaps/webpack/runtime/make namespace object","webpack://cartoReactBasemaps/../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://cartoReactBasemaps/./src/basemaps/basemaps.js","webpack://cartoReactBasemaps/./src/basemaps/GoogleMap.js","webpack://cartoReactBasemaps/../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://cartoReactBasemaps/../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"@deck.gl/google-maps\"), require(\"@carto/react-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"@deck.gl/google-maps\", \"@carto/react-core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cartoReactBasemaps\"] = factory(require(\"react\"), require(\"@deck.gl/google-maps\"), require(\"@carto/react-core\"));\n\telse\n\t\troot[\"cartoReactBasemaps\"] = factory(root[\"react\"], root[\"@deck.gl/google-maps\"], root[\"@carto/react-core\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__156__, __WEBPACK_EXTERNAL_MODULE__158__, __WEBPACK_EXTERNAL_MODULE__485__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__485__;","module.exports = __WEBPACK_EXTERNAL_MODULE__158__;","module.exports = __WEBPACK_EXTERNAL_MODULE__156__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/** @constant\n    @type {string}\n    @default\n*/\nexport const POSITRON = 'positron';\n/** @constant\n    @type {string}\n    @default\n*/\nexport const VOYAGER = 'voyager';\n/** @constant\n    @type {string}\n    @default\n*/\n/** @constant\n    @type {string}\n    @default\n*/\nexport const DARK_MATTER = 'dark-matter';\n/** @constant\n    @type {string}\n    @default\n*/\nexport const GOOGLE_ROADMAP = 'roadmap';\n/** @constant\n    @type {string}\n    @default\n*/\nexport const GOOGLE_SATELLITE = 'satellite';\n/** @constant\n    @type {string}\n    @default\n*/\nexport const GOOGLE_HYBRID = 'hybrid';\n/** @constant\n    @type {string}\n    @default\n*/\nexport const GOOGLE_CUSTOM = 'custom';\n\nexport const BASEMAPS = {\n  [POSITRON]: {\n    type: 'mapbox',\n    options: {\n      mapStyle: `https://basemaps.cartocdn.com/gl/${POSITRON}-gl-style/style.json`\n    }\n  },\n  [VOYAGER]: {\n    type: 'mapbox',\n    options: {\n      mapStyle: `https://basemaps.cartocdn.com/gl/${VOYAGER}-gl-style/style.json`\n    }\n  },\n  [DARK_MATTER]: {\n    type: 'mapbox',\n    options: {\n      mapStyle: `https://basemaps.cartocdn.com/gl/${DARK_MATTER}-gl-style/style.json`\n    }\n  },\n  [GOOGLE_ROADMAP]: {\n    type: 'gmaps',\n    options: {\n      mapTypeId: 'roadmap'\n    }\n  },\n  [GOOGLE_SATELLITE]: {\n    type: 'gmaps',\n    options: {\n      mapTypeId: GOOGLE_SATELLITE\n    }\n  },\n  [GOOGLE_HYBRID]: {\n    type: 'gmaps',\n    options: {\n      mapTypeId: 'hybrid'\n    }\n  },\n  [GOOGLE_CUSTOM]: {\n    type: 'gmaps',\n    options: {\n      // mapId prop must be passed to component directly\n    }\n  }\n};\n","import React, { useEffect, useRef } from 'react';\nimport { GoogleMapsOverlay } from '@deck.gl/google-maps';\nimport { debounce } from '@carto/react-core';\n\n/**\n * React component for working with Google Maps API and deck.gl\n *\n * @param { Object } props - Properties\n * @param { Object } props.basemap - basemap\n * @param { Object } props.basemap.options - *MapOptions* as defined by https://developers.google.com/maps/documentation/javascript/reference/map#MapOptions\n * @param { Object } props.viewState - Viewstate, as defined by deck.gl. Just center and zoom level are supported\n * @param { Layer[] } props.layers - deck.gl layers array\n * @param { function } props.getTooltip - (Optional). Tooltip handler\n * @param { function } props.onResize - (Optional) onResize handler\n * @param { function } props.onViewStateChange - (Optional) onViewStateChange handler\n * @param { string } props.apiKey - Google Maps API Key\n * @param { string } props.mapId - Google Maps custom mapId\n * @returns { JSX.Element } - Data returned from the SQL query execution\n */\nexport function GoogleMap(props) {\n  const {\n    basemap,\n    viewState,\n    layers,\n    getTooltip,\n    onResize,\n    onViewStateChange,\n    apiKey,\n    mapId\n  } = props;\n  // based on https://publiuslogic.com/blog/google-maps+react-hooks/\n  const containerRef = useRef();\n  const triggerResize = (map) => {\n    window.google.maps.event.trigger(map, 'resize');\n  };\n\n  const customStyle = props.style || {};\n\n  let containerStyle = {\n    position: 'absolute',\n    zIndex: 0,\n    left: 0,\n    top: 0,\n    width: props.width || '100%',\n    height: props.height || '100%',\n    ...customStyle\n  };\n\n  const onLoad = () => {\n    // gmaps\n    let options = {\n      center: {\n        lat: viewState.latitude,\n        lng: viewState.longitude\n      },\n      mapTypeControl: false,\n      heading: viewState.bearing,\n      tilt: viewState.pitch,\n      zoom: viewState.zoom + 1, // notice the 1 zoom level difference relative to deckgl\n      fullscreenControl: false,\n      zoomControl: false,\n      streetViewControl: false,\n      mapId,\n      ...basemap.options\n    };\n\n    const mapNotConnected = containerRef.current.children.length === 0;\n    if (!window.cartoGmap || mapNotConnected) {\n      const map = new window.google.maps.Map(containerRef.current, options);\n      const deckOverlay = new GoogleMapsOverlay({ getTooltip });\n\n      const handleViewportChange = () => {\n        const center = map.getCenter();\n        // adapted to common Deck viewState format\n        const newViewState = {\n          longitude: center.lng(),\n          latitude: center.lat(),\n          zoom: Math.max(map.getZoom() - 1, 1), // cap min zoom level to 1\n          pitch: map.getTilt(),\n          bearing: map.getHeading()\n        };\n\n        if (JSON.stringify(window.cartoViewState) !== JSON.stringify(newViewState)) {\n          window.cartoViewState = newViewState;\n          onViewStateChange && props.onViewStateChange({ viewState: newViewState });\n        }\n      };\n\n      const handleViewportChangeDebounced = debounce(handleViewportChange, 200);\n      map.addListener('bounds_changed', handleViewportChangeDebounced);\n      map.addListener('resize', () => {\n        onResize &&\n          onResize({\n            height: map.getDiv().offsetHeight,\n            width: map.getDiv().offsetWidth\n          });\n      });\n\n      window.onresize = () => {\n        triggerResize(map);\n      };\n\n      triggerResize(map);\n\n      window.cartoGmap = map;\n      window.cartoDeck = deckOverlay;\n      window.cartoDeck.setMap(window.cartoGmap);\n    } else {\n      const { center, heading, tilt, zoom, ...rest } = options;\n      const newViewState = {\n        longitude: center.lng,\n        latitude: center.lat,\n        zoom: zoom - 1,\n        pitch: tilt,\n        bearing: heading\n      };\n      if (JSON.stringify(window.cartoViewState) !== JSON.stringify(newViewState)) {\n        window.cartoGmap.setCenter(center);\n        window.cartoGmap.setHeading(heading);\n        window.cartoGmap.setTilt(tilt);\n        window.cartoGmap.setZoom(zoom);\n      }\n      window.cartoGmap.setOptions(rest);\n      window.cartoDeck.setProps({ getTooltip });\n    }\n  };\n\n  // Set layers should be outside of the useEffect to avoid problems with layers that changes\n  // dinamically with move events like the FeatureSelectionLayer\n  if (window.cartoDeck) {\n    window.cartoDeck.setProps({ layers });\n  }\n\n  useEffect(() => {\n    if (!document.querySelector('#gmaps')) {\n      const script = document.createElement(`script`);\n      script.id = 'gmaps';\n      script.async = true;\n      script.type = `text/javascript`;\n      script.src = `https://maps.google.com/maps/api/js?v=beta&key=` + apiKey;\n      const headScript = document.getElementsByTagName(`script`)[0];\n      headScript.parentNode.insertBefore(script, headScript);\n      script.addEventListener(`load`, onLoad);\n    } else if (document.querySelector('#gmaps') && window.google) {\n      onLoad();\n    }\n  });\n\n  return <div ref={containerRef} style={containerStyle}></div>;\n}\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"]},"metadata":{},"sourceType":"script"}