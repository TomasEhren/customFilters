{"ast":null,"code":"import { scaleThreshold } from 'd3-scale';\nimport getPalette, { DEFAULT_PALETTE, NULL_COLOR } from './palette';\nimport { assert, getAttrValue } from './utils';\nexport default function colorBins(_ref) {\n  var attr = _ref.attr,\n      domain = _ref.domain,\n      _ref$colors = _ref.colors,\n      colors = _ref$colors === void 0 ? DEFAULT_PALETTE : _ref$colors,\n      _ref$nullColor = _ref.nullColor,\n      nullColor = _ref$nullColor === void 0 ? NULL_COLOR : _ref$nullColor;\n  assert(Array.isArray(domain), 'Expected \"domain\" to be an array of numbers');\n  var palette = typeof colors === 'string' ? getPalette(colors, domain.length + 1) : colors;\n  var color = scaleThreshold().domain(domain).range(palette);\n  return function (d) {\n    var value = getAttrValue(attr, d);\n    return typeof value === 'number' && Number.isFinite(value) ? color(value) : nullColor;\n  };\n}","map":{"version":3,"mappings":"AAAA,SAAQA,cAAR,QAA6B,UAA7B;AACA,OAAOC,UAAP,IAA2BC,eAA3B,EAA4CC,UAA5C,QAA6D,WAA7D;AACA,SAAQC,MAAR,EAAmCC,YAAnC,QAAsD,SAAtD;AAEA,eAAe,SAASC,SAAT,OAUO;EAAA,IATpBC,IASoB,QATpBA,IASoB;EAAA,IARpBC,MAQoB,QARpBA,MAQoB;EAAA,uBAPpBC,MAOoB;EAAA,IAPpBA,MAOoB,4BAPXP,eAOW;EAAA,0BANpBQ,SAMoB;EAAA,IANpBA,SAMoB,+BANRP,UAMQ;EACpBC,MAAM,CAACO,KAAK,CAACC,OAAND,CAAcH,MAAdG,CAAD,EAAwB,6CAAxB,CAANP;EAEA,IAAMS,OAAO,GAAG,OAAOJ,MAAP,KAAkB,QAAlB,GAA6BR,UAAU,CAACQ,MAAD,EAASD,MAAM,CAACM,MAAPN,GAAgB,CAAzB,CAAvC,GAAqEC,MAArF;EAEA,IAAMM,KAAK,GAAGf,cAAc,GAAkBQ,MAAhCR,CAAuCQ,MAAvCR,EAA+CgB,KAA/ChB,CAAqDa,OAArDb,CAAd;EAEA,OAAOiB,WAAC,EAAI;IACV,IAAMC,KAAK,GAAGb,YAAY,CAACE,IAAD,EAAOU,CAAP,CAA1B;IACA,OAAO,OAAOC,KAAP,KAAiB,QAAjB,IAA6BC,MAAM,CAACC,QAAPD,CAAgBD,KAAhBC,CAA7B,GAAsDJ,KAAK,CAACG,KAAD,CAA3D,GAAqER,SAA5E;EAFF;AAID","names":["scaleThreshold","getPalette","DEFAULT_PALETTE","NULL_COLOR","assert","getAttrValue","colorBins","attr","domain","colors","nullColor","Array","isArray","palette","length","color","range","d","value","Number","isFinite"],"sources":["../../../src/style/color-bins-style.ts"],"sourcesContent":["import {scaleThreshold} from 'd3-scale';\nimport getPalette, {Color, DEFAULT_PALETTE, NULL_COLOR} from './palette';\nimport {assert, AttributeSelector, getAttrValue} from './utils';\n\nexport default function colorBins({\n  attr,\n  domain,\n  colors = DEFAULT_PALETTE,\n  nullColor = NULL_COLOR\n}: {\n  attr: AttributeSelector;\n  domain: number[];\n  colors?: string | Color[];\n  nullColor?: Color;\n}): AttributeSelector {\n  assert(Array.isArray(domain), 'Expected \"domain\" to be an array of numbers');\n\n  const palette = typeof colors === 'string' ? getPalette(colors, domain.length + 1) : colors;\n\n  const color = scaleThreshold<number, Color>().domain(domain).range(palette);\n\n  return d => {\n    const value = getAttrValue(attr, d);\n    return typeof value === 'number' && Number.isFinite(value) ? color(value) : nullColor;\n  };\n}\n"]},"metadata":{},"sourceType":"module"}